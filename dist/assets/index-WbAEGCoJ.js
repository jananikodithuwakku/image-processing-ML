var a3=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports);var cH=a3((dH,j_)=>{function o3(t,n){for(var e=0;e<n.length;e++){const r=n[e];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const o=Object.getOwnPropertyDescriptor(r,a);o&&Object.defineProperty(t,a,o.get?o:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();function Dg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _v={exports:{}},rl={};var d2;function i3(){if(d2)return rl;d2=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function e(r,a,o){var u=null;if(o!==void 0&&(u=""+o),a.key!==void 0&&(u=""+a.key),"key"in a){o={};for(var l in a)l!=="key"&&(o[l]=a[l])}else o=a;return a=o.ref,{$$typeof:t,type:r,key:u,ref:a!==void 0?a:null,props:o}}return rl.Fragment=n,rl.jsx=e,rl.jsxs=e,rl}var h2;function s3(){return h2||(h2=1,_v.exports=i3()),_v.exports}var le=s3(),Tv={exports:{}},Ge={};var p2;function u3(){if(p2)return Ge;p2=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),m=Symbol.iterator;function g(M){return M===null||typeof M!="object"?null:(M=m&&M[m]||M["@@iterator"],typeof M=="function"?M:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,S={};function C(M,K,Z){this.props=M,this.context=K,this.refs=S,this.updater=Z||b}C.prototype.isReactComponent={},C.prototype.setState=function(M,K){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,K,"setState")},C.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function _(){}_.prototype=C.prototype;function R(M,K,Z){this.props=M,this.context=K,this.refs=S,this.updater=Z||b}var E=R.prototype=new _;E.constructor=R,x(E,C.prototype),E.isPureReactComponent=!0;var T=Array.isArray;function k(){}var N={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function I(M,K,Z){var oe=Z.ref;return{$$typeof:t,type:M,key:K,ref:oe!==void 0?oe:null,props:Z}}function B(M,K){return I(M.type,K,M.props)}function H(M){return typeof M=="object"&&M!==null&&M.$$typeof===t}function A(M){var K={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(Z){return K[Z]})}var q=/\/+/g;function V(M,K){return typeof M=="object"&&M!==null&&M.key!=null?A(""+M.key):K.toString(36)}function j(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(k,k):(M.status="pending",M.then(function(K){M.status==="pending"&&(M.status="fulfilled",M.value=K)},function(K){M.status==="pending"&&(M.status="rejected",M.reason=K)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function P(M,K,Z,oe,pe){var ge=typeof M;(ge==="undefined"||ge==="boolean")&&(M=null);var xe=!1;if(M===null)xe=!0;else switch(ge){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(M.$$typeof){case t:case n:xe=!0;break;case h:return xe=M._init,P(xe(M._payload),K,Z,oe,pe)}}if(xe)return pe=pe(M),xe=oe===""?"."+V(M,0):oe,T(pe)?(Z="",xe!=null&&(Z=xe.replace(q,"$&/")+"/"),P(pe,K,Z,"",function(be){return be})):pe!=null&&(H(pe)&&(pe=B(pe,Z+(pe.key==null||M&&M.key===pe.key?"":(""+pe.key).replace(q,"$&/")+"/")+xe)),K.push(pe)),1;xe=0;var Ce=oe===""?".":oe+":";if(T(M))for(var he=0;he<M.length;he++)oe=M[he],ge=Ce+V(oe,he),xe+=P(oe,K,Z,ge,pe);else if(he=g(M),typeof he=="function")for(M=he.call(M),he=0;!(oe=M.next()).done;)oe=oe.value,ge=Ce+V(oe,he++),xe+=P(oe,K,Z,ge,pe);else if(ge==="object"){if(typeof M.then=="function")return P(j(M),K,Z,oe,pe);throw K=String(M),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return xe}function $(M,K,Z){if(M==null)return M;var oe=[],pe=0;return P(M,oe,"","",function(ge){return K.call(Z,ge,pe++)}),oe}function Q(M){if(M._status===-1){var K=M._result;K=K(),K.then(function(Z){(M._status===0||M._status===-1)&&(M._status=1,M._result=Z)},function(Z){(M._status===0||M._status===-1)&&(M._status=2,M._result=Z)}),M._status===-1&&(M._status=0,M._result=K)}if(M._status===1)return M._result.default;throw M._result}var U=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},G={map:$,forEach:function(M,K,Z){$(M,function(){K.apply(this,arguments)},Z)},count:function(M){var K=0;return $(M,function(){K++}),K},toArray:function(M){return $(M,function(K){return K})||[]},only:function(M){if(!H(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Ge.Activity=v,Ge.Children=G,Ge.Component=C,Ge.Fragment=e,Ge.Profiler=a,Ge.PureComponent=R,Ge.StrictMode=r,Ge.Suspense=c,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Ge.__COMPILER_RUNTIME={__proto__:null,c:function(M){return N.H.useMemoCache(M)}},Ge.cache=function(M){return function(){return M.apply(null,arguments)}},Ge.cacheSignal=function(){return null},Ge.cloneElement=function(M,K,Z){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var oe=x({},M.props),pe=M.key;if(K!=null)for(ge in K.key!==void 0&&(pe=""+K.key),K)!O.call(K,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&K.ref===void 0||(oe[ge]=K[ge]);var ge=arguments.length-2;if(ge===1)oe.children=Z;else if(1<ge){for(var xe=Array(ge),Ce=0;Ce<ge;Ce++)xe[Ce]=arguments[Ce+2];oe.children=xe}return I(M.type,pe,oe)},Ge.createContext=function(M){return M={$$typeof:u,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:o,_context:M},M},Ge.createElement=function(M,K,Z){var oe,pe={},ge=null;if(K!=null)for(oe in K.key!==void 0&&(ge=""+K.key),K)O.call(K,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(pe[oe]=K[oe]);var xe=arguments.length-2;if(xe===1)pe.children=Z;else if(1<xe){for(var Ce=Array(xe),he=0;he<xe;he++)Ce[he]=arguments[he+2];pe.children=Ce}if(M&&M.defaultProps)for(oe in xe=M.defaultProps,xe)pe[oe]===void 0&&(pe[oe]=xe[oe]);return I(M,ge,pe)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(M){return{$$typeof:l,render:M}},Ge.isValidElement=H,Ge.lazy=function(M){return{$$typeof:h,_payload:{_status:-1,_result:M},_init:Q}},Ge.memo=function(M,K){return{$$typeof:d,type:M,compare:K===void 0?null:K}},Ge.startTransition=function(M){var K=N.T,Z={};N.T=Z;try{var oe=M(),pe=N.S;pe!==null&&pe(Z,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(k,U)}catch(ge){U(ge)}finally{K!==null&&Z.types!==null&&(K.types=Z.types),N.T=K}},Ge.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Ge.use=function(M){return N.H.use(M)},Ge.useActionState=function(M,K,Z){return N.H.useActionState(M,K,Z)},Ge.useCallback=function(M,K){return N.H.useCallback(M,K)},Ge.useContext=function(M){return N.H.useContext(M)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(M,K){return N.H.useDeferredValue(M,K)},Ge.useEffect=function(M,K){return N.H.useEffect(M,K)},Ge.useEffectEvent=function(M){return N.H.useEffectEvent(M)},Ge.useId=function(){return N.H.useId()},Ge.useImperativeHandle=function(M,K,Z){return N.H.useImperativeHandle(M,K,Z)},Ge.useInsertionEffect=function(M,K){return N.H.useInsertionEffect(M,K)},Ge.useLayoutEffect=function(M,K){return N.H.useLayoutEffect(M,K)},Ge.useMemo=function(M,K){return N.H.useMemo(M,K)},Ge.useOptimistic=function(M,K){return N.H.useOptimistic(M,K)},Ge.useReducer=function(M,K,Z){return N.H.useReducer(M,K,Z)},Ge.useRef=function(M){return N.H.useRef(M)},Ge.useState=function(M){return N.H.useState(M)},Ge.useSyncExternalStore=function(M,K,Z){return N.H.useSyncExternalStore(M,K,Z)},Ge.useTransition=function(){return N.H.useTransition()},Ge.version="19.2.3",Ge}var v2;function kg(){return v2||(v2=1,Tv.exports=u3()),Tv.exports}var L=kg();const wa=Dg(L),Wm=o3({__proto__:null,default:wa},[L]);var Av={exports:{}},al={},Dv={exports:{}},kv={};var m2;function l3(){return m2||(m2=1,(function(t){function n(P,$){var Q=P.length;P.push($);e:for(;0<Q;){var U=Q-1>>>1,G=P[U];if(0<a(G,$))P[U]=$,P[Q]=G,Q=U;else break e}}function e(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var $=P[0],Q=P.pop();if(Q!==$){P[0]=Q;e:for(var U=0,G=P.length,M=G>>>1;U<M;){var K=2*(U+1)-1,Z=P[K],oe=K+1,pe=P[oe];if(0>a(Z,Q))oe<G&&0>a(pe,Z)?(P[U]=pe,P[oe]=Q,U=oe):(P[U]=Z,P[K]=Q,U=K);else if(oe<G&&0>a(pe,Q))P[U]=pe,P[oe]=Q,U=oe;else break e}}return $}function a(P,$){var Q=P.sortIndex-$.sortIndex;return Q!==0?Q:P.id-$.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,l=u.now();t.unstable_now=function(){return u.now()-l}}var c=[],d=[],h=1,v=null,m=3,g=!1,b=!1,x=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function E(P){for(var $=e(d);$!==null;){if($.callback===null)r(d);else if($.startTime<=P)r(d),$.sortIndex=$.expirationTime,n(c,$);else break;$=e(d)}}function T(P){if(x=!1,E(P),!b)if(e(c)!==null)b=!0,k||(k=!0,A());else{var $=e(d);$!==null&&j(T,$.startTime-P)}}var k=!1,N=-1,O=5,I=-1;function B(){return S?!0:!(t.unstable_now()-I<O)}function H(){if(S=!1,k){var P=t.unstable_now();I=P;var $=!0;try{e:{b=!1,x&&(x=!1,_(N),N=-1),g=!0;var Q=m;try{t:{for(E(P),v=e(c);v!==null&&!(v.expirationTime>P&&B());){var U=v.callback;if(typeof U=="function"){v.callback=null,m=v.priorityLevel;var G=U(v.expirationTime<=P);if(P=t.unstable_now(),typeof G=="function"){v.callback=G,E(P),$=!0;break t}v===e(c)&&r(c),E(P)}else r(c);v=e(c)}if(v!==null)$=!0;else{var M=e(d);M!==null&&j(T,M.startTime-P),$=!1}}break e}finally{v=null,m=Q,g=!1}$=void 0}}finally{$?A():k=!1}}}var A;if(typeof R=="function")A=function(){R(H)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,V=q.port2;q.port1.onmessage=H,A=function(){V.postMessage(null)}}else A=function(){C(H,0)};function j(P,$){N=C(function(){P(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(P){switch(m){case 1:case 2:case 3:var $=3;break;default:$=m}var Q=m;m=$;try{return P()}finally{m=Q}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(P,$){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var Q=m;m=P;try{return $()}finally{m=Q}},t.unstable_scheduleCallback=function(P,$,Q){var U=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?U+Q:U):Q=U,P){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=Q+G,P={id:h++,callback:$,priorityLevel:P,startTime:Q,expirationTime:G,sortIndex:-1},Q>U?(P.sortIndex=Q,n(d,P),e(c)===null&&P===e(d)&&(x?(_(N),N=-1):x=!0,j(T,Q-U))):(P.sortIndex=G,n(c,P),b||g||(b=!0,k||(k=!0,A()))),P},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(P){var $=m;return function(){var Q=m;m=$;try{return P.apply(this,arguments)}finally{m=Q}}}})(kv)),kv}var g2;function c3(){return g2||(g2=1,Dv.exports=l3()),Dv.exports}var Nv={exports:{}},Pn={};var y2;function f3(){if(y2)return Pn;y2=1;var t=kg();function n(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var r={d:{f:e,r:function(){throw Error(n(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(c,d,h){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:c,containerInfo:d,implementation:h}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Pn.createPortal=function(c,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(n(299));return o(c,d,null,h)},Pn.flushSync=function(c){var d=u.T,h=r.p;try{if(u.T=null,r.p=2,c)return c()}finally{u.T=d,r.p=h,r.d.f()}},Pn.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(c,d))},Pn.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Pn.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var h=d.as,v=l(h,d.crossOrigin),m=typeof d.integrity=="string"?d.integrity:void 0,g=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:v,integrity:m,fetchPriority:g}):h==="script"&&r.d.X(c,{crossOrigin:v,integrity:m,fetchPriority:g,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Pn.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=l(d.as,d.crossOrigin);r.d.M(c,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(c)},Pn.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,v=l(h,d.crossOrigin);r.d.L(c,h,{crossOrigin:v,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Pn.preloadModule=function(c,d){if(typeof c=="string")if(d){var h=l(d.as,d.crossOrigin);r.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(c)},Pn.requestFormReset=function(c){r.d.r(c)},Pn.unstable_batchedUpdates=function(c,d){return c(d)},Pn.useFormState=function(c,d,h){return u.H.useFormState(c,d,h)},Pn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Pn.version="19.2.3",Pn}var b2;function eC(){if(b2)return Nv.exports;b2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),Nv.exports=f3(),Nv.exports}var x2;function d3(){if(x2)return al;x2=1;var t=c3(),n=kg(),e=eC();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)s+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var s=i,f=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(f=s.return),i=s.return;while(i)}return s.tag===3?f:null}function u(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function l(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function c(i){if(o(i)!==i)throw Error(r(188))}function d(i){var s=i.alternate;if(!s){if(s=o(i),s===null)throw Error(r(188));return s!==i?null:i}for(var f=i,p=s;;){var y=f.return;if(y===null)break;var w=y.alternate;if(w===null){if(p=y.return,p!==null){f=p;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===f)return c(y),i;if(w===p)return c(y),s;w=w.sibling}throw Error(r(188))}if(f.return!==p.return)f=y,p=w;else{for(var D=!1,F=y.child;F;){if(F===f){D=!0,f=y,p=w;break}if(F===p){D=!0,p=y,f=w;break}F=F.sibling}if(!D){for(F=w.child;F;){if(F===f){D=!0,f=w,p=y;break}if(F===p){D=!0,p=w,f=y;break}F=F.sibling}if(!D)throw Error(r(189))}}if(f.alternate!==p)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?i:s}function h(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=h(i),s!==null)return s;i=i.sibling}return null}var v=Object.assign,m=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),R=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function A(i){return i===null||typeof i!="object"?null:(i=H&&i[H]||i["@@iterator"],typeof i=="function"?i:null)}var q=Symbol.for("react.client.reference");function V(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===q?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case x:return"Fragment";case C:return"Profiler";case S:return"StrictMode";case T:return"Suspense";case k:return"SuspenseList";case I:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case b:return"Portal";case R:return i.displayName||"Context";case _:return(i._context.displayName||"Context")+".Consumer";case E:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case N:return s=i.displayName||null,s!==null?s:V(i.type)||"Memo";case O:s=i._payload,i=i._init;try{return V(i(s))}catch{}}return null}var j=Array.isArray,P=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},U=[],G=-1;function M(i){return{current:i}}function K(i){0>G||(i.current=U[G],U[G]=null,G--)}function Z(i,s){G++,U[G]=i.current,i.current=s}var oe=M(null),pe=M(null),ge=M(null),xe=M(null);function Ce(i,s){switch(Z(ge,s),Z(pe,i),Z(oe,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?Bx(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=Bx(s),i=Fx(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}K(oe),Z(oe,i)}function he(){K(oe),K(pe),K(ge)}function be(i){i.memoizedState!==null&&Z(xe,i);var s=oe.current,f=Fx(s,i.type);s!==f&&(Z(pe,i),Z(oe,f))}function we(i){pe.current===i&&(K(oe),K(pe)),xe.current===i&&(K(xe),Ju._currentValue=Q)}var Re,Me;function Se(i){if(Re===void 0)try{throw Error()}catch(f){var s=f.stack.trim().match(/\n( *(at )?)/);Re=s&&s[1]||"",Me=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Re+i+Me}var Fe=!1;function He(i,s){if(!i||Fe)return"";Fe=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(s){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(se){var ae=se}Reflect.construct(i,[],me)}else{try{me.call()}catch(se){ae=se}i.call(me.prototype)}}else{try{throw Error()}catch(se){ae=se}(me=i())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(se){if(se&&ae&&typeof se.stack=="string")return[se.stack,ae.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=p.DetermineComponentFrameRoot(),D=w[0],F=w[1];if(D&&F){var X=D.split(`
`),re=F.split(`
`);for(y=p=0;p<X.length&&!X[p].includes("DetermineComponentFrameRoot");)p++;for(;y<re.length&&!re[y].includes("DetermineComponentFrameRoot");)y++;if(p===X.length||y===re.length)for(p=X.length-1,y=re.length-1;1<=p&&0<=y&&X[p]!==re[y];)y--;for(;1<=p&&0<=y;p--,y--)if(X[p]!==re[y]){if(p!==1||y!==1)do if(p--,y--,0>y||X[p]!==re[y]){var ce=`
`+X[p].replace(" at new "," at ");return i.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",i.displayName)),ce}while(1<=p&&0<=y);break}}}finally{Fe=!1,Error.prepareStackTrace=f}return(f=i?i.displayName||i.name:"")?Se(f):""}function vt(i,s){switch(i.tag){case 26:case 27:case 5:return Se(i.type);case 16:return Se("Lazy");case 13:return i.child!==s&&s!==null?Se("Suspense Fallback"):Se("Suspense");case 19:return Se("SuspenseList");case 0:case 15:return He(i.type,!1);case 11:return He(i.type.render,!1);case 1:return He(i.type,!0);case 31:return Se("Activity");default:return""}}function ut(i){try{var s="",f=null;do s+=vt(i,f),f=i,i=i.return;while(i);return s}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var yt=Object.prototype.hasOwnProperty,jt=t.unstable_scheduleCallback,st=t.unstable_cancelCallback,Pe=t.unstable_shouldYield,cn=t.unstable_requestPaint,Ye=t.unstable_now,In=t.unstable_getCurrentPriorityLevel,$n=t.unstable_ImmediatePriority,En=t.unstable_UserBlockingPriority,nn=t.unstable_NormalPriority,Ar=t.unstable_LowPriority,Kr=t.unstable_IdlePriority,Tt=t.log,cr=t.unstable_setDisableYieldValue,Bn=null,Yt=null;function Xn(i){if(typeof Tt=="function"&&cr(i),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode(Bn,i)}catch{}}var Fn=Math.clz32?Math.clz32:fn,Le=Math.log,At=Math.LN2;function fn(i){return i>>>=0,i===0?32:31-(Le(i)/At|0)|0}var Xr=256,ei=262144,ic=4194304;function ti(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function sc(i,s,f){var p=i.pendingLanes;if(p===0)return 0;var y=0,w=i.suspendedLanes,D=i.pingedLanes;i=i.warmLanes;var F=p&134217727;return F!==0?(p=F&~w,p!==0?y=ti(p):(D&=F,D!==0?y=ti(D):f||(f=F&~i,f!==0&&(y=ti(f))))):(F=p&~w,F!==0?y=ti(F):D!==0?y=ti(D):f||(f=p&~i,f!==0&&(y=ti(f)))),y===0?0:s!==0&&s!==y&&(s&w)===0&&(w=y&-y,f=s&-s,w>=f||w===32&&(f&4194048)!==0)?s:y}function du(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function G_(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function m0(){var i=ic;return ic<<=1,(ic&62914560)===0&&(ic=4194304),i}function ph(i){for(var s=[],f=0;31>f;f++)s.push(i);return s}function hu(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function q_(i,s,f,p,y,w){var D=i.pendingLanes;i.pendingLanes=f,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=f,i.entangledLanes&=f,i.errorRecoveryDisabledLanes&=f,i.shellSuspendCounter=0;var F=i.entanglements,X=i.expirationTimes,re=i.hiddenUpdates;for(f=D&~f;0<f;){var ce=31-Fn(f),me=1<<ce;F[ce]=0,X[ce]=-1;var ae=re[ce];if(ae!==null)for(re[ce]=null,ce=0;ce<ae.length;ce++){var se=ae[ce];se!==null&&(se.lane&=-536870913)}f&=~me}p!==0&&g0(i,p,0),w!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=w&~(D&~s))}function g0(i,s,f){i.pendingLanes|=s,i.suspendedLanes&=~s;var p=31-Fn(s);i.entangledLanes|=s,i.entanglements[p]=i.entanglements[p]|1073741824|f&261930}function y0(i,s){var f=i.entangledLanes|=s;for(i=i.entanglements;f;){var p=31-Fn(f),y=1<<p;y&s|i[p]&s&&(i[p]|=s),f&=~y}}function b0(i,s){var f=s&-s;return f=(f&42)!==0?1:vh(f),(f&(i.suspendedLanes|s))!==0?0:f}function vh(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function mh(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function x0(){var i=$.p;return i!==0?i:(i=window.event,i===void 0?32:o2(i.type))}function w0(i,s){var f=$.p;try{return $.p=i,s()}finally{$.p=f}}var mo=Math.random().toString(36).slice(2),Rn="__reactFiber$"+mo,Yn="__reactProps$"+mo,qi="__reactContainer$"+mo,gh="__reactEvents$"+mo,$_="__reactListeners$"+mo,K_="__reactHandles$"+mo,S0="__reactResources$"+mo,pu="__reactMarker$"+mo;function yh(i){delete i[Rn],delete i[Yn],delete i[gh],delete i[$_],delete i[K_]}function $i(i){var s=i[Rn];if(s)return s;for(var f=i.parentNode;f;){if(s=f[qi]||f[Rn]){if(f=s.alternate,s.child!==null||f!==null&&f.child!==null)for(i=Vx(i);i!==null;){if(f=i[Rn])return f;i=Vx(i)}return s}i=f,f=i.parentNode}return null}function Ki(i){if(i=i[Rn]||i[qi]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function vu(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function Xi(i){var s=i[S0];return s||(s=i[S0]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function bn(i){i[pu]=!0}var C0=new Set,E0={};function ni(i,s){Yi(i,s),Yi(i+"Capture",s)}function Yi(i,s){for(E0[i]=s,i=0;i<s.length;i++)C0.add(s[i])}var X_=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),R0={},_0={};function Y_(i){return yt.call(_0,i)?!0:yt.call(R0,i)?!1:X_.test(i)?_0[i]=!0:(R0[i]=!0,!1)}function uc(i,s,f){if(Y_(s))if(f===null)i.removeAttribute(s);else{switch(typeof f){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var p=s.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+f)}}function lc(i,s,f){if(f===null)i.removeAttribute(s);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+f)}}function Oa(i,s,f,p){if(p===null)i.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(f);return}i.setAttributeNS(s,f,""+p)}}function Dr(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function T0(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Q_(i,s,f){var p=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var y=p.get,w=p.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return y.call(this)},set:function(D){f=""+D,w.call(this,D)}}),Object.defineProperty(i,s,{enumerable:p.enumerable}),{getValue:function(){return f},setValue:function(D){f=""+D},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function bh(i){if(!i._valueTracker){var s=T0(i)?"checked":"value";i._valueTracker=Q_(i,s,""+i[s])}}function A0(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var f=s.getValue(),p="";return i&&(p=T0(i)?i.checked?"true":"false":i.value),i=p,i!==f?(s.setValue(i),!0):!1}function cc(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Z_=/[\n"\\]/g;function kr(i){return i.replace(Z_,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function xh(i,s,f,p,y,w,D,F){i.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?i.type=D:i.removeAttribute("type"),s!=null?D==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+Dr(s)):i.value!==""+Dr(s)&&(i.value=""+Dr(s)):D!=="submit"&&D!=="reset"||i.removeAttribute("value"),s!=null?wh(i,D,Dr(s)):f!=null?wh(i,D,Dr(f)):p!=null&&i.removeAttribute("value"),y==null&&w!=null&&(i.defaultChecked=!!w),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?i.name=""+Dr(F):i.removeAttribute("name")}function D0(i,s,f,p,y,w,D,F){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.type=w),s!=null||f!=null){if(!(w!=="submit"&&w!=="reset"||s!=null)){bh(i);return}f=f!=null?""+Dr(f):"",s=s!=null?""+Dr(s):f,F||s===i.value||(i.value=s),i.defaultValue=s}p=p??y,p=typeof p!="function"&&typeof p!="symbol"&&!!p,i.checked=F?i.checked:!!p,i.defaultChecked=!!p,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(i.name=D),bh(i)}function wh(i,s,f){s==="number"&&cc(i.ownerDocument)===i||i.defaultValue===""+f||(i.defaultValue=""+f)}function Qi(i,s,f,p){if(i=i.options,s){s={};for(var y=0;y<f.length;y++)s["$"+f[y]]=!0;for(f=0;f<i.length;f++)y=s.hasOwnProperty("$"+i[f].value),i[f].selected!==y&&(i[f].selected=y),y&&p&&(i[f].defaultSelected=!0)}else{for(f=""+Dr(f),s=null,y=0;y<i.length;y++){if(i[y].value===f){i[y].selected=!0,p&&(i[y].defaultSelected=!0);return}s!==null||i[y].disabled||(s=i[y])}s!==null&&(s.selected=!0)}}function k0(i,s,f){if(s!=null&&(s=""+Dr(s),s!==i.value&&(i.value=s),f==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=f!=null?""+Dr(f):""}function N0(i,s,f,p){if(s==null){if(p!=null){if(f!=null)throw Error(r(92));if(j(p)){if(1<p.length)throw Error(r(93));p=p[0]}f=p}f==null&&(f=""),s=f}f=Dr(s),i.defaultValue=f,p=i.textContent,p===f&&p!==""&&p!==null&&(i.value=p),bh(i)}function Zi(i,s){if(s){var f=i.firstChild;if(f&&f===i.lastChild&&f.nodeType===3){f.nodeValue=s;return}}i.textContent=s}var J_=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function M0(i,s,f){var p=s.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?p?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":p?i.setProperty(s,f):typeof f!="number"||f===0||J_.has(s)?s==="float"?i.cssFloat=f:i[s]=(""+f).trim():i[s]=f+"px"}function O0(i,s,f){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,f!=null){for(var p in f)!f.hasOwnProperty(p)||s!=null&&s.hasOwnProperty(p)||(p.indexOf("--")===0?i.setProperty(p,""):p==="float"?i.cssFloat="":i[p]="");for(var y in s)p=s[y],s.hasOwnProperty(y)&&f[y]!==p&&M0(i,y,p)}else for(var w in s)s.hasOwnProperty(w)&&M0(i,w,s[w])}function Sh(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fc(i){return tT.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Ia(){}var Ch=null;function Eh(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ji=null,es=null;function I0(i){var s=Ki(i);if(s&&(i=s.stateNode)){var f=i[Yn]||null;e:switch(i=s.stateNode,s.type){case"input":if(xh(i,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),s=f.name,f.type==="radio"&&s!=null){for(f=i;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+kr(""+s)+'"][type="radio"]'),s=0;s<f.length;s++){var p=f[s];if(p!==i&&p.form===i.form){var y=p[Yn]||null;if(!y)throw Error(r(90));xh(p,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(s=0;s<f.length;s++)p=f[s],p.form===i.form&&A0(p)}break e;case"textarea":k0(i,f.value,f.defaultValue);break e;case"select":s=f.value,s!=null&&Qi(i,!!f.multiple,s,!1)}}}var Rh=!1;function B0(i,s,f){if(Rh)return i(s,f);Rh=!0;try{var p=i(s);return p}finally{if(Rh=!1,(Ji!==null||es!==null)&&(Zc(),Ji&&(s=Ji,i=es,es=Ji=null,I0(s),i)))for(s=0;s<i.length;s++)I0(i[s])}}function mu(i,s){var f=i.stateNode;if(f===null)return null;var p=f[Yn]||null;if(p===null)return null;f=p[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(f&&typeof f!="function")throw Error(r(231,s,typeof f));return f}var Ba=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_h=!1;if(Ba)try{var gu={};Object.defineProperty(gu,"passive",{get:function(){_h=!0}}),window.addEventListener("test",gu,gu),window.removeEventListener("test",gu,gu)}catch{_h=!1}var go=null,Th=null,dc=null;function F0(){if(dc)return dc;var i,s=Th,f=s.length,p,y="value"in go?go.value:go.textContent,w=y.length;for(i=0;i<f&&s[i]===y[i];i++);var D=f-i;for(p=1;p<=D&&s[f-p]===y[w-p];p++);return dc=y.slice(i,1<p?1-p:void 0)}function hc(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function pc(){return!0}function P0(){return!1}function Qn(i){function s(f,p,y,w,D){this._reactName=f,this._targetInst=y,this.type=p,this.nativeEvent=w,this.target=D,this.currentTarget=null;for(var F in i)i.hasOwnProperty(F)&&(f=i[F],this[F]=f?f(w):w[F]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?pc:P0,this.isPropagationStopped=P0,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=pc)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=pc)},persist:function(){},isPersistent:pc}),s}var ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vc=Qn(ri),yu=v({},ri,{view:0,detail:0}),nT=Qn(yu),Ah,Dh,bu,mc=v({},yu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nh,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==bu&&(bu&&i.type==="mousemove"?(Ah=i.screenX-bu.screenX,Dh=i.screenY-bu.screenY):Dh=Ah=0,bu=i),Ah)},movementY:function(i){return"movementY"in i?i.movementY:Dh}}),L0=Qn(mc),rT=v({},mc,{dataTransfer:0}),aT=Qn(rT),oT=v({},yu,{relatedTarget:0}),kh=Qn(oT),iT=v({},ri,{animationName:0,elapsedTime:0,pseudoElement:0}),sT=Qn(iT),uT=v({},ri,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),lT=Qn(uT),cT=v({},ri,{data:0}),z0=Qn(cT),fT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pT(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=hT[i])?!!s[i]:!1}function Nh(){return pT}var vT=v({},yu,{key:function(i){if(i.key){var s=fT[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=hc(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?dT[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nh,charCode:function(i){return i.type==="keypress"?hc(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?hc(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),mT=Qn(vT),gT=v({},mc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),U0=Qn(gT),yT=v({},yu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nh}),bT=Qn(yT),xT=v({},ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),wT=Qn(xT),ST=v({},mc,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),CT=Qn(ST),ET=v({},ri,{newState:0,oldState:0}),RT=Qn(ET),_T=[9,13,27,32],Mh=Ba&&"CompositionEvent"in window,xu=null;Ba&&"documentMode"in document&&(xu=document.documentMode);var TT=Ba&&"TextEvent"in window&&!xu,W0=Ba&&(!Mh||xu&&8<xu&&11>=xu),H0=" ",V0=!1;function j0(i,s){switch(i){case"keyup":return _T.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function G0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ts=!1;function AT(i,s){switch(i){case"compositionend":return G0(s);case"keypress":return s.which!==32?null:(V0=!0,H0);case"textInput":return i=s.data,i===H0&&V0?null:i;default:return null}}function DT(i,s){if(ts)return i==="compositionend"||!Mh&&j0(i,s)?(i=F0(),dc=Th=go=null,ts=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return W0&&s.locale!=="ko"?null:s.data;default:return null}}var kT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function q0(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!kT[i.type]:s==="textarea"}function $0(i,s,f,p){Ji?es?es.push(p):es=[p]:Ji=p,s=of(s,"onChange"),0<s.length&&(f=new vc("onChange","change",null,f,p),i.push({event:f,listeners:s}))}var wu=null,Su=null;function NT(i){Dx(i,0)}function gc(i){var s=vu(i);if(A0(s))return i}function K0(i,s){if(i==="change")return s}var X0=!1;if(Ba){var Oh;if(Ba){var Ih="oninput"in document;if(!Ih){var Y0=document.createElement("div");Y0.setAttribute("oninput","return;"),Ih=typeof Y0.oninput=="function"}Oh=Ih}else Oh=!1;X0=Oh&&(!document.documentMode||9<document.documentMode)}function Q0(){wu&&(wu.detachEvent("onpropertychange",Z0),Su=wu=null)}function Z0(i){if(i.propertyName==="value"&&gc(Su)){var s=[];$0(s,Su,i,Eh(i)),B0(NT,s)}}function MT(i,s,f){i==="focusin"?(Q0(),wu=s,Su=f,wu.attachEvent("onpropertychange",Z0)):i==="focusout"&&Q0()}function OT(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return gc(Su)}function IT(i,s){if(i==="click")return gc(s)}function BT(i,s){if(i==="input"||i==="change")return gc(s)}function FT(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var fr=typeof Object.is=="function"?Object.is:FT;function Cu(i,s){if(fr(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var f=Object.keys(i),p=Object.keys(s);if(f.length!==p.length)return!1;for(p=0;p<f.length;p++){var y=f[p];if(!yt.call(s,y)||!fr(i[y],s[y]))return!1}return!0}function J0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function eb(i,s){var f=J0(i);i=0;for(var p;f;){if(f.nodeType===3){if(p=i+f.textContent.length,i<=s&&p>=s)return{node:f,offset:s-i};i=p}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=J0(f)}}function tb(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?tb(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function nb(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=cc(i.document);s instanceof i.HTMLIFrameElement;){try{var f=typeof s.contentWindow.location.href=="string"}catch{f=!1}if(f)i=s.contentWindow;else break;s=cc(i.document)}return s}function Bh(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var PT=Ba&&"documentMode"in document&&11>=document.documentMode,ns=null,Fh=null,Eu=null,Ph=!1;function rb(i,s,f){var p=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Ph||ns==null||ns!==cc(p)||(p=ns,"selectionStart"in p&&Bh(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Eu&&Cu(Eu,p)||(Eu=p,p=of(Fh,"onSelect"),0<p.length&&(s=new vc("onSelect","select",null,s,f),i.push({event:s,listeners:p}),s.target=ns)))}function ai(i,s){var f={};return f[i.toLowerCase()]=s.toLowerCase(),f["Webkit"+i]="webkit"+s,f["Moz"+i]="moz"+s,f}var rs={animationend:ai("Animation","AnimationEnd"),animationiteration:ai("Animation","AnimationIteration"),animationstart:ai("Animation","AnimationStart"),transitionrun:ai("Transition","TransitionRun"),transitionstart:ai("Transition","TransitionStart"),transitioncancel:ai("Transition","TransitionCancel"),transitionend:ai("Transition","TransitionEnd")},Lh={},ab={};Ba&&(ab=document.createElement("div").style,"AnimationEvent"in window||(delete rs.animationend.animation,delete rs.animationiteration.animation,delete rs.animationstart.animation),"TransitionEvent"in window||delete rs.transitionend.transition);function oi(i){if(Lh[i])return Lh[i];if(!rs[i])return i;var s=rs[i],f;for(f in s)if(s.hasOwnProperty(f)&&f in ab)return Lh[i]=s[f];return i}var ob=oi("animationend"),ib=oi("animationiteration"),sb=oi("animationstart"),LT=oi("transitionrun"),zT=oi("transitionstart"),UT=oi("transitioncancel"),ub=oi("transitionend"),lb=new Map,zh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zh.push("scrollEnd");function Yr(i,s){lb.set(i,s),ni(s,[i])}var yc=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Nr=[],as=0,Uh=0;function bc(){for(var i=as,s=Uh=as=0;s<i;){var f=Nr[s];Nr[s++]=null;var p=Nr[s];Nr[s++]=null;var y=Nr[s];Nr[s++]=null;var w=Nr[s];if(Nr[s++]=null,p!==null&&y!==null){var D=p.pending;D===null?y.next=y:(y.next=D.next,D.next=y),p.pending=y}w!==0&&cb(f,y,w)}}function xc(i,s,f,p){Nr[as++]=i,Nr[as++]=s,Nr[as++]=f,Nr[as++]=p,Uh|=p,i.lanes|=p,i=i.alternate,i!==null&&(i.lanes|=p)}function Wh(i,s,f,p){return xc(i,s,f,p),wc(i)}function ii(i,s){return xc(i,null,null,s),wc(i)}function cb(i,s,f){i.lanes|=f;var p=i.alternate;p!==null&&(p.lanes|=f);for(var y=!1,w=i.return;w!==null;)w.childLanes|=f,p=w.alternate,p!==null&&(p.childLanes|=f),w.tag===22&&(i=w.stateNode,i===null||i._visibility&1||(y=!0)),i=w,w=w.return;return i.tag===3?(w=i.stateNode,y&&s!==null&&(y=31-Fn(f),i=w.hiddenUpdates,p=i[y],p===null?i[y]=[s]:p.push(s),s.lane=f|536870912),w):null}function wc(i){if(50<qu)throw qu=0,Yp=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var os={};function WT(i,s,f,p){this.tag=i,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dr(i,s,f,p){return new WT(i,s,f,p)}function Hh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Fa(i,s){var f=i.alternate;return f===null?(f=dr(i.tag,s,i.key,i.mode),f.elementType=i.elementType,f.type=i.type,f.stateNode=i.stateNode,f.alternate=i,i.alternate=f):(f.pendingProps=s,f.type=i.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=i.flags&65011712,f.childLanes=i.childLanes,f.lanes=i.lanes,f.child=i.child,f.memoizedProps=i.memoizedProps,f.memoizedState=i.memoizedState,f.updateQueue=i.updateQueue,s=i.dependencies,f.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},f.sibling=i.sibling,f.index=i.index,f.ref=i.ref,f.refCleanup=i.refCleanup,f}function fb(i,s){i.flags&=65011714;var f=i.alternate;return f===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=f.childLanes,i.lanes=f.lanes,i.child=f.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=f.memoizedProps,i.memoizedState=f.memoizedState,i.updateQueue=f.updateQueue,i.type=f.type,s=f.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Sc(i,s,f,p,y,w){var D=0;if(p=i,typeof i=="function")Hh(i)&&(D=1);else if(typeof i=="string")D=qA(i,f,oe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case I:return i=dr(31,f,s,y),i.elementType=I,i.lanes=w,i;case x:return si(f.children,y,w,s);case S:D=8,y|=24;break;case C:return i=dr(12,f,s,y|2),i.elementType=C,i.lanes=w,i;case T:return i=dr(13,f,s,y),i.elementType=T,i.lanes=w,i;case k:return i=dr(19,f,s,y),i.elementType=k,i.lanes=w,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case R:D=10;break e;case _:D=9;break e;case E:D=11;break e;case N:D=14;break e;case O:D=16,p=null;break e}D=29,f=Error(r(130,i===null?"null":typeof i,"")),p=null}return s=dr(D,f,s,y),s.elementType=i,s.type=p,s.lanes=w,s}function si(i,s,f,p){return i=dr(7,i,p,s),i.lanes=f,i}function Vh(i,s,f){return i=dr(6,i,null,s),i.lanes=f,i}function db(i){var s=dr(18,null,null,0);return s.stateNode=i,s}function jh(i,s,f){return s=dr(4,i.children!==null?i.children:[],i.key,s),s.lanes=f,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var hb=new WeakMap;function Mr(i,s){if(typeof i=="object"&&i!==null){var f=hb.get(i);return f!==void 0?f:(s={value:i,source:s,stack:ut(s)},hb.set(i,s),s)}return{value:i,source:s,stack:ut(s)}}var is=[],ss=0,Cc=null,Ru=0,Or=[],Ir=0,yo=null,sa=1,ua="";function Pa(i,s){is[ss++]=Ru,is[ss++]=Cc,Cc=i,Ru=s}function pb(i,s,f){Or[Ir++]=sa,Or[Ir++]=ua,Or[Ir++]=yo,yo=i;var p=sa;i=ua;var y=32-Fn(p)-1;p&=~(1<<y),f+=1;var w=32-Fn(s)+y;if(30<w){var D=y-y%5;w=(p&(1<<D)-1).toString(32),p>>=D,y-=D,sa=1<<32-Fn(s)+y|f<<y|p,ua=w+i}else sa=1<<w|f<<y|p,ua=i}function Gh(i){i.return!==null&&(Pa(i,1),pb(i,1,0))}function qh(i){for(;i===Cc;)Cc=is[--ss],is[ss]=null,Ru=is[--ss],is[ss]=null;for(;i===yo;)yo=Or[--Ir],Or[Ir]=null,ua=Or[--Ir],Or[Ir]=null,sa=Or[--Ir],Or[Ir]=null}function vb(i,s){Or[Ir++]=sa,Or[Ir++]=ua,Or[Ir++]=yo,sa=s.id,ua=s.overflow,yo=i}var _n=null,Mt=null,ot=!1,bo=null,Br=!1,$h=Error(r(519));function xo(i){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _u(Mr(s,i)),$h}function mb(i){var s=i.stateNode,f=i.type,p=i.memoizedProps;switch(s[Rn]=i,s[Yn]=p,f){case"dialog":tt("cancel",s),tt("close",s);break;case"iframe":case"object":case"embed":tt("load",s);break;case"video":case"audio":for(f=0;f<Ku.length;f++)tt(Ku[f],s);break;case"source":tt("error",s);break;case"img":case"image":case"link":tt("error",s),tt("load",s);break;case"details":tt("toggle",s);break;case"input":tt("invalid",s),D0(s,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":tt("invalid",s);break;case"textarea":tt("invalid",s),N0(s,p.value,p.defaultValue,p.children)}f=p.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||s.textContent===""+f||p.suppressHydrationWarning===!0||Ox(s.textContent,f)?(p.popover!=null&&(tt("beforetoggle",s),tt("toggle",s)),p.onScroll!=null&&tt("scroll",s),p.onScrollEnd!=null&&tt("scrollend",s),p.onClick!=null&&(s.onclick=Ia),s=!0):s=!1,s||xo(i,!0)}function gb(i){for(_n=i.return;_n;)switch(_n.tag){case 5:case 31:case 13:Br=!1;return;case 27:case 3:Br=!0;return;default:_n=_n.return}}function us(i){if(i!==_n)return!1;if(!ot)return gb(i),ot=!0,!1;var s=i.tag,f;if((f=s!==3&&s!==27)&&((f=s===5)&&(f=i.type,f=!(f!=="form"&&f!=="button")||fv(i.type,i.memoizedProps)),f=!f),f&&Mt&&xo(i),gb(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));Mt=Hx(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));Mt=Hx(i)}else s===27?(s=Mt,Io(i.type)?(i=mv,mv=null,Mt=i):Mt=s):Mt=_n?Pr(i.stateNode.nextSibling):null;return!0}function ui(){Mt=_n=null,ot=!1}function Kh(){var i=bo;return i!==null&&(tr===null?tr=i:tr.push.apply(tr,i),bo=null),i}function _u(i){bo===null?bo=[i]:bo.push(i)}var Xh=M(null),li=null,La=null;function wo(i,s,f){Z(Xh,s._currentValue),s._currentValue=f}function za(i){i._currentValue=Xh.current,K(Xh)}function Yh(i,s,f){for(;i!==null;){var p=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,p!==null&&(p.childLanes|=s)):p!==null&&(p.childLanes&s)!==s&&(p.childLanes|=s),i===f)break;i=i.return}}function Qh(i,s,f,p){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var w=y.dependencies;if(w!==null){var D=y.child;w=w.firstContext;e:for(;w!==null;){var F=w;w=y;for(var X=0;X<s.length;X++)if(F.context===s[X]){w.lanes|=f,F=w.alternate,F!==null&&(F.lanes|=f),Yh(w.return,f,i),p||(D=null);break e}w=F.next}}else if(y.tag===18){if(D=y.return,D===null)throw Error(r(341));D.lanes|=f,w=D.alternate,w!==null&&(w.lanes|=f),Yh(D,f,i),D=null}else D=y.child;if(D!==null)D.return=y;else for(D=y;D!==null;){if(D===i){D=null;break}if(y=D.sibling,y!==null){y.return=D.return,D=y;break}D=D.return}y=D}}function ls(i,s,f,p){i=null;for(var y=s,w=!1;y!==null;){if(!w){if((y.flags&524288)!==0)w=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var D=y.alternate;if(D===null)throw Error(r(387));if(D=D.memoizedProps,D!==null){var F=y.type;fr(y.pendingProps.value,D.value)||(i!==null?i.push(F):i=[F])}}else if(y===xe.current){if(D=y.alternate,D===null)throw Error(r(387));D.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(Ju):i=[Ju])}y=y.return}i!==null&&Qh(s,i,f,p),s.flags|=262144}function Ec(i){for(i=i.firstContext;i!==null;){if(!fr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ci(i){li=i,La=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Tn(i){return yb(li,i)}function Rc(i,s){return li===null&&ci(i),yb(i,s)}function yb(i,s){var f=s._currentValue;if(s={context:s,memoizedValue:f,next:null},La===null){if(i===null)throw Error(r(308));La=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else La=La.next=s;return f}var HT=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(f,p){i.push(p)}};this.abort=function(){s.aborted=!0,i.forEach(function(f){return f()})}},VT=t.unstable_scheduleCallback,jT=t.unstable_NormalPriority,rn={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Zh(){return{controller:new HT,data:new Map,refCount:0}}function Tu(i){i.refCount--,i.refCount===0&&VT(jT,function(){i.controller.abort()})}var Au=null,Jh=0,cs=0,fs=null;function GT(i,s){if(Au===null){var f=Au=[];Jh=0,cs=nv(),fs={status:"pending",value:void 0,then:function(p){f.push(p)}}}return Jh++,s.then(bb,bb),s}function bb(){if(--Jh===0&&Au!==null){fs!==null&&(fs.status="fulfilled");var i=Au;Au=null,cs=0,fs=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function qT(i,s){var f=[],p={status:"pending",value:null,reason:null,then:function(y){f.push(y)}};return i.then(function(){p.status="fulfilled",p.value=s;for(var y=0;y<f.length;y++)(0,f[y])(s)},function(y){for(p.status="rejected",p.reason=y,y=0;y<f.length;y++)(0,f[y])(void 0)}),p}var xb=P.S;P.S=function(i,s){rx=Ye(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&GT(i,s),xb!==null&&xb(i,s)};var fi=M(null);function ep(){var i=fi.current;return i!==null?i:Dt.pooledCache}function _c(i,s){s===null?Z(fi,fi.current):Z(fi,s.pool)}function wb(){var i=ep();return i===null?null:{parent:rn._currentValue,pool:i}}var ds=Error(r(460)),tp=Error(r(474)),Tc=Error(r(542)),Ac={then:function(){}};function Sb(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Cb(i,s,f){switch(f=i[f],f===void 0?i.push(s):f!==s&&(s.then(Ia,Ia),s=f),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Rb(i),i;default:if(typeof s.status=="string")s.then(Ia,Ia);else{if(i=Dt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(p){if(s.status==="pending"){var y=s;y.status="fulfilled",y.value=p}},function(p){if(s.status==="pending"){var y=s;y.status="rejected",y.reason=p}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Rb(i),i}throw hi=s,ds}}function di(i){try{var s=i._init;return s(i._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(hi=f,ds):f}}var hi=null;function Eb(){if(hi===null)throw Error(r(459));var i=hi;return hi=null,i}function Rb(i){if(i===ds||i===Tc)throw Error(r(483))}var hs=null,Du=0;function Dc(i){var s=Du;return Du+=1,hs===null&&(hs=[]),Cb(hs,i,s)}function ku(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function kc(i,s){throw s.$$typeof===m?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function _b(i){function s(te,J){if(i){var ne=te.deletions;ne===null?(te.deletions=[J],te.flags|=16):ne.push(J)}}function f(te,J){if(!i)return null;for(;J!==null;)s(te,J),J=J.sibling;return null}function p(te){for(var J=new Map;te!==null;)te.key!==null?J.set(te.key,te):J.set(te.index,te),te=te.sibling;return J}function y(te,J){return te=Fa(te,J),te.index=0,te.sibling=null,te}function w(te,J,ne){return te.index=ne,i?(ne=te.alternate,ne!==null?(ne=ne.index,ne<J?(te.flags|=67108866,J):ne):(te.flags|=67108866,J)):(te.flags|=1048576,J)}function D(te){return i&&te.alternate===null&&(te.flags|=67108866),te}function F(te,J,ne,ve){return J===null||J.tag!==6?(J=Vh(ne,te.mode,ve),J.return=te,J):(J=y(J,ne),J.return=te,J)}function X(te,J,ne,ve){var ze=ne.type;return ze===x?ce(te,J,ne.props.children,ve,ne.key):J!==null&&(J.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===O&&di(ze)===J.type)?(J=y(J,ne.props),ku(J,ne),J.return=te,J):(J=Sc(ne.type,ne.key,ne.props,null,te.mode,ve),ku(J,ne),J.return=te,J)}function re(te,J,ne,ve){return J===null||J.tag!==4||J.stateNode.containerInfo!==ne.containerInfo||J.stateNode.implementation!==ne.implementation?(J=jh(ne,te.mode,ve),J.return=te,J):(J=y(J,ne.children||[]),J.return=te,J)}function ce(te,J,ne,ve,ze){return J===null||J.tag!==7?(J=si(ne,te.mode,ve,ze),J.return=te,J):(J=y(J,ne),J.return=te,J)}function me(te,J,ne){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=Vh(""+J,te.mode,ne),J.return=te,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case g:return ne=Sc(J.type,J.key,J.props,null,te.mode,ne),ku(ne,J),ne.return=te,ne;case b:return J=jh(J,te.mode,ne),J.return=te,J;case O:return J=di(J),me(te,J,ne)}if(j(J)||A(J))return J=si(J,te.mode,ne,null),J.return=te,J;if(typeof J.then=="function")return me(te,Dc(J),ne);if(J.$$typeof===R)return me(te,Rc(te,J),ne);kc(te,J)}return null}function ae(te,J,ne,ve){var ze=J!==null?J.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return ze!==null?null:F(te,J,""+ne,ve);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case g:return ne.key===ze?X(te,J,ne,ve):null;case b:return ne.key===ze?re(te,J,ne,ve):null;case O:return ne=di(ne),ae(te,J,ne,ve)}if(j(ne)||A(ne))return ze!==null?null:ce(te,J,ne,ve,null);if(typeof ne.then=="function")return ae(te,J,Dc(ne),ve);if(ne.$$typeof===R)return ae(te,J,Rc(te,ne),ve);kc(te,ne)}return null}function se(te,J,ne,ve,ze){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return te=te.get(ne)||null,F(J,te,""+ve,ze);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case g:return te=te.get(ve.key===null?ne:ve.key)||null,X(J,te,ve,ze);case b:return te=te.get(ve.key===null?ne:ve.key)||null,re(J,te,ve,ze);case O:return ve=di(ve),se(te,J,ne,ve,ze)}if(j(ve)||A(ve))return te=te.get(ne)||null,ce(J,te,ve,ze,null);if(typeof ve.then=="function")return se(te,J,ne,Dc(ve),ze);if(ve.$$typeof===R)return se(te,J,ne,Rc(J,ve),ze);kc(J,ve)}return null}function Te(te,J,ne,ve){for(var ze=null,lt=null,ke=J,Ke=J=0,at=null;ke!==null&&Ke<ne.length;Ke++){ke.index>Ke?(at=ke,ke=null):at=ke.sibling;var ct=ae(te,ke,ne[Ke],ve);if(ct===null){ke===null&&(ke=at);break}i&&ke&&ct.alternate===null&&s(te,ke),J=w(ct,J,Ke),lt===null?ze=ct:lt.sibling=ct,lt=ct,ke=at}if(Ke===ne.length)return f(te,ke),ot&&Pa(te,Ke),ze;if(ke===null){for(;Ke<ne.length;Ke++)ke=me(te,ne[Ke],ve),ke!==null&&(J=w(ke,J,Ke),lt===null?ze=ke:lt.sibling=ke,lt=ke);return ot&&Pa(te,Ke),ze}for(ke=p(ke);Ke<ne.length;Ke++)at=se(ke,te,Ke,ne[Ke],ve),at!==null&&(i&&at.alternate!==null&&ke.delete(at.key===null?Ke:at.key),J=w(at,J,Ke),lt===null?ze=at:lt.sibling=at,lt=at);return i&&ke.forEach(function(zo){return s(te,zo)}),ot&&Pa(te,Ke),ze}function We(te,J,ne,ve){if(ne==null)throw Error(r(151));for(var ze=null,lt=null,ke=J,Ke=J=0,at=null,ct=ne.next();ke!==null&&!ct.done;Ke++,ct=ne.next()){ke.index>Ke?(at=ke,ke=null):at=ke.sibling;var zo=ae(te,ke,ct.value,ve);if(zo===null){ke===null&&(ke=at);break}i&&ke&&zo.alternate===null&&s(te,ke),J=w(zo,J,Ke),lt===null?ze=zo:lt.sibling=zo,lt=zo,ke=at}if(ct.done)return f(te,ke),ot&&Pa(te,Ke),ze;if(ke===null){for(;!ct.done;Ke++,ct=ne.next())ct=me(te,ct.value,ve),ct!==null&&(J=w(ct,J,Ke),lt===null?ze=ct:lt.sibling=ct,lt=ct);return ot&&Pa(te,Ke),ze}for(ke=p(ke);!ct.done;Ke++,ct=ne.next())ct=se(ke,te,Ke,ct.value,ve),ct!==null&&(i&&ct.alternate!==null&&ke.delete(ct.key===null?Ke:ct.key),J=w(ct,J,Ke),lt===null?ze=ct:lt.sibling=ct,lt=ct);return i&&ke.forEach(function(r3){return s(te,r3)}),ot&&Pa(te,Ke),ze}function Rt(te,J,ne,ve){if(typeof ne=="object"&&ne!==null&&ne.type===x&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case g:e:{for(var ze=ne.key;J!==null;){if(J.key===ze){if(ze=ne.type,ze===x){if(J.tag===7){f(te,J.sibling),ve=y(J,ne.props.children),ve.return=te,te=ve;break e}}else if(J.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===O&&di(ze)===J.type){f(te,J.sibling),ve=y(J,ne.props),ku(ve,ne),ve.return=te,te=ve;break e}f(te,J);break}else s(te,J);J=J.sibling}ne.type===x?(ve=si(ne.props.children,te.mode,ve,ne.key),ve.return=te,te=ve):(ve=Sc(ne.type,ne.key,ne.props,null,te.mode,ve),ku(ve,ne),ve.return=te,te=ve)}return D(te);case b:e:{for(ze=ne.key;J!==null;){if(J.key===ze)if(J.tag===4&&J.stateNode.containerInfo===ne.containerInfo&&J.stateNode.implementation===ne.implementation){f(te,J.sibling),ve=y(J,ne.children||[]),ve.return=te,te=ve;break e}else{f(te,J);break}else s(te,J);J=J.sibling}ve=jh(ne,te.mode,ve),ve.return=te,te=ve}return D(te);case O:return ne=di(ne),Rt(te,J,ne,ve)}if(j(ne))return Te(te,J,ne,ve);if(A(ne)){if(ze=A(ne),typeof ze!="function")throw Error(r(150));return ne=ze.call(ne),We(te,J,ne,ve)}if(typeof ne.then=="function")return Rt(te,J,Dc(ne),ve);if(ne.$$typeof===R)return Rt(te,J,Rc(te,ne),ve);kc(te,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,J!==null&&J.tag===6?(f(te,J.sibling),ve=y(J,ne),ve.return=te,te=ve):(f(te,J),ve=Vh(ne,te.mode,ve),ve.return=te,te=ve),D(te)):f(te,J)}return function(te,J,ne,ve){try{Du=0;var ze=Rt(te,J,ne,ve);return hs=null,ze}catch(ke){if(ke===ds||ke===Tc)throw ke;var lt=dr(29,ke,null,te.mode);return lt.lanes=ve,lt.return=te,lt}}}var pi=_b(!0),Tb=_b(!1),So=!1;function np(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rp(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Co(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Eo(i,s,f){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(ft&2)!==0){var y=p.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),p.pending=s,s=wc(i),cb(i,null,f),s}return xc(i,p,s,f),wc(i)}function Nu(i,s,f){if(s=s.updateQueue,s!==null&&(s=s.shared,(f&4194048)!==0)){var p=s.lanes;p&=i.pendingLanes,f|=p,s.lanes=f,y0(i,f)}}function ap(i,s){var f=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,f===p)){var y=null,w=null;if(f=f.firstBaseUpdate,f!==null){do{var D={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};w===null?y=w=D:w=w.next=D,f=f.next}while(f!==null);w===null?y=w=s:w=w.next=s}else y=w=s;f={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:p.shared,callbacks:p.callbacks},i.updateQueue=f;return}i=f.lastBaseUpdate,i===null?f.firstBaseUpdate=s:i.next=s,f.lastBaseUpdate=s}var op=!1;function Mu(){if(op){var i=fs;if(i!==null)throw i}}function Ou(i,s,f,p){op=!1;var y=i.updateQueue;So=!1;var w=y.firstBaseUpdate,D=y.lastBaseUpdate,F=y.shared.pending;if(F!==null){y.shared.pending=null;var X=F,re=X.next;X.next=null,D===null?w=re:D.next=re,D=X;var ce=i.alternate;ce!==null&&(ce=ce.updateQueue,F=ce.lastBaseUpdate,F!==D&&(F===null?ce.firstBaseUpdate=re:F.next=re,ce.lastBaseUpdate=X))}if(w!==null){var me=y.baseState;D=0,ce=re=X=null,F=w;do{var ae=F.lane&-536870913,se=ae!==F.lane;if(se?(rt&ae)===ae:(p&ae)===ae){ae!==0&&ae===cs&&(op=!0),ce!==null&&(ce=ce.next={lane:0,tag:F.tag,payload:F.payload,callback:null,next:null});e:{var Te=i,We=F;ae=s;var Rt=f;switch(We.tag){case 1:if(Te=We.payload,typeof Te=="function"){me=Te.call(Rt,me,ae);break e}me=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=We.payload,ae=typeof Te=="function"?Te.call(Rt,me,ae):Te,ae==null)break e;me=v({},me,ae);break e;case 2:So=!0}}ae=F.callback,ae!==null&&(i.flags|=64,se&&(i.flags|=8192),se=y.callbacks,se===null?y.callbacks=[ae]:se.push(ae))}else se={lane:ae,tag:F.tag,payload:F.payload,callback:F.callback,next:null},ce===null?(re=ce=se,X=me):ce=ce.next=se,D|=ae;if(F=F.next,F===null){if(F=y.shared.pending,F===null)break;se=F,F=se.next,se.next=null,y.lastBaseUpdate=se,y.shared.pending=null}}while(!0);ce===null&&(X=me),y.baseState=X,y.firstBaseUpdate=re,y.lastBaseUpdate=ce,w===null&&(y.shared.lanes=0),Do|=D,i.lanes=D,i.memoizedState=me}}function Ab(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function Db(i,s){var f=i.callbacks;if(f!==null)for(i.callbacks=null,i=0;i<f.length;i++)Ab(f[i],s)}var ps=M(null),Nc=M(0);function kb(i,s){i=Ka,Z(Nc,i),Z(ps,s),Ka=i|s.baseLanes}function ip(){Z(Nc,Ka),Z(ps,ps.current)}function sp(){Ka=Nc.current,K(ps),K(Nc)}var hr=M(null),Fr=null;function Ro(i){var s=i.alternate;Z(Qt,Qt.current&1),Z(hr,i),Fr===null&&(s===null||ps.current!==null||s.memoizedState!==null)&&(Fr=i)}function up(i){Z(Qt,Qt.current),Z(hr,i),Fr===null&&(Fr=i)}function Nb(i){i.tag===22?(Z(Qt,Qt.current),Z(hr,i),Fr===null&&(Fr=i)):_o()}function _o(){Z(Qt,Qt.current),Z(hr,hr.current)}function pr(i){K(hr),Fr===i&&(Fr=null),K(Qt)}var Qt=M(0);function Mc(i){for(var s=i;s!==null;){if(s.tag===13){var f=s.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||pv(f)||vv(f)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ua=0,$e=null,Ct=null,an=null,Oc=!1,vs=!1,vi=!1,Ic=0,Iu=0,ms=null,$T=0;function Gt(){throw Error(r(321))}function lp(i,s){if(s===null)return!1;for(var f=0;f<s.length&&f<i.length;f++)if(!fr(i[f],s[f]))return!1;return!0}function cp(i,s,f,p,y,w){return Ua=w,$e=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,P.H=i===null||i.memoizedState===null?p1:Rp,vi=!1,w=f(p,y),vi=!1,vs&&(w=Ob(s,f,p,y)),Mb(i),w}function Mb(i){P.H=Pu;var s=Ct!==null&&Ct.next!==null;if(Ua=0,an=Ct=$e=null,Oc=!1,Iu=0,ms=null,s)throw Error(r(300));i===null||on||(i=i.dependencies,i!==null&&Ec(i)&&(on=!0))}function Ob(i,s,f,p){$e=i;var y=0;do{if(vs&&(ms=null),Iu=0,vs=!1,25<=y)throw Error(r(301));if(y+=1,an=Ct=null,i.updateQueue!=null){var w=i.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}P.H=v1,w=s(f,p)}while(vs);return w}function KT(){var i=P.H,s=i.useState()[0];return s=typeof s.then=="function"?Bu(s):s,i=i.useState()[0],(Ct!==null?Ct.memoizedState:null)!==i&&($e.flags|=1024),s}function fp(){var i=Ic!==0;return Ic=0,i}function dp(i,s,f){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~f}function hp(i){if(Oc){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Oc=!1}Ua=0,an=Ct=$e=null,vs=!1,Iu=Ic=0,ms=null}function Kn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?$e.memoizedState=an=i:an=an.next=i,an}function Zt(){if(Ct===null){var i=$e.alternate;i=i!==null?i.memoizedState:null}else i=Ct.next;var s=an===null?$e.memoizedState:an.next;if(s!==null)an=s,Ct=i;else{if(i===null)throw $e.alternate===null?Error(r(467)):Error(r(310));Ct=i,i={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},an===null?$e.memoizedState=an=i:an=an.next=i}return an}function Bc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Bu(i){var s=Iu;return Iu+=1,ms===null&&(ms=[]),i=Cb(ms,i,s),s=$e,(an===null?s.memoizedState:an.next)===null&&(s=s.alternate,P.H=s===null||s.memoizedState===null?p1:Rp),i}function Fc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Bu(i);if(i.$$typeof===R)return Tn(i)}throw Error(r(438,String(i)))}function pp(i){var s=null,f=$e.updateQueue;if(f!==null&&(s=f.memoCache),s==null){var p=$e.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(s={data:p.data.map(function(y){return y.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),f===null&&(f=Bc(),$e.updateQueue=f),f.memoCache=s,f=s.data[s.index],f===void 0)for(f=s.data[s.index]=Array(i),p=0;p<i;p++)f[p]=B;return s.index++,f}function Wa(i,s){return typeof s=="function"?s(i):s}function Pc(i){var s=Zt();return vp(s,Ct,i)}function vp(i,s,f){var p=i.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=f;var y=i.baseQueue,w=p.pending;if(w!==null){if(y!==null){var D=y.next;y.next=w.next,w.next=D}s.baseQueue=y=w,p.pending=null}if(w=i.baseState,y===null)i.memoizedState=w;else{s=y.next;var F=D=null,X=null,re=s,ce=!1;do{var me=re.lane&-536870913;if(me!==re.lane?(rt&me)===me:(Ua&me)===me){var ae=re.revertLane;if(ae===0)X!==null&&(X=X.next={lane:0,revertLane:0,gesture:null,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),me===cs&&(ce=!0);else if((Ua&ae)===ae){re=re.next,ae===cs&&(ce=!0);continue}else me={lane:0,revertLane:re.revertLane,gesture:null,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},X===null?(F=X=me,D=w):X=X.next=me,$e.lanes|=ae,Do|=ae;me=re.action,vi&&f(w,me),w=re.hasEagerState?re.eagerState:f(w,me)}else ae={lane:me,revertLane:re.revertLane,gesture:re.gesture,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},X===null?(F=X=ae,D=w):X=X.next=ae,$e.lanes|=me,Do|=me;re=re.next}while(re!==null&&re!==s);if(X===null?D=w:X.next=F,!fr(w,i.memoizedState)&&(on=!0,ce&&(f=fs,f!==null)))throw f;i.memoizedState=w,i.baseState=D,i.baseQueue=X,p.lastRenderedState=w}return y===null&&(p.lanes=0),[i.memoizedState,p.dispatch]}function mp(i){var s=Zt(),f=s.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=i;var p=f.dispatch,y=f.pending,w=s.memoizedState;if(y!==null){f.pending=null;var D=y=y.next;do w=i(w,D.action),D=D.next;while(D!==y);fr(w,s.memoizedState)||(on=!0),s.memoizedState=w,s.baseQueue===null&&(s.baseState=w),f.lastRenderedState=w}return[w,p]}function Ib(i,s,f){var p=$e,y=Zt(),w=ot;if(w){if(f===void 0)throw Error(r(407));f=f()}else f=s();var D=!fr((Ct||y).memoizedState,f);if(D&&(y.memoizedState=f,on=!0),y=y.queue,bp(Pb.bind(null,p,y,i),[i]),y.getSnapshot!==s||D||an!==null&&an.memoizedState.tag&1){if(p.flags|=2048,gs(9,{destroy:void 0},Fb.bind(null,p,y,f,s),null),Dt===null)throw Error(r(349));w||(Ua&127)!==0||Bb(p,s,f)}return f}function Bb(i,s,f){i.flags|=16384,i={getSnapshot:s,value:f},s=$e.updateQueue,s===null?(s=Bc(),$e.updateQueue=s,s.stores=[i]):(f=s.stores,f===null?s.stores=[i]:f.push(i))}function Fb(i,s,f,p){s.value=f,s.getSnapshot=p,Lb(s)&&zb(i)}function Pb(i,s,f){return f(function(){Lb(s)&&zb(i)})}function Lb(i){var s=i.getSnapshot;i=i.value;try{var f=s();return!fr(i,f)}catch{return!0}}function zb(i){var s=ii(i,2);s!==null&&nr(s,i,2)}function gp(i){var s=Kn();if(typeof i=="function"){var f=i;if(i=f(),vi){Xn(!0);try{f()}finally{Xn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:i},s}function Ub(i,s,f,p){return i.baseState=f,vp(i,Ct,typeof p=="function"?p:Wa)}function XT(i,s,f,p,y){if(Uc(i))throw Error(r(485));if(i=s.action,i!==null){var w={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){w.listeners.push(D)}};P.T!==null?f(!0):w.isTransition=!1,p(w),f=s.pending,f===null?(w.next=s.pending=w,Wb(s,w)):(w.next=f.next,s.pending=f.next=w)}}function Wb(i,s){var f=s.action,p=s.payload,y=i.state;if(s.isTransition){var w=P.T,D={};P.T=D;try{var F=f(y,p),X=P.S;X!==null&&X(D,F),Hb(i,s,F)}catch(re){yp(i,s,re)}finally{w!==null&&D.types!==null&&(w.types=D.types),P.T=w}}else try{w=f(y,p),Hb(i,s,w)}catch(re){yp(i,s,re)}}function Hb(i,s,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(p){Vb(i,s,p)},function(p){return yp(i,s,p)}):Vb(i,s,f)}function Vb(i,s,f){s.status="fulfilled",s.value=f,jb(s),i.state=f,s=i.pending,s!==null&&(f=s.next,f===s?i.pending=null:(f=f.next,s.next=f,Wb(i,f)))}function yp(i,s,f){var p=i.pending;if(i.pending=null,p!==null){p=p.next;do s.status="rejected",s.reason=f,jb(s),s=s.next;while(s!==p)}i.action=null}function jb(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function Gb(i,s){return s}function qb(i,s){if(ot){var f=Dt.formState;if(f!==null){e:{var p=$e;if(ot){if(Mt){t:{for(var y=Mt,w=Br;y.nodeType!==8;){if(!w){y=null;break t}if(y=Pr(y.nextSibling),y===null){y=null;break t}}w=y.data,y=w==="F!"||w==="F"?y:null}if(y){Mt=Pr(y.nextSibling),p=y.data==="F!";break e}}xo(p)}p=!1}p&&(s=f[0])}}return f=Kn(),f.memoizedState=f.baseState=s,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gb,lastRenderedState:s},f.queue=p,f=f1.bind(null,$e,p),p.dispatch=f,p=gp(!1),w=Ep.bind(null,$e,!1,p.queue),p=Kn(),y={state:s,dispatch:null,action:i,pending:null},p.queue=y,f=XT.bind(null,$e,y,w,f),y.dispatch=f,p.memoizedState=i,[s,f,!1]}function $b(i){var s=Zt();return Kb(s,Ct,i)}function Kb(i,s,f){if(s=vp(i,s,Gb)[0],i=Pc(Wa)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var p=Bu(s)}catch(D){throw D===ds?Tc:D}else p=s;s=Zt();var y=s.queue,w=y.dispatch;return f!==s.memoizedState&&($e.flags|=2048,gs(9,{destroy:void 0},YT.bind(null,y,f),null)),[p,w,i]}function YT(i,s){i.action=s}function Xb(i){var s=Zt(),f=Ct;if(f!==null)return Kb(s,f,i);Zt(),s=s.memoizedState,f=Zt();var p=f.queue.dispatch;return f.memoizedState=i,[s,p,!1]}function gs(i,s,f,p){return i={tag:i,create:f,deps:p,inst:s,next:null},s=$e.updateQueue,s===null&&(s=Bc(),$e.updateQueue=s),f=s.lastEffect,f===null?s.lastEffect=i.next=i:(p=f.next,f.next=i,i.next=p,s.lastEffect=i),i}function Yb(){return Zt().memoizedState}function Lc(i,s,f,p){var y=Kn();$e.flags|=i,y.memoizedState=gs(1|s,{destroy:void 0},f,p===void 0?null:p)}function zc(i,s,f,p){var y=Zt();p=p===void 0?null:p;var w=y.memoizedState.inst;Ct!==null&&p!==null&&lp(p,Ct.memoizedState.deps)?y.memoizedState=gs(s,w,f,p):($e.flags|=i,y.memoizedState=gs(1|s,w,f,p))}function Qb(i,s){Lc(8390656,8,i,s)}function bp(i,s){zc(2048,8,i,s)}function QT(i){$e.flags|=4;var s=$e.updateQueue;if(s===null)s=Bc(),$e.updateQueue=s,s.events=[i];else{var f=s.events;f===null?s.events=[i]:f.push(i)}}function Zb(i){var s=Zt().memoizedState;return QT({ref:s,nextImpl:i}),function(){if((ft&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function Jb(i,s){return zc(4,2,i,s)}function e1(i,s){return zc(4,4,i,s)}function t1(i,s){if(typeof s=="function"){i=i();var f=s(i);return function(){typeof f=="function"?f():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function n1(i,s,f){f=f!=null?f.concat([i]):null,zc(4,4,t1.bind(null,s,i),f)}function xp(){}function r1(i,s){var f=Zt();s=s===void 0?null:s;var p=f.memoizedState;return s!==null&&lp(s,p[1])?p[0]:(f.memoizedState=[i,s],i)}function a1(i,s){var f=Zt();s=s===void 0?null:s;var p=f.memoizedState;if(s!==null&&lp(s,p[1]))return p[0];if(p=i(),vi){Xn(!0);try{i()}finally{Xn(!1)}}return f.memoizedState=[p,s],p}function wp(i,s,f){return f===void 0||(Ua&1073741824)!==0&&(rt&261930)===0?i.memoizedState=s:(i.memoizedState=f,i=ox(),$e.lanes|=i,Do|=i,f)}function o1(i,s,f,p){return fr(f,s)?f:ps.current!==null?(i=wp(i,f,p),fr(i,s)||(on=!0),i):(Ua&42)===0||(Ua&1073741824)!==0&&(rt&261930)===0?(on=!0,i.memoizedState=f):(i=ox(),$e.lanes|=i,Do|=i,s)}function i1(i,s,f,p,y){var w=$.p;$.p=w!==0&&8>w?w:8;var D=P.T,F={};P.T=F,Ep(i,!1,s,f);try{var X=y(),re=P.S;if(re!==null&&re(F,X),X!==null&&typeof X=="object"&&typeof X.then=="function"){var ce=qT(X,p);Fu(i,s,ce,gr(i))}else Fu(i,s,p,gr(i))}catch(me){Fu(i,s,{then:function(){},status:"rejected",reason:me},gr())}finally{$.p=w,D!==null&&F.types!==null&&(D.types=F.types),P.T=D}}function ZT(){}function Sp(i,s,f,p){if(i.tag!==5)throw Error(r(476));var y=s1(i).queue;i1(i,y,s,Q,f===null?ZT:function(){return u1(i),f(p)})}function s1(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:Q},next:null};var f={};return s.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:f},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function u1(i){var s=s1(i);s.next===null&&(s=i.alternate.memoizedState),Fu(i,s.next.queue,{},gr())}function Cp(){return Tn(Ju)}function l1(){return Zt().memoizedState}function c1(){return Zt().memoizedState}function JT(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var f=gr();i=Co(f);var p=Eo(s,i,f);p!==null&&(nr(p,s,f),Nu(p,s,f)),s={cache:Zh()},i.payload=s;return}s=s.return}}function eA(i,s,f){var p=gr();f={lane:p,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Uc(i)?d1(s,f):(f=Wh(i,s,f,p),f!==null&&(nr(f,i,p),h1(f,s,p)))}function f1(i,s,f){var p=gr();Fu(i,s,f,p)}function Fu(i,s,f,p){var y={lane:p,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(Uc(i))d1(s,y);else{var w=i.alternate;if(i.lanes===0&&(w===null||w.lanes===0)&&(w=s.lastRenderedReducer,w!==null))try{var D=s.lastRenderedState,F=w(D,f);if(y.hasEagerState=!0,y.eagerState=F,fr(F,D))return xc(i,s,y,0),Dt===null&&bc(),!1}catch{}if(f=Wh(i,s,y,p),f!==null)return nr(f,i,p),h1(f,s,p),!0}return!1}function Ep(i,s,f,p){if(p={lane:2,revertLane:nv(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Uc(i)){if(s)throw Error(r(479))}else s=Wh(i,f,p,2),s!==null&&nr(s,i,2)}function Uc(i){var s=i.alternate;return i===$e||s!==null&&s===$e}function d1(i,s){vs=Oc=!0;var f=i.pending;f===null?s.next=s:(s.next=f.next,f.next=s),i.pending=s}function h1(i,s,f){if((f&4194048)!==0){var p=s.lanes;p&=i.pendingLanes,f|=p,s.lanes=f,y0(i,f)}}var Pu={readContext:Tn,use:Fc,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useLayoutEffect:Gt,useInsertionEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useSyncExternalStore:Gt,useId:Gt,useHostTransitionStatus:Gt,useFormState:Gt,useActionState:Gt,useOptimistic:Gt,useMemoCache:Gt,useCacheRefresh:Gt};Pu.useEffectEvent=Gt;var p1={readContext:Tn,use:Fc,useCallback:function(i,s){return Kn().memoizedState=[i,s===void 0?null:s],i},useContext:Tn,useEffect:Qb,useImperativeHandle:function(i,s,f){f=f!=null?f.concat([i]):null,Lc(4194308,4,t1.bind(null,s,i),f)},useLayoutEffect:function(i,s){return Lc(4194308,4,i,s)},useInsertionEffect:function(i,s){Lc(4,2,i,s)},useMemo:function(i,s){var f=Kn();s=s===void 0?null:s;var p=i();if(vi){Xn(!0);try{i()}finally{Xn(!1)}}return f.memoizedState=[p,s],p},useReducer:function(i,s,f){var p=Kn();if(f!==void 0){var y=f(s);if(vi){Xn(!0);try{f(s)}finally{Xn(!1)}}}else y=s;return p.memoizedState=p.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},p.queue=i,i=i.dispatch=eA.bind(null,$e,i),[p.memoizedState,i]},useRef:function(i){var s=Kn();return i={current:i},s.memoizedState=i},useState:function(i){i=gp(i);var s=i.queue,f=f1.bind(null,$e,s);return s.dispatch=f,[i.memoizedState,f]},useDebugValue:xp,useDeferredValue:function(i,s){var f=Kn();return wp(f,i,s)},useTransition:function(){var i=gp(!1);return i=i1.bind(null,$e,i.queue,!0,!1),Kn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,f){var p=$e,y=Kn();if(ot){if(f===void 0)throw Error(r(407));f=f()}else{if(f=s(),Dt===null)throw Error(r(349));(rt&127)!==0||Bb(p,s,f)}y.memoizedState=f;var w={value:f,getSnapshot:s};return y.queue=w,Qb(Pb.bind(null,p,w,i),[i]),p.flags|=2048,gs(9,{destroy:void 0},Fb.bind(null,p,w,f,s),null),f},useId:function(){var i=Kn(),s=Dt.identifierPrefix;if(ot){var f=ua,p=sa;f=(p&~(1<<32-Fn(p)-1)).toString(32)+f,s="_"+s+"R_"+f,f=Ic++,0<f&&(s+="H"+f.toString(32)),s+="_"}else f=$T++,s="_"+s+"r_"+f.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:Cp,useFormState:qb,useActionState:qb,useOptimistic:function(i){var s=Kn();s.memoizedState=s.baseState=i;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=f,s=Ep.bind(null,$e,!0,f),f.dispatch=s,[i,s]},useMemoCache:pp,useCacheRefresh:function(){return Kn().memoizedState=JT.bind(null,$e)},useEffectEvent:function(i){var s=Kn(),f={impl:i};return s.memoizedState=f,function(){if((ft&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},Rp={readContext:Tn,use:Fc,useCallback:r1,useContext:Tn,useEffect:bp,useImperativeHandle:n1,useInsertionEffect:Jb,useLayoutEffect:e1,useMemo:a1,useReducer:Pc,useRef:Yb,useState:function(){return Pc(Wa)},useDebugValue:xp,useDeferredValue:function(i,s){var f=Zt();return o1(f,Ct.memoizedState,i,s)},useTransition:function(){var i=Pc(Wa)[0],s=Zt().memoizedState;return[typeof i=="boolean"?i:Bu(i),s]},useSyncExternalStore:Ib,useId:l1,useHostTransitionStatus:Cp,useFormState:$b,useActionState:$b,useOptimistic:function(i,s){var f=Zt();return Ub(f,Ct,i,s)},useMemoCache:pp,useCacheRefresh:c1};Rp.useEffectEvent=Zb;var v1={readContext:Tn,use:Fc,useCallback:r1,useContext:Tn,useEffect:bp,useImperativeHandle:n1,useInsertionEffect:Jb,useLayoutEffect:e1,useMemo:a1,useReducer:mp,useRef:Yb,useState:function(){return mp(Wa)},useDebugValue:xp,useDeferredValue:function(i,s){var f=Zt();return Ct===null?wp(f,i,s):o1(f,Ct.memoizedState,i,s)},useTransition:function(){var i=mp(Wa)[0],s=Zt().memoizedState;return[typeof i=="boolean"?i:Bu(i),s]},useSyncExternalStore:Ib,useId:l1,useHostTransitionStatus:Cp,useFormState:Xb,useActionState:Xb,useOptimistic:function(i,s){var f=Zt();return Ct!==null?Ub(f,Ct,i,s):(f.baseState=i,[i,f.queue.dispatch])},useMemoCache:pp,useCacheRefresh:c1};v1.useEffectEvent=Zb;function _p(i,s,f,p){s=i.memoizedState,f=f(p,s),f=f==null?s:v({},s,f),i.memoizedState=f,i.lanes===0&&(i.updateQueue.baseState=f)}var Tp={enqueueSetState:function(i,s,f){i=i._reactInternals;var p=gr(),y=Co(p);y.payload=s,f!=null&&(y.callback=f),s=Eo(i,y,p),s!==null&&(nr(s,i,p),Nu(s,i,p))},enqueueReplaceState:function(i,s,f){i=i._reactInternals;var p=gr(),y=Co(p);y.tag=1,y.payload=s,f!=null&&(y.callback=f),s=Eo(i,y,p),s!==null&&(nr(s,i,p),Nu(s,i,p))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var f=gr(),p=Co(f);p.tag=2,s!=null&&(p.callback=s),s=Eo(i,p,f),s!==null&&(nr(s,i,f),Nu(s,i,f))}};function m1(i,s,f,p,y,w,D){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,w,D):s.prototype&&s.prototype.isPureReactComponent?!Cu(f,p)||!Cu(y,w):!0}function g1(i,s,f,p){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(f,p),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(f,p),s.state!==i&&Tp.enqueueReplaceState(s,s.state,null)}function mi(i,s){var f=s;if("ref"in s){f={};for(var p in s)p!=="ref"&&(f[p]=s[p])}if(i=i.defaultProps){f===s&&(f=v({},f));for(var y in i)f[y]===void 0&&(f[y]=i[y])}return f}function y1(i){yc(i)}function b1(i){console.error(i)}function x1(i){yc(i)}function Wc(i,s){try{var f=i.onUncaughtError;f(s.value,{componentStack:s.stack})}catch(p){setTimeout(function(){throw p})}}function w1(i,s,f){try{var p=i.onCaughtError;p(f.value,{componentStack:f.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Ap(i,s,f){return f=Co(f),f.tag=3,f.payload={element:null},f.callback=function(){Wc(i,s)},f}function S1(i){return i=Co(i),i.tag=3,i}function C1(i,s,f,p){var y=f.type.getDerivedStateFromError;if(typeof y=="function"){var w=p.value;i.payload=function(){return y(w)},i.callback=function(){w1(s,f,p)}}var D=f.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(i.callback=function(){w1(s,f,p),typeof y!="function"&&(ko===null?ko=new Set([this]):ko.add(this));var F=p.stack;this.componentDidCatch(p.value,{componentStack:F!==null?F:""})})}function tA(i,s,f,p,y){if(f.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(s=f.alternate,s!==null&&ls(s,f,y,!0),f=hr.current,f!==null){switch(f.tag){case 31:case 13:return Fr===null?Jc():f.alternate===null&&qt===0&&(qt=3),f.flags&=-257,f.flags|=65536,f.lanes=y,p===Ac?f.flags|=16384:(s=f.updateQueue,s===null?f.updateQueue=new Set([p]):s.add(p),Jp(i,p,y)),!1;case 22:return f.flags|=65536,p===Ac?f.flags|=16384:(s=f.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([p])},f.updateQueue=s):(f=s.retryQueue,f===null?s.retryQueue=new Set([p]):f.add(p)),Jp(i,p,y)),!1}throw Error(r(435,f.tag))}return Jp(i,p,y),Jc(),!1}if(ot)return s=hr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=y,p!==$h&&(i=Error(r(422),{cause:p}),_u(Mr(i,f)))):(p!==$h&&(s=Error(r(423),{cause:p}),_u(Mr(s,f))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,p=Mr(p,f),y=Ap(i.stateNode,p,y),ap(i,y),qt!==4&&(qt=2)),!1;var w=Error(r(520),{cause:p});if(w=Mr(w,f),Gu===null?Gu=[w]:Gu.push(w),qt!==4&&(qt=2),s===null)return!0;p=Mr(p,f),f=s;do{switch(f.tag){case 3:return f.flags|=65536,i=y&-y,f.lanes|=i,i=Ap(f.stateNode,p,i),ap(f,i),!1;case 1:if(s=f.type,w=f.stateNode,(f.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ko===null||!ko.has(w))))return f.flags|=65536,y&=-y,f.lanes|=y,y=S1(y),C1(y,i,f,p),ap(f,y),!1}f=f.return}while(f!==null);return!1}var Dp=Error(r(461)),on=!1;function An(i,s,f,p){s.child=i===null?Tb(s,null,f,p):pi(s,i.child,f,p)}function E1(i,s,f,p,y){f=f.render;var w=s.ref;if("ref"in p){var D={};for(var F in p)F!=="ref"&&(D[F]=p[F])}else D=p;return ci(s),p=cp(i,s,f,D,w,y),F=fp(),i!==null&&!on?(dp(i,s,y),Ha(i,s,y)):(ot&&F&&Gh(s),s.flags|=1,An(i,s,p,y),s.child)}function R1(i,s,f,p,y){if(i===null){var w=f.type;return typeof w=="function"&&!Hh(w)&&w.defaultProps===void 0&&f.compare===null?(s.tag=15,s.type=w,_1(i,s,w,p,y)):(i=Sc(f.type,null,p,s,s.mode,y),i.ref=s.ref,i.return=s,s.child=i)}if(w=i.child,!Pp(i,y)){var D=w.memoizedProps;if(f=f.compare,f=f!==null?f:Cu,f(D,p)&&i.ref===s.ref)return Ha(i,s,y)}return s.flags|=1,i=Fa(w,p),i.ref=s.ref,i.return=s,s.child=i}function _1(i,s,f,p,y){if(i!==null){var w=i.memoizedProps;if(Cu(w,p)&&i.ref===s.ref)if(on=!1,s.pendingProps=p=w,Pp(i,y))(i.flags&131072)!==0&&(on=!0);else return s.lanes=i.lanes,Ha(i,s,y)}return kp(i,s,f,p,y)}function T1(i,s,f,p){var y=p.children,w=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((s.flags&128)!==0){if(w=w!==null?w.baseLanes|f:f,i!==null){for(p=s.child=i.child,y=0;p!==null;)y=y|p.lanes|p.childLanes,p=p.sibling;p=y&~w}else p=0,s.child=null;return A1(i,s,w,f,p)}if((f&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&_c(s,w!==null?w.cachePool:null),w!==null?kb(s,w):ip(),Nb(s);else return p=s.lanes=536870912,A1(i,s,w!==null?w.baseLanes|f:f,f,p)}else w!==null?(_c(s,w.cachePool),kb(s,w),_o(),s.memoizedState=null):(i!==null&&_c(s,null),ip(),_o());return An(i,s,y,f),s.child}function Lu(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function A1(i,s,f,p,y){var w=ep();return w=w===null?null:{parent:rn._currentValue,pool:w},s.memoizedState={baseLanes:f,cachePool:w},i!==null&&_c(s,null),ip(),Nb(s),i!==null&&ls(i,s,p,!0),s.childLanes=y,null}function Hc(i,s){return s=jc({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function D1(i,s,f){return pi(s,i.child,null,f),i=Hc(s,s.pendingProps),i.flags|=2,pr(s),s.memoizedState=null,i}function nA(i,s,f){var p=s.pendingProps,y=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(ot){if(p.mode==="hidden")return i=Hc(s,p),s.lanes=536870912,Lu(null,i);if(up(s),(i=Mt)?(i=Wx(i,Br),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:yo!==null?{id:sa,overflow:ua}:null,retryLane:536870912,hydrationErrors:null},f=db(i),f.return=s,s.child=f,_n=s,Mt=null)):i=null,i===null)throw xo(s);return s.lanes=536870912,null}return Hc(s,p)}var w=i.memoizedState;if(w!==null){var D=w.dehydrated;if(up(s),y)if(s.flags&256)s.flags&=-257,s=D1(i,s,f);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(r(558));else if(on||ls(i,s,f,!1),y=(f&i.childLanes)!==0,on||y){if(p=Dt,p!==null&&(D=b0(p,f),D!==0&&D!==w.retryLane))throw w.retryLane=D,ii(i,D),nr(p,i,D),Dp;Jc(),s=D1(i,s,f)}else i=w.treeContext,Mt=Pr(D.nextSibling),_n=s,ot=!0,bo=null,Br=!1,i!==null&&vb(s,i),s=Hc(s,p),s.flags|=4096;return s}return i=Fa(i.child,{mode:p.mode,children:p.children}),i.ref=s.ref,s.child=i,i.return=s,i}function Vc(i,s){var f=s.ref;if(f===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(i===null||i.ref!==f)&&(s.flags|=4194816)}}function kp(i,s,f,p,y){return ci(s),f=cp(i,s,f,p,void 0,y),p=fp(),i!==null&&!on?(dp(i,s,y),Ha(i,s,y)):(ot&&p&&Gh(s),s.flags|=1,An(i,s,f,y),s.child)}function k1(i,s,f,p,y,w){return ci(s),s.updateQueue=null,f=Ob(s,p,f,y),Mb(i),p=fp(),i!==null&&!on?(dp(i,s,w),Ha(i,s,w)):(ot&&p&&Gh(s),s.flags|=1,An(i,s,f,w),s.child)}function N1(i,s,f,p,y){if(ci(s),s.stateNode===null){var w=os,D=f.contextType;typeof D=="object"&&D!==null&&(w=Tn(D)),w=new f(p,w),s.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Tp,s.stateNode=w,w._reactInternals=s,w=s.stateNode,w.props=p,w.state=s.memoizedState,w.refs={},np(s),D=f.contextType,w.context=typeof D=="object"&&D!==null?Tn(D):os,w.state=s.memoizedState,D=f.getDerivedStateFromProps,typeof D=="function"&&(_p(s,f,D,p),w.state=s.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(D=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),D!==w.state&&Tp.enqueueReplaceState(w,w.state,null),Ou(s,p,w,y),Mu(),w.state=s.memoizedState),typeof w.componentDidMount=="function"&&(s.flags|=4194308),p=!0}else if(i===null){w=s.stateNode;var F=s.memoizedProps,X=mi(f,F);w.props=X;var re=w.context,ce=f.contextType;D=os,typeof ce=="object"&&ce!==null&&(D=Tn(ce));var me=f.getDerivedStateFromProps;ce=typeof me=="function"||typeof w.getSnapshotBeforeUpdate=="function",F=s.pendingProps!==F,ce||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(F||re!==D)&&g1(s,w,p,D),So=!1;var ae=s.memoizedState;w.state=ae,Ou(s,p,w,y),Mu(),re=s.memoizedState,F||ae!==re||So?(typeof me=="function"&&(_p(s,f,me,p),re=s.memoizedState),(X=So||m1(s,f,X,p,ae,re,D))?(ce||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=p,s.memoizedState=re),w.props=p,w.state=re,w.context=D,p=X):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),p=!1)}else{w=s.stateNode,rp(i,s),D=s.memoizedProps,ce=mi(f,D),w.props=ce,me=s.pendingProps,ae=w.context,re=f.contextType,X=os,typeof re=="object"&&re!==null&&(X=Tn(re)),F=f.getDerivedStateFromProps,(re=typeof F=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(D!==me||ae!==X)&&g1(s,w,p,X),So=!1,ae=s.memoizedState,w.state=ae,Ou(s,p,w,y),Mu();var se=s.memoizedState;D!==me||ae!==se||So||i!==null&&i.dependencies!==null&&Ec(i.dependencies)?(typeof F=="function"&&(_p(s,f,F,p),se=s.memoizedState),(ce=So||m1(s,f,ce,p,ae,se,X)||i!==null&&i.dependencies!==null&&Ec(i.dependencies))?(re||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(p,se,X),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(p,se,X)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||D===i.memoizedProps&&ae===i.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&ae===i.memoizedState||(s.flags|=1024),s.memoizedProps=p,s.memoizedState=se),w.props=p,w.state=se,w.context=X,p=ce):(typeof w.componentDidUpdate!="function"||D===i.memoizedProps&&ae===i.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&ae===i.memoizedState||(s.flags|=1024),p=!1)}return w=p,Vc(i,s),p=(s.flags&128)!==0,w||p?(w=s.stateNode,f=p&&typeof f.getDerivedStateFromError!="function"?null:w.render(),s.flags|=1,i!==null&&p?(s.child=pi(s,i.child,null,y),s.child=pi(s,null,f,y)):An(i,s,f,y),s.memoizedState=w.state,i=s.child):i=Ha(i,s,y),i}function M1(i,s,f,p){return ui(),s.flags|=256,An(i,s,f,p),s.child}var Np={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mp(i){return{baseLanes:i,cachePool:wb()}}function Op(i,s,f){return i=i!==null?i.childLanes&~f:0,s&&(i|=mr),i}function O1(i,s,f){var p=s.pendingProps,y=!1,w=(s.flags&128)!==0,D;if((D=w)||(D=i!==null&&i.memoizedState===null?!1:(Qt.current&2)!==0),D&&(y=!0,s.flags&=-129),D=(s.flags&32)!==0,s.flags&=-33,i===null){if(ot){if(y?Ro(s):_o(),(i=Mt)?(i=Wx(i,Br),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:yo!==null?{id:sa,overflow:ua}:null,retryLane:536870912,hydrationErrors:null},f=db(i),f.return=s,s.child=f,_n=s,Mt=null)):i=null,i===null)throw xo(s);return vv(i)?s.lanes=32:s.lanes=536870912,null}var F=p.children;return p=p.fallback,y?(_o(),y=s.mode,F=jc({mode:"hidden",children:F},y),p=si(p,y,f,null),F.return=s,p.return=s,F.sibling=p,s.child=F,p=s.child,p.memoizedState=Mp(f),p.childLanes=Op(i,D,f),s.memoizedState=Np,Lu(null,p)):(Ro(s),Ip(s,F))}var X=i.memoizedState;if(X!==null&&(F=X.dehydrated,F!==null)){if(w)s.flags&256?(Ro(s),s.flags&=-257,s=Bp(i,s,f)):s.memoizedState!==null?(_o(),s.child=i.child,s.flags|=128,s=null):(_o(),F=p.fallback,y=s.mode,p=jc({mode:"visible",children:p.children},y),F=si(F,y,f,null),F.flags|=2,p.return=s,F.return=s,p.sibling=F,s.child=p,pi(s,i.child,null,f),p=s.child,p.memoizedState=Mp(f),p.childLanes=Op(i,D,f),s.memoizedState=Np,s=Lu(null,p));else if(Ro(s),vv(F)){if(D=F.nextSibling&&F.nextSibling.dataset,D)var re=D.dgst;D=re,p=Error(r(419)),p.stack="",p.digest=D,_u({value:p,source:null,stack:null}),s=Bp(i,s,f)}else if(on||ls(i,s,f,!1),D=(f&i.childLanes)!==0,on||D){if(D=Dt,D!==null&&(p=b0(D,f),p!==0&&p!==X.retryLane))throw X.retryLane=p,ii(i,p),nr(D,i,p),Dp;pv(F)||Jc(),s=Bp(i,s,f)}else pv(F)?(s.flags|=192,s.child=i.child,s=null):(i=X.treeContext,Mt=Pr(F.nextSibling),_n=s,ot=!0,bo=null,Br=!1,i!==null&&vb(s,i),s=Ip(s,p.children),s.flags|=4096);return s}return y?(_o(),F=p.fallback,y=s.mode,X=i.child,re=X.sibling,p=Fa(X,{mode:"hidden",children:p.children}),p.subtreeFlags=X.subtreeFlags&65011712,re!==null?F=Fa(re,F):(F=si(F,y,f,null),F.flags|=2),F.return=s,p.return=s,p.sibling=F,s.child=p,Lu(null,p),p=s.child,F=i.child.memoizedState,F===null?F=Mp(f):(y=F.cachePool,y!==null?(X=rn._currentValue,y=y.parent!==X?{parent:X,pool:X}:y):y=wb(),F={baseLanes:F.baseLanes|f,cachePool:y}),p.memoizedState=F,p.childLanes=Op(i,D,f),s.memoizedState=Np,Lu(i.child,p)):(Ro(s),f=i.child,i=f.sibling,f=Fa(f,{mode:"visible",children:p.children}),f.return=s,f.sibling=null,i!==null&&(D=s.deletions,D===null?(s.deletions=[i],s.flags|=16):D.push(i)),s.child=f,s.memoizedState=null,f)}function Ip(i,s){return s=jc({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function jc(i,s){return i=dr(22,i,null,s),i.lanes=0,i}function Bp(i,s,f){return pi(s,i.child,null,f),i=Ip(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function I1(i,s,f){i.lanes|=s;var p=i.alternate;p!==null&&(p.lanes|=s),Yh(i.return,s,f)}function Fp(i,s,f,p,y,w){var D=i.memoizedState;D===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:p,tail:f,tailMode:y,treeForkCount:w}:(D.isBackwards=s,D.rendering=null,D.renderingStartTime=0,D.last=p,D.tail=f,D.tailMode=y,D.treeForkCount=w)}function B1(i,s,f){var p=s.pendingProps,y=p.revealOrder,w=p.tail;p=p.children;var D=Qt.current,F=(D&2)!==0;if(F?(D=D&1|2,s.flags|=128):D&=1,Z(Qt,D),An(i,s,p,f),p=ot?Ru:0,!F&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&I1(i,f,s);else if(i.tag===19)I1(i,f,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(f=s.child,y=null;f!==null;)i=f.alternate,i!==null&&Mc(i)===null&&(y=f),f=f.sibling;f=y,f===null?(y=s.child,s.child=null):(y=f.sibling,f.sibling=null),Fp(s,!1,y,f,w,p);break;case"backwards":case"unstable_legacy-backwards":for(f=null,y=s.child,s.child=null;y!==null;){if(i=y.alternate,i!==null&&Mc(i)===null){s.child=y;break}i=y.sibling,y.sibling=f,f=y,y=i}Fp(s,!0,f,null,w,p);break;case"together":Fp(s,!1,null,null,void 0,p);break;default:s.memoizedState=null}return s.child}function Ha(i,s,f){if(i!==null&&(s.dependencies=i.dependencies),Do|=s.lanes,(f&s.childLanes)===0)if(i!==null){if(ls(i,s,f,!1),(f&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,f=Fa(i,i.pendingProps),s.child=f,f.return=s;i.sibling!==null;)i=i.sibling,f=f.sibling=Fa(i,i.pendingProps),f.return=s;f.sibling=null}return s.child}function Pp(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Ec(i)))}function rA(i,s,f){switch(s.tag){case 3:Ce(s,s.stateNode.containerInfo),wo(s,rn,i.memoizedState.cache),ui();break;case 27:case 5:be(s);break;case 4:Ce(s,s.stateNode.containerInfo);break;case 10:wo(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,up(s),null;break;case 13:var p=s.memoizedState;if(p!==null)return p.dehydrated!==null?(Ro(s),s.flags|=128,null):(f&s.child.childLanes)!==0?O1(i,s,f):(Ro(s),i=Ha(i,s,f),i!==null?i.sibling:null);Ro(s);break;case 19:var y=(i.flags&128)!==0;if(p=(f&s.childLanes)!==0,p||(ls(i,s,f,!1),p=(f&s.childLanes)!==0),y){if(p)return B1(i,s,f);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Z(Qt,Qt.current),p)break;return null;case 22:return s.lanes=0,T1(i,s,f,s.pendingProps);case 24:wo(s,rn,i.memoizedState.cache)}return Ha(i,s,f)}function F1(i,s,f){if(i!==null)if(i.memoizedProps!==s.pendingProps)on=!0;else{if(!Pp(i,f)&&(s.flags&128)===0)return on=!1,rA(i,s,f);on=(i.flags&131072)!==0}else on=!1,ot&&(s.flags&1048576)!==0&&pb(s,Ru,s.index);switch(s.lanes=0,s.tag){case 16:e:{var p=s.pendingProps;if(i=di(s.elementType),s.type=i,typeof i=="function")Hh(i)?(p=mi(i,p),s.tag=1,s=N1(null,s,i,p,f)):(s.tag=0,s=kp(null,s,i,p,f));else{if(i!=null){var y=i.$$typeof;if(y===E){s.tag=11,s=E1(null,s,i,p,f);break e}else if(y===N){s.tag=14,s=R1(null,s,i,p,f);break e}}throw s=V(i)||i,Error(r(306,s,""))}}return s;case 0:return kp(i,s,s.type,s.pendingProps,f);case 1:return p=s.type,y=mi(p,s.pendingProps),N1(i,s,p,y,f);case 3:e:{if(Ce(s,s.stateNode.containerInfo),i===null)throw Error(r(387));p=s.pendingProps;var w=s.memoizedState;y=w.element,rp(i,s),Ou(s,p,null,f);var D=s.memoizedState;if(p=D.cache,wo(s,rn,p),p!==w.cache&&Qh(s,[rn],f,!0),Mu(),p=D.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:D.cache},s.updateQueue.baseState=w,s.memoizedState=w,s.flags&256){s=M1(i,s,p,f);break e}else if(p!==y){y=Mr(Error(r(424)),s),_u(y),s=M1(i,s,p,f);break e}else for(i=s.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,Mt=Pr(i.firstChild),_n=s,ot=!0,bo=null,Br=!0,f=Tb(s,null,p,f),s.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(ui(),p===y){s=Ha(i,s,f);break e}An(i,s,p,f)}s=s.child}return s;case 26:return Vc(i,s),i===null?(f=$x(s.type,null,s.pendingProps,null))?s.memoizedState=f:ot||(f=s.type,i=s.pendingProps,p=sf(ge.current).createElement(f),p[Rn]=s,p[Yn]=i,Dn(p,f,i),bn(p),s.stateNode=p):s.memoizedState=$x(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return be(s),i===null&&ot&&(p=s.stateNode=jx(s.type,s.pendingProps,ge.current),_n=s,Br=!0,y=Mt,Io(s.type)?(mv=y,Mt=Pr(p.firstChild)):Mt=y),An(i,s,s.pendingProps.children,f),Vc(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&ot&&((y=p=Mt)&&(p=OA(p,s.type,s.pendingProps,Br),p!==null?(s.stateNode=p,_n=s,Mt=Pr(p.firstChild),Br=!1,y=!0):y=!1),y||xo(s)),be(s),y=s.type,w=s.pendingProps,D=i!==null?i.memoizedProps:null,p=w.children,fv(y,w)?p=null:D!==null&&fv(y,D)&&(s.flags|=32),s.memoizedState!==null&&(y=cp(i,s,KT,null,null,f),Ju._currentValue=y),Vc(i,s),An(i,s,p,f),s.child;case 6:return i===null&&ot&&((i=f=Mt)&&(f=IA(f,s.pendingProps,Br),f!==null?(s.stateNode=f,_n=s,Mt=null,i=!0):i=!1),i||xo(s)),null;case 13:return O1(i,s,f);case 4:return Ce(s,s.stateNode.containerInfo),p=s.pendingProps,i===null?s.child=pi(s,null,p,f):An(i,s,p,f),s.child;case 11:return E1(i,s,s.type,s.pendingProps,f);case 7:return An(i,s,s.pendingProps,f),s.child;case 8:return An(i,s,s.pendingProps.children,f),s.child;case 12:return An(i,s,s.pendingProps.children,f),s.child;case 10:return p=s.pendingProps,wo(s,s.type,p.value),An(i,s,p.children,f),s.child;case 9:return y=s.type._context,p=s.pendingProps.children,ci(s),y=Tn(y),p=p(y),s.flags|=1,An(i,s,p,f),s.child;case 14:return R1(i,s,s.type,s.pendingProps,f);case 15:return _1(i,s,s.type,s.pendingProps,f);case 19:return B1(i,s,f);case 31:return nA(i,s,f);case 22:return T1(i,s,f,s.pendingProps);case 24:return ci(s),p=Tn(rn),i===null?(y=ep(),y===null&&(y=Dt,w=Zh(),y.pooledCache=w,w.refCount++,w!==null&&(y.pooledCacheLanes|=f),y=w),s.memoizedState={parent:p,cache:y},np(s),wo(s,rn,y)):((i.lanes&f)!==0&&(rp(i,s),Ou(s,null,null,f),Mu()),y=i.memoizedState,w=s.memoizedState,y.parent!==p?(y={parent:p,cache:p},s.memoizedState=y,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=y),wo(s,rn,p)):(p=w.cache,wo(s,rn,p),p!==y.cache&&Qh(s,[rn],f,!0))),An(i,s,s.pendingProps.children,f),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Va(i){i.flags|=4}function Lp(i,s,f,p,y){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(lx())i.flags|=8192;else throw hi=Ac,tp}else i.flags&=-16777217}function P1(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Zx(s))if(lx())i.flags|=8192;else throw hi=Ac,tp}function Gc(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?m0():536870912,i.lanes|=s,ws|=s)}function zu(i,s){if(!ot)switch(i.tailMode){case"hidden":s=i.tail;for(var f=null;s!==null;)s.alternate!==null&&(f=s),s=s.sibling;f===null?i.tail=null:f.sibling=null;break;case"collapsed":f=i.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function Ot(i){var s=i.alternate!==null&&i.alternate.child===i.child,f=0,p=0;if(s)for(var y=i.child;y!==null;)f|=y.lanes|y.childLanes,p|=y.subtreeFlags&65011712,p|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)f|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=p,i.childLanes=f,s}function aA(i,s,f){var p=s.pendingProps;switch(qh(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(s),null;case 1:return Ot(s),null;case 3:return f=s.stateNode,p=null,i!==null&&(p=i.memoizedState.cache),s.memoizedState.cache!==p&&(s.flags|=2048),za(rn),he(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(us(s)?Va(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Kh())),Ot(s),null;case 26:var y=s.type,w=s.memoizedState;return i===null?(Va(s),w!==null?(Ot(s),P1(s,w)):(Ot(s),Lp(s,y,null,p,f))):w?w!==i.memoizedState?(Va(s),Ot(s),P1(s,w)):(Ot(s),s.flags&=-16777217):(i=i.memoizedProps,i!==p&&Va(s),Ot(s),Lp(s,y,i,p,f)),null;case 27:if(we(s),f=ge.current,y=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==p&&Va(s);else{if(!p){if(s.stateNode===null)throw Error(r(166));return Ot(s),null}i=oe.current,us(s)?mb(s):(i=jx(y,p,f),s.stateNode=i,Va(s))}return Ot(s),null;case 5:if(we(s),y=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==p&&Va(s);else{if(!p){if(s.stateNode===null)throw Error(r(166));return Ot(s),null}if(w=oe.current,us(s))mb(s);else{var D=sf(ge.current);switch(w){case 1:w=D.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:w=D.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":w=D.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":w=D.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":w=D.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof p.is=="string"?D.createElement("select",{is:p.is}):D.createElement("select"),p.multiple?w.multiple=!0:p.size&&(w.size=p.size);break;default:w=typeof p.is=="string"?D.createElement(y,{is:p.is}):D.createElement(y)}}w[Rn]=s,w[Yn]=p;e:for(D=s.child;D!==null;){if(D.tag===5||D.tag===6)w.appendChild(D.stateNode);else if(D.tag!==4&&D.tag!==27&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===s)break e;for(;D.sibling===null;){if(D.return===null||D.return===s)break e;D=D.return}D.sibling.return=D.return,D=D.sibling}s.stateNode=w;e:switch(Dn(w,y,p),y){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&Va(s)}}return Ot(s),Lp(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,f),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==p&&Va(s);else{if(typeof p!="string"&&s.stateNode===null)throw Error(r(166));if(i=ge.current,us(s)){if(i=s.stateNode,f=s.memoizedProps,p=null,y=_n,y!==null)switch(y.tag){case 27:case 5:p=y.memoizedProps}i[Rn]=s,i=!!(i.nodeValue===f||p!==null&&p.suppressHydrationWarning===!0||Ox(i.nodeValue,f)),i||xo(s,!0)}else i=sf(i).createTextNode(p),i[Rn]=s,s.stateNode=i}return Ot(s),null;case 31:if(f=s.memoizedState,i===null||i.memoizedState!==null){if(p=us(s),f!==null){if(i===null){if(!p)throw Error(r(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[Rn]=s}else ui(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ot(s),i=!1}else f=Kh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),i=!0;if(!i)return s.flags&256?(pr(s),s):(pr(s),null);if((s.flags&128)!==0)throw Error(r(558))}return Ot(s),null;case 13:if(p=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=us(s),p!==null&&p.dehydrated!==null){if(i===null){if(!y)throw Error(r(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[Rn]=s}else ui(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ot(s),y=!1}else y=Kh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return s.flags&256?(pr(s),s):(pr(s),null)}return pr(s),(s.flags&128)!==0?(s.lanes=f,s):(f=p!==null,i=i!==null&&i.memoizedState!==null,f&&(p=s.child,y=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(y=p.alternate.memoizedState.cachePool.pool),w=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(w=p.memoizedState.cachePool.pool),w!==y&&(p.flags|=2048)),f!==i&&f&&(s.child.flags|=8192),Gc(s,s.updateQueue),Ot(s),null);case 4:return he(),i===null&&iv(s.stateNode.containerInfo),Ot(s),null;case 10:return za(s.type),Ot(s),null;case 19:if(K(Qt),p=s.memoizedState,p===null)return Ot(s),null;if(y=(s.flags&128)!==0,w=p.rendering,w===null)if(y)zu(p,!1);else{if(qt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(w=Mc(i),w!==null){for(s.flags|=128,zu(p,!1),i=w.updateQueue,s.updateQueue=i,Gc(s,i),s.subtreeFlags=0,i=f,f=s.child;f!==null;)fb(f,i),f=f.sibling;return Z(Qt,Qt.current&1|2),ot&&Pa(s,p.treeForkCount),s.child}i=i.sibling}p.tail!==null&&Ye()>Yc&&(s.flags|=128,y=!0,zu(p,!1),s.lanes=4194304)}else{if(!y)if(i=Mc(w),i!==null){if(s.flags|=128,y=!0,i=i.updateQueue,s.updateQueue=i,Gc(s,i),zu(p,!0),p.tail===null&&p.tailMode==="hidden"&&!w.alternate&&!ot)return Ot(s),null}else 2*Ye()-p.renderingStartTime>Yc&&f!==536870912&&(s.flags|=128,y=!0,zu(p,!1),s.lanes=4194304);p.isBackwards?(w.sibling=s.child,s.child=w):(i=p.last,i!==null?i.sibling=w:s.child=w,p.last=w)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=Ye(),i.sibling=null,f=Qt.current,Z(Qt,y?f&1|2:f&1),ot&&Pa(s,p.treeForkCount),i):(Ot(s),null);case 22:case 23:return pr(s),sp(),p=s.memoizedState!==null,i!==null?i.memoizedState!==null!==p&&(s.flags|=8192):p&&(s.flags|=8192),p?(f&536870912)!==0&&(s.flags&128)===0&&(Ot(s),s.subtreeFlags&6&&(s.flags|=8192)):Ot(s),f=s.updateQueue,f!==null&&Gc(s,f.retryQueue),f=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(f=i.memoizedState.cachePool.pool),p=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(p=s.memoizedState.cachePool.pool),p!==f&&(s.flags|=2048),i!==null&&K(fi),null;case 24:return f=null,i!==null&&(f=i.memoizedState.cache),s.memoizedState.cache!==f&&(s.flags|=2048),za(rn),Ot(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function oA(i,s){switch(qh(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return za(rn),he(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return we(s),null;case 31:if(s.memoizedState!==null){if(pr(s),s.alternate===null)throw Error(r(340));ui()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(pr(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));ui()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return K(Qt),null;case 4:return he(),null;case 10:return za(s.type),null;case 22:case 23:return pr(s),sp(),i!==null&&K(fi),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return za(rn),null;case 25:return null;default:return null}}function L1(i,s){switch(qh(s),s.tag){case 3:za(rn),he();break;case 26:case 27:case 5:we(s);break;case 4:he();break;case 31:s.memoizedState!==null&&pr(s);break;case 13:pr(s);break;case 19:K(Qt);break;case 10:za(s.type);break;case 22:case 23:pr(s),sp(),i!==null&&K(fi);break;case 24:za(rn)}}function Uu(i,s){try{var f=s.updateQueue,p=f!==null?f.lastEffect:null;if(p!==null){var y=p.next;f=y;do{if((f.tag&i)===i){p=void 0;var w=f.create,D=f.inst;p=w(),D.destroy=p}f=f.next}while(f!==y)}}catch(F){xt(s,s.return,F)}}function To(i,s,f){try{var p=s.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var w=y.next;p=w;do{if((p.tag&i)===i){var D=p.inst,F=D.destroy;if(F!==void 0){D.destroy=void 0,y=s;var X=f,re=F;try{re()}catch(ce){xt(y,X,ce)}}}p=p.next}while(p!==w)}}catch(ce){xt(s,s.return,ce)}}function z1(i){var s=i.updateQueue;if(s!==null){var f=i.stateNode;try{Db(s,f)}catch(p){xt(i,i.return,p)}}}function U1(i,s,f){f.props=mi(i.type,i.memoizedProps),f.state=i.memoizedState;try{f.componentWillUnmount()}catch(p){xt(i,s,p)}}function Wu(i,s){try{var f=i.ref;if(f!==null){switch(i.tag){case 26:case 27:case 5:var p=i.stateNode;break;case 30:p=i.stateNode;break;default:p=i.stateNode}typeof f=="function"?i.refCleanup=f(p):f.current=p}}catch(y){xt(i,s,y)}}function la(i,s){var f=i.ref,p=i.refCleanup;if(f!==null)if(typeof p=="function")try{p()}catch(y){xt(i,s,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(y){xt(i,s,y)}else f.current=null}function W1(i){var s=i.type,f=i.memoizedProps,p=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":f.autoFocus&&p.focus();break e;case"img":f.src?p.src=f.src:f.srcSet&&(p.srcset=f.srcSet)}}catch(y){xt(i,i.return,y)}}function zp(i,s,f){try{var p=i.stateNode;TA(p,i.type,f,s),p[Yn]=s}catch(y){xt(i,i.return,y)}}function H1(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Io(i.type)||i.tag===4}function Up(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||H1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Io(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Wp(i,s,f){var p=i.tag;if(p===5||p===6)i=i.stateNode,s?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(i,s):(s=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,s.appendChild(i),f=f._reactRootContainer,f!=null||s.onclick!==null||(s.onclick=Ia));else if(p!==4&&(p===27&&Io(i.type)&&(f=i.stateNode,s=null),i=i.child,i!==null))for(Wp(i,s,f),i=i.sibling;i!==null;)Wp(i,s,f),i=i.sibling}function qc(i,s,f){var p=i.tag;if(p===5||p===6)i=i.stateNode,s?f.insertBefore(i,s):f.appendChild(i);else if(p!==4&&(p===27&&Io(i.type)&&(f=i.stateNode),i=i.child,i!==null))for(qc(i,s,f),i=i.sibling;i!==null;)qc(i,s,f),i=i.sibling}function V1(i){var s=i.stateNode,f=i.memoizedProps;try{for(var p=i.type,y=s.attributes;y.length;)s.removeAttributeNode(y[0]);Dn(s,p,f),s[Rn]=i,s[Yn]=f}catch(w){xt(i,i.return,w)}}var ja=!1,sn=!1,Hp=!1,j1=typeof WeakSet=="function"?WeakSet:Set,xn=null;function iA(i,s){if(i=i.containerInfo,lv=pf,i=nb(i),Bh(i)){if("selectionStart"in i)var f={start:i.selectionStart,end:i.selectionEnd};else e:{f=(f=i.ownerDocument)&&f.defaultView||window;var p=f.getSelection&&f.getSelection();if(p&&p.rangeCount!==0){f=p.anchorNode;var y=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{f.nodeType,w.nodeType}catch{f=null;break e}var D=0,F=-1,X=-1,re=0,ce=0,me=i,ae=null;t:for(;;){for(var se;me!==f||y!==0&&me.nodeType!==3||(F=D+y),me!==w||p!==0&&me.nodeType!==3||(X=D+p),me.nodeType===3&&(D+=me.nodeValue.length),(se=me.firstChild)!==null;)ae=me,me=se;for(;;){if(me===i)break t;if(ae===f&&++re===y&&(F=D),ae===w&&++ce===p&&(X=D),(se=me.nextSibling)!==null)break;me=ae,ae=me.parentNode}me=se}f=F===-1||X===-1?null:{start:F,end:X}}else f=null}f=f||{start:0,end:0}}else f=null;for(cv={focusedElem:i,selectionRange:f},pf=!1,xn=s;xn!==null;)if(s=xn,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,xn=i;else for(;xn!==null;){switch(s=xn,w=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(f=0;f<i.length;f++)y=i[f],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&w!==null){i=void 0,f=s,y=w.memoizedProps,w=w.memoizedState,p=f.stateNode;try{var Te=mi(f.type,y);i=p.getSnapshotBeforeUpdate(Te,w),p.__reactInternalSnapshotBeforeUpdate=i}catch(We){xt(f,f.return,We)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,f=i.nodeType,f===9)hv(i);else if(f===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":hv(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,xn=i;break}xn=s.return}}function G1(i,s,f){var p=f.flags;switch(f.tag){case 0:case 11:case 15:qa(i,f),p&4&&Uu(5,f);break;case 1:if(qa(i,f),p&4)if(i=f.stateNode,s===null)try{i.componentDidMount()}catch(D){xt(f,f.return,D)}else{var y=mi(f.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(y,s,i.__reactInternalSnapshotBeforeUpdate)}catch(D){xt(f,f.return,D)}}p&64&&z1(f),p&512&&Wu(f,f.return);break;case 3:if(qa(i,f),p&64&&(i=f.updateQueue,i!==null)){if(s=null,f.child!==null)switch(f.child.tag){case 27:case 5:s=f.child.stateNode;break;case 1:s=f.child.stateNode}try{Db(i,s)}catch(D){xt(f,f.return,D)}}break;case 27:s===null&&p&4&&V1(f);case 26:case 5:qa(i,f),s===null&&p&4&&W1(f),p&512&&Wu(f,f.return);break;case 12:qa(i,f);break;case 31:qa(i,f),p&4&&K1(i,f);break;case 13:qa(i,f),p&4&&X1(i,f),p&64&&(i=f.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(f=vA.bind(null,f),BA(i,f))));break;case 22:if(p=f.memoizedState!==null||ja,!p){s=s!==null&&s.memoizedState!==null||sn,y=ja;var w=sn;ja=p,(sn=s)&&!w?$a(i,f,(f.subtreeFlags&8772)!==0):qa(i,f),ja=y,sn=w}break;case 30:break;default:qa(i,f)}}function q1(i){var s=i.alternate;s!==null&&(i.alternate=null,q1(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&yh(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Pt=null,Zn=!1;function Ga(i,s,f){for(f=f.child;f!==null;)$1(i,s,f),f=f.sibling}function $1(i,s,f){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(Bn,f)}catch{}switch(f.tag){case 26:sn||la(f,s),Ga(i,s,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:sn||la(f,s);var p=Pt,y=Zn;Io(f.type)&&(Pt=f.stateNode,Zn=!1),Ga(i,s,f),Yu(f.stateNode),Pt=p,Zn=y;break;case 5:sn||la(f,s);case 6:if(p=Pt,y=Zn,Pt=null,Ga(i,s,f),Pt=p,Zn=y,Pt!==null)if(Zn)try{(Pt.nodeType===9?Pt.body:Pt.nodeName==="HTML"?Pt.ownerDocument.body:Pt).removeChild(f.stateNode)}catch(w){xt(f,s,w)}else try{Pt.removeChild(f.stateNode)}catch(w){xt(f,s,w)}break;case 18:Pt!==null&&(Zn?(i=Pt,zx(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,f.stateNode),Ds(i)):zx(Pt,f.stateNode));break;case 4:p=Pt,y=Zn,Pt=f.stateNode.containerInfo,Zn=!0,Ga(i,s,f),Pt=p,Zn=y;break;case 0:case 11:case 14:case 15:To(2,f,s),sn||To(4,f,s),Ga(i,s,f);break;case 1:sn||(la(f,s),p=f.stateNode,typeof p.componentWillUnmount=="function"&&U1(f,s,p)),Ga(i,s,f);break;case 21:Ga(i,s,f);break;case 22:sn=(p=sn)||f.memoizedState!==null,Ga(i,s,f),sn=p;break;default:Ga(i,s,f)}}function K1(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Ds(i)}catch(f){xt(s,s.return,f)}}}function X1(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Ds(i)}catch(f){xt(s,s.return,f)}}function sA(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new j1),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new j1),s;default:throw Error(r(435,i.tag))}}function $c(i,s){var f=sA(i);s.forEach(function(p){if(!f.has(p)){f.add(p);var y=mA.bind(null,i,p);p.then(y,y)}})}function Jn(i,s){var f=s.deletions;if(f!==null)for(var p=0;p<f.length;p++){var y=f[p],w=i,D=s,F=D;e:for(;F!==null;){switch(F.tag){case 27:if(Io(F.type)){Pt=F.stateNode,Zn=!1;break e}break;case 5:Pt=F.stateNode,Zn=!1;break e;case 3:case 4:Pt=F.stateNode.containerInfo,Zn=!0;break e}F=F.return}if(Pt===null)throw Error(r(160));$1(w,D,y),Pt=null,Zn=!1,w=y.alternate,w!==null&&(w.return=null),y.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Y1(s,i),s=s.sibling}var Qr=null;function Y1(i,s){var f=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Jn(s,i),er(i),p&4&&(To(3,i,i.return),Uu(3,i),To(5,i,i.return));break;case 1:Jn(s,i),er(i),p&512&&(sn||f===null||la(f,f.return)),p&64&&ja&&(i=i.updateQueue,i!==null&&(p=i.callbacks,p!==null&&(f=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=f===null?p:f.concat(p))));break;case 26:var y=Qr;if(Jn(s,i),er(i),p&512&&(sn||f===null||la(f,f.return)),p&4){var w=f!==null?f.memoizedState:null;if(p=i.memoizedState,f===null)if(p===null)if(i.stateNode===null){e:{p=i.type,f=i.memoizedProps,y=y.ownerDocument||y;t:switch(p){case"title":w=y.getElementsByTagName("title")[0],(!w||w[pu]||w[Rn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=y.createElement(p),y.head.insertBefore(w,y.querySelector("head > title"))),Dn(w,p,f),w[Rn]=i,bn(w),p=w;break e;case"link":var D=Yx("link","href",y).get(p+(f.href||""));if(D){for(var F=0;F<D.length;F++)if(w=D[F],w.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&w.getAttribute("rel")===(f.rel==null?null:f.rel)&&w.getAttribute("title")===(f.title==null?null:f.title)&&w.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){D.splice(F,1);break t}}w=y.createElement(p),Dn(w,p,f),y.head.appendChild(w);break;case"meta":if(D=Yx("meta","content",y).get(p+(f.content||""))){for(F=0;F<D.length;F++)if(w=D[F],w.getAttribute("content")===(f.content==null?null:""+f.content)&&w.getAttribute("name")===(f.name==null?null:f.name)&&w.getAttribute("property")===(f.property==null?null:f.property)&&w.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&w.getAttribute("charset")===(f.charSet==null?null:f.charSet)){D.splice(F,1);break t}}w=y.createElement(p),Dn(w,p,f),y.head.appendChild(w);break;default:throw Error(r(468,p))}w[Rn]=i,bn(w),p=w}i.stateNode=p}else Qx(y,i.type,i.stateNode);else i.stateNode=Xx(y,p,i.memoizedProps);else w!==p?(w===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):w.count--,p===null?Qx(y,i.type,i.stateNode):Xx(y,p,i.memoizedProps)):p===null&&i.stateNode!==null&&zp(i,i.memoizedProps,f.memoizedProps)}break;case 27:Jn(s,i),er(i),p&512&&(sn||f===null||la(f,f.return)),f!==null&&p&4&&zp(i,i.memoizedProps,f.memoizedProps);break;case 5:if(Jn(s,i),er(i),p&512&&(sn||f===null||la(f,f.return)),i.flags&32){y=i.stateNode;try{Zi(y,"")}catch(Te){xt(i,i.return,Te)}}p&4&&i.stateNode!=null&&(y=i.memoizedProps,zp(i,y,f!==null?f.memoizedProps:y)),p&1024&&(Hp=!0);break;case 6:if(Jn(s,i),er(i),p&4){if(i.stateNode===null)throw Error(r(162));p=i.memoizedProps,f=i.stateNode;try{f.nodeValue=p}catch(Te){xt(i,i.return,Te)}}break;case 3:if(cf=null,y=Qr,Qr=uf(s.containerInfo),Jn(s,i),Qr=y,er(i),p&4&&f!==null&&f.memoizedState.isDehydrated)try{Ds(s.containerInfo)}catch(Te){xt(i,i.return,Te)}Hp&&(Hp=!1,Q1(i));break;case 4:p=Qr,Qr=uf(i.stateNode.containerInfo),Jn(s,i),er(i),Qr=p;break;case 12:Jn(s,i),er(i);break;case 31:Jn(s,i),er(i),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,$c(i,p)));break;case 13:Jn(s,i),er(i),i.child.flags&8192&&i.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Xc=Ye()),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,$c(i,p)));break;case 22:y=i.memoizedState!==null;var X=f!==null&&f.memoizedState!==null,re=ja,ce=sn;if(ja=re||y,sn=ce||X,Jn(s,i),sn=ce,ja=re,er(i),p&8192)e:for(s=i.stateNode,s._visibility=y?s._visibility&-2:s._visibility|1,y&&(f===null||X||ja||sn||gi(i)),f=null,s=i;;){if(s.tag===5||s.tag===26){if(f===null){X=f=s;try{if(w=X.stateNode,y)D=w.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{F=X.stateNode;var me=X.memoizedProps.style,ae=me!=null&&me.hasOwnProperty("display")?me.display:null;F.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(Te){xt(X,X.return,Te)}}}else if(s.tag===6){if(f===null){X=s;try{X.stateNode.nodeValue=y?"":X.memoizedProps}catch(Te){xt(X,X.return,Te)}}}else if(s.tag===18){if(f===null){X=s;try{var se=X.stateNode;y?Ux(se,!0):Ux(X.stateNode,!1)}catch(Te){xt(X,X.return,Te)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;f===s&&(f=null),s=s.return}f===s&&(f=null),s.sibling.return=s.return,s=s.sibling}p&4&&(p=i.updateQueue,p!==null&&(f=p.retryQueue,f!==null&&(p.retryQueue=null,$c(i,f))));break;case 19:Jn(s,i),er(i),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,$c(i,p)));break;case 30:break;case 21:break;default:Jn(s,i),er(i)}}function er(i){var s=i.flags;if(s&2){try{for(var f,p=i.return;p!==null;){if(H1(p)){f=p;break}p=p.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var y=f.stateNode,w=Up(i);qc(i,w,y);break;case 5:var D=f.stateNode;f.flags&32&&(Zi(D,""),f.flags&=-33);var F=Up(i);qc(i,F,D);break;case 3:case 4:var X=f.stateNode.containerInfo,re=Up(i);Wp(i,re,X);break;default:throw Error(r(161))}}catch(ce){xt(i,i.return,ce)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function Q1(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;Q1(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function qa(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)G1(i,s.alternate,s),s=s.sibling}function gi(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:To(4,s,s.return),gi(s);break;case 1:la(s,s.return);var f=s.stateNode;typeof f.componentWillUnmount=="function"&&U1(s,s.return,f),gi(s);break;case 27:Yu(s.stateNode);case 26:case 5:la(s,s.return),gi(s);break;case 22:s.memoizedState===null&&gi(s);break;case 30:gi(s);break;default:gi(s)}i=i.sibling}}function $a(i,s,f){for(f=f&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var p=s.alternate,y=i,w=s,D=w.flags;switch(w.tag){case 0:case 11:case 15:$a(y,w,f),Uu(4,w);break;case 1:if($a(y,w,f),p=w,y=p.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(re){xt(p,p.return,re)}if(p=w,y=p.updateQueue,y!==null){var F=p.stateNode;try{var X=y.shared.hiddenCallbacks;if(X!==null)for(y.shared.hiddenCallbacks=null,y=0;y<X.length;y++)Ab(X[y],F)}catch(re){xt(p,p.return,re)}}f&&D&64&&z1(w),Wu(w,w.return);break;case 27:V1(w);case 26:case 5:$a(y,w,f),f&&p===null&&D&4&&W1(w),Wu(w,w.return);break;case 12:$a(y,w,f);break;case 31:$a(y,w,f),f&&D&4&&K1(y,w);break;case 13:$a(y,w,f),f&&D&4&&X1(y,w);break;case 22:w.memoizedState===null&&$a(y,w,f),Wu(w,w.return);break;case 30:break;default:$a(y,w,f)}s=s.sibling}}function Vp(i,s){var f=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(f=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==f&&(i!=null&&i.refCount++,f!=null&&Tu(f))}function jp(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Tu(i))}function Zr(i,s,f,p){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Z1(i,s,f,p),s=s.sibling}function Z1(i,s,f,p){var y=s.flags;switch(s.tag){case 0:case 11:case 15:Zr(i,s,f,p),y&2048&&Uu(9,s);break;case 1:Zr(i,s,f,p);break;case 3:Zr(i,s,f,p),y&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Tu(i)));break;case 12:if(y&2048){Zr(i,s,f,p),i=s.stateNode;try{var w=s.memoizedProps,D=w.id,F=w.onPostCommit;typeof F=="function"&&F(D,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(X){xt(s,s.return,X)}}else Zr(i,s,f,p);break;case 31:Zr(i,s,f,p);break;case 13:Zr(i,s,f,p);break;case 23:break;case 22:w=s.stateNode,D=s.alternate,s.memoizedState!==null?w._visibility&2?Zr(i,s,f,p):Hu(i,s):w._visibility&2?Zr(i,s,f,p):(w._visibility|=2,ys(i,s,f,p,(s.subtreeFlags&10256)!==0||!1)),y&2048&&Vp(D,s);break;case 24:Zr(i,s,f,p),y&2048&&jp(s.alternate,s);break;default:Zr(i,s,f,p)}}function ys(i,s,f,p,y){for(y=y&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var w=i,D=s,F=f,X=p,re=D.flags;switch(D.tag){case 0:case 11:case 15:ys(w,D,F,X,y),Uu(8,D);break;case 23:break;case 22:var ce=D.stateNode;D.memoizedState!==null?ce._visibility&2?ys(w,D,F,X,y):Hu(w,D):(ce._visibility|=2,ys(w,D,F,X,y)),y&&re&2048&&Vp(D.alternate,D);break;case 24:ys(w,D,F,X,y),y&&re&2048&&jp(D.alternate,D);break;default:ys(w,D,F,X,y)}s=s.sibling}}function Hu(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var f=i,p=s,y=p.flags;switch(p.tag){case 22:Hu(f,p),y&2048&&Vp(p.alternate,p);break;case 24:Hu(f,p),y&2048&&jp(p.alternate,p);break;default:Hu(f,p)}s=s.sibling}}var Vu=8192;function bs(i,s,f){if(i.subtreeFlags&Vu)for(i=i.child;i!==null;)J1(i,s,f),i=i.sibling}function J1(i,s,f){switch(i.tag){case 26:bs(i,s,f),i.flags&Vu&&i.memoizedState!==null&&$A(f,Qr,i.memoizedState,i.memoizedProps);break;case 5:bs(i,s,f);break;case 3:case 4:var p=Qr;Qr=uf(i.stateNode.containerInfo),bs(i,s,f),Qr=p;break;case 22:i.memoizedState===null&&(p=i.alternate,p!==null&&p.memoizedState!==null?(p=Vu,Vu=16777216,bs(i,s,f),Vu=p):bs(i,s,f));break;default:bs(i,s,f)}}function ex(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function ju(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var f=0;f<s.length;f++){var p=s[f];xn=p,nx(p,i)}ex(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)tx(i),i=i.sibling}function tx(i){switch(i.tag){case 0:case 11:case 15:ju(i),i.flags&2048&&To(9,i,i.return);break;case 3:ju(i);break;case 12:ju(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,Kc(i)):ju(i);break;default:ju(i)}}function Kc(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var f=0;f<s.length;f++){var p=s[f];xn=p,nx(p,i)}ex(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:To(8,s,s.return),Kc(s);break;case 22:f=s.stateNode,f._visibility&2&&(f._visibility&=-3,Kc(s));break;default:Kc(s)}i=i.sibling}}function nx(i,s){for(;xn!==null;){var f=xn;switch(f.tag){case 0:case 11:case 15:To(8,f,s);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var p=f.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Tu(f.memoizedState.cache)}if(p=f.child,p!==null)p.return=f,xn=p;else e:for(f=i;xn!==null;){p=xn;var y=p.sibling,w=p.return;if(q1(p),p===f){xn=null;break e}if(y!==null){y.return=w,xn=y;break e}xn=w}}}var uA={getCacheForType:function(i){var s=Tn(rn),f=s.data.get(i);return f===void 0&&(f=i(),s.data.set(i,f)),f},cacheSignal:function(){return Tn(rn).controller.signal}},lA=typeof WeakMap=="function"?WeakMap:Map,ft=0,Dt=null,et=null,rt=0,bt=0,vr=null,Ao=!1,xs=!1,Gp=!1,Ka=0,qt=0,Do=0,yi=0,qp=0,mr=0,ws=0,Gu=null,tr=null,$p=!1,Xc=0,rx=0,Yc=1/0,Qc=null,ko=null,dn=0,No=null,Ss=null,Xa=0,Kp=0,Xp=null,ax=null,qu=0,Yp=null;function gr(){return(ft&2)!==0&&rt!==0?rt&-rt:P.T!==null?nv():x0()}function ox(){if(mr===0)if((rt&536870912)===0||ot){var i=ei;ei<<=1,(ei&3932160)===0&&(ei=262144),mr=i}else mr=536870912;return i=hr.current,i!==null&&(i.flags|=32),mr}function nr(i,s,f){(i===Dt&&(bt===2||bt===9)||i.cancelPendingCommit!==null)&&(Cs(i,0),Mo(i,rt,mr,!1)),hu(i,f),((ft&2)===0||i!==Dt)&&(i===Dt&&((ft&2)===0&&(yi|=f),qt===4&&Mo(i,rt,mr,!1)),ca(i))}function ix(i,s,f){if((ft&6)!==0)throw Error(r(327));var p=!f&&(s&127)===0&&(s&i.expiredLanes)===0||du(i,s),y=p?dA(i,s):Zp(i,s,!0),w=p;do{if(y===0){xs&&!p&&Mo(i,s,0,!1);break}else{if(f=i.current.alternate,w&&!cA(f)){y=Zp(i,s,!1),w=!1;continue}if(y===2){if(w=s,i.errorRecoveryDisabledLanes&w)var D=0;else D=i.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){s=D;e:{var F=i;y=Gu;var X=F.current.memoizedState.isDehydrated;if(X&&(Cs(F,D).flags|=256),D=Zp(F,D,!1),D!==2){if(Gp&&!X){F.errorRecoveryDisabledLanes|=w,yi|=w,y=4;break e}w=tr,tr=y,w!==null&&(tr===null?tr=w:tr.push.apply(tr,w))}y=D}if(w=!1,y!==2)continue}}if(y===1){Cs(i,0),Mo(i,s,0,!0);break}e:{switch(p=i,w=y,w){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Mo(p,s,mr,!Ao);break e;case 2:tr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(y=Xc+300-Ye(),10<y)){if(Mo(p,s,mr,!Ao),sc(p,0,!0)!==0)break e;Xa=s,p.timeoutHandle=Px(sx.bind(null,p,f,tr,Qc,$p,s,mr,yi,ws,Ao,w,"Throttled",-0,0),y);break e}sx(p,f,tr,Qc,$p,s,mr,yi,ws,Ao,w,null,-0,0)}}break}while(!0);ca(i)}function sx(i,s,f,p,y,w,D,F,X,re,ce,me,ae,se){if(i.timeoutHandle=-1,me=s.subtreeFlags,me&8192||(me&16785408)===16785408){me={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ia},J1(s,w,me);var Te=(w&62914560)===w?Xc-Ye():(w&4194048)===w?rx-Ye():0;if(Te=KA(me,Te),Te!==null){Xa=w,i.cancelPendingCommit=Te(vx.bind(null,i,s,w,f,p,y,D,F,X,ce,me,null,ae,se)),Mo(i,w,D,!re);return}}vx(i,s,w,f,p,y,D,F,X)}function cA(i){for(var s=i;;){var f=s.tag;if((f===0||f===11||f===15)&&s.flags&16384&&(f=s.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var p=0;p<f.length;p++){var y=f[p],w=y.getSnapshot;y=y.value;try{if(!fr(w(),y))return!1}catch{return!1}}if(f=s.child,s.subtreeFlags&16384&&f!==null)f.return=s,s=f;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Mo(i,s,f,p){s&=~qp,s&=~yi,i.suspendedLanes|=s,i.pingedLanes&=~s,p&&(i.warmLanes|=s),p=i.expirationTimes;for(var y=s;0<y;){var w=31-Fn(y),D=1<<w;p[w]=-1,y&=~D}f!==0&&g0(i,f,s)}function Zc(){return(ft&6)===0?($u(0),!1):!0}function Qp(){if(et!==null){if(bt===0)var i=et.return;else i=et,La=li=null,hp(i),hs=null,Du=0,i=et;for(;i!==null;)L1(i.alternate,i),i=i.return;et=null}}function Cs(i,s){var f=i.timeoutHandle;f!==-1&&(i.timeoutHandle=-1,kA(f)),f=i.cancelPendingCommit,f!==null&&(i.cancelPendingCommit=null,f()),Xa=0,Qp(),Dt=i,et=f=Fa(i.current,null),rt=s,bt=0,vr=null,Ao=!1,xs=du(i,s),Gp=!1,ws=mr=qp=yi=Do=qt=0,tr=Gu=null,$p=!1,(s&8)!==0&&(s|=s&32);var p=i.entangledLanes;if(p!==0)for(i=i.entanglements,p&=s;0<p;){var y=31-Fn(p),w=1<<y;s|=i[y],p&=~w}return Ka=s,bc(),f}function ux(i,s){$e=null,P.H=Pu,s===ds||s===Tc?(s=Eb(),bt=3):s===tp?(s=Eb(),bt=4):bt=s===Dp?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,vr=s,et===null&&(qt=1,Wc(i,Mr(s,i.current)))}function lx(){var i=hr.current;return i===null?!0:(rt&4194048)===rt?Fr===null:(rt&62914560)===rt||(rt&536870912)!==0?i===Fr:!1}function cx(){var i=P.H;return P.H=Pu,i===null?Pu:i}function fx(){var i=P.A;return P.A=uA,i}function Jc(){qt=4,Ao||(rt&4194048)!==rt&&hr.current!==null||(xs=!0),(Do&134217727)===0&&(yi&134217727)===0||Dt===null||Mo(Dt,rt,mr,!1)}function Zp(i,s,f){var p=ft;ft|=2;var y=cx(),w=fx();(Dt!==i||rt!==s)&&(Qc=null,Cs(i,s)),s=!1;var D=qt;e:do try{if(bt!==0&&et!==null){var F=et,X=vr;switch(bt){case 8:Qp(),D=6;break e;case 3:case 2:case 9:case 6:hr.current===null&&(s=!0);var re=bt;if(bt=0,vr=null,Es(i,F,X,re),f&&xs){D=0;break e}break;default:re=bt,bt=0,vr=null,Es(i,F,X,re)}}fA(),D=qt;break}catch(ce){ux(i,ce)}while(!0);return s&&i.shellSuspendCounter++,La=li=null,ft=p,P.H=y,P.A=w,et===null&&(Dt=null,rt=0,bc()),D}function fA(){for(;et!==null;)dx(et)}function dA(i,s){var f=ft;ft|=2;var p=cx(),y=fx();Dt!==i||rt!==s?(Qc=null,Yc=Ye()+500,Cs(i,s)):xs=du(i,s);e:do try{if(bt!==0&&et!==null){s=et;var w=vr;t:switch(bt){case 1:bt=0,vr=null,Es(i,s,w,1);break;case 2:case 9:if(Sb(w)){bt=0,vr=null,hx(s);break}s=function(){bt!==2&&bt!==9||Dt!==i||(bt=7),ca(i)},w.then(s,s);break e;case 3:bt=7;break e;case 4:bt=5;break e;case 7:Sb(w)?(bt=0,vr=null,hx(s)):(bt=0,vr=null,Es(i,s,w,7));break;case 5:var D=null;switch(et.tag){case 26:D=et.memoizedState;case 5:case 27:var F=et;if(D?Zx(D):F.stateNode.complete){bt=0,vr=null;var X=F.sibling;if(X!==null)et=X;else{var re=F.return;re!==null?(et=re,ef(re)):et=null}break t}}bt=0,vr=null,Es(i,s,w,5);break;case 6:bt=0,vr=null,Es(i,s,w,6);break;case 8:Qp(),qt=6;break e;default:throw Error(r(462))}}hA();break}catch(ce){ux(i,ce)}while(!0);return La=li=null,P.H=p,P.A=y,ft=f,et!==null?0:(Dt=null,rt=0,bc(),qt)}function hA(){for(;et!==null&&!Pe();)dx(et)}function dx(i){var s=F1(i.alternate,i,Ka);i.memoizedProps=i.pendingProps,s===null?ef(i):et=s}function hx(i){var s=i,f=s.alternate;switch(s.tag){case 15:case 0:s=k1(f,s,s.pendingProps,s.type,void 0,rt);break;case 11:s=k1(f,s,s.pendingProps,s.type.render,s.ref,rt);break;case 5:hp(s);default:L1(f,s),s=et=fb(s,Ka),s=F1(f,s,Ka)}i.memoizedProps=i.pendingProps,s===null?ef(i):et=s}function Es(i,s,f,p){La=li=null,hp(s),hs=null,Du=0;var y=s.return;try{if(tA(i,y,s,f,rt)){qt=1,Wc(i,Mr(f,i.current)),et=null;return}}catch(w){if(y!==null)throw et=y,w;qt=1,Wc(i,Mr(f,i.current)),et=null;return}s.flags&32768?(ot||p===1?i=!0:xs||(rt&536870912)!==0?i=!1:(Ao=i=!0,(p===2||p===9||p===3||p===6)&&(p=hr.current,p!==null&&p.tag===13&&(p.flags|=16384))),px(s,i)):ef(s)}function ef(i){var s=i;do{if((s.flags&32768)!==0){px(s,Ao);return}i=s.return;var f=aA(s.alternate,s,Ka);if(f!==null){et=f;return}if(s=s.sibling,s!==null){et=s;return}et=s=i}while(s!==null);qt===0&&(qt=5)}function px(i,s){do{var f=oA(i.alternate,i);if(f!==null){f.flags&=32767,et=f;return}if(f=i.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!s&&(i=i.sibling,i!==null)){et=i;return}et=i=f}while(i!==null);qt=6,et=null}function vx(i,s,f,p,y,w,D,F,X){i.cancelPendingCommit=null;do tf();while(dn!==0);if((ft&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(w=s.lanes|s.childLanes,w|=Uh,q_(i,f,w,D,F,X),i===Dt&&(et=Dt=null,rt=0),Ss=s,No=i,Xa=f,Kp=w,Xp=y,ax=p,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,gA(nn,function(){return xx(),null})):(i.callbackNode=null,i.callbackPriority=0),p=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||p){p=P.T,P.T=null,y=$.p,$.p=2,D=ft,ft|=4;try{iA(i,s,f)}finally{ft=D,$.p=y,P.T=p}}dn=1,mx(),gx(),yx()}}function mx(){if(dn===1){dn=0;var i=No,s=Ss,f=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||f){f=P.T,P.T=null;var p=$.p;$.p=2;var y=ft;ft|=4;try{Y1(s,i);var w=cv,D=nb(i.containerInfo),F=w.focusedElem,X=w.selectionRange;if(D!==F&&F&&F.ownerDocument&&tb(F.ownerDocument.documentElement,F)){if(X!==null&&Bh(F)){var re=X.start,ce=X.end;if(ce===void 0&&(ce=re),"selectionStart"in F)F.selectionStart=re,F.selectionEnd=Math.min(ce,F.value.length);else{var me=F.ownerDocument||document,ae=me&&me.defaultView||window;if(ae.getSelection){var se=ae.getSelection(),Te=F.textContent.length,We=Math.min(X.start,Te),Rt=X.end===void 0?We:Math.min(X.end,Te);!se.extend&&We>Rt&&(D=Rt,Rt=We,We=D);var te=eb(F,We),J=eb(F,Rt);if(te&&J&&(se.rangeCount!==1||se.anchorNode!==te.node||se.anchorOffset!==te.offset||se.focusNode!==J.node||se.focusOffset!==J.offset)){var ne=me.createRange();ne.setStart(te.node,te.offset),se.removeAllRanges(),We>Rt?(se.addRange(ne),se.extend(J.node,J.offset)):(ne.setEnd(J.node,J.offset),se.addRange(ne))}}}}for(me=[],se=F;se=se.parentNode;)se.nodeType===1&&me.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof F.focus=="function"&&F.focus(),F=0;F<me.length;F++){var ve=me[F];ve.element.scrollLeft=ve.left,ve.element.scrollTop=ve.top}}pf=!!lv,cv=lv=null}finally{ft=y,$.p=p,P.T=f}}i.current=s,dn=2}}function gx(){if(dn===2){dn=0;var i=No,s=Ss,f=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||f){f=P.T,P.T=null;var p=$.p;$.p=2;var y=ft;ft|=4;try{G1(i,s.alternate,s)}finally{ft=y,$.p=p,P.T=f}}dn=3}}function yx(){if(dn===4||dn===3){dn=0,cn();var i=No,s=Ss,f=Xa,p=ax;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?dn=5:(dn=0,Ss=No=null,bx(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(ko=null),mh(f),s=s.stateNode,Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(Bn,s,void 0,(s.current.flags&128)===128)}catch{}if(p!==null){s=P.T,y=$.p,$.p=2,P.T=null;try{for(var w=i.onRecoverableError,D=0;D<p.length;D++){var F=p[D];w(F.value,{componentStack:F.stack})}}finally{P.T=s,$.p=y}}(Xa&3)!==0&&tf(),ca(i),y=i.pendingLanes,(f&261930)!==0&&(y&42)!==0?i===Yp?qu++:(qu=0,Yp=i):qu=0,$u(0)}}function bx(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Tu(s)))}function tf(){return mx(),gx(),yx(),xx()}function xx(){if(dn!==5)return!1;var i=No,s=Kp;Kp=0;var f=mh(Xa),p=P.T,y=$.p;try{$.p=32>f?32:f,P.T=null,f=Xp,Xp=null;var w=No,D=Xa;if(dn=0,Ss=No=null,Xa=0,(ft&6)!==0)throw Error(r(331));var F=ft;if(ft|=4,tx(w.current),Z1(w,w.current,D,f),ft=F,$u(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(Bn,w)}catch{}return!0}finally{$.p=y,P.T=p,bx(i,s)}}function wx(i,s,f){s=Mr(f,s),s=Ap(i.stateNode,s,2),i=Eo(i,s,2),i!==null&&(hu(i,2),ca(i))}function xt(i,s,f){if(i.tag===3)wx(i,i,f);else for(;s!==null;){if(s.tag===3){wx(s,i,f);break}else if(s.tag===1){var p=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(ko===null||!ko.has(p))){i=Mr(f,i),f=S1(2),p=Eo(s,f,2),p!==null&&(C1(f,p,s,i),hu(p,2),ca(p));break}}s=s.return}}function Jp(i,s,f){var p=i.pingCache;if(p===null){p=i.pingCache=new lA;var y=new Set;p.set(s,y)}else y=p.get(s),y===void 0&&(y=new Set,p.set(s,y));y.has(f)||(Gp=!0,y.add(f),i=pA.bind(null,i,s,f),s.then(i,i))}function pA(i,s,f){var p=i.pingCache;p!==null&&p.delete(s),i.pingedLanes|=i.suspendedLanes&f,i.warmLanes&=~f,Dt===i&&(rt&f)===f&&(qt===4||qt===3&&(rt&62914560)===rt&&300>Ye()-Xc?(ft&2)===0&&Cs(i,0):qp|=f,ws===rt&&(ws=0)),ca(i)}function Sx(i,s){s===0&&(s=m0()),i=ii(i,s),i!==null&&(hu(i,s),ca(i))}function vA(i){var s=i.memoizedState,f=0;s!==null&&(f=s.retryLane),Sx(i,f)}function mA(i,s){var f=0;switch(i.tag){case 31:case 13:var p=i.stateNode,y=i.memoizedState;y!==null&&(f=y.retryLane);break;case 19:p=i.stateNode;break;case 22:p=i.stateNode._retryCache;break;default:throw Error(r(314))}p!==null&&p.delete(s),Sx(i,f)}function gA(i,s){return jt(i,s)}var nf=null,Rs=null,ev=!1,rf=!1,tv=!1,Oo=0;function ca(i){i!==Rs&&i.next===null&&(Rs===null?nf=Rs=i:Rs=Rs.next=i),rf=!0,ev||(ev=!0,bA())}function $u(i,s){if(!tv&&rf){tv=!0;do for(var f=!1,p=nf;p!==null;){if(i!==0){var y=p.pendingLanes;if(y===0)var w=0;else{var D=p.suspendedLanes,F=p.pingedLanes;w=(1<<31-Fn(42|i)+1)-1,w&=y&~(D&~F),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(f=!0,_x(p,w))}else w=rt,w=sc(p,p===Dt?w:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(w&3)===0||du(p,w)||(f=!0,_x(p,w));p=p.next}while(f);tv=!1}}function yA(){Cx()}function Cx(){rf=ev=!1;var i=0;Oo!==0&&DA()&&(i=Oo);for(var s=Ye(),f=null,p=nf;p!==null;){var y=p.next,w=Ex(p,s);w===0?(p.next=null,f===null?nf=y:f.next=y,y===null&&(Rs=f)):(f=p,(i!==0||(w&3)!==0)&&(rf=!0)),p=y}dn!==0&&dn!==5||$u(i),Oo!==0&&(Oo=0)}function Ex(i,s){for(var f=i.suspendedLanes,p=i.pingedLanes,y=i.expirationTimes,w=i.pendingLanes&-62914561;0<w;){var D=31-Fn(w),F=1<<D,X=y[D];X===-1?((F&f)===0||(F&p)!==0)&&(y[D]=G_(F,s)):X<=s&&(i.expiredLanes|=F),w&=~F}if(s=Dt,f=rt,f=sc(i,i===s?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),p=i.callbackNode,f===0||i===s&&(bt===2||bt===9)||i.cancelPendingCommit!==null)return p!==null&&p!==null&&st(p),i.callbackNode=null,i.callbackPriority=0;if((f&3)===0||du(i,f)){if(s=f&-f,s===i.callbackPriority)return s;switch(p!==null&&st(p),mh(f)){case 2:case 8:f=En;break;case 32:f=nn;break;case 268435456:f=Kr;break;default:f=nn}return p=Rx.bind(null,i),f=jt(f,p),i.callbackPriority=s,i.callbackNode=f,s}return p!==null&&p!==null&&st(p),i.callbackPriority=2,i.callbackNode=null,2}function Rx(i,s){if(dn!==0&&dn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var f=i.callbackNode;if(tf()&&i.callbackNode!==f)return null;var p=rt;return p=sc(i,i===Dt?p:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),p===0?null:(ix(i,p,s),Ex(i,Ye()),i.callbackNode!=null&&i.callbackNode===f?Rx.bind(null,i):null)}function _x(i,s){if(tf())return null;ix(i,s,!0)}function bA(){NA(function(){(ft&6)!==0?jt($n,yA):Cx()})}function nv(){if(Oo===0){var i=cs;i===0&&(i=Xr,Xr<<=1,(Xr&261888)===0&&(Xr=256)),Oo=i}return Oo}function Tx(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:fc(""+i)}function Ax(i,s){var f=s.ownerDocument.createElement("input");return f.name=s.name,f.value=s.value,i.id&&f.setAttribute("form",i.id),s.parentNode.insertBefore(f,s),i=new FormData(i),f.parentNode.removeChild(f),i}function xA(i,s,f,p,y){if(s==="submit"&&f&&f.stateNode===y){var w=Tx((y[Yn]||null).action),D=p.submitter;D&&(s=(s=D[Yn]||null)?Tx(s.formAction):D.getAttribute("formAction"),s!==null&&(w=s,D=null));var F=new vc("action","action",null,p,y);i.push({event:F,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Oo!==0){var X=D?Ax(y,D):new FormData(y);Sp(f,{pending:!0,data:X,method:y.method,action:w},null,X)}}else typeof w=="function"&&(F.preventDefault(),X=D?Ax(y,D):new FormData(y),Sp(f,{pending:!0,data:X,method:y.method,action:w},w,X))},currentTarget:y}]})}}for(var rv=0;rv<zh.length;rv++){var av=zh[rv],wA=av.toLowerCase(),SA=av[0].toUpperCase()+av.slice(1);Yr(wA,"on"+SA)}Yr(ob,"onAnimationEnd"),Yr(ib,"onAnimationIteration"),Yr(sb,"onAnimationStart"),Yr("dblclick","onDoubleClick"),Yr("focusin","onFocus"),Yr("focusout","onBlur"),Yr(LT,"onTransitionRun"),Yr(zT,"onTransitionStart"),Yr(UT,"onTransitionCancel"),Yr(ub,"onTransitionEnd"),Yi("onMouseEnter",["mouseout","mouseover"]),Yi("onMouseLeave",["mouseout","mouseover"]),Yi("onPointerEnter",["pointerout","pointerover"]),Yi("onPointerLeave",["pointerout","pointerover"]),ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ni("onBeforeInput",["compositionend","keypress","textInput","paste"]),ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ku));function Dx(i,s){s=(s&4)!==0;for(var f=0;f<i.length;f++){var p=i[f],y=p.event;p=p.listeners;e:{var w=void 0;if(s)for(var D=p.length-1;0<=D;D--){var F=p[D],X=F.instance,re=F.currentTarget;if(F=F.listener,X!==w&&y.isPropagationStopped())break e;w=F,y.currentTarget=re;try{w(y)}catch(ce){yc(ce)}y.currentTarget=null,w=X}else for(D=0;D<p.length;D++){if(F=p[D],X=F.instance,re=F.currentTarget,F=F.listener,X!==w&&y.isPropagationStopped())break e;w=F,y.currentTarget=re;try{w(y)}catch(ce){yc(ce)}y.currentTarget=null,w=X}}}}function tt(i,s){var f=s[gh];f===void 0&&(f=s[gh]=new Set);var p=i+"__bubble";f.has(p)||(kx(s,i,2,!1),f.add(p))}function ov(i,s,f){var p=0;s&&(p|=4),kx(f,i,p,s)}var af="_reactListening"+Math.random().toString(36).slice(2);function iv(i){if(!i[af]){i[af]=!0,C0.forEach(function(f){f!=="selectionchange"&&(CA.has(f)||ov(f,!1,i),ov(f,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[af]||(s[af]=!0,ov("selectionchange",!1,s))}}function kx(i,s,f,p){switch(o2(s)){case 2:var y=QA;break;case 8:y=ZA;break;default:y=wv}f=y.bind(null,s,f,i),y=void 0,!_h||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),p?y!==void 0?i.addEventListener(s,f,{capture:!0,passive:y}):i.addEventListener(s,f,!0):y!==void 0?i.addEventListener(s,f,{passive:y}):i.addEventListener(s,f,!1)}function sv(i,s,f,p,y){var w=p;if((s&1)===0&&(s&2)===0&&p!==null)e:for(;;){if(p===null)return;var D=p.tag;if(D===3||D===4){var F=p.stateNode.containerInfo;if(F===y)break;if(D===4)for(D=p.return;D!==null;){var X=D.tag;if((X===3||X===4)&&D.stateNode.containerInfo===y)return;D=D.return}for(;F!==null;){if(D=$i(F),D===null)return;if(X=D.tag,X===5||X===6||X===26||X===27){p=w=D;continue e}F=F.parentNode}}p=p.return}B0(function(){var re=w,ce=Eh(f),me=[];e:{var ae=lb.get(i);if(ae!==void 0){var se=vc,Te=i;switch(i){case"keypress":if(hc(f)===0)break e;case"keydown":case"keyup":se=mT;break;case"focusin":Te="focus",se=kh;break;case"focusout":Te="blur",se=kh;break;case"beforeblur":case"afterblur":se=kh;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=L0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=aT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=bT;break;case ob:case ib:case sb:se=sT;break;case ub:se=wT;break;case"scroll":case"scrollend":se=nT;break;case"wheel":se=CT;break;case"copy":case"cut":case"paste":se=lT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=U0;break;case"toggle":case"beforetoggle":se=RT}var We=(s&4)!==0,Rt=!We&&(i==="scroll"||i==="scrollend"),te=We?ae!==null?ae+"Capture":null:ae;We=[];for(var J=re,ne;J!==null;){var ve=J;if(ne=ve.stateNode,ve=ve.tag,ve!==5&&ve!==26&&ve!==27||ne===null||te===null||(ve=mu(J,te),ve!=null&&We.push(Xu(J,ve,ne))),Rt)break;J=J.return}0<We.length&&(ae=new se(ae,Te,null,f,ce),me.push({event:ae,listeners:We}))}}if((s&7)===0){e:{if(ae=i==="mouseover"||i==="pointerover",se=i==="mouseout"||i==="pointerout",ae&&f!==Ch&&(Te=f.relatedTarget||f.fromElement)&&($i(Te)||Te[qi]))break e;if((se||ae)&&(ae=ce.window===ce?ce:(ae=ce.ownerDocument)?ae.defaultView||ae.parentWindow:window,se?(Te=f.relatedTarget||f.toElement,se=re,Te=Te?$i(Te):null,Te!==null&&(Rt=o(Te),We=Te.tag,Te!==Rt||We!==5&&We!==27&&We!==6)&&(Te=null)):(se=null,Te=re),se!==Te)){if(We=L0,ve="onMouseLeave",te="onMouseEnter",J="mouse",(i==="pointerout"||i==="pointerover")&&(We=U0,ve="onPointerLeave",te="onPointerEnter",J="pointer"),Rt=se==null?ae:vu(se),ne=Te==null?ae:vu(Te),ae=new We(ve,J+"leave",se,f,ce),ae.target=Rt,ae.relatedTarget=ne,ve=null,$i(ce)===re&&(We=new We(te,J+"enter",Te,f,ce),We.target=ne,We.relatedTarget=Rt,ve=We),Rt=ve,se&&Te)t:{for(We=EA,te=se,J=Te,ne=0,ve=te;ve;ve=We(ve))ne++;ve=0;for(var ze=J;ze;ze=We(ze))ve++;for(;0<ne-ve;)te=We(te),ne--;for(;0<ve-ne;)J=We(J),ve--;for(;ne--;){if(te===J||J!==null&&te===J.alternate){We=te;break t}te=We(te),J=We(J)}We=null}else We=null;se!==null&&Nx(me,ae,se,We,!1),Te!==null&&Rt!==null&&Nx(me,Rt,Te,We,!0)}}e:{if(ae=re?vu(re):window,se=ae.nodeName&&ae.nodeName.toLowerCase(),se==="select"||se==="input"&&ae.type==="file")var lt=K0;else if(q0(ae))if(X0)lt=BT;else{lt=OT;var ke=MT}else se=ae.nodeName,!se||se.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?re&&Sh(re.elementType)&&(lt=K0):lt=IT;if(lt&&(lt=lt(i,re))){$0(me,lt,f,ce);break e}ke&&ke(i,ae,re),i==="focusout"&&re&&ae.type==="number"&&re.memoizedProps.value!=null&&wh(ae,"number",ae.value)}switch(ke=re?vu(re):window,i){case"focusin":(q0(ke)||ke.contentEditable==="true")&&(ns=ke,Fh=re,Eu=null);break;case"focusout":Eu=Fh=ns=null;break;case"mousedown":Ph=!0;break;case"contextmenu":case"mouseup":case"dragend":Ph=!1,rb(me,f,ce);break;case"selectionchange":if(PT)break;case"keydown":case"keyup":rb(me,f,ce)}var Ke;if(Mh)e:{switch(i){case"compositionstart":var at="onCompositionStart";break e;case"compositionend":at="onCompositionEnd";break e;case"compositionupdate":at="onCompositionUpdate";break e}at=void 0}else ts?j0(i,f)&&(at="onCompositionEnd"):i==="keydown"&&f.keyCode===229&&(at="onCompositionStart");at&&(W0&&f.locale!=="ko"&&(ts||at!=="onCompositionStart"?at==="onCompositionEnd"&&ts&&(Ke=F0()):(go=ce,Th="value"in go?go.value:go.textContent,ts=!0)),ke=of(re,at),0<ke.length&&(at=new z0(at,i,null,f,ce),me.push({event:at,listeners:ke}),Ke?at.data=Ke:(Ke=G0(f),Ke!==null&&(at.data=Ke)))),(Ke=TT?AT(i,f):DT(i,f))&&(at=of(re,"onBeforeInput"),0<at.length&&(ke=new z0("onBeforeInput","beforeinput",null,f,ce),me.push({event:ke,listeners:at}),ke.data=Ke)),xA(me,i,re,f,ce)}Dx(me,s)})}function Xu(i,s,f){return{instance:i,listener:s,currentTarget:f}}function of(i,s){for(var f=s+"Capture",p=[];i!==null;){var y=i,w=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||w===null||(y=mu(i,f),y!=null&&p.unshift(Xu(i,y,w)),y=mu(i,s),y!=null&&p.push(Xu(i,y,w))),i.tag===3)return p;i=i.return}return[]}function EA(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Nx(i,s,f,p,y){for(var w=s._reactName,D=[];f!==null&&f!==p;){var F=f,X=F.alternate,re=F.stateNode;if(F=F.tag,X!==null&&X===p)break;F!==5&&F!==26&&F!==27||re===null||(X=re,y?(re=mu(f,w),re!=null&&D.unshift(Xu(f,re,X))):y||(re=mu(f,w),re!=null&&D.push(Xu(f,re,X)))),f=f.return}D.length!==0&&i.push({event:s,listeners:D})}var RA=/\r\n?/g,_A=/\u0000|\uFFFD/g;function Mx(i){return(typeof i=="string"?i:""+i).replace(RA,`
`).replace(_A,"")}function Ox(i,s){return s=Mx(s),Mx(i)===s}function Et(i,s,f,p,y,w){switch(f){case"children":typeof p=="string"?s==="body"||s==="textarea"&&p===""||Zi(i,p):(typeof p=="number"||typeof p=="bigint")&&s!=="body"&&Zi(i,""+p);break;case"className":lc(i,"class",p);break;case"tabIndex":lc(i,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":lc(i,f,p);break;case"style":O0(i,p,w);break;case"data":if(s!=="object"){lc(i,"data",p);break}case"src":case"href":if(p===""&&(s!=="a"||f!=="href")){i.removeAttribute(f);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){i.removeAttribute(f);break}p=fc(""+p),i.setAttribute(f,p);break;case"action":case"formAction":if(typeof p=="function"){i.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(f==="formAction"?(s!=="input"&&Et(i,s,"name",y.name,y,null),Et(i,s,"formEncType",y.formEncType,y,null),Et(i,s,"formMethod",y.formMethod,y,null),Et(i,s,"formTarget",y.formTarget,y,null)):(Et(i,s,"encType",y.encType,y,null),Et(i,s,"method",y.method,y,null),Et(i,s,"target",y.target,y,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){i.removeAttribute(f);break}p=fc(""+p),i.setAttribute(f,p);break;case"onClick":p!=null&&(i.onclick=Ia);break;case"onScroll":p!=null&&tt("scroll",i);break;case"onScrollEnd":p!=null&&tt("scrollend",i);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(y.children!=null)throw Error(r(60));i.innerHTML=f}}break;case"multiple":i.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":i.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){i.removeAttribute("xlink:href");break}f=fc(""+p),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(f,""+p):i.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(f,""):i.removeAttribute(f);break;case"capture":case"download":p===!0?i.setAttribute(f,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(f,p):i.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?i.setAttribute(f,p):i.removeAttribute(f);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?i.removeAttribute(f):i.setAttribute(f,p);break;case"popover":tt("beforetoggle",i),tt("toggle",i),uc(i,"popover",p);break;case"xlinkActuate":Oa(i,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":Oa(i,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":Oa(i,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":Oa(i,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":Oa(i,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":Oa(i,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":Oa(i,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":Oa(i,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":Oa(i,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":uc(i,"is",p);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=eT.get(f)||f,uc(i,f,p))}}function uv(i,s,f,p,y,w){switch(f){case"style":O0(i,p,w);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(y.children!=null)throw Error(r(60));i.innerHTML=f}}break;case"children":typeof p=="string"?Zi(i,p):(typeof p=="number"||typeof p=="bigint")&&Zi(i,""+p);break;case"onScroll":p!=null&&tt("scroll",i);break;case"onScrollEnd":p!=null&&tt("scrollend",i);break;case"onClick":p!=null&&(i.onclick=Ia);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!E0.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(y=f.endsWith("Capture"),s=f.slice(2,y?f.length-7:void 0),w=i[Yn]||null,w=w!=null?w[f]:null,typeof w=="function"&&i.removeEventListener(s,w,y),typeof p=="function")){typeof w!="function"&&w!==null&&(f in i?i[f]=null:i.hasAttribute(f)&&i.removeAttribute(f)),i.addEventListener(s,p,y);break e}f in i?i[f]=p:p===!0?i.setAttribute(f,""):uc(i,f,p)}}}function Dn(i,s,f){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":tt("error",i),tt("load",i);var p=!1,y=!1,w;for(w in f)if(f.hasOwnProperty(w)){var D=f[w];if(D!=null)switch(w){case"src":p=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Et(i,s,w,D,f,null)}}y&&Et(i,s,"srcSet",f.srcSet,f,null),p&&Et(i,s,"src",f.src,f,null);return;case"input":tt("invalid",i);var F=w=D=y=null,X=null,re=null;for(p in f)if(f.hasOwnProperty(p)){var ce=f[p];if(ce!=null)switch(p){case"name":y=ce;break;case"type":D=ce;break;case"checked":X=ce;break;case"defaultChecked":re=ce;break;case"value":w=ce;break;case"defaultValue":F=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,s));break;default:Et(i,s,p,ce,f,null)}}D0(i,w,F,X,re,D,y,!1);return;case"select":tt("invalid",i),p=D=w=null;for(y in f)if(f.hasOwnProperty(y)&&(F=f[y],F!=null))switch(y){case"value":w=F;break;case"defaultValue":D=F;break;case"multiple":p=F;default:Et(i,s,y,F,f,null)}s=w,f=D,i.multiple=!!p,s!=null?Qi(i,!!p,s,!1):f!=null&&Qi(i,!!p,f,!0);return;case"textarea":tt("invalid",i),w=y=p=null;for(D in f)if(f.hasOwnProperty(D)&&(F=f[D],F!=null))switch(D){case"value":p=F;break;case"defaultValue":y=F;break;case"children":w=F;break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(91));break;default:Et(i,s,D,F,f,null)}N0(i,p,y,w);return;case"option":for(X in f)f.hasOwnProperty(X)&&(p=f[X],p!=null)&&(X==="selected"?i.selected=p&&typeof p!="function"&&typeof p!="symbol":Et(i,s,X,p,f,null));return;case"dialog":tt("beforetoggle",i),tt("toggle",i),tt("cancel",i),tt("close",i);break;case"iframe":case"object":tt("load",i);break;case"video":case"audio":for(p=0;p<Ku.length;p++)tt(Ku[p],i);break;case"image":tt("error",i),tt("load",i);break;case"details":tt("toggle",i);break;case"embed":case"source":case"link":tt("error",i),tt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(re in f)if(f.hasOwnProperty(re)&&(p=f[re],p!=null))switch(re){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Et(i,s,re,p,f,null)}return;default:if(Sh(s)){for(ce in f)f.hasOwnProperty(ce)&&(p=f[ce],p!==void 0&&uv(i,s,ce,p,f,void 0));return}}for(F in f)f.hasOwnProperty(F)&&(p=f[F],p!=null&&Et(i,s,F,p,f,null))}function TA(i,s,f,p){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,w=null,D=null,F=null,X=null,re=null,ce=null;for(se in f){var me=f[se];if(f.hasOwnProperty(se)&&me!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":X=me;default:p.hasOwnProperty(se)||Et(i,s,se,null,p,me)}}for(var ae in p){var se=p[ae];if(me=f[ae],p.hasOwnProperty(ae)&&(se!=null||me!=null))switch(ae){case"type":w=se;break;case"name":y=se;break;case"checked":re=se;break;case"defaultChecked":ce=se;break;case"value":D=se;break;case"defaultValue":F=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,s));break;default:se!==me&&Et(i,s,ae,se,p,me)}}xh(i,D,F,X,re,ce,w,y);return;case"select":se=D=F=ae=null;for(w in f)if(X=f[w],f.hasOwnProperty(w)&&X!=null)switch(w){case"value":break;case"multiple":se=X;default:p.hasOwnProperty(w)||Et(i,s,w,null,p,X)}for(y in p)if(w=p[y],X=f[y],p.hasOwnProperty(y)&&(w!=null||X!=null))switch(y){case"value":ae=w;break;case"defaultValue":F=w;break;case"multiple":D=w;default:w!==X&&Et(i,s,y,w,p,X)}s=F,f=D,p=se,ae!=null?Qi(i,!!f,ae,!1):!!p!=!!f&&(s!=null?Qi(i,!!f,s,!0):Qi(i,!!f,f?[]:"",!1));return;case"textarea":se=ae=null;for(F in f)if(y=f[F],f.hasOwnProperty(F)&&y!=null&&!p.hasOwnProperty(F))switch(F){case"value":break;case"children":break;default:Et(i,s,F,null,p,y)}for(D in p)if(y=p[D],w=f[D],p.hasOwnProperty(D)&&(y!=null||w!=null))switch(D){case"value":ae=y;break;case"defaultValue":se=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==w&&Et(i,s,D,y,p,w)}k0(i,ae,se);return;case"option":for(var Te in f)ae=f[Te],f.hasOwnProperty(Te)&&ae!=null&&!p.hasOwnProperty(Te)&&(Te==="selected"?i.selected=!1:Et(i,s,Te,null,p,ae));for(X in p)ae=p[X],se=f[X],p.hasOwnProperty(X)&&ae!==se&&(ae!=null||se!=null)&&(X==="selected"?i.selected=ae&&typeof ae!="function"&&typeof ae!="symbol":Et(i,s,X,ae,p,se));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var We in f)ae=f[We],f.hasOwnProperty(We)&&ae!=null&&!p.hasOwnProperty(We)&&Et(i,s,We,null,p,ae);for(re in p)if(ae=p[re],se=f[re],p.hasOwnProperty(re)&&ae!==se&&(ae!=null||se!=null))switch(re){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,s));break;default:Et(i,s,re,ae,p,se)}return;default:if(Sh(s)){for(var Rt in f)ae=f[Rt],f.hasOwnProperty(Rt)&&ae!==void 0&&!p.hasOwnProperty(Rt)&&uv(i,s,Rt,void 0,p,ae);for(ce in p)ae=p[ce],se=f[ce],!p.hasOwnProperty(ce)||ae===se||ae===void 0&&se===void 0||uv(i,s,ce,ae,p,se);return}}for(var te in f)ae=f[te],f.hasOwnProperty(te)&&ae!=null&&!p.hasOwnProperty(te)&&Et(i,s,te,null,p,ae);for(me in p)ae=p[me],se=f[me],!p.hasOwnProperty(me)||ae===se||ae==null&&se==null||Et(i,s,me,ae,p,se)}function Ix(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function AA(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,f=performance.getEntriesByType("resource"),p=0;p<f.length;p++){var y=f[p],w=y.transferSize,D=y.initiatorType,F=y.duration;if(w&&F&&Ix(D)){for(D=0,F=y.responseEnd,p+=1;p<f.length;p++){var X=f[p],re=X.startTime;if(re>F)break;var ce=X.transferSize,me=X.initiatorType;ce&&Ix(me)&&(X=X.responseEnd,D+=ce*(X<F?1:(F-re)/(X-re)))}if(--p,s+=8*(w+D)/(y.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var lv=null,cv=null;function sf(i){return i.nodeType===9?i:i.ownerDocument}function Bx(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Fx(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function fv(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var dv=null;function DA(){var i=window.event;return i&&i.type==="popstate"?i===dv?!1:(dv=i,!0):(dv=null,!1)}var Px=typeof setTimeout=="function"?setTimeout:void 0,kA=typeof clearTimeout=="function"?clearTimeout:void 0,Lx=typeof Promise=="function"?Promise:void 0,NA=typeof queueMicrotask=="function"?queueMicrotask:typeof Lx<"u"?function(i){return Lx.resolve(null).then(i).catch(MA)}:Px;function MA(i){setTimeout(function(){throw i})}function Io(i){return i==="head"}function zx(i,s){var f=s,p=0;do{var y=f.nextSibling;if(i.removeChild(f),y&&y.nodeType===8)if(f=y.data,f==="/$"||f==="/&"){if(p===0){i.removeChild(y),Ds(s);return}p--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")p++;else if(f==="html")Yu(i.ownerDocument.documentElement);else if(f==="head"){f=i.ownerDocument.head,Yu(f);for(var w=f.firstChild;w;){var D=w.nextSibling,F=w.nodeName;w[pu]||F==="SCRIPT"||F==="STYLE"||F==="LINK"&&w.rel.toLowerCase()==="stylesheet"||f.removeChild(w),w=D}}else f==="body"&&Yu(i.ownerDocument.body);f=y}while(f);Ds(s)}function Ux(i,s){var f=i;i=0;do{var p=f.nextSibling;if(f.nodeType===1?s?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(s?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),p&&p.nodeType===8)if(f=p.data,f==="/$"){if(i===0)break;i--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||i++;f=p}while(f)}function hv(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var f=s;switch(s=s.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":hv(f),yh(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}i.removeChild(f)}}function OA(i,s,f,p){for(;i.nodeType===1;){var y=f;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!p&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(p){if(!i[pu])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(w=i.getAttribute("rel"),w==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(w!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(w=i.getAttribute("src"),(w!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&w&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var w=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===w)return i}else return i;if(i=Pr(i.nextSibling),i===null)break}return null}function IA(i,s,f){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!f||(i=Pr(i.nextSibling),i===null))return null;return i}function Wx(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=Pr(i.nextSibling),i===null))return null;return i}function pv(i){return i.data==="$?"||i.data==="$~"}function vv(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function BA(i,s){var f=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||f.readyState!=="loading")s();else{var p=function(){s(),f.removeEventListener("DOMContentLoaded",p)};f.addEventListener("DOMContentLoaded",p),i._reactRetry=p}}function Pr(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var mv=null;function Hx(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var f=i.data;if(f==="/$"||f==="/&"){if(s===0)return Pr(i.nextSibling);s--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||s++}i=i.nextSibling}return null}function Vx(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var f=i.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(s===0)return i;s--}else f!=="/$"&&f!=="/&"||s++}i=i.previousSibling}return null}function jx(i,s,f){switch(s=sf(f),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Yu(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);yh(i)}var Lr=new Map,Gx=new Set;function uf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ya=$.d;$.d={f:FA,r:PA,D:LA,C:zA,L:UA,m:WA,X:VA,S:HA,M:jA};function FA(){var i=Ya.f(),s=Zc();return i||s}function PA(i){var s=Ki(i);s!==null&&s.tag===5&&s.type==="form"?u1(s):Ya.r(i)}var _s=typeof document>"u"?null:document;function qx(i,s,f){var p=_s;if(p&&typeof s=="string"&&s){var y=kr(s);y='link[rel="'+i+'"][href="'+y+'"]',typeof f=="string"&&(y+='[crossorigin="'+f+'"]'),Gx.has(y)||(Gx.add(y),i={rel:i,crossOrigin:f,href:s},p.querySelector(y)===null&&(s=p.createElement("link"),Dn(s,"link",i),bn(s),p.head.appendChild(s)))}}function LA(i){Ya.D(i),qx("dns-prefetch",i,null)}function zA(i,s){Ya.C(i,s),qx("preconnect",i,s)}function UA(i,s,f){Ya.L(i,s,f);var p=_s;if(p&&i&&s){var y='link[rel="preload"][as="'+kr(s)+'"]';s==="image"&&f&&f.imageSrcSet?(y+='[imagesrcset="'+kr(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(y+='[imagesizes="'+kr(f.imageSizes)+'"]')):y+='[href="'+kr(i)+'"]';var w=y;switch(s){case"style":w=Ts(i);break;case"script":w=As(i)}Lr.has(w)||(i=v({rel:"preload",href:s==="image"&&f&&f.imageSrcSet?void 0:i,as:s},f),Lr.set(w,i),p.querySelector(y)!==null||s==="style"&&p.querySelector(Qu(w))||s==="script"&&p.querySelector(Zu(w))||(s=p.createElement("link"),Dn(s,"link",i),bn(s),p.head.appendChild(s)))}}function WA(i,s){Ya.m(i,s);var f=_s;if(f&&i){var p=s&&typeof s.as=="string"?s.as:"script",y='link[rel="modulepreload"][as="'+kr(p)+'"][href="'+kr(i)+'"]',w=y;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=As(i)}if(!Lr.has(w)&&(i=v({rel:"modulepreload",href:i},s),Lr.set(w,i),f.querySelector(y)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Zu(w)))return}p=f.createElement("link"),Dn(p,"link",i),bn(p),f.head.appendChild(p)}}}function HA(i,s,f){Ya.S(i,s,f);var p=_s;if(p&&i){var y=Xi(p).hoistableStyles,w=Ts(i);s=s||"default";var D=y.get(w);if(!D){var F={loading:0,preload:null};if(D=p.querySelector(Qu(w)))F.loading=5;else{i=v({rel:"stylesheet",href:i,"data-precedence":s},f),(f=Lr.get(w))&&gv(i,f);var X=D=p.createElement("link");bn(X),Dn(X,"link",i),X._p=new Promise(function(re,ce){X.onload=re,X.onerror=ce}),X.addEventListener("load",function(){F.loading|=1}),X.addEventListener("error",function(){F.loading|=2}),F.loading|=4,lf(D,s,p)}D={type:"stylesheet",instance:D,count:1,state:F},y.set(w,D)}}}function VA(i,s){Ya.X(i,s);var f=_s;if(f&&i){var p=Xi(f).hoistableScripts,y=As(i),w=p.get(y);w||(w=f.querySelector(Zu(y)),w||(i=v({src:i,async:!0},s),(s=Lr.get(y))&&yv(i,s),w=f.createElement("script"),bn(w),Dn(w,"link",i),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},p.set(y,w))}}function jA(i,s){Ya.M(i,s);var f=_s;if(f&&i){var p=Xi(f).hoistableScripts,y=As(i),w=p.get(y);w||(w=f.querySelector(Zu(y)),w||(i=v({src:i,async:!0,type:"module"},s),(s=Lr.get(y))&&yv(i,s),w=f.createElement("script"),bn(w),Dn(w,"link",i),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},p.set(y,w))}}function $x(i,s,f,p){var y=(y=ge.current)?uf(y):null;if(!y)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(s=Ts(f.href),f=Xi(y).hoistableStyles,p=f.get(s),p||(p={type:"style",instance:null,count:0,state:null},f.set(s,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){i=Ts(f.href);var w=Xi(y).hoistableStyles,D=w.get(i);if(D||(y=y.ownerDocument||y,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(i,D),(w=y.querySelector(Qu(i)))&&!w._p&&(D.instance=w,D.state.loading=5),Lr.has(i)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Lr.set(i,f),w||GA(y,i,f,D.state))),s&&p===null)throw Error(r(528,""));return D}if(s&&p!==null)throw Error(r(529,""));return null;case"script":return s=f.async,f=f.src,typeof f=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=As(f),f=Xi(y).hoistableScripts,p=f.get(s),p||(p={type:"script",instance:null,count:0,state:null},f.set(s,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Ts(i){return'href="'+kr(i)+'"'}function Qu(i){return'link[rel="stylesheet"]['+i+"]"}function Kx(i){return v({},i,{"data-precedence":i.precedence,precedence:null})}function GA(i,s,f,p){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?p.loading=1:(s=i.createElement("link"),p.preload=s,s.addEventListener("load",function(){return p.loading|=1}),s.addEventListener("error",function(){return p.loading|=2}),Dn(s,"link",f),bn(s),i.head.appendChild(s))}function As(i){return'[src="'+kr(i)+'"]'}function Zu(i){return"script[async]"+i}function Xx(i,s,f){if(s.count++,s.instance===null)switch(s.type){case"style":var p=i.querySelector('style[data-href~="'+kr(f.href)+'"]');if(p)return s.instance=p,bn(p),p;var y=v({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return p=(i.ownerDocument||i).createElement("style"),bn(p),Dn(p,"style",y),lf(p,f.precedence,i),s.instance=p;case"stylesheet":y=Ts(f.href);var w=i.querySelector(Qu(y));if(w)return s.state.loading|=4,s.instance=w,bn(w),w;p=Kx(f),(y=Lr.get(y))&&gv(p,y),w=(i.ownerDocument||i).createElement("link"),bn(w);var D=w;return D._p=new Promise(function(F,X){D.onload=F,D.onerror=X}),Dn(w,"link",p),s.state.loading|=4,lf(w,f.precedence,i),s.instance=w;case"script":return w=As(f.src),(y=i.querySelector(Zu(w)))?(s.instance=y,bn(y),y):(p=f,(y=Lr.get(w))&&(p=v({},f),yv(p,y)),i=i.ownerDocument||i,y=i.createElement("script"),bn(y),Dn(y,"link",p),i.head.appendChild(y),s.instance=y);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(p=s.instance,s.state.loading|=4,lf(p,f.precedence,i));return s.instance}function lf(i,s,f){for(var p=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=p.length?p[p.length-1]:null,w=y,D=0;D<p.length;D++){var F=p[D];if(F.dataset.precedence===s)w=F;else if(w!==y)break}w?w.parentNode.insertBefore(i,w.nextSibling):(s=f.nodeType===9?f.head:f,s.insertBefore(i,s.firstChild))}function gv(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function yv(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var cf=null;function Yx(i,s,f){if(cf===null){var p=new Map,y=cf=new Map;y.set(f,p)}else y=cf,p=y.get(f),p||(p=new Map,y.set(f,p));if(p.has(i))return p;for(p.set(i,null),f=f.getElementsByTagName(i),y=0;y<f.length;y++){var w=f[y];if(!(w[pu]||w[Rn]||i==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var D=w.getAttribute(s)||"";D=i+D;var F=p.get(D);F?F.push(w):p.set(D,[w])}}return p}function Qx(i,s,f){i=i.ownerDocument||i,i.head.insertBefore(f,s==="title"?i.querySelector("head > title"):null)}function qA(i,s,f){if(f===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(i=s.disabled,typeof s.precedence=="string"&&i==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Zx(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function $A(i,s,f,p){if(f.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var y=Ts(p.href),w=s.querySelector(Qu(y));if(w){s=w._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=ff.bind(i),s.then(i,i)),f.state.loading|=4,f.instance=w,bn(w);return}w=s.ownerDocument||s,p=Kx(p),(y=Lr.get(y))&&gv(p,y),w=w.createElement("link"),bn(w);var D=w;D._p=new Promise(function(F,X){D.onload=F,D.onerror=X}),Dn(w,"link",p),f.instance=w}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(f,s),(s=f.state.preload)&&(f.state.loading&3)===0&&(i.count++,f=ff.bind(i),s.addEventListener("load",f),s.addEventListener("error",f))}}var bv=0;function KA(i,s){return i.stylesheets&&i.count===0&&hf(i,i.stylesheets),0<i.count||0<i.imgCount?function(f){var p=setTimeout(function(){if(i.stylesheets&&hf(i,i.stylesheets),i.unsuspend){var w=i.unsuspend;i.unsuspend=null,w()}},6e4+s);0<i.imgBytes&&bv===0&&(bv=62500*AA());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&hf(i,i.stylesheets),i.unsuspend)){var w=i.unsuspend;i.unsuspend=null,w()}},(i.imgBytes>bv?50:800)+s);return i.unsuspend=f,function(){i.unsuspend=null,clearTimeout(p),clearTimeout(y)}}:null}function ff(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hf(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var df=null;function hf(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,df=new Map,s.forEach(XA,i),df=null,ff.call(i))}function XA(i,s){if(!(s.state.loading&4)){var f=df.get(i);if(f)var p=f.get(null);else{f=new Map,df.set(i,f);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<y.length;w++){var D=y[w];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(f.set(D.dataset.precedence,D),p=D)}p&&f.set(null,p)}y=s.instance,D=y.getAttribute("data-precedence"),w=f.get(D)||p,w===p&&f.set(null,y),f.set(D,y),this.count++,p=ff.bind(this),y.addEventListener("load",p),y.addEventListener("error",p),w?w.parentNode.insertBefore(y,w.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),s.state.loading|=4}}var Ju={$$typeof:R,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function YA(i,s,f,p,y,w,D,F,X){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ph(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ph(0),this.hiddenUpdates=ph(null),this.identifierPrefix=p,this.onUncaughtError=y,this.onCaughtError=w,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=X,this.incompleteTransitions=new Map}function Jx(i,s,f,p,y,w,D,F,X,re,ce,me){return i=new YA(i,s,f,D,X,re,ce,me,F),s=1,w===!0&&(s|=24),w=dr(3,null,null,s),i.current=w,w.stateNode=i,s=Zh(),s.refCount++,i.pooledCache=s,s.refCount++,w.memoizedState={element:p,isDehydrated:f,cache:s},np(w),i}function e2(i){return i?(i=os,i):os}function t2(i,s,f,p,y,w){y=e2(y),p.context===null?p.context=y:p.pendingContext=y,p=Co(s),p.payload={element:f},w=w===void 0?null:w,w!==null&&(p.callback=w),f=Eo(i,p,s),f!==null&&(nr(f,i,s),Nu(f,i,s))}function n2(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var f=i.retryLane;i.retryLane=f!==0&&f<s?f:s}}function xv(i,s){n2(i,s),(i=i.alternate)&&n2(i,s)}function r2(i){if(i.tag===13||i.tag===31){var s=ii(i,67108864);s!==null&&nr(s,i,67108864),xv(i,67108864)}}function a2(i){if(i.tag===13||i.tag===31){var s=gr();s=vh(s);var f=ii(i,s);f!==null&&nr(f,i,s),xv(i,s)}}var pf=!0;function QA(i,s,f,p){var y=P.T;P.T=null;var w=$.p;try{$.p=2,wv(i,s,f,p)}finally{$.p=w,P.T=y}}function ZA(i,s,f,p){var y=P.T;P.T=null;var w=$.p;try{$.p=8,wv(i,s,f,p)}finally{$.p=w,P.T=y}}function wv(i,s,f,p){if(pf){var y=Sv(p);if(y===null)sv(i,s,p,vf,f),i2(i,p);else if(e3(y,i,s,f,p))p.stopPropagation();else if(i2(i,p),s&4&&-1<JA.indexOf(i)){for(;y!==null;){var w=Ki(y);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var D=ti(w.pendingLanes);if(D!==0){var F=w;for(F.pendingLanes|=2,F.entangledLanes|=2;D;){var X=1<<31-Fn(D);F.entanglements[1]|=X,D&=~X}ca(w),(ft&6)===0&&(Yc=Ye()+500,$u(0))}}break;case 31:case 13:F=ii(w,2),F!==null&&nr(F,w,2),Zc(),xv(w,2)}if(w=Sv(p),w===null&&sv(i,s,p,vf,f),w===y)break;y=w}y!==null&&p.stopPropagation()}else sv(i,s,p,null,f)}}function Sv(i){return i=Eh(i),Cv(i)}var vf=null;function Cv(i){if(vf=null,i=$i(i),i!==null){var s=o(i);if(s===null)i=null;else{var f=s.tag;if(f===13){if(i=u(s),i!==null)return i;i=null}else if(f===31){if(i=l(s),i!==null)return i;i=null}else if(f===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return vf=i,null}function o2(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(In()){case $n:return 2;case En:return 8;case nn:case Ar:return 32;case Kr:return 268435456;default:return 32}default:return 32}}var Ev=!1,Bo=null,Fo=null,Po=null,el=new Map,tl=new Map,Lo=[],JA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function i2(i,s){switch(i){case"focusin":case"focusout":Bo=null;break;case"dragenter":case"dragleave":Fo=null;break;case"mouseover":case"mouseout":Po=null;break;case"pointerover":case"pointerout":el.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":tl.delete(s.pointerId)}}function nl(i,s,f,p,y,w){return i===null||i.nativeEvent!==w?(i={blockedOn:s,domEventName:f,eventSystemFlags:p,nativeEvent:w,targetContainers:[y]},s!==null&&(s=Ki(s),s!==null&&r2(s)),i):(i.eventSystemFlags|=p,s=i.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),i)}function e3(i,s,f,p,y){switch(s){case"focusin":return Bo=nl(Bo,i,s,f,p,y),!0;case"dragenter":return Fo=nl(Fo,i,s,f,p,y),!0;case"mouseover":return Po=nl(Po,i,s,f,p,y),!0;case"pointerover":var w=y.pointerId;return el.set(w,nl(el.get(w)||null,i,s,f,p,y)),!0;case"gotpointercapture":return w=y.pointerId,tl.set(w,nl(tl.get(w)||null,i,s,f,p,y)),!0}return!1}function s2(i){var s=$i(i.target);if(s!==null){var f=o(s);if(f!==null){if(s=f.tag,s===13){if(s=u(f),s!==null){i.blockedOn=s,w0(i.priority,function(){a2(f)});return}}else if(s===31){if(s=l(f),s!==null){i.blockedOn=s,w0(i.priority,function(){a2(f)});return}}else if(s===3&&f.stateNode.current.memoizedState.isDehydrated){i.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}i.blockedOn=null}function mf(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var f=Sv(i.nativeEvent);if(f===null){f=i.nativeEvent;var p=new f.constructor(f.type,f);Ch=p,f.target.dispatchEvent(p),Ch=null}else return s=Ki(f),s!==null&&r2(s),i.blockedOn=f,!1;s.shift()}return!0}function u2(i,s,f){mf(i)&&f.delete(s)}function t3(){Ev=!1,Bo!==null&&mf(Bo)&&(Bo=null),Fo!==null&&mf(Fo)&&(Fo=null),Po!==null&&mf(Po)&&(Po=null),el.forEach(u2),tl.forEach(u2)}function gf(i,s){i.blockedOn===s&&(i.blockedOn=null,Ev||(Ev=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,t3)))}var yf=null;function l2(i){yf!==i&&(yf=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){yf===i&&(yf=null);for(var s=0;s<i.length;s+=3){var f=i[s],p=i[s+1],y=i[s+2];if(typeof p!="function"){if(Cv(p||f)===null)continue;break}var w=Ki(f);w!==null&&(i.splice(s,3),s-=3,Sp(w,{pending:!0,data:y,method:f.method,action:p},p,y))}}))}function Ds(i){function s(X){return gf(X,i)}Bo!==null&&gf(Bo,i),Fo!==null&&gf(Fo,i),Po!==null&&gf(Po,i),el.forEach(s),tl.forEach(s);for(var f=0;f<Lo.length;f++){var p=Lo[f];p.blockedOn===i&&(p.blockedOn=null)}for(;0<Lo.length&&(f=Lo[0],f.blockedOn===null);)s2(f),f.blockedOn===null&&Lo.shift();if(f=(i.ownerDocument||i).$$reactFormReplay,f!=null)for(p=0;p<f.length;p+=3){var y=f[p],w=f[p+1],D=y[Yn]||null;if(typeof w=="function")D||l2(f);else if(D){var F=null;if(w&&w.hasAttribute("formAction")){if(y=w,D=w[Yn]||null)F=D.formAction;else if(Cv(y)!==null)continue}else F=D.action;typeof F=="function"?f[p+1]=F:(f.splice(p,3),p-=3),l2(f)}}}function c2(){function i(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(D){return y=D})},focusReset:"manual",scroll:"manual"})}function s(){y!==null&&(y(),y=null),p||setTimeout(f,20)}function f(){if(!p&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(f,100),function(){p=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),y!==null&&(y(),y=null)}}}function Rv(i){this._internalRoot=i}bf.prototype.render=Rv.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var f=s.current,p=gr();t2(f,p,i,s,null,null)},bf.prototype.unmount=Rv.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;t2(i.current,2,null,i,null,null),Zc(),s[qi]=null}};function bf(i){this._internalRoot=i}bf.prototype.unstable_scheduleHydration=function(i){if(i){var s=x0();i={blockedOn:null,target:i,priority:s};for(var f=0;f<Lo.length&&s!==0&&s<Lo[f].priority;f++);Lo.splice(f,0,i),f===0&&s2(i)}};var f2=n.version;if(f2!=="19.2.3")throw Error(r(527,f2,"19.2.3"));$.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=d(s),i=i!==null?h(i):null,i=i===null?null:i.stateNode,i};var n3={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xf.isDisabled&&xf.supportsFiber)try{Bn=xf.inject(n3),Yt=xf}catch{}}return al.createRoot=function(i,s){if(!a(i))throw Error(r(299));var f=!1,p="",y=y1,w=b1,D=x1;return s!=null&&(s.unstable_strictMode===!0&&(f=!0),s.identifierPrefix!==void 0&&(p=s.identifierPrefix),s.onUncaughtError!==void 0&&(y=s.onUncaughtError),s.onCaughtError!==void 0&&(w=s.onCaughtError),s.onRecoverableError!==void 0&&(D=s.onRecoverableError)),s=Jx(i,1,!1,null,null,f,p,null,y,w,D,c2),i[qi]=s.current,iv(i),new Rv(s)},al.hydrateRoot=function(i,s,f){if(!a(i))throw Error(r(299));var p=!1,y="",w=y1,D=b1,F=x1,X=null;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(y=f.identifierPrefix),f.onUncaughtError!==void 0&&(w=f.onUncaughtError),f.onCaughtError!==void 0&&(D=f.onCaughtError),f.onRecoverableError!==void 0&&(F=f.onRecoverableError),f.formState!==void 0&&(X=f.formState)),s=Jx(i,1,!0,s,f??null,p,y,X,w,D,F,c2),s.context=e2(null),f=s.current,p=gr(),p=vh(p),y=Co(p),y.callback=null,Eo(f,y,p),f=p,s.current.lanes=f,hu(s,f),ca(s),i[qi]=s.current,iv(i),new bf(s)},al.version="19.2.3",al}var w2;function h3(){if(w2)return Av.exports;w2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),Av.exports=d3(),Av.exports}var p3=h3();var S2="popstate";function v3(t={}){function n(a,o){let{pathname:u="/",search:l="",hash:c=""}=Li(a.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),Hm("",{pathname:u,search:l,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function e(a,o){let u=a.document.querySelector("base"),l="";if(u&&u.getAttribute("href")){let c=a.location.href,d=c.indexOf("#");l=d===-1?c:c.slice(0,d)}return l+"#"+(typeof o=="string"?o:_l(o))}function r(a,o){jr(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return g3(n,e,r,t)}function Ht(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}function jr(t,n){if(!t){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function m3(){return Math.random().toString(36).substring(2,10)}function C2(t,n){return{usr:t.state,key:t.key,idx:n}}function Hm(t,n,e=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof n=="string"?Li(n):n,state:e,key:n&&n.key||r||m3()}}function _l({pathname:t="/",search:n="",hash:e=""}){return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),e&&e!=="#"&&(t+=e.charAt(0)==="#"?e:"#"+e),t}function Li(t){let n={};if(t){let e=t.indexOf("#");e>=0&&(n.hash=t.substring(e),t=t.substring(0,e));let r=t.indexOf("?");r>=0&&(n.search=t.substring(r),t=t.substring(0,r)),t&&(n.pathname=t)}return n}function g3(t,n,e,r={}){let{window:a=document.defaultView,v5Compat:o=!1}=r,u=a.history,l="POP",c=null,d=h();d==null&&(d=0,u.replaceState({...u.state,idx:d},""));function h(){return(u.state||{idx:null}).idx}function v(){l="POP";let S=h(),C=S==null?null:S-d;d=S,c&&c({action:l,location:x.location,delta:C})}function m(S,C){l="PUSH";let _=Hm(x.location,S,C);e&&e(_,S),d=h()+1;let R=C2(_,d),E=x.createHref(_);try{u.pushState(R,"",E)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;a.location.assign(E)}o&&c&&c({action:l,location:x.location,delta:1})}function g(S,C){l="REPLACE";let _=Hm(x.location,S,C);e&&e(_,S),d=h();let R=C2(_,d),E=x.createHref(_);u.replaceState(R,"",E),o&&c&&c({action:l,location:x.location,delta:0})}function b(S){return y3(S)}let x={get action(){return l},get location(){return t(a,u)},listen(S){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(S2,v),c=S,()=>{a.removeEventListener(S2,v),c=null}},createHref(S){return n(a,S)},createURL:b,encodeLocation(S){let C=b(S);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:m,replace:g,go(S){return u.go(S)}};return x}function y3(t,n=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),Ht(e,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:_l(t);return r=r.replace(/ $/,"%20"),!n&&r.startsWith("//")&&(r=e+r),new URL(r,e)}function tC(t,n,e="/"){return b3(t,n,e,!1)}function b3(t,n,e,r){let a=typeof n=="string"?Li(n):n,o=ro(a.pathname||"/",e);if(o==null)return null;let u=nC(t);x3(u);let l=null;for(let c=0;l==null&&c<u.length;++c){let d=N3(o);l=D3(u[c],d,r)}return l}function nC(t,n=[],e=[],r="",a=!1){let o=(u,l,c=a,d)=>{let h={relativePath:d===void 0?u.path||"":d,caseSensitive:u.caseSensitive===!0,childrenIndex:l,route:u};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&c)return;Ht(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let v=no([r,h.relativePath]),m=e.concat(h);u.children&&u.children.length>0&&(Ht(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),nC(u.children,n,m,v,c)),!(u.path==null&&!u.index)&&n.push({path:v,score:T3(v,u.index),routesMeta:m})};return t.forEach((u,l)=>{if(u.path===""||!u.path?.includes("?"))o(u,l);else for(let c of rC(u.path))o(u,l,!0,c)}),n}function rC(t){let n=t.split("/");if(n.length===0)return[];let[e,...r]=n,a=e.endsWith("?"),o=e.replace(/\?$/,"");if(r.length===0)return a?[o,""]:[o];let u=rC(r.join("/")),l=[];return l.push(...u.map(c=>c===""?o:[o,c].join("/"))),a&&l.push(...u),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function x3(t){t.sort((n,e)=>n.score!==e.score?e.score-n.score:A3(n.routesMeta.map(r=>r.childrenIndex),e.routesMeta.map(r=>r.childrenIndex)))}var w3=/^:[\w-]+$/,S3=3,C3=2,E3=1,R3=10,_3=-2,E2=t=>t==="*";function T3(t,n){let e=t.split("/"),r=e.length;return e.some(E2)&&(r+=_3),n&&(r+=C3),e.filter(a=>!E2(a)).reduce((a,o)=>a+(w3.test(o)?S3:o===""?E3:R3),r)}function A3(t,n){return t.length===n.length&&t.slice(0,-1).every((r,a)=>r===n[a])?t[t.length-1]-n[n.length-1]:0}function D3(t,n,e=!1){let{routesMeta:r}=t,a={},o="/",u=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,h=o==="/"?n:n.slice(o.length)||"/",v=Yf({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),m=c.route;if(!v&&d&&e&&!r[r.length-1].route.index&&(v=Yf({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!v)return null;Object.assign(a,v.params),u.push({params:a,pathname:no([o,v.pathname]),pathnameBase:B3(no([o,v.pathnameBase])),route:m}),v.pathnameBase!=="/"&&(o=no([o,v.pathnameBase]))}return u}function Yf(t,n){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[e,r]=k3(t.path,t.caseSensitive,t.end),a=n.match(e);if(!a)return null;let o=a[0],u=o.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:v},m)=>{if(h==="*"){let b=l[m]||"";u=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const g=l[m];return v&&!g?d[h]=void 0:d[h]=(g||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:u,pattern:t}}function k3(t,n=!1,e=!0){jr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,n?void 0:"i"),r]}function N3(t){try{return t.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return jr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),t}}function ro(t,n){if(n==="/")return t;if(!t.toLowerCase().startsWith(n.toLowerCase()))return null;let e=n.endsWith("/")?n.length-1:n.length,r=t.charAt(e);return r&&r!=="/"?null:t.slice(e)||"/"}var aC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,M3=t=>aC.test(t);function O3(t,n="/"){let{pathname:e,search:r="",hash:a=""}=typeof t=="string"?Li(t):t,o;if(e)if(M3(e))o=e;else{if(e.includes("//")){let u=e;e=e.replace(/\/\/+/g,"/"),jr(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${e}`)}e.startsWith("/")?o=R2(e.substring(1),"/"):o=R2(e,n)}else o=n;return{pathname:o,search:F3(r),hash:P3(a)}}function R2(t,n){let e=n.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function Mv(t,n,e,r){return`Cannot include a '${t}' character in a manually specified \`to.${n}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function I3(t){return t.filter((n,e)=>e===0||n.route.path&&n.route.path.length>0)}function oC(t){let n=I3(t);return n.map((e,r)=>r===n.length-1?e.pathname:e.pathnameBase)}function iC(t,n,e,r=!1){let a;typeof t=="string"?a=Li(t):(a={...t},Ht(!a.pathname||!a.pathname.includes("?"),Mv("?","pathname","search",a)),Ht(!a.pathname||!a.pathname.includes("#"),Mv("#","pathname","hash",a)),Ht(!a.search||!a.search.includes("#"),Mv("#","search","hash",a)));let o=t===""||a.pathname==="",u=o?"/":a.pathname,l;if(u==null)l=e;else{let v=n.length-1;if(!r&&u.startsWith("..")){let m=u.split("/");for(;m[0]==="..";)m.shift(),v-=1;a.pathname=m.join("/")}l=v>=0?n[v]:"/"}let c=O3(a,l),d=u&&u!=="/"&&u.endsWith("/"),h=(o||u===".")&&e.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}var no=t=>t.join("/").replace(/\/\/+/g,"/"),B3=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),F3=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,P3=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,L3=class{constructor(t,n,e,r=!1){this.status=t,this.statusText=n||"",this.internal=r,e instanceof Error?(this.data=e.toString(),this.error=e):this.data=e}};function z3(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function U3(t){return t.map(n=>n.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var sC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function uC(t,n){let e=t;if(typeof e!="string"||!aC.test(e))return{absoluteURL:void 0,isExternal:!1,to:e};let r=e,a=!1;if(sC)try{let o=new URL(window.location.href),u=e.startsWith("//")?new URL(o.protocol+e):new URL(e),l=ro(u.pathname,n);u.origin===o.origin&&l!=null?e=l+u.search+u.hash:a=!0}catch{jr(!1,`<Link to="${e}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:a,to:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var lC=["POST","PUT","PATCH","DELETE"];new Set(lC);var W3=["GET",...lC];new Set(W3);var iu=L.createContext(null);iu.displayName="DataRouter";var kd=L.createContext(null);kd.displayName="DataRouterState";var H3=L.createContext(!1),cC=L.createContext({isTransitioning:!1});cC.displayName="ViewTransition";var V3=L.createContext(new Map);V3.displayName="Fetchers";var j3=L.createContext(null);j3.displayName="Await";var Gr=L.createContext(null);Gr.displayName="Navigation";var Ul=L.createContext(null);Ul.displayName="Location";var uo=L.createContext({outlet:null,matches:[],isDataRoute:!1});uo.displayName="Route";var Ng=L.createContext(null);Ng.displayName="RouteError";var fC="REACT_ROUTER_ERROR",G3="REDIRECT",q3="ROUTE_ERROR_RESPONSE";function $3(t){if(t.startsWith(`${fC}:${G3}:{`))try{let n=JSON.parse(t.slice(28));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.location=="string"&&typeof n.reloadDocument=="boolean"&&typeof n.replace=="boolean")return n}catch{}}function K3(t){if(t.startsWith(`${fC}:${q3}:{`))try{let n=JSON.parse(t.slice(40));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string")return new L3(n.status,n.statusText,n.data)}catch{}}function X3(t,{relative:n}={}){Ht(Wl(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:r}=L.useContext(Gr),{hash:a,pathname:o,search:u}=Hl(t,{relative:n}),l=o;return e!=="/"&&(l=o==="/"?e:no([e,o])),r.createHref({pathname:l,search:u,hash:a})}function Wl(){return L.useContext(Ul)!=null}function zi(){return Ht(Wl(),"useLocation() may be used only in the context of a <Router> component."),L.useContext(Ul).location}var dC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function hC(t){L.useContext(Gr).static||L.useLayoutEffect(t)}function Y3(){let{isDataRoute:t}=L.useContext(uo);return t?lD():Q3()}function Q3(){Ht(Wl(),"useNavigate() may be used only in the context of a <Router> component.");let t=L.useContext(iu),{basename:n,navigator:e}=L.useContext(Gr),{matches:r}=L.useContext(uo),{pathname:a}=zi(),o=JSON.stringify(oC(r)),u=L.useRef(!1);return hC(()=>{u.current=!0}),L.useCallback((c,d={})=>{if(jr(u.current,dC),!u.current)return;if(typeof c=="number"){e.go(c);return}let h=iC(c,JSON.parse(o),a,d.relative==="path");t==null&&n!=="/"&&(h.pathname=h.pathname==="/"?n:no([n,h.pathname])),(d.replace?e.replace:e.push)(h,d.state,d)},[n,e,o,a,t])}L.createContext(null);function Hl(t,{relative:n}={}){let{matches:e}=L.useContext(uo),{pathname:r}=zi(),a=JSON.stringify(oC(e));return L.useMemo(()=>iC(t,JSON.parse(a),r,n==="path"),[t,a,r,n])}function Z3(t,n){return pC(t,n)}function pC(t,n,e,r,a){Ht(Wl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=L.useContext(Gr),{matches:u}=L.useContext(uo),l=u[u.length-1],c=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",v=l&&l.route;{let _=v&&v.path||"";mC(d,!v||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let m=zi(),g;if(n){let _=typeof n=="string"?Li(n):n;Ht(h==="/"||_.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${_.pathname}" was given in the \`location\` prop.`),g=_}else g=m;let b=g.pathname||"/",x=b;if(h!=="/"){let _=h.replace(/^\//,"").split("/");x="/"+b.replace(/^\//,"").split("/").slice(_.length).join("/")}let S=tC(t,{pathname:x});jr(v||S!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),jr(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=rD(S&&S.map(_=>Object.assign({},_,{params:Object.assign({},c,_.params),pathname:no([h,o.encodeLocation?o.encodeLocation(_.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?h:no([h,o.encodeLocation?o.encodeLocation(_.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathnameBase])})),u,e,r,a);return n&&C?L.createElement(Ul.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},C):C}function J3(){let t=uD(),n=z3(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),e=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",t),u=L.createElement(L.Fragment,null,L.createElement("p",null," Hey developer "),L.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",L.createElement("code",{style:o},"ErrorBoundary")," or"," ",L.createElement("code",{style:o},"errorElement")," prop on your route.")),L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},n),e?L.createElement("pre",{style:a},e):null,u)}var eD=L.createElement(J3,null),vC=class extends L.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){this.props.onError?this.props.onError(t,n):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const e=K3(t.digest);e&&(t=e)}let n=t!==void 0?L.createElement(uo.Provider,{value:this.props.routeContext},L.createElement(Ng.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?L.createElement(tD,{error:t},n):n}};vC.contextType=H3;var Ov=new WeakMap;function tD({children:t,error:n}){let{basename:e}=L.useContext(Gr);if(typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){let r=$3(n.digest);if(r){let a=Ov.get(n);if(a)throw a;let o=uC(r.location,e);if(sC&&!Ov.get(n))if(o.isExternal||r.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const u=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:r.replace}));throw Ov.set(n,u),u}return L.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return t}function nD({routeContext:t,match:n,children:e}){let r=L.useContext(iu);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),L.createElement(uo.Provider,{value:t},e)}function rD(t,n=[],e=null,r=null,a=null){if(t==null){if(!e)return null;if(e.errors)t=e.matches;else if(n.length===0&&!e.initialized&&e.matches.length>0)t=e.matches;else return null}let o=t,u=e?.errors;if(u!=null){let h=o.findIndex(v=>v.route.id&&u?.[v.route.id]!==void 0);Ht(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(e)for(let h=0;h<o.length;h++){let v=o[h];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(c=h),v.route.id){let{loaderData:m,errors:g}=e,b=v.route.loader&&!m.hasOwnProperty(v.route.id)&&(!g||g[v.route.id]===void 0);if(v.route.lazy||b){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}let d=e&&r?(h,v)=>{r(h,{location:e.location,params:e.matches?.[0]?.params??{},unstable_pattern:U3(e.matches),errorInfo:v})}:void 0;return o.reduceRight((h,v,m)=>{let g,b=!1,x=null,S=null;e&&(g=u&&v.route.id?u[v.route.id]:void 0,x=v.route.errorElement||eD,l&&(c<0&&m===0?(mC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,S=null):c===m&&(b=!0,S=v.route.hydrateFallbackElement||null)));let C=n.concat(o.slice(0,m+1)),_=()=>{let R;return g?R=x:b?R=S:v.route.Component?R=L.createElement(v.route.Component,null):v.route.element?R=v.route.element:R=h,L.createElement(nD,{match:v,routeContext:{outlet:h,matches:C,isDataRoute:e!=null},children:R})};return e&&(v.route.ErrorBoundary||v.route.errorElement||m===0)?L.createElement(vC,{location:e.location,revalidation:e.revalidation,component:x,error:g,children:_(),routeContext:{outlet:null,matches:C,isDataRoute:!0},onError:d}):_()},null)}function Mg(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aD(t){let n=L.useContext(iu);return Ht(n,Mg(t)),n}function oD(t){let n=L.useContext(kd);return Ht(n,Mg(t)),n}function iD(t){let n=L.useContext(uo);return Ht(n,Mg(t)),n}function Og(t){let n=iD(t),e=n.matches[n.matches.length-1];return Ht(e.route.id,`${t} can only be used on routes that contain a unique "id"`),e.route.id}function sD(){return Og("useRouteId")}function uD(){let t=L.useContext(Ng),n=oD("useRouteError"),e=Og("useRouteError");return t!==void 0?t:n.errors?.[e]}function lD(){let{router:t}=aD("useNavigate"),n=Og("useNavigate"),e=L.useRef(!1);return hC(()=>{e.current=!0}),L.useCallback(async(a,o={})=>{jr(e.current,dC),e.current&&(typeof a=="number"?await t.navigate(a):await t.navigate(a,{fromRouteId:n,...o}))},[t,n])}var _2={};function mC(t,n,e){!n&&!_2[t]&&(_2[t]=!0,jr(!1,e))}L.memo(cD);function cD({routes:t,future:n,state:e,onError:r}){return pC(t,void 0,e,r,n)}function Hf(t){Ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function fD({basename:t="/",children:n=null,location:e,navigationType:r="POP",navigator:a,static:o=!1,unstable_useTransitions:u}){Ht(!Wl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=L.useMemo(()=>({basename:l,navigator:a,static:o,unstable_useTransitions:u,future:{}}),[l,a,o,u]);typeof e=="string"&&(e=Li(e));let{pathname:d="/",search:h="",hash:v="",state:m=null,key:g="default"}=e,b=L.useMemo(()=>{let x=ro(d,l);return x==null?null:{location:{pathname:x,search:h,hash:v,state:m,key:g},navigationType:r}},[l,d,h,v,m,g,r]);return jr(b!=null,`<Router basename="${l}"> is not able to match the URL "${d}${h}${v}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:L.createElement(Gr.Provider,{value:c},L.createElement(Ul.Provider,{children:n,value:b}))}function dD({children:t,location:n}){return Z3(Vm(t),n)}function Vm(t,n=[]){let e=[];return L.Children.forEach(t,(r,a)=>{if(!L.isValidElement(r))return;let o=[...n,a];if(r.type===L.Fragment){e.push.apply(e,Vm(r.props.children,o));return}Ht(r.type===Hf,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ht(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=Vm(r.props.children,o)),e.push(u)}),e}var Vf="get",jf="application/x-www-form-urlencoded";function Nd(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function hD(t){return Nd(t)&&t.tagName.toLowerCase()==="button"}function pD(t){return Nd(t)&&t.tagName.toLowerCase()==="form"}function vD(t){return Nd(t)&&t.tagName.toLowerCase()==="input"}function mD(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function gD(t,n){return t.button===0&&(!n||n==="_self")&&!mD(t)}var wf=null;function yD(){if(wf===null)try{new FormData(document.createElement("form"),0),wf=!1}catch{wf=!0}return wf}var bD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Iv(t){return t!=null&&!bD.has(t)?(jr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${jf}"`),null):t}function xD(t,n){let e,r,a,o,u;if(pD(t)){let l=t.getAttribute("action");r=l?ro(l,n):null,e=t.getAttribute("method")||Vf,a=Iv(t.getAttribute("enctype"))||jf,o=new FormData(t)}else if(hD(t)||vD(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(r=c?ro(c,n):null,e=t.getAttribute("formmethod")||l.getAttribute("method")||Vf,a=Iv(t.getAttribute("formenctype"))||Iv(l.getAttribute("enctype"))||jf,o=new FormData(l,t),!yD()){let{name:d,type:h,value:v}=t;if(h==="image"){let m=d?`${d}.`:"";o.append(`${m}x`,"0"),o.append(`${m}y`,"0")}else d&&o.append(d,v)}}else{if(Nd(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Vf,r=null,a=jf,u=t}return o&&a==="text/plain"&&(u=o,o=void 0),{action:r,method:e.toLowerCase(),encType:a,formData:o,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ig(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}function wD(t,n,e,r){let a=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${r}`:a.pathname=`${a.pathname}.${r}`:a.pathname==="/"?a.pathname=`_root.${r}`:n&&ro(a.pathname,n)==="/"?a.pathname=`${n.replace(/\/$/,"")}/_root.${r}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${r}`,a}async function SD(t,n){if(t.id in n)return n[t.id];try{let e=await import(t.module);return n[t.id]=e,e}catch(e){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function CD(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function ED(t,n,e){let r=await Promise.all(t.map(async a=>{let o=n.routes[a.route.id];if(o){let u=await SD(o,e);return u.links?u.links():[]}return[]}));return AD(r.flat(1).filter(CD).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function T2(t,n,e,r,a,o){let u=(c,d)=>e[d]?c.route.id!==e[d].route.id:!0,l=(c,d)=>e[d].pathname!==c.pathname||e[d].route.path?.endsWith("*")&&e[d].params["*"]!==c.params["*"];return o==="assets"?n.filter((c,d)=>u(c,d)||l(c,d)):o==="data"?n.filter((c,d)=>{let h=r.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(u(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let v=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function RD(t,n,{includeHydrateFallback:e}={}){return _D(t.map(r=>{let a=n.routes[r.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),e&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function _D(t){return[...new Set(t)]}function TD(t){let n={},e=Object.keys(t).sort();for(let r of e)n[r]=t[r];return n}function AD(t,n){let e=new Set;return new Set(n),t.reduce((r,a)=>{let o=JSON.stringify(TD(a));return e.has(o)||(e.add(o),r.push({key:o,link:a})),r},[])}function gC(){let t=L.useContext(iu);return Ig(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function DD(){let t=L.useContext(kd);return Ig(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Bg=L.createContext(void 0);Bg.displayName="FrameworkContext";function yC(){let t=L.useContext(Bg);return Ig(t,"You must render this element inside a <HydratedRouter> element"),t}function kD(t,n){let e=L.useContext(Bg),[r,a]=L.useState(!1),[o,u]=L.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:h,onTouchStart:v}=n,m=L.useRef(null);L.useEffect(()=>{if(t==="render"&&u(!0),t==="viewport"){let x=C=>{C.forEach(_=>{u(_.isIntersecting)})},S=new IntersectionObserver(x,{threshold:.5});return m.current&&S.observe(m.current),()=>{S.disconnect()}}},[t]),L.useEffect(()=>{if(r){let x=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(x)}}},[r]);let g=()=>{a(!0)},b=()=>{a(!1),u(!1)};return e?t!=="intent"?[o,m,{}]:[o,m,{onFocus:ol(l,g),onBlur:ol(c,b),onMouseEnter:ol(d,g),onMouseLeave:ol(h,b),onTouchStart:ol(v,g)}]:[!1,m,{}]}function ol(t,n){return e=>{t&&t(e),e.defaultPrevented||n(e)}}function ND({page:t,...n}){let{router:e}=gC(),r=L.useMemo(()=>tC(e.routes,t,e.basename),[e.routes,t,e.basename]);return r?L.createElement(OD,{page:t,matches:r,...n}):null}function MD(t){let{manifest:n,routeModules:e}=yC(),[r,a]=L.useState([]);return L.useEffect(()=>{let o=!1;return ED(t,n,e).then(u=>{o||a(u)}),()=>{o=!0}},[t,n,e]),r}function OD({page:t,matches:n,...e}){let r=zi(),{future:a,manifest:o,routeModules:u}=yC(),{basename:l}=gC(),{loaderData:c,matches:d}=DD(),h=L.useMemo(()=>T2(t,n,d,o,r,"data"),[t,n,d,o,r]),v=L.useMemo(()=>T2(t,n,d,o,r,"assets"),[t,n,d,o,r]),m=L.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let x=new Set,S=!1;if(n.forEach(_=>{let R=o.routes[_.route.id];!R||!R.hasLoader||(!h.some(E=>E.route.id===_.route.id)&&_.route.id in c&&u[_.route.id]?.shouldRevalidate||R.hasClientLoader?S=!0:x.add(_.route.id))}),x.size===0)return[];let C=wD(t,l,a.unstable_trailingSlashAwareDataRequests,"data");return S&&x.size>0&&C.searchParams.set("_routes",n.filter(_=>x.has(_.route.id)).map(_=>_.route.id).join(",")),[C.pathname+C.search]},[l,a.unstable_trailingSlashAwareDataRequests,c,r,o,h,n,t,u]),g=L.useMemo(()=>RD(v,o),[v,o]),b=MD(v);return L.createElement(L.Fragment,null,m.map(x=>L.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...e})),g.map(x=>L.createElement("link",{key:x,rel:"modulepreload",href:x,...e})),b.map(({key:x,link:S})=>L.createElement("link",{key:x,nonce:e.nonce,...S})))}function ID(...t){return n=>{t.forEach(e=>{typeof e=="function"?e(n):e!=null&&(e.current=n)})}}var BD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{BD&&(window.__reactRouterVersion="7.12.0")}catch{}function FD({basename:t,children:n,unstable_useTransitions:e,window:r}){let a=L.useRef();a.current==null&&(a.current=v3({window:r,v5Compat:!0}));let o=a.current,[u,l]=L.useState({action:o.action,location:o.location}),c=L.useCallback(d=>{e===!1?l(d):L.startTransition(()=>l(d))},[e]);return L.useLayoutEffect(()=>o.listen(c),[o,c]),L.createElement(fD,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:o,unstable_useTransitions:e})}var bC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xC=L.forwardRef(function({onClick:n,discover:e="render",prefetch:r="none",relative:a,reloadDocument:o,replace:u,state:l,target:c,to:d,preventScrollReset:h,viewTransition:v,unstable_defaultShouldRevalidate:m,...g},b){let{basename:x,unstable_useTransitions:S}=L.useContext(Gr),C=typeof d=="string"&&bC.test(d),_=uC(d,x);d=_.to;let R=X3(d,{relative:a}),[E,T,k]=kD(r,g),N=UD(d,{replace:u,state:l,target:c,preventScrollReset:h,relative:a,viewTransition:v,unstable_defaultShouldRevalidate:m,unstable_useTransitions:S});function O(B){n&&n(B),B.defaultPrevented||N(B)}let I=L.createElement("a",{...g,...k,href:_.absoluteURL||R,onClick:_.isExternal||o?n:O,ref:ID(b,T),target:c,"data-discover":!C&&e==="render"?"true":void 0});return E&&!C?L.createElement(L.Fragment,null,I,L.createElement(ND,{page:R})):I});xC.displayName="Link";var PD=L.forwardRef(function({"aria-current":n="page",caseSensitive:e=!1,className:r="",end:a=!1,style:o,to:u,viewTransition:l,children:c,...d},h){let v=Hl(u,{relative:d.relative}),m=zi(),g=L.useContext(kd),{navigator:b,basename:x}=L.useContext(Gr),S=g!=null&&GD(v)&&l===!0,C=b.encodeLocation?b.encodeLocation(v).pathname:v.pathname,_=m.pathname,R=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;e||(_=_.toLowerCase(),R=R?R.toLowerCase():null,C=C.toLowerCase()),R&&x&&(R=ro(R,x)||R);const E=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let T=_===C||!a&&_.startsWith(C)&&_.charAt(E)==="/",k=R!=null&&(R===C||!a&&R.startsWith(C)&&R.charAt(C.length)==="/"),N={isActive:T,isPending:k,isTransitioning:S},O=T?n:void 0,I;typeof r=="function"?I=r(N):I=[r,T?"active":null,k?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let B=typeof o=="function"?o(N):o;return L.createElement(xC,{...d,"aria-current":O,className:I,ref:h,style:B,to:u,viewTransition:l},typeof c=="function"?c(N):c)});PD.displayName="NavLink";var LD=L.forwardRef(({discover:t="render",fetcherKey:n,navigate:e,reloadDocument:r,replace:a,state:o,method:u=Vf,action:l,onSubmit:c,relative:d,preventScrollReset:h,viewTransition:v,unstable_defaultShouldRevalidate:m,...g},b)=>{let{unstable_useTransitions:x}=L.useContext(Gr),S=VD(),C=jD(l,{relative:d}),_=u.toLowerCase()==="get"?"get":"post",R=typeof l=="string"&&bC.test(l),E=T=>{if(c&&c(T),T.defaultPrevented)return;T.preventDefault();let k=T.nativeEvent.submitter,N=k?.getAttribute("formmethod")||u,O=()=>S(k||T.currentTarget,{fetcherKey:n,method:N,navigate:e,replace:a,state:o,relative:d,preventScrollReset:h,viewTransition:v,unstable_defaultShouldRevalidate:m});x&&e!==!1?L.startTransition(()=>O()):O()};return L.createElement("form",{ref:b,method:_,action:C,onSubmit:r?c:E,...g,"data-discover":!R&&t==="render"?"true":void 0})});LD.displayName="Form";function zD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wC(t){let n=L.useContext(iu);return Ht(n,zD(t)),n}function UD(t,{target:n,replace:e,state:r,preventScrollReset:a,relative:o,viewTransition:u,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}={}){let d=Y3(),h=zi(),v=Hl(t,{relative:o});return L.useCallback(m=>{if(gD(m,n)){m.preventDefault();let g=e!==void 0?e:_l(h)===_l(v),b=()=>d(t,{replace:g,state:r,preventScrollReset:a,relative:o,viewTransition:u,unstable_defaultShouldRevalidate:l});c?L.startTransition(()=>b()):b()}},[h,d,v,e,r,n,t,a,o,u,l,c])}var WD=0,HD=()=>`__${String(++WD)}__`;function VD(){let{router:t}=wC("useSubmit"),{basename:n}=L.useContext(Gr),e=sD(),r=t.fetch,a=t.navigate;return L.useCallback(async(o,u={})=>{let{action:l,method:c,encType:d,formData:h,body:v}=xD(o,n);if(u.navigate===!1){let m=u.fetcherKey||HD();await r(m,e,u.action||l,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:h,body:v,formMethod:u.method||c,formEncType:u.encType||d,flushSync:u.flushSync})}else await a(u.action||l,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:h,body:v,formMethod:u.method||c,formEncType:u.encType||d,replace:u.replace,state:u.state,fromRouteId:e,flushSync:u.flushSync,viewTransition:u.viewTransition})},[r,a,n,e])}function jD(t,{relative:n}={}){let{basename:e}=L.useContext(Gr),r=L.useContext(uo);Ht(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),o={...Hl(t||".",{relative:n})},u=zi();if(t==null){o.search=u.search;let l=new URLSearchParams(o.search),c=l.getAll("index");if(c.some(h=>h==="")){l.delete("index"),c.filter(v=>v).forEach(v=>l.append("index",v));let h=l.toString();o.search=h?`?${h}`:""}}return(!t||t===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(o.pathname=o.pathname==="/"?e:no([e,o.pathname])),_l(o)}function GD(t,{relative:n}={}){let e=L.useContext(cC);Ht(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=wC("useViewTransitionState"),a=Hl(t,{relative:n});if(!e.isTransitioning)return!1;let o=ro(e.currentLocation.pathname,r)||e.currentLocation.pathname,u=ro(e.nextLocation.pathname,r)||e.nextLocation.pathname;return Yf(a.pathname,u)!=null||Yf(a.pathname,o)!=null}var SC=eC();const Sf=Dg(SC);function qD(){return le.jsxs(le.Fragment,{children:[le.jsx("h2",{children:"Navigation Menu"}),le.jsxs("ul",{children:[le.jsx("li",{children:le.jsx("a",{href:"#/assignment_1",children:"Image Text Recognition "})}),le.jsx("li",{children:le.jsx("a",{href:"#/assignment_2",children:" Face Recognition "})})]})]})}const Tl={black:"#000",white:"#fff"},ks={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Ns={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Ms={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Os={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Is={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},il={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},$D={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function ao(t,...n){const e=new URL(`https://mui.com/production-error/?code=${t}`);return n.forEach(r=>e.searchParams.append("args[]",r)),`Minified MUI error #${t}; visit ${e} for the full message.`}const Md="$$material";function Qf(){return Qf=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Qf.apply(null,arguments)}function KD(t){if(t.sheet)return t.sheet;for(var n=0;n<document.styleSheets.length;n++)if(document.styleSheets[n].ownerNode===t)return document.styleSheets[n]}function XD(t){var n=document.createElement("style");return n.setAttribute("data-emotion",t.key),t.nonce!==void 0&&n.setAttribute("nonce",t.nonce),n.appendChild(document.createTextNode("")),n.setAttribute("data-s",""),n}var YD=(function(){function t(e){var r=this;this._insertTag=function(a){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(a,o),r.tags.push(a)},this.isSpeedy=e.speedy===void 0?!0:e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var n=t.prototype;return n.hydrate=function(r){r.forEach(this._insertTag)},n.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(XD(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var o=KD(a);try{o.insertRule(r,o.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(r));this.ctr++},n.flush=function(){this.tags.forEach(function(r){var a;return(a=r.parentNode)==null?void 0:a.removeChild(r)}),this.tags=[],this.ctr=0},t})(),Ln="-ms-",Zf="-moz-",dt="-webkit-",CC="comm",Fg="rule",Pg="decl",QD="@import",EC="@keyframes",ZD="@layer",JD=Math.abs,Od=String.fromCharCode,ek=Object.assign;function tk(t,n){return Mn(t,0)^45?(((n<<2^Mn(t,0))<<2^Mn(t,1))<<2^Mn(t,2))<<2^Mn(t,3):0}function RC(t){return t.trim()}function nk(t,n){return(t=n.exec(t))?t[0]:t}function ht(t,n,e){return t.replace(n,e)}function jm(t,n){return t.indexOf(n)}function Mn(t,n){return t.charCodeAt(n)|0}function Al(t,n,e){return t.slice(n,e)}function va(t){return t.length}function Lg(t){return t.length}function Cf(t,n){return n.push(t),t}function rk(t,n){return t.map(n).join("")}var Id=1,eu=1,_C=0,ir=0,un=0,su="";function Bd(t,n,e,r,a,o,u){return{value:t,root:n,parent:e,type:r,props:a,children:o,line:Id,column:eu,length:u,return:""}}function sl(t,n){return ek(Bd("",null,null,"",null,null,0),t,{length:-t.length},n)}function ak(){return un}function ok(){return un=ir>0?Mn(su,--ir):0,eu--,un===10&&(eu=1,Id--),un}function Rr(){return un=ir<_C?Mn(su,ir++):0,eu++,un===10&&(eu=1,Id++),un}function Ca(){return Mn(su,ir)}function Gf(){return ir}function Vl(t,n){return Al(su,t,n)}function Dl(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function TC(t){return Id=eu=1,_C=va(su=t),ir=0,[]}function AC(t){return su="",t}function qf(t){return RC(Vl(ir-1,Gm(t===91?t+2:t===40?t+1:t)))}function ik(t){for(;(un=Ca())&&un<33;)Rr();return Dl(t)>2||Dl(un)>3?"":" "}function sk(t,n){for(;--n&&Rr()&&!(un<48||un>102||un>57&&un<65||un>70&&un<97););return Vl(t,Gf()+(n<6&&Ca()==32&&Rr()==32))}function Gm(t){for(;Rr();)switch(un){case t:return ir;case 34:case 39:t!==34&&t!==39&&Gm(un);break;case 40:t===41&&Gm(t);break;case 92:Rr();break}return ir}function uk(t,n){for(;Rr()&&t+un!==57;)if(t+un===84&&Ca()===47)break;return"/*"+Vl(n,ir-1)+"*"+Od(t===47?t:Rr())}function lk(t){for(;!Dl(Ca());)Rr();return Vl(t,ir)}function ck(t){return AC($f("",null,null,null,[""],t=TC(t),0,[0],t))}function $f(t,n,e,r,a,o,u,l,c){for(var d=0,h=0,v=u,m=0,g=0,b=0,x=1,S=1,C=1,_=0,R="",E=a,T=o,k=r,N=R;S;)switch(b=_,_=Rr()){case 40:if(b!=108&&Mn(N,v-1)==58){jm(N+=ht(qf(_),"&","&\f"),"&\f")!=-1&&(C=-1);break}case 34:case 39:case 91:N+=qf(_);break;case 9:case 10:case 13:case 32:N+=ik(b);break;case 92:N+=sk(Gf()-1,7);continue;case 47:switch(Ca()){case 42:case 47:Cf(fk(uk(Rr(),Gf()),n,e),c);break;default:N+="/"}break;case 123*x:l[d++]=va(N)*C;case 125*x:case 59:case 0:switch(_){case 0:case 125:S=0;case 59+h:C==-1&&(N=ht(N,/\f/g,"")),g>0&&va(N)-v&&Cf(g>32?D2(N+";",r,e,v-1):D2(ht(N," ","")+";",r,e,v-2),c);break;case 59:N+=";";default:if(Cf(k=A2(N,n,e,d,h,a,l,R,E=[],T=[],v),o),_===123)if(h===0)$f(N,n,k,k,E,o,v,l,T);else switch(m===99&&Mn(N,3)===110?100:m){case 100:case 108:case 109:case 115:$f(t,k,k,r&&Cf(A2(t,k,k,0,0,a,l,R,a,E=[],v),T),a,T,v,l,r?E:T);break;default:$f(N,k,k,k,[""],T,0,l,T)}}d=h=g=0,x=C=1,R=N="",v=u;break;case 58:v=1+va(N),g=b;default:if(x<1){if(_==123)--x;else if(_==125&&x++==0&&ok()==125)continue}switch(N+=Od(_),_*x){case 38:C=h>0?1:(N+="\f",-1);break;case 44:l[d++]=(va(N)-1)*C,C=1;break;case 64:Ca()===45&&(N+=qf(Rr())),m=Ca(),h=v=va(R=N+=lk(Gf())),_++;break;case 45:b===45&&va(N)==2&&(x=0)}}return o}function A2(t,n,e,r,a,o,u,l,c,d,h){for(var v=a-1,m=a===0?o:[""],g=Lg(m),b=0,x=0,S=0;b<r;++b)for(var C=0,_=Al(t,v+1,v=JD(x=u[b])),R=t;C<g;++C)(R=RC(x>0?m[C]+" "+_:ht(_,/&\f/g,m[C])))&&(c[S++]=R);return Bd(t,n,e,a===0?Fg:l,c,d,h)}function fk(t,n,e){return Bd(t,n,e,CC,Od(ak()),Al(t,2,-2),0)}function D2(t,n,e,r){return Bd(t,n,e,Pg,Al(t,0,r),Al(t,r+1,-1),r)}function Gs(t,n){for(var e="",r=Lg(t),a=0;a<r;a++)e+=n(t[a],a,t,n)||"";return e}function dk(t,n,e,r){switch(t.type){case ZD:if(t.children.length)break;case QD:case Pg:return t.return=t.return||t.value;case CC:return"";case EC:return t.return=t.value+"{"+Gs(t.children,r)+"}";case Fg:t.value=t.props.join(",")}return va(e=Gs(t.children,r))?t.return=t.value+"{"+e+"}":""}function hk(t){var n=Lg(t);return function(e,r,a,o){for(var u="",l=0;l<n;l++)u+=t[l](e,r,a,o)||"";return u}}function pk(t){return function(n){n.root||(n=n.return)&&t(n)}}function DC(t){var n=Object.create(null);return function(e){return n[e]===void 0&&(n[e]=t(e)),n[e]}}var vk=function(n,e,r){for(var a=0,o=0;a=o,o=Ca(),a===38&&o===12&&(e[r]=1),!Dl(o);)Rr();return Vl(n,ir)},mk=function(n,e){var r=-1,a=44;do switch(Dl(a)){case 0:a===38&&Ca()===12&&(e[r]=1),n[r]+=vk(ir-1,e,r);break;case 2:n[r]+=qf(a);break;case 4:if(a===44){n[++r]=Ca()===58?"&\f":"",e[r]=n[r].length;break}default:n[r]+=Od(a)}while(a=Rr());return n},gk=function(n,e){return AC(mk(TC(n),e))},k2=new WeakMap,yk=function(n){if(!(n.type!=="rule"||!n.parent||n.length<1)){for(var e=n.value,r=n.parent,a=n.column===r.column&&n.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(n.props.length===1&&e.charCodeAt(0)!==58&&!k2.get(r))&&!a){k2.set(n,!0);for(var o=[],u=gk(e,o),l=r.props,c=0,d=0;c<u.length;c++)for(var h=0;h<l.length;h++,d++)n.props[d]=o[c]?u[c].replace(/&\f/g,l[h]):l[h]+" "+u[c]}}},bk=function(n){if(n.type==="decl"){var e=n.value;e.charCodeAt(0)===108&&e.charCodeAt(2)===98&&(n.return="",n.value="")}};function kC(t,n){switch(tk(t,n)){case 5103:return dt+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return dt+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return dt+t+Zf+t+Ln+t+t;case 6828:case 4268:return dt+t+Ln+t+t;case 6165:return dt+t+Ln+"flex-"+t+t;case 5187:return dt+t+ht(t,/(\w+).+(:[^]+)/,dt+"box-$1$2"+Ln+"flex-$1$2")+t;case 5443:return dt+t+Ln+"flex-item-"+ht(t,/flex-|-self/,"")+t;case 4675:return dt+t+Ln+"flex-line-pack"+ht(t,/align-content|flex-|-self/,"")+t;case 5548:return dt+t+Ln+ht(t,"shrink","negative")+t;case 5292:return dt+t+Ln+ht(t,"basis","preferred-size")+t;case 6060:return dt+"box-"+ht(t,"-grow","")+dt+t+Ln+ht(t,"grow","positive")+t;case 4554:return dt+ht(t,/([^-])(transform)/g,"$1"+dt+"$2")+t;case 6187:return ht(ht(ht(t,/(zoom-|grab)/,dt+"$1"),/(image-set)/,dt+"$1"),t,"")+t;case 5495:case 3959:return ht(t,/(image-set\([^]*)/,dt+"$1$`$1");case 4968:return ht(ht(t,/(.+:)(flex-)?(.*)/,dt+"box-pack:$3"+Ln+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+dt+t+t;case 4095:case 3583:case 4068:case 2532:return ht(t,/(.+)-inline(.+)/,dt+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(va(t)-1-n>6)switch(Mn(t,n+1)){case 109:if(Mn(t,n+4)!==45)break;case 102:return ht(t,/(.+:)(.+)-([^]+)/,"$1"+dt+"$2-$3$1"+Zf+(Mn(t,n+3)==108?"$3":"$2-$3"))+t;case 115:return~jm(t,"stretch")?kC(ht(t,"stretch","fill-available"),n)+t:t}break;case 4949:if(Mn(t,n+1)!==115)break;case 6444:switch(Mn(t,va(t)-3-(~jm(t,"!important")&&10))){case 107:return ht(t,":",":"+dt)+t;case 101:return ht(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+dt+(Mn(t,14)===45?"inline-":"")+"box$3$1"+dt+"$2$3$1"+Ln+"$2box$3")+t}break;case 5936:switch(Mn(t,n+11)){case 114:return dt+t+Ln+ht(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return dt+t+Ln+ht(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return dt+t+Ln+ht(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return dt+t+Ln+t+t}return t}var xk=function(n,e,r,a){if(n.length>-1&&!n.return)switch(n.type){case Pg:n.return=kC(n.value,n.length);break;case EC:return Gs([sl(n,{value:ht(n.value,"@","@"+dt)})],a);case Fg:if(n.length)return rk(n.props,function(o){switch(nk(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Gs([sl(n,{props:[ht(o,/:(read-\w+)/,":"+Zf+"$1")]})],a);case"::placeholder":return Gs([sl(n,{props:[ht(o,/:(plac\w+)/,":"+dt+"input-$1")]}),sl(n,{props:[ht(o,/:(plac\w+)/,":"+Zf+"$1")]}),sl(n,{props:[ht(o,/:(plac\w+)/,Ln+"input-$1")]})],a)}return""})}},wk=[xk],Sk=function(n){var e=n.key;if(e==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(x){var S=x.getAttribute("data-emotion");S.indexOf(" ")!==-1&&(document.head.appendChild(x),x.setAttribute("data-s",""))})}var a=n.stylisPlugins||wk,o={},u,l=[];u=n.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),function(x){for(var S=x.getAttribute("data-emotion").split(" "),C=1;C<S.length;C++)o[S[C]]=!0;l.push(x)});var c,d=[yk,bk];{var h,v=[dk,pk(function(x){h.insert(x)})],m=hk(d.concat(a,v)),g=function(S){return Gs(ck(S),m)};c=function(S,C,_,R){h=_,g(S?S+"{"+C.styles+"}":C.styles),R&&(b.inserted[C.name]=!0)}}var b={key:e,sheet:new YD({key:e,container:u,nonce:n.nonce,speedy:n.speedy,prepend:n.prepend,insertionPoint:n.insertionPoint}),nonce:n.nonce,inserted:o,registered:{},insert:c};return b.sheet.hydrate(l),b},Bv={exports:{}},mt={};var N2;function Ck(){if(N2)return mt;N2=1;var t=typeof Symbol=="function"&&Symbol.for,n=t?Symbol.for("react.element"):60103,e=t?Symbol.for("react.portal"):60106,r=t?Symbol.for("react.fragment"):60107,a=t?Symbol.for("react.strict_mode"):60108,o=t?Symbol.for("react.profiler"):60114,u=t?Symbol.for("react.provider"):60109,l=t?Symbol.for("react.context"):60110,c=t?Symbol.for("react.async_mode"):60111,d=t?Symbol.for("react.concurrent_mode"):60111,h=t?Symbol.for("react.forward_ref"):60112,v=t?Symbol.for("react.suspense"):60113,m=t?Symbol.for("react.suspense_list"):60120,g=t?Symbol.for("react.memo"):60115,b=t?Symbol.for("react.lazy"):60116,x=t?Symbol.for("react.block"):60121,S=t?Symbol.for("react.fundamental"):60117,C=t?Symbol.for("react.responder"):60118,_=t?Symbol.for("react.scope"):60119;function R(T){if(typeof T=="object"&&T!==null){var k=T.$$typeof;switch(k){case n:switch(T=T.type,T){case c:case d:case r:case o:case a:case v:return T;default:switch(T=T&&T.$$typeof,T){case l:case h:case b:case g:case u:return T;default:return k}}case e:return k}}}function E(T){return R(T)===d}return mt.AsyncMode=c,mt.ConcurrentMode=d,mt.ContextConsumer=l,mt.ContextProvider=u,mt.Element=n,mt.ForwardRef=h,mt.Fragment=r,mt.Lazy=b,mt.Memo=g,mt.Portal=e,mt.Profiler=o,mt.StrictMode=a,mt.Suspense=v,mt.isAsyncMode=function(T){return E(T)||R(T)===c},mt.isConcurrentMode=E,mt.isContextConsumer=function(T){return R(T)===l},mt.isContextProvider=function(T){return R(T)===u},mt.isElement=function(T){return typeof T=="object"&&T!==null&&T.$$typeof===n},mt.isForwardRef=function(T){return R(T)===h},mt.isFragment=function(T){return R(T)===r},mt.isLazy=function(T){return R(T)===b},mt.isMemo=function(T){return R(T)===g},mt.isPortal=function(T){return R(T)===e},mt.isProfiler=function(T){return R(T)===o},mt.isStrictMode=function(T){return R(T)===a},mt.isSuspense=function(T){return R(T)===v},mt.isValidElementType=function(T){return typeof T=="string"||typeof T=="function"||T===r||T===d||T===o||T===a||T===v||T===m||typeof T=="object"&&T!==null&&(T.$$typeof===b||T.$$typeof===g||T.$$typeof===u||T.$$typeof===l||T.$$typeof===h||T.$$typeof===S||T.$$typeof===C||T.$$typeof===_||T.$$typeof===x)},mt.typeOf=R,mt}var M2;function Ek(){return M2||(M2=1,Bv.exports=Ck()),Bv.exports}var Fv,O2;function Rk(){if(O2)return Fv;O2=1;var t=Ek(),n={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},e={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};o[t.ForwardRef]=r,o[t.Memo]=a;function u(b){return t.isMemo(b)?a:o[b.$$typeof]||n}var l=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,v=Object.getPrototypeOf,m=Object.prototype;function g(b,x,S){if(typeof x!="string"){if(m){var C=v(x);C&&C!==m&&g(b,C,S)}var _=c(x);d&&(_=_.concat(d(x)));for(var R=u(b),E=u(x),T=0;T<_.length;++T){var k=_[T];if(!e[k]&&!(S&&S[k])&&!(E&&E[k])&&!(R&&R[k])){var N=h(x,k);try{l(b,k,N)}catch{}}}}return b}return Fv=g,Fv}Rk();var _k=!0;function NC(t,n,e){var r="";return e.split(" ").forEach(function(a){t[a]!==void 0?n.push(t[a]+";"):a&&(r+=a+" ")}),r}var zg=function(n,e,r){var a=n.key+"-"+e.name;(r===!1||_k===!1)&&n.registered[a]===void 0&&(n.registered[a]=e.styles)},Ug=function(n,e,r){zg(n,e,r);var a=n.key+"-"+e.name;if(n.inserted[e.name]===void 0){var o=e;do n.insert(e===o?"."+a:"",o,n.sheet,!0),o=o.next;while(o!==void 0)}};function Tk(t){for(var n=0,e,r=0,a=t.length;a>=4;++r,a-=4)e=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,e=(e&65535)*1540483477+((e>>>16)*59797<<16),e^=e>>>24,n=(e&65535)*1540483477+((e>>>16)*59797<<16)^(n&65535)*1540483477+((n>>>16)*59797<<16);switch(a){case 3:n^=(t.charCodeAt(r+2)&255)<<16;case 2:n^=(t.charCodeAt(r+1)&255)<<8;case 1:n^=t.charCodeAt(r)&255,n=(n&65535)*1540483477+((n>>>16)*59797<<16)}return n^=n>>>13,n=(n&65535)*1540483477+((n>>>16)*59797<<16),((n^n>>>15)>>>0).toString(36)}var Ak={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Dk=/[A-Z]|^ms/g,kk=/_EMO_([^_]+?)_([^]*?)_EMO_/g,MC=function(n){return n.charCodeAt(1)===45},I2=function(n){return n!=null&&typeof n!="boolean"},Pv=DC(function(t){return MC(t)?t:t.replace(Dk,"-$&").toLowerCase()}),B2=function(n,e){switch(n){case"animation":case"animationName":if(typeof e=="string")return e.replace(kk,function(r,a,o){return ma={name:a,styles:o,next:ma},a})}return Ak[n]!==1&&!MC(n)&&typeof e=="number"&&e!==0?e+"px":e};function kl(t,n,e){if(e==null)return"";var r=e;if(r.__emotion_styles!==void 0)return r;switch(typeof e){case"boolean":return"";case"object":{var a=e;if(a.anim===1)return ma={name:a.name,styles:a.styles,next:ma},a.name;var o=e;if(o.styles!==void 0){var u=o.next;if(u!==void 0)for(;u!==void 0;)ma={name:u.name,styles:u.styles,next:ma},u=u.next;var l=o.styles+";";return l}return Nk(t,n,e)}case"function":{if(t!==void 0){var c=ma,d=e(t);return ma=c,kl(t,n,d)}break}}var h=e;if(n==null)return h;var v=n[h];return v!==void 0?v:h}function Nk(t,n,e){var r="";if(Array.isArray(e))for(var a=0;a<e.length;a++)r+=kl(t,n,e[a])+";";else for(var o in e){var u=e[o];if(typeof u!="object"){var l=u;n!=null&&n[l]!==void 0?r+=o+"{"+n[l]+"}":I2(l)&&(r+=Pv(o)+":"+B2(o,l)+";")}else if(Array.isArray(u)&&typeof u[0]=="string"&&(n==null||n[u[0]]===void 0))for(var c=0;c<u.length;c++)I2(u[c])&&(r+=Pv(o)+":"+B2(o,u[c])+";");else{var d=kl(t,n,u);switch(o){case"animation":case"animationName":{r+=Pv(o)+":"+d+";";break}default:r+=o+"{"+d+"}"}}}return r}var F2=/label:\s*([^\s;{]+)\s*(;|$)/g,ma;function jl(t,n,e){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,a="";ma=void 0;var o=t[0];if(o==null||o.raw===void 0)r=!1,a+=kl(e,n,o);else{var u=o;a+=u[0]}for(var l=1;l<t.length;l++)if(a+=kl(e,n,t[l]),r){var c=o;a+=c[l]}F2.lastIndex=0;for(var d="",h;(h=F2.exec(a))!==null;)d+="-"+h[1];var v=Tk(a)+d;return{name:v,styles:a,next:ma}}var Mk=function(n){return n()},OC=Wm.useInsertionEffect?Wm.useInsertionEffect:!1,IC=OC||Mk,P2=OC||L.useLayoutEffect,BC=L.createContext(typeof HTMLElement<"u"?Sk({key:"css"}):null);BC.Provider;var Wg=function(n){return L.forwardRef(function(e,r){var a=L.useContext(BC);return n(e,a,r)})},Fd=L.createContext({}),Hg={}.hasOwnProperty,qm="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Ok=function(n,e){var r={};for(var a in e)Hg.call(e,a)&&(r[a]=e[a]);return r[qm]=n,r},Ik=function(n){var e=n.cache,r=n.serialized,a=n.isStringTag;return zg(e,r,a),IC(function(){return Ug(e,r,a)}),null},Bk=Wg(function(t,n,e){var r=t.css;typeof r=="string"&&n.registered[r]!==void 0&&(r=n.registered[r]);var a=t[qm],o=[r],u="";typeof t.className=="string"?u=NC(n.registered,o,t.className):t.className!=null&&(u=t.className+" ");var l=jl(o,void 0,L.useContext(Fd));u+=n.key+"-"+l.name;var c={};for(var d in t)Hg.call(t,d)&&d!=="css"&&d!==qm&&(c[d]=t[d]);return c.className=u,e&&(c.ref=e),L.createElement(L.Fragment,null,L.createElement(Ik,{cache:n,serialized:l,isStringTag:typeof a=="string"}),L.createElement(a,c))}),Fk=Bk,L2=function(n,e){var r=arguments;if(e==null||!Hg.call(e,"css"))return L.createElement.apply(void 0,r);var a=r.length,o=new Array(a);o[0]=Fk,o[1]=Ok(n,e);for(var u=2;u<a;u++)o[u]=r[u];return L.createElement.apply(null,o)};(function(t){var n;n||(n=t.JSX||(t.JSX={}))})(L2||(L2={}));var Pk=Wg(function(t,n){var e=t.styles,r=jl([e],void 0,L.useContext(Fd)),a=L.useRef();return P2(function(){var o=n.key+"-global",u=new n.sheet.constructor({key:o,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),l=!1,c=document.querySelector('style[data-emotion="'+o+" "+r.name+'"]');return n.sheet.tags.length&&(u.before=n.sheet.tags[0]),c!==null&&(l=!0,c.setAttribute("data-emotion",o),u.hydrate([c])),a.current=[u,l],function(){u.flush()}},[n]),P2(function(){var o=a.current,u=o[0],l=o[1];if(l){o[1]=!1;return}if(r.next!==void 0&&Ug(n,r.next,!0),u.tags.length){var c=u.tags[u.tags.length-1].nextElementSibling;u.before=c,u.flush()}n.insert("",r,u,!1)},[n,r.name]),null});function Vg(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return jl(n)}function Gl(){var t=Vg.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var Lk=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,zk=DC(function(t){return Lk.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),Uk=zk,Wk=function(n){return n!=="theme"},z2=function(n){return typeof n=="string"&&n.charCodeAt(0)>96?Uk:Wk},U2=function(n,e,r){var a;if(e){var o=e.shouldForwardProp;a=n.__emotion_forwardProp&&o?function(u){return n.__emotion_forwardProp(u)&&o(u)}:o}return typeof a!="function"&&r&&(a=n.__emotion_forwardProp),a},Hk=function(n){var e=n.cache,r=n.serialized,a=n.isStringTag;return zg(e,r,a),IC(function(){return Ug(e,r,a)}),null},Vk=function t(n,e){var r=n.__emotion_real===n,a=r&&n.__emotion_base||n,o,u;e!==void 0&&(o=e.label,u=e.target);var l=U2(n,e,r),c=l||z2(a),d=!c("as");return function(){var h=arguments,v=r&&n.__emotion_styles!==void 0?n.__emotion_styles.slice(0):[];if(o!==void 0&&v.push("label:"+o+";"),h[0]==null||h[0].raw===void 0)v.push.apply(v,h);else{var m=h[0];v.push(m[0]);for(var g=h.length,b=1;b<g;b++)v.push(h[b],m[b])}var x=Wg(function(S,C,_){var R=d&&S.as||a,E="",T=[],k=S;if(S.theme==null){k={};for(var N in S)k[N]=S[N];k.theme=L.useContext(Fd)}typeof S.className=="string"?E=NC(C.registered,T,S.className):S.className!=null&&(E=S.className+" ");var O=jl(v.concat(T),C.registered,k);E+=C.key+"-"+O.name,u!==void 0&&(E+=" "+u);var I=d&&l===void 0?z2(R):c,B={};for(var H in S)d&&H==="as"||I(H)&&(B[H]=S[H]);return B.className=E,_&&(B.ref=_),L.createElement(L.Fragment,null,L.createElement(Hk,{cache:C,serialized:O,isStringTag:typeof R=="string"}),L.createElement(R,B))});return x.displayName=o!==void 0?o:"Styled("+(typeof a=="string"?a:a.displayName||a.name||"Component")+")",x.defaultProps=n.defaultProps,x.__emotion_real=x,x.__emotion_base=a,x.__emotion_styles=v,x.__emotion_forwardProp=l,Object.defineProperty(x,"toString",{value:function(){return"."+u}}),x.withComponent=function(S,C){var _=t(S,Qf({},e,C,{shouldForwardProp:U2(x,C,!0)}));return _.apply(void 0,v)},x}},jk=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],$m=Vk.bind(null);jk.forEach(function(t){$m[t]=$m(t)});function Gk(t){return t==null||Object.keys(t).length===0}function qk(t){const{styles:n,defaultTheme:e={}}=t,r=typeof n=="function"?a=>n(Gk(a)?e:a):n;return le.jsx(Pk,{styles:r})}function FC(t,n){return $m(t,n)}function $k(t,n){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=n(t.__emotion_styles))}const W2=[];function Go(t){return W2[0]=t,jl(W2)}var Lv={exports:{}},_t={};var H2;function Kk(){if(H2)return _t;H2=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),m=Symbol.for("react.view_transition"),g=Symbol.for("react.client.reference");function b(x){if(typeof x=="object"&&x!==null){var S=x.$$typeof;switch(S){case t:switch(x=x.type,x){case e:case a:case r:case c:case d:case m:return x;default:switch(x=x&&x.$$typeof,x){case u:case l:case v:case h:return x;case o:return x;default:return S}}case n:return S}}}return _t.ContextConsumer=o,_t.ContextProvider=u,_t.Element=t,_t.ForwardRef=l,_t.Fragment=e,_t.Lazy=v,_t.Memo=h,_t.Portal=n,_t.Profiler=a,_t.StrictMode=r,_t.Suspense=c,_t.SuspenseList=d,_t.isContextConsumer=function(x){return b(x)===o},_t.isContextProvider=function(x){return b(x)===u},_t.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===t},_t.isForwardRef=function(x){return b(x)===l},_t.isFragment=function(x){return b(x)===e},_t.isLazy=function(x){return b(x)===v},_t.isMemo=function(x){return b(x)===h},_t.isPortal=function(x){return b(x)===n},_t.isProfiler=function(x){return b(x)===a},_t.isStrictMode=function(x){return b(x)===r},_t.isSuspense=function(x){return b(x)===c},_t.isSuspenseList=function(x){return b(x)===d},_t.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===e||x===a||x===r||x===c||x===d||typeof x=="object"&&x!==null&&(x.$$typeof===v||x.$$typeof===h||x.$$typeof===u||x.$$typeof===o||x.$$typeof===l||x.$$typeof===g||x.getModuleId!==void 0)},_t.typeOf=b,_t}var V2;function Xk(){return V2||(V2=1,Lv.exports=Kk()),Lv.exports}var PC=Xk();function ya(t){if(typeof t!="object"||t===null)return!1;const n=Object.getPrototypeOf(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function LC(t){if(L.isValidElement(t)||PC.isValidElementType(t)||!ya(t))return t;const n={};return Object.keys(t).forEach(e=>{n[e]=LC(t[e])}),n}function Gn(t,n,e={clone:!0}){const r=e.clone?{...t}:t;return ya(t)&&ya(n)&&Object.keys(n).forEach(a=>{L.isValidElement(n[a])||PC.isValidElementType(n[a])?r[a]=n[a]:ya(n[a])&&Object.prototype.hasOwnProperty.call(t,a)&&ya(t[a])?r[a]=Gn(t[a],n[a],e):e.clone?r[a]=ya(n[a])?LC(n[a]):n[a]:r[a]=n[a]}),r}const Yk=t=>{const n=Object.keys(t).map(e=>({key:e,val:t[e]}))||[];return n.sort((e,r)=>e.val-r.val),n.reduce((e,r)=>({...e,[r.key]:r.val}),{})};function Qk(t){const{values:n={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:e="px",step:r=5,...a}=t,o=Yk(n),u=Object.keys(o);function l(m){return`@media (min-width:${typeof n[m]=="number"?n[m]:m}${e})`}function c(m){return`@media (max-width:${(typeof n[m]=="number"?n[m]:m)-r/100}${e})`}function d(m,g){const b=u.indexOf(g);return`@media (min-width:${typeof n[m]=="number"?n[m]:m}${e}) and (max-width:${(b!==-1&&typeof n[u[b]]=="number"?n[u[b]]:g)-r/100}${e})`}function h(m){return u.indexOf(m)+1<u.length?d(m,u[u.indexOf(m)+1]):l(m)}function v(m){const g=u.indexOf(m);return g===0?l(u[1]):g===u.length-1?c(u[g]):d(m,u[u.indexOf(m)+1]).replace("@media","@media not all and")}return{keys:u,values:o,up:l,down:c,between:d,only:h,not:v,unit:e,...a}}function j2(t,n){if(!t.containerQueries)return n;const e=Object.keys(n).filter(r=>r.startsWith("@container")).sort((r,a)=>{const o=/min-width:\s*([0-9.]+)/;return+(r.match(o)?.[1]||0)-+(a.match(o)?.[1]||0)});return e.length?e.reduce((r,a)=>{const o=n[a];return delete r[a],r[a]=o,r},{...n}):n}function Zk(t,n){return n==="@"||n.startsWith("@")&&(t.some(e=>n.startsWith(`@${e}`))||!!n.match(/^@\d/))}function Jk(t,n){const e=n.match(/^@([^/]+)?\/?(.+)?$/);if(!e)return null;const[,r,a]=e,o=Number.isNaN(+r)?r||0:+r;return t.containerQueries(a).up(o)}function eN(t){const n=(o,u)=>o.replace("@media",u?`@container ${u}`:"@container");function e(o,u){o.up=(...l)=>n(t.breakpoints.up(...l),u),o.down=(...l)=>n(t.breakpoints.down(...l),u),o.between=(...l)=>n(t.breakpoints.between(...l),u),o.only=(...l)=>n(t.breakpoints.only(...l),u),o.not=(...l)=>{const c=n(t.breakpoints.not(...l),u);return c.includes("not all and")?c.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):c}}const r={},a=o=>(e(r,o),r);return e(a),{...t,containerQueries:a}}const tN={borderRadius:4};function xl(t,n){return n?Gn(t,n,{clone:!1}):t}const Pd={xs:0,sm:600,md:900,lg:1200,xl:1536},G2={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${Pd[t]}px)`},nN={containerQueries:t=>({up:n=>{let e=typeof n=="number"?n:Pd[n]||n;return typeof e=="number"&&(e=`${e}px`),t?`@container ${t} (min-width:${e})`:`@container (min-width:${e})`}})};function oo(t,n,e){const r=t.theme||{};if(Array.isArray(n)){const o=r.breakpoints||G2;return n.reduce((u,l,c)=>(u[o.up(o.keys[c])]=e(n[c]),u),{})}if(typeof n=="object"){const o=r.breakpoints||G2;return Object.keys(n).reduce((u,l)=>{if(Zk(o.keys,l)){const c=Jk(r.containerQueries?r:nN,l);c&&(u[c]=e(n[l],l))}else if(Object.keys(o.values||Pd).includes(l)){const c=o.up(l);u[c]=e(n[l],l)}else{const c=l;u[c]=n[c]}return u},{})}return e(n)}function rN(t={}){return t.keys?.reduce((e,r)=>{const a=t.up(r);return e[a]={},e},{})||{}}function q2(t,n){return t.reduce((e,r)=>{const a=e[r];return(!a||Object.keys(a).length===0)&&delete e[r],e},n)}function Ze(t){if(typeof t!="string")throw new Error(ao(7));return t.charAt(0).toUpperCase()+t.slice(1)}function Ld(t,n,e=!0){if(!n||typeof n!="string")return null;if(t&&t.vars&&e){const r=`vars.${n}`.split(".").reduce((a,o)=>a&&a[o]?a[o]:null,t);if(r!=null)return r}return n.split(".").reduce((r,a)=>r&&r[a]!=null?r[a]:null,t)}function Jf(t,n,e,r=e){let a;return typeof t=="function"?a=t(e):Array.isArray(t)?a=t[e]||r:a=Ld(t,e)||r,n&&(a=n(a,r,t)),a}function en(t){const{prop:n,cssProperty:e=t.prop,themeKey:r,transform:a}=t,o=u=>{if(u[n]==null)return null;const l=u[n],c=u.theme,d=Ld(c,r)||{};return oo(u,l,v=>{let m=Jf(d,a,v);return v===m&&typeof v=="string"&&(m=Jf(d,a,`${n}${v==="default"?"":Ze(v)}`,v)),e===!1?m:{[e]:m}})};return o.propTypes={},o.filterProps=[n],o}function aN(t){const n={};return e=>(n[e]===void 0&&(n[e]=t(e)),n[e])}const oN={m:"margin",p:"padding"},iN={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},$2={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},sN=aN(t=>{if(t.length>2)if($2[t])t=$2[t];else return[t];const[n,e]=t.split(""),r=oN[n],a=iN[e]||"";return Array.isArray(a)?a.map(o=>r+o):[r+a]}),jg=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Gg=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...jg,...Gg];function ql(t,n,e,r){const a=Ld(t,n,!0)??e;return typeof a=="number"||typeof a=="string"?o=>typeof o=="string"?o:typeof a=="string"?a.startsWith("var(")&&o===0?0:a.startsWith("var(")&&o===1?a:`calc(${o} * ${a})`:a*o:Array.isArray(a)?o=>{if(typeof o=="string")return o;const u=Math.abs(o),l=a[u];return o>=0?l:typeof l=="number"?-l:typeof l=="string"&&l.startsWith("var(")?`calc(-1 * ${l})`:`-${l}`}:typeof a=="function"?a:()=>{}}function qg(t){return ql(t,"spacing",8)}function $l(t,n){return typeof n=="string"||n==null?n:t(n)}function uN(t,n){return e=>t.reduce((r,a)=>(r[a]=$l(n,e),r),{})}function lN(t,n,e,r){if(!n.includes(e))return null;const a=sN(e),o=uN(a,r),u=t[e];return oo(t,u,o)}function zC(t,n){const e=qg(t.theme);return Object.keys(t).map(r=>lN(t,n,r,e)).reduce(xl,{})}function Kt(t){return zC(t,jg)}Kt.propTypes={};Kt.filterProps=jg;function Xt(t){return zC(t,Gg)}Xt.propTypes={};Xt.filterProps=Gg;function UC(t=8,n=qg({spacing:t})){if(t.mui)return t;const e=(...r)=>(r.length===0?[1]:r).map(o=>{const u=n(o);return typeof u=="number"?`${u}px`:u}).join(" ");return e.mui=!0,e}function zd(...t){const n=t.reduce((r,a)=>(a.filterProps.forEach(o=>{r[o]=a}),r),{}),e=r=>Object.keys(r).reduce((a,o)=>n[o]?xl(a,n[o](r)):a,{});return e.propTypes={},e.filterProps=t.reduce((r,a)=>r.concat(a.filterProps),[]),e}function Ur(t){return typeof t!="number"?t:`${t}px solid`}function qr(t,n){return en({prop:t,themeKey:"borders",transform:n})}const cN=qr("border",Ur),fN=qr("borderTop",Ur),dN=qr("borderRight",Ur),hN=qr("borderBottom",Ur),pN=qr("borderLeft",Ur),vN=qr("borderColor"),mN=qr("borderTopColor"),gN=qr("borderRightColor"),yN=qr("borderBottomColor"),bN=qr("borderLeftColor"),xN=qr("outline",Ur),wN=qr("outlineColor"),Ud=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const n=ql(t.theme,"shape.borderRadius",4),e=r=>({borderRadius:$l(n,r)});return oo(t,t.borderRadius,e)}return null};Ud.propTypes={};Ud.filterProps=["borderRadius"];zd(cN,fN,dN,hN,pN,vN,mN,gN,yN,bN,Ud,xN,wN);const Wd=t=>{if(t.gap!==void 0&&t.gap!==null){const n=ql(t.theme,"spacing",8),e=r=>({gap:$l(n,r)});return oo(t,t.gap,e)}return null};Wd.propTypes={};Wd.filterProps=["gap"];const Hd=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const n=ql(t.theme,"spacing",8),e=r=>({columnGap:$l(n,r)});return oo(t,t.columnGap,e)}return null};Hd.propTypes={};Hd.filterProps=["columnGap"];const Vd=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const n=ql(t.theme,"spacing",8),e=r=>({rowGap:$l(n,r)});return oo(t,t.rowGap,e)}return null};Vd.propTypes={};Vd.filterProps=["rowGap"];const SN=en({prop:"gridColumn"}),CN=en({prop:"gridRow"}),EN=en({prop:"gridAutoFlow"}),RN=en({prop:"gridAutoColumns"}),_N=en({prop:"gridAutoRows"}),TN=en({prop:"gridTemplateColumns"}),AN=en({prop:"gridTemplateRows"}),DN=en({prop:"gridTemplateAreas"}),kN=en({prop:"gridArea"});zd(Wd,Hd,Vd,SN,CN,EN,RN,_N,TN,AN,DN,kN);function qs(t,n){return n==="grey"?n:t}const NN=en({prop:"color",themeKey:"palette",transform:qs}),MN=en({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:qs}),ON=en({prop:"backgroundColor",themeKey:"palette",transform:qs});zd(NN,MN,ON);function xr(t){return t<=1&&t!==0?`${t*100}%`:t}const IN=en({prop:"width",transform:xr}),$g=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const n=e=>{const r=t.theme?.breakpoints?.values?.[e]||Pd[e];return r?t.theme?.breakpoints?.unit!=="px"?{maxWidth:`${r}${t.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:xr(e)}};return oo(t,t.maxWidth,n)}return null};$g.filterProps=["maxWidth"];const BN=en({prop:"minWidth",transform:xr}),FN=en({prop:"height",transform:xr}),PN=en({prop:"maxHeight",transform:xr}),LN=en({prop:"minHeight",transform:xr});en({prop:"size",cssProperty:"width",transform:xr});en({prop:"size",cssProperty:"height",transform:xr});const zN=en({prop:"boxSizing"});zd(IN,$g,BN,FN,PN,LN,zN);const Kl={border:{themeKey:"borders",transform:Ur},borderTop:{themeKey:"borders",transform:Ur},borderRight:{themeKey:"borders",transform:Ur},borderBottom:{themeKey:"borders",transform:Ur},borderLeft:{themeKey:"borders",transform:Ur},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Ur},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Ud},color:{themeKey:"palette",transform:qs},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:qs},backgroundColor:{themeKey:"palette",transform:qs},p:{style:Xt},pt:{style:Xt},pr:{style:Xt},pb:{style:Xt},pl:{style:Xt},px:{style:Xt},py:{style:Xt},padding:{style:Xt},paddingTop:{style:Xt},paddingRight:{style:Xt},paddingBottom:{style:Xt},paddingLeft:{style:Xt},paddingX:{style:Xt},paddingY:{style:Xt},paddingInline:{style:Xt},paddingInlineStart:{style:Xt},paddingInlineEnd:{style:Xt},paddingBlock:{style:Xt},paddingBlockStart:{style:Xt},paddingBlockEnd:{style:Xt},m:{style:Kt},mt:{style:Kt},mr:{style:Kt},mb:{style:Kt},ml:{style:Kt},mx:{style:Kt},my:{style:Kt},margin:{style:Kt},marginTop:{style:Kt},marginRight:{style:Kt},marginBottom:{style:Kt},marginLeft:{style:Kt},marginX:{style:Kt},marginY:{style:Kt},marginInline:{style:Kt},marginInlineStart:{style:Kt},marginInlineEnd:{style:Kt},marginBlock:{style:Kt},marginBlockStart:{style:Kt},marginBlockEnd:{style:Kt},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Wd},rowGap:{style:Vd},columnGap:{style:Hd},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:xr},maxWidth:{style:$g},minWidth:{transform:xr},height:{transform:xr},maxHeight:{transform:xr},minHeight:{transform:xr},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function UN(...t){const n=t.reduce((r,a)=>r.concat(Object.keys(a)),[]),e=new Set(n);return t.every(r=>e.size===Object.keys(r).length)}function WN(t,n){return typeof t=="function"?t(n):t}function HN(){function t(e,r,a,o){const u={[e]:r,theme:a},l=o[e];if(!l)return{[e]:r};const{cssProperty:c=e,themeKey:d,transform:h,style:v}=l;if(r==null)return null;if(d==="typography"&&r==="inherit")return{[e]:r};const m=Ld(a,d)||{};return v?v(u):oo(u,r,b=>{let x=Jf(m,h,b);return b===x&&typeof b=="string"&&(x=Jf(m,h,`${e}${b==="default"?"":Ze(b)}`,b)),c===!1?x:{[c]:x}})}function n(e){const{sx:r,theme:a={},nested:o}=e||{};if(!r)return null;const u=a.unstable_sxConfig??Kl;function l(c){let d=c;if(typeof c=="function")d=c(a);else if(typeof c!="object")return c;if(!d)return null;const h=rN(a.breakpoints),v=Object.keys(h);let m=h;return Object.keys(d).forEach(g=>{const b=WN(d[g],a);if(b!=null)if(typeof b=="object")if(u[g])m=xl(m,t(g,b,a,u));else{const x=oo({theme:a},b,S=>({[g]:S}));UN(x,b)?m[g]=n({sx:b,theme:a,nested:!0}):m=xl(m,x)}else m=xl(m,t(g,b,a,u))}),!o&&a.modularCssLayers?{"@layer sx":j2(a,q2(v,m))}:j2(a,q2(v,m))}return Array.isArray(r)?r.map(l):l(r)}return n}const Bi=HN();Bi.filterProps=["sx"];function VN(t,n){const e=this;if(e.vars){if(!e.colorSchemes?.[t]||typeof e.getColorSchemeSelector!="function")return{};let r=e.getColorSchemeSelector(t);return r==="&"?n:((r.includes("data-")||r.includes("."))&&(r=`*:where(${r.replace(/\s*&$/,"")}) &`),{[r]:n})}return e.palette.mode===t?n:{}}function Kg(t={},...n){const{breakpoints:e={},palette:r={},spacing:a,shape:o={},...u}=t,l=Qk(e),c=UC(a);let d=Gn({breakpoints:l,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:c,shape:{...tN,...o}},u);return d=eN(d),d.applyStyles=VN,d=n.reduce((h,v)=>Gn(h,v),d),d.unstable_sxConfig={...Kl,...u?.unstable_sxConfig},d.unstable_sx=function(v){return Bi({sx:v,theme:this})},d}function jN(t){return Object.keys(t).length===0}function GN(t=null){const n=L.useContext(Fd);return!n||jN(n)?t:n}const qN=Kg();function Xg(t=qN){return GN(t)}function zv(t){const n=Go(t);return t!==n&&n.styles?(n.styles.match(/^@layer\s+[^{]*$/)||(n.styles=`@layer global{${n.styles}}`),n):t}function $N({styles:t,themeId:n,defaultTheme:e={}}){const r=Xg(e),a=n&&r[n]||r;let o=typeof t=="function"?t(a):t;return a.modularCssLayers&&(Array.isArray(o)?o=o.map(u=>zv(typeof u=="function"?u(a):u)):o=zv(o)),le.jsx(qk,{styles:o})}const KN=t=>{const n={systemProps:{},otherProps:{}},e=t?.theme?.unstable_sxConfig??Kl;return Object.keys(t).forEach(r=>{e[r]?n.systemProps[r]=t[r]:n.otherProps[r]=t[r]}),n};function WC(t){const{sx:n,...e}=t,{systemProps:r,otherProps:a}=KN(e);let o;return Array.isArray(n)?o=[r,...n]:typeof n=="function"?o=(...u)=>{const l=n(...u);return ya(l)?{...r,...l}:r}:o={...r,...n},{...a,sx:o}}const K2=t=>t,XN=()=>{let t=K2;return{configure(n){t=n},generate(n){return t(n)},reset(){t=K2}}},HC=XN();function VC(t){var n,e,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(n=0;n<a;n++)t[n]&&(e=VC(t[n]))&&(r&&(r+=" "),r+=e)}else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function Qe(){for(var t,n,e=0,r="",a=arguments.length;e<a;e++)(t=arguments[e])&&(n=VC(t))&&(r&&(r+=" "),r+=n);return r}function YN(t={}){const{themeId:n,defaultTheme:e,defaultClassName:r="MuiBox-root",generateClassName:a}=t,o=FC("div",{shouldForwardProp:l=>l!=="theme"&&l!=="sx"&&l!=="as"})(Bi);return L.forwardRef(function(c,d){const h=Xg(e),{className:v,component:m="div",...g}=WC(c);return le.jsx(o,{as:m,ref:d,className:Qe(v,a?a(r):r),theme:n&&h[n]||h,...g})})}const QN={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Bt(t,n,e="Mui"){const r=QN[n];return r?`${e}-${r}`:`${HC.generate(t)}-${n}`}function Nt(t,n,e="Mui"){const r={};return n.forEach(a=>{r[a]=Bt(t,a,e)}),r}function jC(t){const{variants:n,...e}=t,r={variants:n,style:Go(e),isProcessed:!0};return r.style===e||n&&n.forEach(a=>{typeof a.style!="function"&&(a.style=Go(a.style))}),r}const ZN=Kg();function Uv(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function Ai(t,n){return n&&t&&typeof t=="object"&&t.styles&&!t.styles.startsWith("@layer")&&(t.styles=`@layer ${n}{${String(t.styles)}}`),t}function JN(t){return t?(n,e)=>e[t]:null}function eM(t,n,e){t.theme=rM(t.theme)?e:t.theme[n]||t.theme}function Kf(t,n,e){const r=typeof n=="function"?n(t):n;if(Array.isArray(r))return r.flatMap(a=>Kf(t,a,e));if(Array.isArray(r?.variants)){let a;if(r.isProcessed)a=e?Ai(r.style,e):r.style;else{const{variants:o,...u}=r;a=e?Ai(Go(u),e):u}return GC(t,r.variants,[a],e)}return r?.isProcessed?e?Ai(Go(r.style),e):r.style:e?Ai(Go(r),e):r}function GC(t,n,e=[],r=void 0){let a;e:for(let o=0;o<n.length;o+=1){const u=n[o];if(typeof u.props=="function"){if(a??={...t,...t.ownerState,ownerState:t.ownerState},!u.props(a))continue}else for(const l in u.props)if(t[l]!==u.props[l]&&t.ownerState?.[l]!==u.props[l])continue e;typeof u.style=="function"?(a??={...t,...t.ownerState,ownerState:t.ownerState},e.push(r?Ai(Go(u.style(a)),r):u.style(a))):e.push(r?Ai(Go(u.style),r):u.style)}return e}function tM(t={}){const{themeId:n,defaultTheme:e=ZN,rootShouldForwardProp:r=Uv,slotShouldForwardProp:a=Uv}=t;function o(l){eM(l,n,e)}return(l,c={})=>{$k(l,k=>k.filter(N=>N!==Bi));const{name:d,slot:h,skipVariantsResolver:v,skipSx:m,overridesResolver:g=JN(oM(h)),...b}=c,x=d&&d.startsWith("Mui")||h?"components":"custom",S=v!==void 0?v:h&&h!=="Root"&&h!=="root"||!1,C=m||!1;let _=Uv;h==="Root"||h==="root"?_=r:h?_=a:aM(l)&&(_=void 0);const R=FC(l,{shouldForwardProp:_,label:nM(),...b}),E=k=>{if(k.__emotion_real===k)return k;if(typeof k=="function")return function(O){return Kf(O,k,O.theme.modularCssLayers?x:void 0)};if(ya(k)){const N=jC(k);return function(I){return N.variants?Kf(I,N,I.theme.modularCssLayers?x:void 0):I.theme.modularCssLayers?Ai(N.style,x):N.style}}return k},T=(...k)=>{const N=[],O=k.map(E),I=[];if(N.push(o),d&&g&&I.push(function(q){const j=q.theme.components?.[d]?.styleOverrides;if(!j)return null;const P={};for(const $ in j)P[$]=Kf(q,j[$],q.theme.modularCssLayers?"theme":void 0);return g(q,P)}),d&&!S&&I.push(function(q){const j=q.theme?.components?.[d]?.variants;return j?GC(q,j,[],q.theme.modularCssLayers?"theme":void 0):null}),C||I.push(Bi),Array.isArray(O[0])){const A=O.shift(),q=new Array(N.length).fill(""),V=new Array(I.length).fill("");let j;j=[...q,...A,...V],j.raw=[...q,...A.raw,...V],N.unshift(j)}const B=[...N,...O,...I],H=R(...B);return l.muiName&&(H.muiName=l.muiName),H};return R.withConfig&&(T.withConfig=R.withConfig),T}}function nM(t,n){return void 0}function rM(t){for(const n in t)return!1;return!0}function aM(t){return typeof t=="string"&&t.charCodeAt(0)>96}function oM(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function ed(t,n,e=!1){const r={...n};for(const a in t)if(Object.prototype.hasOwnProperty.call(t,a)){const o=a;if(o==="components"||o==="slots")r[o]={...t[o],...r[o]};else if(o==="componentsProps"||o==="slotProps"){const u=t[o],l=n[o];if(!l)r[o]=u||{};else if(!u)r[o]=l;else{r[o]={...l};for(const c in u)if(Object.prototype.hasOwnProperty.call(u,c)){const d=c;r[o][d]=ed(u[d],l[d],e)}}}else o==="className"&&e&&n.className?r.className=Qe(t?.className,n?.className):o==="style"&&e&&n.style?r.style={...t?.style,...n?.style}:r[o]===void 0&&(r[o]=t[o])}return r}const Fi=typeof window<"u"?L.useLayoutEffect:L.useEffect;function iM(t,n=Number.MIN_SAFE_INTEGER,e=Number.MAX_SAFE_INTEGER){return Math.max(n,Math.min(t,e))}function Yg(t,n=0,e=1){return iM(t,n,e)}function sM(t){t=t.slice(1);const n=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let e=t.match(n);return e&&e[0].length===1&&(e=e.map(r=>r+r)),e?`rgb${e.length===4?"a":""}(${e.map((r,a)=>a<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Xo(t){if(t.type)return t;if(t.charAt(0)==="#")return Xo(sM(t));const n=t.indexOf("("),e=t.substring(0,n);if(!["rgb","rgba","hsl","hsla","color"].includes(e))throw new Error(ao(9,t));let r=t.substring(n+1,t.length-1),a;if(e==="color"){if(r=r.split(" "),a=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(a))throw new Error(ao(10,a))}else r=r.split(",");return r=r.map(o=>parseFloat(o)),{type:e,values:r,colorSpace:a}}const uM=t=>{const n=Xo(t);return n.values.slice(0,3).map((e,r)=>n.type.includes("hsl")&&r!==0?`${e}%`:e).join(" ")},ml=(t,n)=>{try{return uM(t)}catch{return t}};function jd(t){const{type:n,colorSpace:e}=t;let{values:r}=t;return n.includes("rgb")?r=r.map((a,o)=>o<3?parseInt(a,10):a):n.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),n.includes("color")?r=`${e} ${r.join(" ")}`:r=`${r.join(", ")}`,`${n}(${r})`}function qC(t){t=Xo(t);const{values:n}=t,e=n[0],r=n[1]/100,a=n[2]/100,o=r*Math.min(a,1-a),u=(d,h=(d+e/30)%12)=>a-o*Math.max(Math.min(h-3,9-h,1),-1);let l="rgb";const c=[Math.round(u(0)*255),Math.round(u(8)*255),Math.round(u(4)*255)];return t.type==="hsla"&&(l+="a",c.push(n[3])),jd({type:l,values:c})}function Km(t){t=Xo(t);let n=t.type==="hsl"||t.type==="hsla"?Xo(qC(t)).values:t.values;return n=n.map(e=>(t.type!=="color"&&(e/=255),e<=.03928?e/12.92:((e+.055)/1.055)**2.4)),Number((.2126*n[0]+.7152*n[1]+.0722*n[2]).toFixed(3))}function lM(t,n){const e=Km(t),r=Km(n);return(Math.max(e,r)+.05)/(Math.min(e,r)+.05)}function td(t,n){return t=Xo(t),n=Yg(n),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${n}`:t.values[3]=n,jd(t)}function bi(t,n,e){try{return td(t,n)}catch{return t}}function Gd(t,n){if(t=Xo(t),n=Yg(n),t.type.includes("hsl"))t.values[2]*=1-n;else if(t.type.includes("rgb")||t.type.includes("color"))for(let e=0;e<3;e+=1)t.values[e]*=1-n;return jd(t)}function wt(t,n,e){try{return Gd(t,n)}catch{return t}}function qd(t,n){if(t=Xo(t),n=Yg(n),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*n;else if(t.type.includes("rgb"))for(let e=0;e<3;e+=1)t.values[e]+=(255-t.values[e])*n;else if(t.type.includes("color"))for(let e=0;e<3;e+=1)t.values[e]+=(1-t.values[e])*n;return jd(t)}function St(t,n,e){try{return qd(t,n)}catch{return t}}function cM(t,n=.15){return Km(t)>.5?Gd(t,n):qd(t,n)}function Ef(t,n,e){try{return cM(t,n)}catch{return t}}const fM=L.createContext(),dM=()=>L.useContext(fM)??!1,hM=L.createContext(void 0);function pM(t){const{theme:n,name:e,props:r}=t;if(!n||!n.components||!n.components[e])return r;const a=n.components[e];return a.defaultProps?ed(a.defaultProps,r,n.components.mergeClassNameAndStyle):!a.styleOverrides&&!a.variants?ed(a,r,n.components.mergeClassNameAndStyle):r}function vM({props:t,name:n}){const e=L.useContext(hM);return pM({props:t,name:n,theme:{components:e}})}let X2=0;function mM(t){const[n,e]=L.useState(t),r=t||n;return L.useEffect(()=>{n==null&&(X2+=1,e(`mui-${X2}`))},[n]),r}const gM={...Wm},Y2=gM.useId;function Qg(t){if(Y2!==void 0){const n=Y2();return t??n}return mM(t)}const Q2={theme:void 0};function yM(t){let n,e;return function(a){let o=n;return(o===void 0||a.theme!==e)&&(Q2.theme=a.theme,o=jC(t(Q2)),n=o,e=a.theme),o}}function bM(t=""){function n(...r){if(!r.length)return"";const a=r[0];return typeof a=="string"&&!a.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${a}${n(...r.slice(1))})`:`, ${a}`}return(r,...a)=>`var(--${t?`${t}-`:""}${r}${n(...a)})`}const Z2=(t,n,e,r=[])=>{let a=t;n.forEach((o,u)=>{u===n.length-1?Array.isArray(a)?a[Number(o)]=e:a&&typeof a=="object"&&(a[o]=e):a&&typeof a=="object"&&(a[o]||(a[o]=r.includes(o)?[]:{}),a=a[o])})},xM=(t,n,e)=>{function r(a,o=[],u=[]){Object.entries(a).forEach(([l,c])=>{(!e||e&&!e([...o,l]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?r(c,[...o,l],Array.isArray(c)?[...u,l]:u):n([...o,l],c,u))})}r(t)},wM=(t,n)=>typeof n=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>t.includes(r))||t[t.length-1].toLowerCase().includes("opacity")?n:`${n}px`:n;function Wv(t,n){const{prefix:e,shouldSkipGeneratingVar:r}=n||{},a={},o={},u={};return xM(t,(l,c,d)=>{if((typeof c=="string"||typeof c=="number")&&(!r||!r(l,c))){const h=`--${e?`${e}-`:""}${l.join("-")}`,v=wM(l,c);Object.assign(a,{[h]:v}),Z2(o,l,`var(${h})`,d),Z2(u,l,`var(${h}, ${v})`,d)}},l=>l[0]==="vars"),{css:a,vars:o,varsWithDefaults:u}}function SM(t,n={}){const{getSelector:e=C,disableCssColorScheme:r,colorSchemeSelector:a,enableContrastVars:o}=n,{colorSchemes:u={},components:l,defaultColorScheme:c="light",...d}=t,{vars:h,css:v,varsWithDefaults:m}=Wv(d,n);let g=m;const b={},{[c]:x,...S}=u;if(Object.entries(S||{}).forEach(([E,T])=>{const{vars:k,css:N,varsWithDefaults:O}=Wv(T,n);g=Gn(g,O),b[E]={css:N,vars:k}}),x){const{css:E,vars:T,varsWithDefaults:k}=Wv(x,n);g=Gn(g,k),b[c]={css:E,vars:T}}function C(E,T){let k=a;if(a==="class"&&(k=".%s"),a==="data"&&(k="[data-%s]"),a?.startsWith("data-")&&!a.includes("%s")&&(k=`[${a}="%s"]`),E){if(k==="media")return t.defaultColorScheme===E?":root":{[`@media (prefers-color-scheme: ${u[E]?.palette?.mode||E})`]:{":root":T}};if(k)return t.defaultColorScheme===E?`:root, ${k.replace("%s",String(E))}`:k.replace("%s",String(E))}return":root"}return{vars:g,generateThemeVars:()=>{let E={...h};return Object.entries(b).forEach(([,{vars:T}])=>{E=Gn(E,T)}),E},generateStyleSheets:()=>{const E=[],T=t.defaultColorScheme||"light";function k(I,B){Object.keys(B).length&&E.push(typeof I=="string"?{[I]:{...B}}:I)}k(e(void 0,{...v}),v);const{[T]:N,...O}=b;if(N){const{css:I}=N,B=u[T]?.palette?.mode,H=!r&&B?{colorScheme:B,...I}:{...I};k(e(T,{...H}),H)}return Object.entries(O).forEach(([I,{css:B}])=>{const H=u[I]?.palette?.mode,A=!r&&H?{colorScheme:H,...B}:{...B};k(e(I,{...A}),A)}),o&&E.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),E}}}function CM(t){return function(e){return t==="media"?`@media (prefers-color-scheme: ${e})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${e}"] &`:t==="class"?`.${e} &`:t==="data"?`[data-${e}] &`:`${t.replace("%s",e)} &`:"&"}}function Ft(t,n,e=void 0){const r={};for(const a in t){const o=t[a];let u="",l=!0;for(let c=0;c<o.length;c+=1){const d=o[c];d&&(u+=(l===!0?"":" ")+n(d),l=!1,e&&e[d]&&(u+=" "+e[d]))}r[a]=u}return r}function Hv(t,n){return L.isValidElement(t)&&n.indexOf(t.type.muiName??t.type?._payload?.value?.muiName)!==-1}function $C(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Tl.white,default:Tl.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const KC=$C();function XC(){return{text:{primary:Tl.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Tl.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const Xm=XC();function J2(t,n,e,r){const a=r.light||r,o=r.dark||r*1.5;t[n]||(t.hasOwnProperty(e)?t[n]=t[e]:n==="light"?t.light=qd(t.main,a):n==="dark"&&(t.dark=Gd(t.main,o)))}function ew(t,n,e,r,a){const o=a.light||a,u=a.dark||a*1.5;n[e]||(n.hasOwnProperty(r)?n[e]=n[r]:e==="light"?n.light=`color-mix(in ${t}, ${n.main}, #fff ${(o*100).toFixed(0)}%)`:e==="dark"&&(n.dark=`color-mix(in ${t}, ${n.main}, #000 ${(u*100).toFixed(0)}%)`))}function EM(t="light"){return t==="dark"?{main:Ms[200],light:Ms[50],dark:Ms[400]}:{main:Ms[700],light:Ms[400],dark:Ms[800]}}function RM(t="light"){return t==="dark"?{main:Ns[200],light:Ns[50],dark:Ns[400]}:{main:Ns[500],light:Ns[300],dark:Ns[700]}}function _M(t="light"){return t==="dark"?{main:ks[500],light:ks[300],dark:ks[700]}:{main:ks[700],light:ks[400],dark:ks[800]}}function TM(t="light"){return t==="dark"?{main:Os[400],light:Os[300],dark:Os[700]}:{main:Os[700],light:Os[500],dark:Os[900]}}function AM(t="light"){return t==="dark"?{main:Is[400],light:Is[300],dark:Is[700]}:{main:Is[800],light:Is[500],dark:Is[900]}}function DM(t="light"){return t==="dark"?{main:il[400],light:il[300],dark:il[700]}:{main:"#ed6c02",light:il[500],dark:il[900]}}function kM(t){return`oklch(from ${t} var(--__l) 0 h / var(--__a))`}function Zg(t){const{mode:n="light",contrastThreshold:e=3,tonalOffset:r=.2,colorSpace:a,...o}=t,u=t.primary||EM(n),l=t.secondary||RM(n),c=t.error||_M(n),d=t.info||TM(n),h=t.success||AM(n),v=t.warning||DM(n);function m(S){return a?kM(S):lM(S,Xm.text.primary)>=e?Xm.text.primary:KC.text.primary}const g=({color:S,name:C,mainShade:_=500,lightShade:R=300,darkShade:E=700})=>{if(S={...S},!S.main&&S[_]&&(S.main=S[_]),!S.hasOwnProperty("main"))throw new Error(ao(11,C?` (${C})`:"",_));if(typeof S.main!="string")throw new Error(ao(12,C?` (${C})`:"",JSON.stringify(S.main)));return a?(ew(a,S,"light",R,r),ew(a,S,"dark",E,r)):(J2(S,"light",R,r),J2(S,"dark",E,r)),S.contrastText||(S.contrastText=m(S.main)),S};let b;return n==="light"?b=$C():n==="dark"&&(b=XC()),Gn({common:{...Tl},mode:n,primary:g({color:u,name:"primary"}),secondary:g({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:g({color:c,name:"error"}),warning:g({color:v,name:"warning"}),info:g({color:d,name:"info"}),success:g({color:h,name:"success"}),grey:$D,contrastThreshold:e,getContrastText:m,augmentColor:g,tonalOffset:r,...b},o)}function NM(t){const n={};return Object.entries(t).forEach(r=>{const[a,o]=r;typeof o=="object"&&(n[a]=`${o.fontStyle?`${o.fontStyle} `:""}${o.fontVariant?`${o.fontVariant} `:""}${o.fontWeight?`${o.fontWeight} `:""}${o.fontStretch?`${o.fontStretch} `:""}${o.fontSize||""}${o.lineHeight?`/${o.lineHeight} `:""}${o.fontFamily||""}`)}),n}function MM(t,n){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...n}}function OM(t){return Math.round(t*1e5)/1e5}const tw={textTransform:"uppercase"},nw='"Roboto", "Helvetica", "Arial", sans-serif';function IM(t,n){const{fontFamily:e=nw,fontSize:r=14,fontWeightLight:a=300,fontWeightRegular:o=400,fontWeightMedium:u=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:d,pxToRem:h,...v}=typeof n=="function"?n(t):n,m=r/14,g=h||(S=>`${S/c*m}rem`),b=(S,C,_,R,E)=>({fontFamily:e,fontWeight:S,fontSize:g(C),lineHeight:_,...e===nw?{letterSpacing:`${OM(R/C)}em`}:{},...E,...d}),x={h1:b(a,96,1.167,-1.5),h2:b(a,60,1.2,-.5),h3:b(o,48,1.167,0),h4:b(o,34,1.235,.25),h5:b(o,24,1.334,0),h6:b(u,20,1.6,.15),subtitle1:b(o,16,1.75,.15),subtitle2:b(u,14,1.57,.1),body1:b(o,16,1.5,.15),body2:b(o,14,1.43,.15),button:b(u,14,1.75,.4,tw),caption:b(o,12,1.66,.4),overline:b(o,12,2.66,1,tw),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Gn({htmlFontSize:c,pxToRem:g,fontFamily:e,fontSize:r,fontWeightLight:a,fontWeightRegular:o,fontWeightMedium:u,fontWeightBold:l,...x},v,{clone:!1})}const BM=.2,FM=.14,PM=.12;function Lt(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${BM})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${FM})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${PM})`].join(",")}const LM=["none",Lt(0,2,1,-1,0,1,1,0,0,1,3,0),Lt(0,3,1,-2,0,2,2,0,0,1,5,0),Lt(0,3,3,-2,0,3,4,0,0,1,8,0),Lt(0,2,4,-1,0,4,5,0,0,1,10,0),Lt(0,3,5,-1,0,5,8,0,0,1,14,0),Lt(0,3,5,-1,0,6,10,0,0,1,18,0),Lt(0,4,5,-2,0,7,10,1,0,2,16,1),Lt(0,5,5,-3,0,8,10,1,0,3,14,2),Lt(0,5,6,-3,0,9,12,1,0,3,16,2),Lt(0,6,6,-3,0,10,14,1,0,4,18,3),Lt(0,6,7,-4,0,11,15,1,0,4,20,3),Lt(0,7,8,-4,0,12,17,2,0,5,22,4),Lt(0,7,8,-4,0,13,19,2,0,5,24,4),Lt(0,7,9,-4,0,14,21,2,0,5,26,4),Lt(0,8,9,-5,0,15,22,2,0,6,28,5),Lt(0,8,10,-5,0,16,24,2,0,6,30,5),Lt(0,8,11,-5,0,17,26,2,0,6,32,5),Lt(0,9,11,-5,0,18,28,2,0,7,34,6),Lt(0,9,12,-6,0,19,29,2,0,7,36,6),Lt(0,10,13,-6,0,20,31,3,0,8,38,7),Lt(0,10,13,-6,0,21,33,3,0,8,40,7),Lt(0,10,14,-6,0,22,35,3,0,8,42,7),Lt(0,11,14,-7,0,23,36,3,0,9,44,8),Lt(0,11,15,-7,0,24,38,3,0,9,46,8)],zM={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},UM={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function rw(t){return`${Math.round(t)}ms`}function WM(t){if(!t)return 0;const n=t/36;return Math.min(Math.round((4+15*n**.25+n/5)*10),3e3)}function HM(t){const n={...zM,...t.easing},e={...UM,...t.duration};return{getAutoHeightDuration:WM,create:(a=["all"],o={})=>{const{duration:u=e.standard,easing:l=n.easeInOut,delay:c=0,...d}=o;return(Array.isArray(a)?a:[a]).map(h=>`${h} ${typeof u=="string"?u:rw(u)} ${l} ${typeof c=="string"?c:rw(c)}`).join(",")},...t,easing:n,duration:e}}const VM={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function jM(t){return ya(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function YC(t={}){const n={...t};function e(r){const a=Object.entries(r);for(let o=0;o<a.length;o++){const[u,l]=a[o];!jM(l)||u.startsWith("unstable_")?delete r[u]:ya(l)&&(r[u]={...l},e(r[u]))}}return e(n),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(n,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function aw(t){return typeof t=="number"?`${(t*100).toFixed(0)}%`:`calc((${t}) * 100%)`}const GM=t=>{if(!Number.isNaN(+t))return+t;const n=t.match(/\d*\.?\d+/g);if(!n)return 0;let e=0;for(let r=0;r<n.length;r+=1)e+=+n[r];return e};function qM(t){Object.assign(t,{alpha(n,e){const r=this||t;return r.colorSpace?`oklch(from ${n} l c h / ${typeof e=="string"?`calc(${e})`:e})`:r.vars?`rgba(${n.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof e=="string"?`calc(${e})`:e})`:td(n,GM(e))},lighten(n,e){const r=this||t;return r.colorSpace?`color-mix(in ${r.colorSpace}, ${n}, #fff ${aw(e)})`:qd(n,e)},darken(n,e){const r=this||t;return r.colorSpace?`color-mix(in ${r.colorSpace}, ${n}, #000 ${aw(e)})`:Gd(n,e)}})}function Ym(t={},...n){const{breakpoints:e,mixins:r={},spacing:a,palette:o={},transitions:u={},typography:l={},shape:c,colorSpace:d,...h}=t;if(t.vars&&t.generateThemeVars===void 0)throw new Error(ao(20));const v=Zg({...o,colorSpace:d}),m=Kg(t);let g=Gn(m,{mixins:MM(m.breakpoints,r),palette:v,shadows:LM.slice(),typography:IM(v,l),transitions:HM(u),zIndex:{...VM}});return g=Gn(g,h),g=n.reduce((b,x)=>Gn(b,x),g),g.unstable_sxConfig={...Kl,...h?.unstable_sxConfig},g.unstable_sx=function(x){return Bi({sx:x,theme:this})},g.toRuntimeSource=YC,qM(g),g}function Qm(t){let n;return t<1?n=5.11916*t**2:n=4.5*Math.log(t+1)+2,Math.round(n*10)/1e3}const $M=[...Array(25)].map((t,n)=>{if(n===0)return"none";const e=Qm(n);return`linear-gradient(rgba(255 255 255 / ${e}), rgba(255 255 255 / ${e}))`});function QC(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function ZC(t){return t==="dark"?$M:[]}function KM(t){const{palette:n={mode:"light"},opacity:e,overlays:r,colorSpace:a,...o}=t,u=Zg({...n,colorSpace:a});return{palette:u,opacity:{...QC(u.mode),...e},overlays:r||ZC(u.mode),...o}}function XM(t){return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!t[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const YM=t=>[...[...Array(25)].map((n,e)=>`--${t?`${t}-`:""}overlays-${e}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],QM=t=>(n,e)=>{const r=t.rootSelector||":root",a=t.colorSchemeSelector;let o=a;if(a==="class"&&(o=".%s"),a==="data"&&(o="[data-%s]"),a?.startsWith("data-")&&!a.includes("%s")&&(o=`[${a}="%s"]`),t.defaultColorScheme===n){if(n==="dark"){const u={};return YM(t.cssVarPrefix).forEach(l=>{u[l]=e[l],delete e[l]}),o==="media"?{[r]:e,"@media (prefers-color-scheme: dark)":{[r]:u}}:o?{[o.replace("%s",n)]:u,[`${r}, ${o.replace("%s",n)}`]:e}:{[r]:{...e,...u}}}if(o&&o!=="media")return`${r}, ${o.replace("%s",String(n))}`}else if(n){if(o==="media")return{[`@media (prefers-color-scheme: ${String(n)})`]:{[r]:e}};if(o)return o.replace("%s",String(n))}return r};function ZM(t,n){n.forEach(e=>{t[e]||(t[e]={})})}function fe(t,n,e){!t[n]&&e&&(t[n]=e)}function gl(t){return typeof t!="string"||!t.startsWith("hsl")?t:qC(t)}function Qa(t,n){`${n}Channel`in t||(t[`${n}Channel`]=ml(gl(t[n])))}function JM(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const fa=t=>{try{return t()}catch{}},eO=(t="mui")=>bM(t);function Vv(t,n,e,r,a){if(!e)return;e=e===!0?{}:e;const o=a==="dark"?"dark":"light";if(!r){n[a]=KM({...e,palette:{mode:o,...e?.palette},colorSpace:t});return}const{palette:u,...l}=Ym({...r,palette:{mode:o,...e?.palette},colorSpace:t});return n[a]={...e,palette:u,opacity:{...QC(o),...e?.opacity},overlays:e?.overlays||ZC(o)},l}function tO(t={},...n){const{colorSchemes:e={light:!0},defaultColorScheme:r,disableCssColorScheme:a=!1,cssVarPrefix:o="mui",nativeColor:u=!1,shouldSkipGeneratingVar:l=XM,colorSchemeSelector:c=e.light&&e.dark?"media":void 0,rootSelector:d=":root",...h}=t,v=Object.keys(e)[0],m=r||(e.light&&v!=="light"?"light":v),g=eO(o),{[m]:b,light:x,dark:S,...C}=e,_={...C};let R=b;if((m==="dark"&&!("dark"in e)||m==="light"&&!("light"in e))&&(R=!0),!R)throw new Error(ao(21,m));let E;u&&(E="oklch");const T=Vv(E,_,R,h,m);x&&!_.light&&Vv(E,_,x,void 0,"light"),S&&!_.dark&&Vv(E,_,S,void 0,"dark");let k={defaultColorScheme:m,...T,cssVarPrefix:o,colorSchemeSelector:c,rootSelector:d,getCssVar:g,colorSchemes:_,font:{...NM(T.typography),...T.font},spacing:JM(h.spacing)};Object.keys(k.colorSchemes).forEach(H=>{const A=k.colorSchemes[H].palette,q=j=>{const P=j.split("-"),$=P[1],Q=P[2];return g(j,A[$][Q])};A.mode==="light"&&(fe(A.common,"background","#fff"),fe(A.common,"onBackground","#000")),A.mode==="dark"&&(fe(A.common,"background","#000"),fe(A.common,"onBackground","#fff"));function V(j,P,$){if(E){let Q;return j===bi&&(Q=`transparent ${((1-$)*100).toFixed(0)}%`),j===wt&&(Q=`#000 ${($*100).toFixed(0)}%`),j===St&&(Q=`#fff ${($*100).toFixed(0)}%`),`color-mix(in ${E}, ${P}, ${Q})`}return j(P,$)}if(ZM(A,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),A.mode==="light"){fe(A.Alert,"errorColor",V(wt,A.error.light,.6)),fe(A.Alert,"infoColor",V(wt,A.info.light,.6)),fe(A.Alert,"successColor",V(wt,A.success.light,.6)),fe(A.Alert,"warningColor",V(wt,A.warning.light,.6)),fe(A.Alert,"errorFilledBg",q("palette-error-main")),fe(A.Alert,"infoFilledBg",q("palette-info-main")),fe(A.Alert,"successFilledBg",q("palette-success-main")),fe(A.Alert,"warningFilledBg",q("palette-warning-main")),fe(A.Alert,"errorFilledColor",fa(()=>A.getContrastText(A.error.main))),fe(A.Alert,"infoFilledColor",fa(()=>A.getContrastText(A.info.main))),fe(A.Alert,"successFilledColor",fa(()=>A.getContrastText(A.success.main))),fe(A.Alert,"warningFilledColor",fa(()=>A.getContrastText(A.warning.main))),fe(A.Alert,"errorStandardBg",V(St,A.error.light,.9)),fe(A.Alert,"infoStandardBg",V(St,A.info.light,.9)),fe(A.Alert,"successStandardBg",V(St,A.success.light,.9)),fe(A.Alert,"warningStandardBg",V(St,A.warning.light,.9)),fe(A.Alert,"errorIconColor",q("palette-error-main")),fe(A.Alert,"infoIconColor",q("palette-info-main")),fe(A.Alert,"successIconColor",q("palette-success-main")),fe(A.Alert,"warningIconColor",q("palette-warning-main")),fe(A.AppBar,"defaultBg",q("palette-grey-100")),fe(A.Avatar,"defaultBg",q("palette-grey-400")),fe(A.Button,"inheritContainedBg",q("palette-grey-300")),fe(A.Button,"inheritContainedHoverBg",q("palette-grey-A100")),fe(A.Chip,"defaultBorder",q("palette-grey-400")),fe(A.Chip,"defaultAvatarColor",q("palette-grey-700")),fe(A.Chip,"defaultIconColor",q("palette-grey-700")),fe(A.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),fe(A.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),fe(A.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),fe(A.LinearProgress,"primaryBg",V(St,A.primary.main,.62)),fe(A.LinearProgress,"secondaryBg",V(St,A.secondary.main,.62)),fe(A.LinearProgress,"errorBg",V(St,A.error.main,.62)),fe(A.LinearProgress,"infoBg",V(St,A.info.main,.62)),fe(A.LinearProgress,"successBg",V(St,A.success.main,.62)),fe(A.LinearProgress,"warningBg",V(St,A.warning.main,.62)),fe(A.Skeleton,"bg",E?V(bi,A.text.primary,.11):`rgba(${q("palette-text-primaryChannel")} / 0.11)`),fe(A.Slider,"primaryTrack",V(St,A.primary.main,.62)),fe(A.Slider,"secondaryTrack",V(St,A.secondary.main,.62)),fe(A.Slider,"errorTrack",V(St,A.error.main,.62)),fe(A.Slider,"infoTrack",V(St,A.info.main,.62)),fe(A.Slider,"successTrack",V(St,A.success.main,.62)),fe(A.Slider,"warningTrack",V(St,A.warning.main,.62));const j=E?V(wt,A.background.default,.6825):Ef(A.background.default,.8);fe(A.SnackbarContent,"bg",j),fe(A.SnackbarContent,"color",fa(()=>E?Xm.text.primary:A.getContrastText(j))),fe(A.SpeedDialAction,"fabHoverBg",Ef(A.background.paper,.15)),fe(A.StepConnector,"border",q("palette-grey-400")),fe(A.StepContent,"border",q("palette-grey-400")),fe(A.Switch,"defaultColor",q("palette-common-white")),fe(A.Switch,"defaultDisabledColor",q("palette-grey-100")),fe(A.Switch,"primaryDisabledColor",V(St,A.primary.main,.62)),fe(A.Switch,"secondaryDisabledColor",V(St,A.secondary.main,.62)),fe(A.Switch,"errorDisabledColor",V(St,A.error.main,.62)),fe(A.Switch,"infoDisabledColor",V(St,A.info.main,.62)),fe(A.Switch,"successDisabledColor",V(St,A.success.main,.62)),fe(A.Switch,"warningDisabledColor",V(St,A.warning.main,.62)),fe(A.TableCell,"border",V(St,V(bi,A.divider,1),.88)),fe(A.Tooltip,"bg",V(bi,A.grey[700],.92))}if(A.mode==="dark"){fe(A.Alert,"errorColor",V(St,A.error.light,.6)),fe(A.Alert,"infoColor",V(St,A.info.light,.6)),fe(A.Alert,"successColor",V(St,A.success.light,.6)),fe(A.Alert,"warningColor",V(St,A.warning.light,.6)),fe(A.Alert,"errorFilledBg",q("palette-error-dark")),fe(A.Alert,"infoFilledBg",q("palette-info-dark")),fe(A.Alert,"successFilledBg",q("palette-success-dark")),fe(A.Alert,"warningFilledBg",q("palette-warning-dark")),fe(A.Alert,"errorFilledColor",fa(()=>A.getContrastText(A.error.dark))),fe(A.Alert,"infoFilledColor",fa(()=>A.getContrastText(A.info.dark))),fe(A.Alert,"successFilledColor",fa(()=>A.getContrastText(A.success.dark))),fe(A.Alert,"warningFilledColor",fa(()=>A.getContrastText(A.warning.dark))),fe(A.Alert,"errorStandardBg",V(wt,A.error.light,.9)),fe(A.Alert,"infoStandardBg",V(wt,A.info.light,.9)),fe(A.Alert,"successStandardBg",V(wt,A.success.light,.9)),fe(A.Alert,"warningStandardBg",V(wt,A.warning.light,.9)),fe(A.Alert,"errorIconColor",q("palette-error-main")),fe(A.Alert,"infoIconColor",q("palette-info-main")),fe(A.Alert,"successIconColor",q("palette-success-main")),fe(A.Alert,"warningIconColor",q("palette-warning-main")),fe(A.AppBar,"defaultBg",q("palette-grey-900")),fe(A.AppBar,"darkBg",q("palette-background-paper")),fe(A.AppBar,"darkColor",q("palette-text-primary")),fe(A.Avatar,"defaultBg",q("palette-grey-600")),fe(A.Button,"inheritContainedBg",q("palette-grey-800")),fe(A.Button,"inheritContainedHoverBg",q("palette-grey-700")),fe(A.Chip,"defaultBorder",q("palette-grey-700")),fe(A.Chip,"defaultAvatarColor",q("palette-grey-300")),fe(A.Chip,"defaultIconColor",q("palette-grey-300")),fe(A.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),fe(A.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),fe(A.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),fe(A.LinearProgress,"primaryBg",V(wt,A.primary.main,.5)),fe(A.LinearProgress,"secondaryBg",V(wt,A.secondary.main,.5)),fe(A.LinearProgress,"errorBg",V(wt,A.error.main,.5)),fe(A.LinearProgress,"infoBg",V(wt,A.info.main,.5)),fe(A.LinearProgress,"successBg",V(wt,A.success.main,.5)),fe(A.LinearProgress,"warningBg",V(wt,A.warning.main,.5)),fe(A.Skeleton,"bg",E?V(bi,A.text.primary,.13):`rgba(${q("palette-text-primaryChannel")} / 0.13)`),fe(A.Slider,"primaryTrack",V(wt,A.primary.main,.5)),fe(A.Slider,"secondaryTrack",V(wt,A.secondary.main,.5)),fe(A.Slider,"errorTrack",V(wt,A.error.main,.5)),fe(A.Slider,"infoTrack",V(wt,A.info.main,.5)),fe(A.Slider,"successTrack",V(wt,A.success.main,.5)),fe(A.Slider,"warningTrack",V(wt,A.warning.main,.5));const j=E?V(St,A.background.default,.985):Ef(A.background.default,.98);fe(A.SnackbarContent,"bg",j),fe(A.SnackbarContent,"color",fa(()=>E?KC.text.primary:A.getContrastText(j))),fe(A.SpeedDialAction,"fabHoverBg",Ef(A.background.paper,.15)),fe(A.StepConnector,"border",q("palette-grey-600")),fe(A.StepContent,"border",q("palette-grey-600")),fe(A.Switch,"defaultColor",q("palette-grey-300")),fe(A.Switch,"defaultDisabledColor",q("palette-grey-600")),fe(A.Switch,"primaryDisabledColor",V(wt,A.primary.main,.55)),fe(A.Switch,"secondaryDisabledColor",V(wt,A.secondary.main,.55)),fe(A.Switch,"errorDisabledColor",V(wt,A.error.main,.55)),fe(A.Switch,"infoDisabledColor",V(wt,A.info.main,.55)),fe(A.Switch,"successDisabledColor",V(wt,A.success.main,.55)),fe(A.Switch,"warningDisabledColor",V(wt,A.warning.main,.55)),fe(A.TableCell,"border",V(wt,V(bi,A.divider,1),.68)),fe(A.Tooltip,"bg",V(bi,A.grey[700],.92))}Qa(A.background,"default"),Qa(A.background,"paper"),Qa(A.common,"background"),Qa(A.common,"onBackground"),Qa(A,"divider"),Object.keys(A).forEach(j=>{const P=A[j];j!=="tonalOffset"&&P&&typeof P=="object"&&(P.main&&fe(A[j],"mainChannel",ml(gl(P.main))),P.light&&fe(A[j],"lightChannel",ml(gl(P.light))),P.dark&&fe(A[j],"darkChannel",ml(gl(P.dark))),P.contrastText&&fe(A[j],"contrastTextChannel",ml(gl(P.contrastText))),j==="text"&&(Qa(A[j],"primary"),Qa(A[j],"secondary")),j==="action"&&(P.active&&Qa(A[j],"active"),P.selected&&Qa(A[j],"selected")))})}),k=n.reduce((H,A)=>Gn(H,A),k);const N={prefix:o,disableCssColorScheme:a,shouldSkipGeneratingVar:l,getSelector:QM(k),enableContrastVars:u},{vars:O,generateThemeVars:I,generateStyleSheets:B}=SM(k,N);return k.vars=O,Object.entries(k.colorSchemes[k.defaultColorScheme]).forEach(([H,A])=>{k[H]=A}),k.generateThemeVars=I,k.generateStyleSheets=B,k.generateSpacing=function(){return UC(h.spacing,qg(this))},k.getColorSchemeSelector=CM(c),k.spacing=k.generateSpacing(),k.shouldSkipGeneratingVar=l,k.unstable_sxConfig={...Kl,...h?.unstable_sxConfig},k.unstable_sx=function(A){return Bi({sx:A,theme:this})},k.toRuntimeSource=YC,k}function ow(t,n,e){t.colorSchemes&&e&&(t.colorSchemes[n]={...e!==!0&&e,palette:Zg({...e===!0?{}:e.palette,mode:n})})}function JC(t={},...n){const{palette:e,cssVariables:r=!1,colorSchemes:a=e?void 0:{light:!0},defaultColorScheme:o=e?.mode,...u}=t,l=o||"light",c=a?.[l],d={...a,...e?{[l]:{...typeof c!="boolean"&&c,palette:e}}:void 0};if(r===!1){if(!("colorSchemes"in t))return Ym(t,...n);let h=e;"palette"in t||d[l]&&(d[l]!==!0?h=d[l].palette:l==="dark"&&(h={mode:"dark"}));const v=Ym({...t,palette:h},...n);return v.defaultColorScheme=l,v.colorSchemes=d,v.palette.mode==="light"&&(v.colorSchemes.light={...d.light!==!0&&d.light,palette:v.palette},ow(v,"dark",d.dark)),v.palette.mode==="dark"&&(v.colorSchemes.dark={...d.dark!==!0&&d.dark,palette:v.palette},ow(v,"light",d.light)),v}return!e&&!("light"in d)&&l==="light"&&(d.light=!0),tO({...u,colorSchemes:d,defaultColorScheme:l,...typeof r!="boolean"&&r},...n)}const Jg=JC();function ey(){const t=Xg(Jg);return t[Md]||t}function eE(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const aa=t=>eE(t)&&t!=="classes",Ue=tM({themeId:Md,defaultTheme:Jg,rootShouldForwardProp:aa});function iw(...t){return t.reduce((n,e)=>e==null?n:function(...a){n.apply(this,a),e.apply(this,a)},()=>{})}function nO(t){return le.jsx($N,{...t,defaultTheme:Jg,themeId:Md})}function rO(t){return function(e){return le.jsx(nO,{styles:typeof t=="function"?r=>t({theme:r,...e}):t})}}function aO(){return WC}const tn=yM;function zt(t){return vM(t)}function oO(t){return Bt("MuiSvgIcon",t)}Nt("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const iO=t=>{const{color:n,fontSize:e,classes:r}=t,a={root:["root",n!=="inherit"&&`color${Ze(n)}`,`fontSize${Ze(e)}`]};return Ft(a,oO,r)},sO=Ue("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:e}=t;return[n.root,e.color!=="inherit"&&n[`color${Ze(e.color)}`],n[`fontSize${Ze(e.fontSize)}`]]}})(tn(({theme:t})=>({userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:t.transitions?.create?.("fill",{duration:(t.vars??t).transitions?.duration?.shorter}),variants:[{props:n=>!n.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:t.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:t.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:t.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter(([,n])=>n&&n.main).map(([n])=>({props:{color:n},style:{color:(t.vars??t).palette?.[n]?.main}})),{props:{color:"action"},style:{color:(t.vars??t).palette?.action?.active}},{props:{color:"disabled"},style:{color:(t.vars??t).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}))),Zm=L.forwardRef(function(n,e){const r=zt({props:n,name:"MuiSvgIcon"}),{children:a,className:o,color:u="inherit",component:l="svg",fontSize:c="medium",htmlColor:d,inheritViewBox:h=!1,titleAccess:v,viewBox:m="0 0 24 24",...g}=r,b=L.isValidElement(a)&&a.type==="svg",x={...r,color:u,component:l,fontSize:c,instanceFontSize:n.fontSize,inheritViewBox:h,viewBox:m,hasSvgAsChild:b},S={};h||(S.viewBox=m);const C=iO(x);return le.jsxs(sO,{as:l,className:Qe(C.root,o),focusable:"false",color:d,"aria-hidden":v?void 0:!0,role:v?"img":void 0,ref:e,...S,...g,...b&&a.props,ownerState:x,children:[b?a.props.children:a,v?le.jsx("title",{children:v}):null]})});Zm.muiName="SvgIcon";function uO(t,n){function e(r,a){return le.jsx(Zm,{"data-testid":void 0,ref:a,...r,children:t})}return e.muiName=Zm.muiName,L.memo(L.forwardRef(e))}function tE(t,n=166){let e;function r(...a){const o=()=>{t.apply(this,a)};clearTimeout(e),e=setTimeout(o,n)}return r.clear=()=>{clearTimeout(e)},r}function ra(t){return t&&t.ownerDocument||document}function io(t){return ra(t).defaultView||window}function sw(t,n){typeof t=="function"?t(n):t&&(t.current=n)}function uw(t){const{controlled:n,default:e,name:r,state:a="value"}=t,{current:o}=L.useRef(n!==void 0),[u,l]=L.useState(e),c=o?n:u,d=L.useCallback(h=>{o||l(h)},[]);return[c,d]}function Mi(t){const n=L.useRef(t);return Fi(()=>{n.current=t}),L.useRef((...e)=>(0,n.current)(...e)).current}function sr(...t){const n=L.useRef(void 0),e=L.useCallback(r=>{const a=t.map(o=>{if(o==null)return null;if(typeof o=="function"){const u=o,l=u(r);return typeof l=="function"?l:()=>{u(null)}}return o.current=r,()=>{o.current=null}});return()=>{a.forEach(o=>o?.())}},t);return L.useMemo(()=>t.every(r=>r==null)?null:r=>{n.current&&(n.current(),n.current=void 0),r!=null&&(n.current=e(r))},t)}function lO(t,n){const e=t.charCodeAt(2);return t[0]==="o"&&t[1]==="n"&&e>=65&&e<=90&&typeof n=="function"}function cO(t,n){if(!t)return n;function e(u,l){const c={};return Object.keys(l).forEach(d=>{lO(d,l[d])&&typeof u[d]=="function"&&(c[d]=(...h)=>{u[d](...h),l[d](...h)})}),c}if(typeof t=="function"||typeof n=="function")return u=>{const l=typeof n=="function"?n(u):n,c=typeof t=="function"?t({...u,...l}):t,d=Qe(u?.className,l?.className,c?.className),h=e(c,l);return{...l,...c,...h,...!!d&&{className:d},...l?.style&&c?.style&&{style:{...l.style,...c.style}},...l?.sx&&c?.sx&&{sx:[...Array.isArray(l.sx)?l.sx:[l.sx],...Array.isArray(c.sx)?c.sx:[c.sx]]}}};const r=n,a=e(t,r),o=Qe(r?.className,t?.className);return{...n,...t,...a,...!!o&&{className:o},...r?.style&&t?.style&&{style:{...r.style,...t.style}},...r?.sx&&t?.sx&&{sx:[...Array.isArray(r.sx)?r.sx:[r.sx],...Array.isArray(t.sx)?t.sx:[t.sx]]}}}function nE(t,n){if(t==null)return{};var e={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(n.indexOf(r)!==-1)continue;e[r]=t[r]}return e}function Jm(t,n){return Jm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},Jm(t,n)}function rE(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,Jm(t,n)}const lw={disabled:!1},nd=wa.createContext(null);var fO=function(n){return n.scrollTop},yl="unmounted",Ci="exited",Ei="entering",Us="entered",eg="exiting",Da=(function(t){rE(n,t);function n(r,a){var o;o=t.call(this,r,a)||this;var u=a,l=u&&!u.isMounting?r.enter:r.appear,c;return o.appearStatus=null,r.in?l?(c=Ci,o.appearStatus=Ei):c=Us:r.unmountOnExit||r.mountOnEnter?c=yl:c=Ci,o.state={status:c},o.nextCallback=null,o}n.getDerivedStateFromProps=function(a,o){var u=a.in;return u&&o.status===yl?{status:Ci}:null};var e=n.prototype;return e.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},e.componentDidUpdate=function(a){var o=null;if(a!==this.props){var u=this.state.status;this.props.in?u!==Ei&&u!==Us&&(o=Ei):(u===Ei||u===Us)&&(o=eg)}this.updateStatus(!1,o)},e.componentWillUnmount=function(){this.cancelNextCallback()},e.getTimeouts=function(){var a=this.props.timeout,o,u,l;return o=u=l=a,a!=null&&typeof a!="number"&&(o=a.exit,u=a.enter,l=a.appear!==void 0?a.appear:u),{exit:o,enter:u,appear:l}},e.updateStatus=function(a,o){if(a===void 0&&(a=!1),o!==null)if(this.cancelNextCallback(),o===Ei){if(this.props.unmountOnExit||this.props.mountOnEnter){var u=this.props.nodeRef?this.props.nodeRef.current:Sf.findDOMNode(this);u&&fO(u)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ci&&this.setState({status:yl})},e.performEnter=function(a){var o=this,u=this.props.enter,l=this.context?this.context.isMounting:a,c=this.props.nodeRef?[l]:[Sf.findDOMNode(this),l],d=c[0],h=c[1],v=this.getTimeouts(),m=l?v.appear:v.enter;if(!a&&!u||lw.disabled){this.safeSetState({status:Us},function(){o.props.onEntered(d)});return}this.props.onEnter(d,h),this.safeSetState({status:Ei},function(){o.props.onEntering(d,h),o.onTransitionEnd(m,function(){o.safeSetState({status:Us},function(){o.props.onEntered(d,h)})})})},e.performExit=function(){var a=this,o=this.props.exit,u=this.getTimeouts(),l=this.props.nodeRef?void 0:Sf.findDOMNode(this);if(!o||lw.disabled){this.safeSetState({status:Ci},function(){a.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:eg},function(){a.props.onExiting(l),a.onTransitionEnd(u.exit,function(){a.safeSetState({status:Ci},function(){a.props.onExited(l)})})})},e.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},e.safeSetState=function(a,o){o=this.setNextCallback(o),this.setState(a,o)},e.setNextCallback=function(a){var o=this,u=!0;return this.nextCallback=function(l){u&&(u=!1,o.nextCallback=null,a(l))},this.nextCallback.cancel=function(){u=!1},this.nextCallback},e.onTransitionEnd=function(a,o){this.setNextCallback(o);var u=this.props.nodeRef?this.props.nodeRef.current:Sf.findDOMNode(this),l=a==null&&!this.props.addEndListener;if(!u||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[u,this.nextCallback],d=c[0],h=c[1];this.props.addEndListener(d,h)}a!=null&&setTimeout(this.nextCallback,a)},e.render=function(){var a=this.state.status;if(a===yl)return null;var o=this.props,u=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var l=nE(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return wa.createElement(nd.Provider,{value:null},typeof u=="function"?u(a,l):wa.cloneElement(wa.Children.only(u),l))},n})(wa.Component);Da.contextType=nd;Da.propTypes={};function Bs(){}Da.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Bs,onEntering:Bs,onEntered:Bs,onExit:Bs,onExiting:Bs,onExited:Bs};Da.UNMOUNTED=yl;Da.EXITED=Ci;Da.ENTERING=Ei;Da.ENTERED=Us;Da.EXITING=eg;function dO(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ty(t,n){var e=function(o){return n&&L.isValidElement(o)?n(o):o},r=Object.create(null);return t&&L.Children.map(t,function(a){return a}).forEach(function(a){r[a.key]=e(a)}),r}function hO(t,n){t=t||{},n=n||{};function e(h){return h in n?n[h]:t[h]}var r=Object.create(null),a=[];for(var o in t)o in n?a.length&&(r[o]=a,a=[]):a.push(o);var u,l={};for(var c in n){if(r[c])for(u=0;u<r[c].length;u++){var d=r[c][u];l[r[c][u]]=e(d)}l[c]=e(c)}for(u=0;u<a.length;u++)l[a[u]]=e(a[u]);return l}function Di(t,n,e){return e[n]!=null?e[n]:t.props[n]}function pO(t,n){return ty(t.children,function(e){return L.cloneElement(e,{onExited:n.bind(null,e),in:!0,appear:Di(e,"appear",t),enter:Di(e,"enter",t),exit:Di(e,"exit",t)})})}function vO(t,n,e){var r=ty(t.children),a=hO(n,r);return Object.keys(a).forEach(function(o){var u=a[o];if(L.isValidElement(u)){var l=o in n,c=o in r,d=n[o],h=L.isValidElement(d)&&!d.props.in;c&&(!l||h)?a[o]=L.cloneElement(u,{onExited:e.bind(null,u),in:!0,exit:Di(u,"exit",t),enter:Di(u,"enter",t)}):!c&&l&&!h?a[o]=L.cloneElement(u,{in:!1}):c&&l&&L.isValidElement(d)&&(a[o]=L.cloneElement(u,{onExited:e.bind(null,u),in:d.props.in,exit:Di(u,"exit",t),enter:Di(u,"enter",t)}))}}),a}var mO=Object.values||function(t){return Object.keys(t).map(function(n){return t[n]})},gO={component:"div",childFactory:function(n){return n}},ny=(function(t){rE(n,t);function n(r,a){var o;o=t.call(this,r,a)||this;var u=o.handleExited.bind(dO(o));return o.state={contextValue:{isMounting:!0},handleExited:u,firstRender:!0},o}var e=n.prototype;return e.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},e.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(a,o){var u=o.children,l=o.handleExited,c=o.firstRender;return{children:c?pO(a,l):vO(a,u,l),firstRender:!1}},e.handleExited=function(a,o){var u=ty(this.props.children);a.key in u||(a.props.onExited&&a.props.onExited(o),this.mounted&&this.setState(function(l){var c=Qf({},l.children);return delete c[a.key],{children:c}}))},e.render=function(){var a=this.props,o=a.component,u=a.childFactory,l=nE(a,["component","childFactory"]),c=this.state.contextValue,d=mO(this.state.children).map(u);return delete l.appear,delete l.enter,delete l.exit,o===null?wa.createElement(nd.Provider,{value:c},d):wa.createElement(nd.Provider,{value:c},wa.createElement(o,l,d))},n})(wa.Component);ny.propTypes={};ny.defaultProps=gO;const cw={};function aE(t,n){const e=L.useRef(cw);return e.current===cw&&(e.current=t(n)),e}const yO=[];function bO(t){L.useEffect(t,yO)}class ry{static create(){return new ry}currentId=null;start(n,e){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,e()},n)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function oE(){const t=aE(ry.create).current;return bO(t.disposeEffect),t}const iE=t=>t.scrollTop;function rd(t,n){const{timeout:e,easing:r,style:a={}}=t;return{duration:a.transitionDuration??(typeof e=="number"?e:e[n.mode]||0),easing:a.transitionTimingFunction??(typeof r=="object"?r[n.mode]:r),delay:a.transitionDelay}}function ad(t){return typeof t=="string"}function sE(t,n,e){return t===void 0||ad(t)?n:{...n,ownerState:{...n.ownerState,...e}}}function uE(t,n,e){return typeof t=="function"?t(n,e):t}function lE(t,n=[]){if(t===void 0)return{};const e={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!n.includes(r)).forEach(r=>{e[r]=t[r]}),e}function fw(t){if(t===void 0)return{};const n={};return Object.keys(t).filter(e=>!(e.match(/^on[A-Z]/)&&typeof t[e]=="function")).forEach(e=>{n[e]=t[e]}),n}function cE(t){const{getSlotProps:n,additionalProps:e,externalSlotProps:r,externalForwardedProps:a,className:o}=t;if(!n){const g=Qe(e?.className,o,a?.className,r?.className),b={...e?.style,...a?.style,...r?.style},x={...e,...a,...r};return g.length>0&&(x.className=g),Object.keys(b).length>0&&(x.style=b),{props:x,internalRef:void 0}}const u=lE({...a,...r}),l=fw(r),c=fw(a),d=n(u),h=Qe(d?.className,e?.className,o,a?.className,r?.className),v={...d?.style,...e?.style,...a?.style,...r?.style},m={...d,...e,...c,...l};return h.length>0&&(m.className=h),Object.keys(v).length>0&&(m.style=v),{props:m,internalRef:d.ref}}function Un(t,n){const{className:e,elementType:r,ownerState:a,externalForwardedProps:o,internalForwardedProps:u,shouldForwardComponentProp:l=!1,...c}=n,{component:d,slots:h={[t]:void 0},slotProps:v={[t]:void 0},...m}=o,g=h[t]||r,b=uE(v[t],a),{props:{component:x,...S},internalRef:C}=cE({className:e,...c,externalForwardedProps:t==="root"?m:void 0,externalSlotProps:b}),_=sr(C,b?.ref,n.ref),R=t==="root"?x||d:x,E=sE(g,{...t==="root"&&!d&&!h[t]&&u,...t!=="root"&&!h[t]&&u,...S,...R&&!l&&{as:R},...R&&l&&{component:R},ref:_},a);return[g,E]}function xO(t){return Bt("MuiPaper",t)}Nt("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const wO=t=>{const{square:n,elevation:e,variant:r,classes:a}=t,o={root:["root",r,!n&&"rounded",r==="elevation"&&`elevation${e}`]};return Ft(o,xO,a)},SO=Ue("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:e}=t;return[n.root,n[e.variant],!e.square&&n.rounded,e.variant==="elevation"&&n[`elevation${e.elevation}`]]}})(tn(({theme:t})=>({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:({ownerState:n})=>!n.square,style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(t.vars||t).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),fE=L.forwardRef(function(n,e){const r=zt({props:n,name:"MuiPaper"}),a=ey(),{className:o,component:u="div",elevation:l=1,square:c=!1,variant:d="elevation",...h}=r,v={...r,component:u,elevation:l,square:c,variant:d},m=wO(v);return le.jsx(SO,{as:u,ownerState:v,className:Qe(m.root,o),ref:e,...h,style:{...d==="elevation"&&{"--Paper-shadow":(a.vars||a).shadows[l],...a.vars&&{"--Paper-overlay":a.vars.overlays?.[l]},...!a.vars&&a.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${td("#fff",Qm(l))}, ${td("#fff",Qm(l))})`}},...h.style}})});function dw(t){try{return t.matches(":focus-visible")}catch{}return!1}class od{static create(){return new od}static use(){const n=aE(od.create).current,[e,r]=L.useState(!1);return n.shouldMount=e,n.setShouldMount=r,L.useEffect(n.mountEffect,[e]),n}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=EO(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...n){this.mount().then(()=>this.ref.current?.start(...n))}stop(...n){this.mount().then(()=>this.ref.current?.stop(...n))}pulsate(...n){this.mount().then(()=>this.ref.current?.pulsate(...n))}}function CO(){return od.use()}function EO(){let t,n;const e=new Promise((r,a)=>{t=r,n=a});return e.resolve=t,e.reject=n,e}function RO(t){const{className:n,classes:e,pulsate:r=!1,rippleX:a,rippleY:o,rippleSize:u,in:l,onExited:c,timeout:d}=t,[h,v]=L.useState(!1),m=Qe(n,e.ripple,e.rippleVisible,r&&e.ripplePulsate),g={width:u,height:u,top:-(u/2)+o,left:-(u/2)+a},b=Qe(e.child,h&&e.childLeaving,r&&e.childPulsate);return!l&&!h&&v(!0),L.useEffect(()=>{if(!l&&c!=null){const x=setTimeout(c,d);return()=>{clearTimeout(x)}}},[c,l,d]),le.jsx("span",{className:m,style:g,children:le.jsx("span",{className:b})})}const zr=Nt("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),tg=550,_O=80,TO=Gl`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,AO=Gl`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,DO=Gl`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,kO=Ue("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),NO=Ue(RO,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${zr.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${TO};
    animation-duration: ${tg}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  &.${zr.ripplePulsate} {
    animation-duration: ${({theme:t})=>t.transitions.duration.shorter}ms;
  }

  & .${zr.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${zr.childLeaving} {
    opacity: 0;
    animation-name: ${AO};
    animation-duration: ${tg}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  & .${zr.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${DO};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,MO=L.forwardRef(function(n,e){const r=zt({props:n,name:"MuiTouchRipple"}),{center:a=!1,classes:o={},className:u,...l}=r,[c,d]=L.useState([]),h=L.useRef(0),v=L.useRef(null);L.useEffect(()=>{v.current&&(v.current(),v.current=null)},[c]);const m=L.useRef(!1),g=oE(),b=L.useRef(null),x=L.useRef(null),S=L.useCallback(E=>{const{pulsate:T,rippleX:k,rippleY:N,rippleSize:O,cb:I}=E;d(B=>[...B,le.jsx(NO,{classes:{ripple:Qe(o.ripple,zr.ripple),rippleVisible:Qe(o.rippleVisible,zr.rippleVisible),ripplePulsate:Qe(o.ripplePulsate,zr.ripplePulsate),child:Qe(o.child,zr.child),childLeaving:Qe(o.childLeaving,zr.childLeaving),childPulsate:Qe(o.childPulsate,zr.childPulsate)},timeout:tg,pulsate:T,rippleX:k,rippleY:N,rippleSize:O},h.current)]),h.current+=1,v.current=I},[o]),C=L.useCallback((E={},T={},k=()=>{})=>{const{pulsate:N=!1,center:O=a||T.pulsate,fakeElement:I=!1}=T;if(E?.type==="mousedown"&&m.current){m.current=!1;return}E?.type==="touchstart"&&(m.current=!0);const B=I?null:x.current,H=B?B.getBoundingClientRect():{width:0,height:0,left:0,top:0};let A,q,V;if(O||E===void 0||E.clientX===0&&E.clientY===0||!E.clientX&&!E.touches)A=Math.round(H.width/2),q=Math.round(H.height/2);else{const{clientX:j,clientY:P}=E.touches&&E.touches.length>0?E.touches[0]:E;A=Math.round(j-H.left),q=Math.round(P-H.top)}if(O)V=Math.sqrt((2*H.width**2+H.height**2)/3),V%2===0&&(V+=1);else{const j=Math.max(Math.abs((B?B.clientWidth:0)-A),A)*2+2,P=Math.max(Math.abs((B?B.clientHeight:0)-q),q)*2+2;V=Math.sqrt(j**2+P**2)}E?.touches?b.current===null&&(b.current=()=>{S({pulsate:N,rippleX:A,rippleY:q,rippleSize:V,cb:k})},g.start(_O,()=>{b.current&&(b.current(),b.current=null)})):S({pulsate:N,rippleX:A,rippleY:q,rippleSize:V,cb:k})},[a,S,g]),_=L.useCallback(()=>{C({},{pulsate:!0})},[C]),R=L.useCallback((E,T)=>{if(g.clear(),E?.type==="touchend"&&b.current){b.current(),b.current=null,g.start(0,()=>{R(E,T)});return}b.current=null,d(k=>k.length>0?k.slice(1):k),v.current=T},[g]);return L.useImperativeHandle(e,()=>({pulsate:_,start:C,stop:R}),[_,C,R]),le.jsx(kO,{className:Qe(zr.root,o.root,u),ref:x,...l,children:le.jsx(ny,{component:null,exit:!0,children:c})})});function OO(t){return Bt("MuiButtonBase",t)}const IO=Nt("MuiButtonBase",["root","disabled","focusVisible"]),BO=t=>{const{disabled:n,focusVisible:e,focusVisibleClassName:r,classes:a}=t,u=Ft({root:["root",n&&"disabled",e&&"focusVisible"]},OO,a);return e&&r&&(u.root+=` ${r}`),u},FO=Ue("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${IO.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),PO=L.forwardRef(function(n,e){const r=zt({props:n,name:"MuiButtonBase"}),{action:a,centerRipple:o=!1,children:u,className:l,component:c="button",disabled:d=!1,disableRipple:h=!1,disableTouchRipple:v=!1,focusRipple:m=!1,focusVisibleClassName:g,LinkComponent:b="a",onBlur:x,onClick:S,onContextMenu:C,onDragLeave:_,onFocus:R,onFocusVisible:E,onKeyDown:T,onKeyUp:k,onMouseDown:N,onMouseLeave:O,onMouseUp:I,onTouchEnd:B,onTouchMove:H,onTouchStart:A,tabIndex:q=0,TouchRippleProps:V,touchRippleRef:j,type:P,...$}=r,Q=L.useRef(null),U=CO(),G=sr(U.ref,j),[M,K]=L.useState(!1);d&&M&&K(!1),L.useImperativeHandle(a,()=>({focusVisible:()=>{K(!0),Q.current.focus()}}),[]);const Z=U.shouldMount&&!h&&!d;L.useEffect(()=>{M&&m&&!h&&U.pulsate()},[h,m,M,U]);const oe=Za(U,"start",N,v),pe=Za(U,"stop",C,v),ge=Za(U,"stop",_,v),xe=Za(U,"stop",I,v),Ce=Za(U,"stop",Pe=>{M&&Pe.preventDefault(),O&&O(Pe)},v),he=Za(U,"start",A,v),be=Za(U,"stop",B,v),we=Za(U,"stop",H,v),Re=Za(U,"stop",Pe=>{dw(Pe.target)||K(!1),x&&x(Pe)},!1),Me=Mi(Pe=>{Q.current||(Q.current=Pe.currentTarget),dw(Pe.target)&&(K(!0),E&&E(Pe)),R&&R(Pe)}),Se=()=>{const Pe=Q.current;return c&&c!=="button"&&!(Pe.tagName==="A"&&Pe.href)},Fe=Mi(Pe=>{m&&!Pe.repeat&&M&&Pe.key===" "&&U.stop(Pe,()=>{U.start(Pe)}),Pe.target===Pe.currentTarget&&Se()&&Pe.key===" "&&Pe.preventDefault(),T&&T(Pe),Pe.target===Pe.currentTarget&&Se()&&Pe.key==="Enter"&&!d&&(Pe.preventDefault(),S&&S(Pe))}),He=Mi(Pe=>{m&&Pe.key===" "&&M&&!Pe.defaultPrevented&&U.stop(Pe,()=>{U.pulsate(Pe)}),k&&k(Pe),S&&Pe.target===Pe.currentTarget&&Se()&&Pe.key===" "&&!Pe.defaultPrevented&&S(Pe)});let vt=c;vt==="button"&&($.href||$.to)&&(vt=b);const ut={};if(vt==="button"){const Pe=!!$.formAction;ut.type=P===void 0&&!Pe?"button":P,ut.disabled=d}else!$.href&&!$.to&&(ut.role="button"),d&&(ut["aria-disabled"]=d);const yt=sr(e,Q),jt={...r,centerRipple:o,component:c,disabled:d,disableRipple:h,disableTouchRipple:v,focusRipple:m,tabIndex:q,focusVisible:M},st=BO(jt);return le.jsxs(FO,{as:vt,className:Qe(st.root,l),ownerState:jt,onBlur:Re,onClick:S,onContextMenu:pe,onFocus:Me,onKeyDown:Fe,onKeyUp:He,onMouseDown:oe,onMouseLeave:Ce,onMouseUp:xe,onDragLeave:ge,onTouchEnd:be,onTouchMove:we,onTouchStart:he,ref:yt,tabIndex:d?-1:q,type:P,...ut,...$,children:[u,Z?le.jsx(MO,{ref:G,center:o,...V}):null]})});function Za(t,n,e,r=!1){return Mi(a=>(e&&e(a),r||t[n](a),!0))}function LO(t){return typeof t.main=="string"}function zO(t,n=[]){if(!LO(t))return!1;for(const e of n)if(!t.hasOwnProperty(e)||typeof t[e]!="string")return!1;return!0}function Ui(t=[]){return([,n])=>n&&zO(n,t)}function UO(t){return Bt("MuiCircularProgress",t)}Nt("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","track","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Jr=44,ng=Gl`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,rg=Gl`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,WO=typeof ng!="string"?Vg`
        animation: ${ng} 1.4s linear infinite;
      `:null,HO=typeof rg!="string"?Vg`
        animation: ${rg} 1.4s ease-in-out infinite;
      `:null,VO=t=>{const{classes:n,variant:e,color:r,disableShrink:a}=t,o={root:["root",e,`color${Ze(r)}`],svg:["svg"],track:["track"],circle:["circle",`circle${Ze(e)}`,a&&"circleDisableShrink"]};return Ft(o,UO,n)},jO=Ue("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:e}=t;return[n.root,n[e.variant],n[`color${Ze(e.color)}`]]}})(tn(({theme:t})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:WO||{animation:`${ng} 1.4s linear infinite`}},...Object.entries(t.palette).filter(Ui()).map(([n])=>({props:{color:n},style:{color:(t.vars||t).palette[n].main}}))]}))),GO=Ue("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),qO=Ue("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,n)=>{const{ownerState:e}=t;return[n.circle,n[`circle${Ze(e.variant)}`],e.disableShrink&&n.circleDisableShrink]}})(tn(({theme:t})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:n})=>n.variant==="indeterminate"&&!n.disableShrink,style:HO||{animation:`${rg} 1.4s ease-in-out infinite`}}]}))),$O=Ue("circle",{name:"MuiCircularProgress",slot:"Track"})(tn(({theme:t})=>({stroke:"currentColor",opacity:(t.vars||t).palette.action.activatedOpacity}))),dE=L.forwardRef(function(n,e){const r=zt({props:n,name:"MuiCircularProgress"}),{className:a,color:o="primary",disableShrink:u=!1,enableTrackSlot:l=!1,size:c=40,style:d,thickness:h=3.6,value:v=0,variant:m="indeterminate",...g}=r,b={...r,color:o,disableShrink:u,size:c,thickness:h,value:v,variant:m,enableTrackSlot:l},x=VO(b),S={},C={},_={};if(m==="determinate"){const R=2*Math.PI*((Jr-h)/2);S.strokeDasharray=R.toFixed(3),_["aria-valuenow"]=Math.round(v),S.strokeDashoffset=`${((100-v)/100*R).toFixed(3)}px`,C.transform="rotate(-90deg)"}return le.jsx(jO,{className:Qe(x.root,a),style:{width:c,height:c,...C,...d},ownerState:b,ref:e,role:"progressbar",..._,...g,children:le.jsxs(GO,{className:x.svg,ownerState:b,viewBox:`${Jr/2} ${Jr/2} ${Jr} ${Jr}`,children:[l?le.jsx($O,{className:x.track,ownerState:b,cx:Jr,cy:Jr,r:(Jr-h)/2,fill:"none",strokeWidth:h,"aria-hidden":"true"}):null,le.jsx(qO,{className:x.circle,style:S,ownerState:b,cx:Jr,cy:Jr,r:(Jr-h)/2,fill:"none",strokeWidth:h})]})})});function KO(t){return Bt("MuiTypography",t)}Nt("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const XO={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},YO=aO(),QO=t=>{const{align:n,gutterBottom:e,noWrap:r,paragraph:a,variant:o,classes:u}=t,l={root:["root",o,t.align!=="inherit"&&`align${Ze(n)}`,e&&"gutterBottom",r&&"noWrap",a&&"paragraph"]};return Ft(l,KO,u)},ZO=Ue("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:e}=t;return[n.root,e.variant&&n[e.variant],e.align!=="inherit"&&n[`align${Ze(e.align)}`],e.noWrap&&n.noWrap,e.gutterBottom&&n.gutterBottom,e.paragraph&&n.paragraph]}})(tn(({theme:t})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter(([n,e])=>n!=="inherit"&&e&&typeof e=="object").map(([n,e])=>({props:{variant:n},style:e})),...Object.entries(t.palette).filter(Ui()).map(([n])=>({props:{color:n},style:{color:(t.vars||t).palette[n].main}})),...Object.entries(t.palette?.text||{}).filter(([,n])=>typeof n=="string").map(([n])=>({props:{color:`text${Ze(n)}`},style:{color:(t.vars||t).palette.text[n]}})),{props:({ownerState:n})=>n.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:n})=>n.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:n})=>n.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:n})=>n.paragraph,style:{marginBottom:16}}]}))),hw={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},pw=L.forwardRef(function(n,e){const{color:r,...a}=zt({props:n,name:"MuiTypography"}),o=!XO[r],u=YO({...a,...o&&{color:r}}),{align:l="inherit",className:c,component:d,gutterBottom:h=!1,noWrap:v=!1,paragraph:m=!1,variant:g="body1",variantMapping:b=hw,...x}=u,S={...u,align:l,color:r,className:c,component:d,gutterBottom:h,noWrap:v,paragraph:m,variant:g,variantMapping:b},C=d||(m?"p":b[g]||hw[g])||"span",_=QO(S);return le.jsx(ZO,{as:C,ref:e,className:Qe(_.root,c),...x,ownerState:S,style:{...l!=="inherit"&&{"--Typography-textAlign":l},...x.style}})});function JO(t){const{elementType:n,externalSlotProps:e,ownerState:r,skipResolvingSlotProps:a=!1,...o}=t,u=a?{}:uE(e,r),{props:l,internalRef:c}=cE({...o,externalSlotProps:u}),d=sr(c,u?.ref,t.additionalProps?.ref);return sE(n,{...l,ref:d},r)}function Xl(t){return parseInt(L.version,10)>=19?t?.props?.ref||null:t?.ref||null}function e4(t){return typeof t=="function"?t():t}const t4=L.forwardRef(function(n,e){const{children:r,container:a,disablePortal:o=!1}=n,[u,l]=L.useState(null),c=sr(L.isValidElement(r)?Xl(r):null,e);if(Fi(()=>{o||l(e4(a)||document.body)},[a,o]),Fi(()=>{if(u&&!o)return sw(e,u),()=>{sw(e,null)}},[e,u,o]),o){if(L.isValidElement(r)){const d={ref:c};return L.cloneElement(r,d)}return r}return u&&SC.createPortal(r,u)});function Rf(t){return parseInt(t,10)||0}const n4={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function r4(t){for(const n in t)return!1;return!0}function vw(t){return r4(t)||t.outerHeightStyle===0&&!t.overflowing}const a4=L.forwardRef(function(n,e){const{onChange:r,maxRows:a,minRows:o=1,style:u,value:l,...c}=n,{current:d}=L.useRef(l!=null),h=L.useRef(null),v=sr(e,h),m=L.useRef(null),g=L.useRef(null),b=L.useCallback(()=>{const R=h.current,E=g.current;if(!R||!E)return;const k=io(R).getComputedStyle(R);if(k.width==="0px")return{outerHeightStyle:0,overflowing:!1};E.style.width=k.width,E.value=R.value||n.placeholder||"x",E.value.slice(-1)===`
`&&(E.value+=" ");const N=k.boxSizing,O=Rf(k.paddingBottom)+Rf(k.paddingTop),I=Rf(k.borderBottomWidth)+Rf(k.borderTopWidth),B=E.scrollHeight;E.value="x";const H=E.scrollHeight;let A=B;o&&(A=Math.max(Number(o)*H,A)),a&&(A=Math.min(Number(a)*H,A)),A=Math.max(A,H);const q=A+(N==="border-box"?O+I:0),V=Math.abs(A-B)<=1;return{outerHeightStyle:q,overflowing:V}},[a,o,n.placeholder]),x=Mi(()=>{const R=h.current,E=b();if(!R||!E||vw(E))return!1;const T=E.outerHeightStyle;return m.current!=null&&m.current!==T}),S=L.useCallback(()=>{const R=h.current,E=b();if(!R||!E||vw(E))return;const T=E.outerHeightStyle;m.current!==T&&(m.current=T,R.style.height=`${T}px`),R.style.overflow=E.overflowing?"hidden":""},[b]),C=L.useRef(-1);Fi(()=>{const R=tE(S),E=h?.current;if(!E)return;const T=io(E);T.addEventListener("resize",R);let k;return typeof ResizeObserver<"u"&&(k=new ResizeObserver(()=>{x()&&(k.unobserve(E),cancelAnimationFrame(C.current),S(),C.current=requestAnimationFrame(()=>{k.observe(E)}))}),k.observe(E)),()=>{R.clear(),cancelAnimationFrame(C.current),T.removeEventListener("resize",R),k&&k.disconnect()}},[b,S,x]),Fi(()=>{S()});const _=R=>{d||S();const E=R.target,T=E.value.length,k=E.value.endsWith(`
`),N=E.selectionStart===T;k&&N&&E.setSelectionRange(T,T),r&&r(R)};return le.jsxs(L.Fragment,{children:[le.jsx("textarea",{value:l,onChange:_,ref:v,rows:o,style:u,...c}),le.jsx("textarea",{"aria-hidden":!0,className:n.className,readOnly:!0,ref:g,tabIndex:-1,style:{...n4.shadow,...u,paddingTop:0,paddingBottom:0}})]})});function uu({props:t,states:n,muiFormControl:e}){return n.reduce((r,a)=>(r[a]=t[a],e&&typeof t[a]>"u"&&(r[a]=e[a]),r),{})}const ay=L.createContext(void 0);function lu(){return L.useContext(ay)}function mw(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function id(t,n=!1){return t&&(mw(t.value)&&t.value!==""||n&&mw(t.defaultValue)&&t.defaultValue!=="")}function o4(t){return t.startAdornment}function i4(t){return Bt("MuiInputBase",t)}const tu=Nt("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var gw;const $d=(t,n)=>{const{ownerState:e}=t;return[n.root,e.formControl&&n.formControl,e.startAdornment&&n.adornedStart,e.endAdornment&&n.adornedEnd,e.error&&n.error,e.size==="small"&&n.sizeSmall,e.multiline&&n.multiline,e.color&&n[`color${Ze(e.color)}`],e.fullWidth&&n.fullWidth,e.hiddenLabel&&n.hiddenLabel]},Kd=(t,n)=>{const{ownerState:e}=t;return[n.input,e.size==="small"&&n.inputSizeSmall,e.multiline&&n.inputMultiline,e.type==="search"&&n.inputTypeSearch,e.startAdornment&&n.inputAdornedStart,e.endAdornment&&n.inputAdornedEnd,e.hiddenLabel&&n.inputHiddenLabel]},s4=t=>{const{classes:n,color:e,disabled:r,error:a,endAdornment:o,focused:u,formControl:l,fullWidth:c,hiddenLabel:d,multiline:h,readOnly:v,size:m,startAdornment:g,type:b}=t,x={root:["root",`color${Ze(e)}`,r&&"disabled",a&&"error",c&&"fullWidth",u&&"focused",l&&"formControl",m&&m!=="medium"&&`size${Ze(m)}`,h&&"multiline",g&&"adornedStart",o&&"adornedEnd",d&&"hiddenLabel",v&&"readOnly"],input:["input",r&&"disabled",b==="search"&&"inputTypeSearch",h&&"inputMultiline",m==="small"&&"inputSizeSmall",d&&"inputHiddenLabel",g&&"inputAdornedStart",o&&"inputAdornedEnd",v&&"readOnly"]};return Ft(x,i4,n)},Xd=Ue("div",{name:"MuiInputBase",slot:"Root",overridesResolver:$d})(tn(({theme:t})=>({...t.typography.body1,color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${tu.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:n})=>n.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:n,size:e})=>n.multiline&&e==="small",style:{paddingTop:1}},{props:({ownerState:n})=>n.fullWidth,style:{width:"100%"}}]}))),Yd=Ue("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Kd})(tn(({theme:t})=>{const n=t.palette.mode==="light",e={color:"currentColor",...t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})},r={opacity:"0 !important"},a=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":e,"&::-moz-placeholder":e,"&::-ms-input-placeholder":e,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${tu.formControl} &`]:{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":a,"&:focus::-moz-placeholder":a,"&:focus::-ms-input-placeholder":a},[`&.${tu.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},variants:[{props:({ownerState:o})=>!o.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:o})=>o.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),yw=rO({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),oy=L.forwardRef(function(n,e){const r=zt({props:n,name:"MuiInputBase"}),{"aria-describedby":a,autoComplete:o,autoFocus:u,className:l,color:c,components:d={},componentsProps:h={},defaultValue:v,disabled:m,disableInjectingGlobalStyles:g,endAdornment:b,error:x,fullWidth:S=!1,id:C,inputComponent:_="input",inputProps:R={},inputRef:E,margin:T,maxRows:k,minRows:N,multiline:O=!1,name:I,onBlur:B,onChange:H,onClick:A,onFocus:q,onKeyDown:V,onKeyUp:j,placeholder:P,readOnly:$,renderSuffix:Q,rows:U,size:G,slotProps:M={},slots:K={},startAdornment:Z,type:oe="text",value:pe,...ge}=r,xe=R.value!=null?R.value:pe,{current:Ce}=L.useRef(xe!=null),he=L.useRef(),be=L.useCallback(Tt=>{},[]),we=sr(he,E,R.ref,be),[Re,Me]=L.useState(!1),Se=lu(),Fe=uu({props:r,muiFormControl:Se,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Fe.focused=Se?Se.focused:Re,L.useEffect(()=>{!Se&&m&&Re&&(Me(!1),B&&B())},[Se,m,Re,B]);const He=Se&&Se.onFilled,vt=Se&&Se.onEmpty,ut=L.useCallback(Tt=>{id(Tt)?He&&He():vt&&vt()},[He,vt]);Fi(()=>{Ce&&ut({value:xe})},[xe,ut,Ce]);const yt=Tt=>{q&&q(Tt),R.onFocus&&R.onFocus(Tt),Se&&Se.onFocus?Se.onFocus(Tt):Me(!0)},jt=Tt=>{B&&B(Tt),R.onBlur&&R.onBlur(Tt),Se&&Se.onBlur?Se.onBlur(Tt):Me(!1)},st=(Tt,...cr)=>{if(!Ce){const Bn=Tt.target||he.current;if(Bn==null)throw new Error(ao(1));ut({value:Bn.value})}R.onChange&&R.onChange(Tt,...cr),H&&H(Tt,...cr)};L.useEffect(()=>{ut(he.current)},[]);const Pe=Tt=>{he.current&&Tt.currentTarget===Tt.target&&he.current.focus(),A&&A(Tt)};let cn=_,Ye=R;O&&cn==="input"&&(U?Ye={type:void 0,minRows:U,maxRows:U,...Ye}:Ye={type:void 0,maxRows:k,minRows:N,...Ye},cn=a4);const In=Tt=>{ut(Tt.animationName==="mui-auto-fill-cancel"?he.current:{value:"x"})};L.useEffect(()=>{Se&&Se.setAdornedStart(!!Z)},[Se,Z]);const $n={...r,color:Fe.color||"primary",disabled:Fe.disabled,endAdornment:b,error:Fe.error,focused:Fe.focused,formControl:Se,fullWidth:S,hiddenLabel:Fe.hiddenLabel,multiline:O,size:Fe.size,startAdornment:Z,type:oe},En=s4($n),nn=K.root||d.Root||Xd,Ar=M.root||h.root||{},Kr=K.input||d.Input||Yd;return Ye={...Ye,...M.input??h.input},le.jsxs(L.Fragment,{children:[!g&&typeof yw=="function"&&(gw||(gw=le.jsx(yw,{}))),le.jsxs(nn,{...Ar,ref:e,onClick:Pe,...ge,...!ad(nn)&&{ownerState:{...$n,...Ar.ownerState}},className:Qe(En.root,Ar.className,l,$&&"MuiInputBase-readOnly"),children:[Z,le.jsx(ay.Provider,{value:null,children:le.jsx(Kr,{"aria-invalid":Fe.error,"aria-describedby":a,autoComplete:o,autoFocus:u,defaultValue:v,disabled:Fe.disabled,id:C,onAnimationStart:In,name:I,placeholder:P,readOnly:$,required:Fe.required,rows:U,value:xe,onKeyDown:V,onKeyUp:j,type:oe,...Ye,...!ad(Kr)&&{as:cn,ownerState:{...$n,...Ye.ownerState}},ref:we,className:Qe(En.input,Ye.className,$&&"MuiInputBase-readOnly"),onBlur:jt,onChange:st,onFocus:yt})}),b,Q?Q({...Fe,startAdornment:Z}):null]})]})});function u4(t){return Bt("MuiInput",t)}const ul={...tu,...Nt("MuiInput",["root","underline","input"])};function l4(t){return Bt("MuiOutlinedInput",t)}const da={...tu,...Nt("MuiOutlinedInput",["root","notchedOutline","input"])};function c4(t){return Bt("MuiFilledInput",t)}const xi={...tu,...Nt("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},f4=uO(le.jsx("path",{d:"M7 10l5 5 5-5z"})),d4={entering:{opacity:1},entered:{opacity:1}},h4=L.forwardRef(function(n,e){const r=ey(),a={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:o,appear:u=!0,children:l,easing:c,in:d,onEnter:h,onEntered:v,onEntering:m,onExit:g,onExited:b,onExiting:x,style:S,timeout:C=a,TransitionComponent:_=Da,...R}=n,E=L.useRef(null),T=sr(E,Xl(l),e),k=V=>j=>{if(V){const P=E.current;j===void 0?V(P):V(P,j)}},N=k(m),O=k((V,j)=>{iE(V);const P=rd({style:S,timeout:C,easing:c},{mode:"enter"});V.style.webkitTransition=r.transitions.create("opacity",P),V.style.transition=r.transitions.create("opacity",P),h&&h(V,j)}),I=k(v),B=k(x),H=k(V=>{const j=rd({style:S,timeout:C,easing:c},{mode:"exit"});V.style.webkitTransition=r.transitions.create("opacity",j),V.style.transition=r.transitions.create("opacity",j),g&&g(V)}),A=k(b),q=V=>{o&&o(E.current,V)};return le.jsx(_,{appear:u,in:d,nodeRef:E,onEnter:O,onEntered:I,onEntering:N,onExit:H,onExited:A,onExiting:B,addEndListener:q,timeout:C,...R,children:(V,{ownerState:j,...P})=>L.cloneElement(l,{style:{opacity:0,visibility:V==="exited"&&!d?"hidden":void 0,...d4[V],...S,...l.props.style},ref:T,...P})})});function p4(t){return Bt("MuiBackdrop",t)}Nt("MuiBackdrop",["root","invisible"]);const v4=t=>{const{classes:n,invisible:e}=t;return Ft({root:["root",e&&"invisible"]},p4,n)},m4=Ue("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:e}=t;return[n.root,e.invisible&&n.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),g4=L.forwardRef(function(n,e){const r=zt({props:n,name:"MuiBackdrop"}),{children:a,className:o,component:u="div",invisible:l=!1,open:c,components:d={},componentsProps:h={},slotProps:v={},slots:m={},TransitionComponent:g,transitionDuration:b,...x}=r,S={...r,component:u,invisible:l},C=v4(S),_={transition:g,root:d.Root,...m},R={...h,...v},E={component:u,slots:_,slotProps:R},[T,k]=Un("root",{elementType:m4,externalForwardedProps:E,className:Qe(C.root,o),ownerState:S}),[N,O]=Un("transition",{elementType:h4,externalForwardedProps:E,ownerState:S});return le.jsx(N,{in:c,timeout:b,...x,...O,children:le.jsx(T,{"aria-hidden":!0,...k,ref:e,children:a})})}),y4=Nt("MuiBox",["root"]),b4=JC(),jv=YN({themeId:Md,defaultTheme:b4,defaultClassName:y4.root,generateClassName:HC.generate});function x4(t){return Bt("MuiButton",t)}const wi=Nt("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),w4=L.createContext({}),S4=L.createContext(void 0),C4=t=>{const{color:n,disableElevation:e,fullWidth:r,size:a,variant:o,loading:u,loadingPosition:l,classes:c}=t,d={root:["root",u&&"loading",o,`${o}${Ze(n)}`,`size${Ze(a)}`,`${o}Size${Ze(a)}`,`color${Ze(n)}`,e&&"disableElevation",r&&"fullWidth",u&&`loadingPosition${Ze(l)}`],startIcon:["icon","startIcon",`iconSize${Ze(a)}`],endIcon:["icon","endIcon",`iconSize${Ze(a)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},h=Ft(d,x4,c);return{...c,...h}},hE=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],E4=Ue(PO,{shouldForwardProp:t=>aa(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:e}=t;return[n.root,n[e.variant],n[`${e.variant}${Ze(e.color)}`],n[`size${Ze(e.size)}`],n[`${e.variant}Size${Ze(e.size)}`],e.color==="inherit"&&n.colorInherit,e.disableElevation&&n.disableElevation,e.fullWidth&&n.fullWidth,e.loading&&n.loading]}})(tn(({theme:t})=>{const n=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],e=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return{...t.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${wi.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},[`&.${wi.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]},[`&.${wi.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${wi.disabled}`]:{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(Ui()).map(([r])=>({props:{color:r},style:{"--variant-textColor":(t.vars||t).palette[r].main,"--variant-outlinedColor":(t.vars||t).palette[r].main,"--variant-outlinedBorder":t.alpha((t.vars||t).palette[r].main,.5),"--variant-containedColor":(t.vars||t).palette[r].contrastText,"--variant-containedBg":(t.vars||t).palette[r].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[r].dark,"--variant-textBg":t.alpha((t.vars||t).palette[r].main,(t.vars||t).palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[r].main,"--variant-outlinedBg":t.alpha((t.vars||t).palette[r].main,(t.vars||t).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:n,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:e,"--variant-textBg":t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.hoverOpacity),"--variant-outlinedBg":t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${wi.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${wi.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),[`&.${wi.loading}`]:{color:"transparent"}}}]}})),R4=Ue("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,n)=>{const{ownerState:e}=t;return[n.startIcon,e.loading&&n.startIconLoadingStart,n[`iconSize${Ze(e.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...hE]})),_4=Ue("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,n)=>{const{ownerState:e}=t;return[n.endIcon,e.loading&&n.endIconLoadingEnd,n[`iconSize${Ze(e.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...hE]})),T4=Ue("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),bw=Ue("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),xw=L.forwardRef(function(n,e){const r=L.useContext(w4),a=L.useContext(S4),o=ed(r,n),u=zt({props:o,name:"MuiButton"}),{children:l,color:c="primary",component:d="button",className:h,disabled:v=!1,disableElevation:m=!1,disableFocusRipple:g=!1,endIcon:b,focusVisibleClassName:x,fullWidth:S=!1,id:C,loading:_=null,loadingIndicator:R,loadingPosition:E="center",size:T="medium",startIcon:k,type:N,variant:O="text",...I}=u,B=Qg(C),H=R??le.jsx(dE,{"aria-labelledby":B,color:"inherit",size:16}),A={...u,color:c,component:d,disabled:v,disableElevation:m,disableFocusRipple:g,fullWidth:S,loading:_,loadingIndicator:H,loadingPosition:E,size:T,type:N,variant:O},q=C4(A),V=(k||_&&E==="start")&&le.jsx(R4,{className:q.startIcon,ownerState:A,children:k||le.jsx(bw,{className:q.loadingIconPlaceholder,ownerState:A})}),j=(b||_&&E==="end")&&le.jsx(_4,{className:q.endIcon,ownerState:A,children:b||le.jsx(bw,{className:q.loadingIconPlaceholder,ownerState:A})}),P=a||"",$=typeof _=="boolean"?le.jsx("span",{className:q.loadingWrapper,style:{display:"contents"},children:_&&le.jsx(T4,{className:q.loadingIndicator,ownerState:A,children:H})}):null;return le.jsxs(E4,{ownerState:A,className:Qe(r.className,q.root,h,P),component:d,disabled:v||_,focusRipple:!g,focusVisibleClassName:Qe(q.focusVisible,x),ref:e,type:N,id:_?B:C,...I,classes:q,children:[V,E!=="end"&&$,l,E==="end"&&$,j]})});function A4(t){return Bt("MuiCard",t)}Nt("MuiCard",["root"]);const D4=t=>{const{classes:n}=t;return Ft({root:["root"]},A4,n)},k4=Ue(fE,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),N4=L.forwardRef(function(n,e){const r=zt({props:n,name:"MuiCard"}),{className:a,raised:o=!1,...u}=r,l={...r,raised:o},c=D4(l);return le.jsx(k4,{className:Qe(c.root,a),elevation:o?8:void 0,ref:e,ownerState:l,...u})});function M4(t){return Bt("MuiCardContent",t)}Nt("MuiCardContent",["root"]);const O4=t=>{const{classes:n}=t;return Ft({root:["root"]},M4,n)},I4=Ue("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),B4=L.forwardRef(function(n,e){const r=zt({props:n,name:"MuiCardContent"}),{className:a,component:o="div",...u}=r,l={...r,component:o},c=O4(l);return le.jsx(I4,{as:o,className:Qe(c.root,a),ownerState:l,ref:e,...u})});function pE(t=window){const n=t.document.documentElement.clientWidth;return t.innerWidth-n}function F4(t){const n=ra(t);return n.body===t?io(t).innerWidth>n.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function wl(t,n){n?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function ww(t){return parseFloat(io(t).getComputedStyle(t).paddingRight)||0}function P4(t){const e=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(t.tagName),r=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return e||r}function Sw(t,n,e,r,a){const o=[n,e,...r];[].forEach.call(t.children,u=>{const l=!o.includes(u),c=!P4(u);l&&c&&wl(u,a)})}function Gv(t,n){let e=-1;return t.some((r,a)=>n(r)?(e=a,!0):!1),e}function L4(t,n){const e=[],r=t.container;if(!n.disableScrollLock){if(F4(r)){const u=pE(io(r));e.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${ww(r)+u}px`;const l=ra(r).querySelectorAll(".mui-fixed");[].forEach.call(l,c=>{e.push({value:c.style.paddingRight,property:"padding-right",el:c}),c.style.paddingRight=`${ww(c)+u}px`})}let o;if(r.parentNode instanceof DocumentFragment)o=ra(r).body;else{const u=r.parentElement,l=io(r);o=u?.nodeName==="HTML"&&l.getComputedStyle(u).overflowY==="scroll"?u:r}e.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return()=>{e.forEach(({value:o,el:u,property:l})=>{o?u.style.setProperty(l,o):u.style.removeProperty(l)})}}function z4(t){const n=[];return[].forEach.call(t.children,e=>{e.getAttribute("aria-hidden")==="true"&&n.push(e)}),n}class U4{constructor(){this.modals=[],this.containers=[]}add(n,e){let r=this.modals.indexOf(n);if(r!==-1)return r;r=this.modals.length,this.modals.push(n),n.modalRef&&wl(n.modalRef,!1);const a=z4(e);Sw(e,n.mount,n.modalRef,a,!0);const o=Gv(this.containers,u=>u.container===e);return o!==-1?(this.containers[o].modals.push(n),r):(this.containers.push({modals:[n],container:e,restore:null,hiddenSiblings:a}),r)}mount(n,e){const r=Gv(this.containers,o=>o.modals.includes(n)),a=this.containers[r];a.restore||(a.restore=L4(a,e))}remove(n,e=!0){const r=this.modals.indexOf(n);if(r===-1)return r;const a=Gv(this.containers,u=>u.modals.includes(n)),o=this.containers[a];if(o.modals.splice(o.modals.indexOf(n),1),this.modals.splice(r,1),o.modals.length===0)o.restore&&o.restore(),n.modalRef&&wl(n.modalRef,e),Sw(o.container,n.mount,n.modalRef,o.hiddenSiblings,!1),this.containers.splice(a,1);else{const u=o.modals[o.modals.length-1];u.modalRef&&wl(u.modalRef,!1)}return r}isTopModal(n){return this.modals.length>0&&this.modals[this.modals.length-1]===n}}function bl(t){let n=t.activeElement;for(;n?.shadowRoot?.activeElement!=null;)n=n.shadowRoot.activeElement;return n}const W4=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function H4(t){const n=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(n)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:n}function V4(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const n=r=>t.ownerDocument.querySelector(`input[type="radio"]${r}`);let e=n(`[name="${t.name}"]:checked`);return e||(e=n(`[name="${t.name}"]`)),e!==t}function j4(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||V4(t))}function G4(t){const n=[],e=[];return Array.from(t.querySelectorAll(W4)).forEach((r,a)=>{const o=H4(r);o===-1||!j4(r)||(o===0?n.push(r):e.push({documentOrder:a,tabIndex:o,node:r}))}),e.sort((r,a)=>r.tabIndex===a.tabIndex?r.documentOrder-a.documentOrder:r.tabIndex-a.tabIndex).map(r=>r.node).concat(n)}function q4(){return!0}function $4(t){const{children:n,disableAutoFocus:e=!1,disableEnforceFocus:r=!1,disableRestoreFocus:a=!1,getTabbable:o=G4,isEnabled:u=q4,open:l}=t,c=L.useRef(!1),d=L.useRef(null),h=L.useRef(null),v=L.useRef(null),m=L.useRef(null),g=L.useRef(!1),b=L.useRef(null),x=sr(Xl(n),b),S=L.useRef(null);L.useEffect(()=>{!l||!b.current||(g.current=!e)},[e,l]),L.useEffect(()=>{if(!l||!b.current)return;const R=ra(b.current),E=bl(R);return b.current.contains(E)||(b.current.hasAttribute("tabIndex")||b.current.setAttribute("tabIndex","-1"),g.current&&b.current.focus()),()=>{a||(v.current&&v.current.focus&&(c.current=!0,v.current.focus()),v.current=null)}},[l]),L.useEffect(()=>{if(!l||!b.current)return;const R=ra(b.current),E=N=>{if(S.current=N,r||!u()||N.key!=="Tab")return;bl(R)===b.current&&N.shiftKey&&(c.current=!0,h.current&&h.current.focus())},T=()=>{const N=b.current;if(N===null)return;const O=bl(R);if(!R.hasFocus()||!u()||c.current){c.current=!1;return}if(N.contains(O)||r&&O!==d.current&&O!==h.current)return;if(O!==m.current)m.current=null;else if(m.current!==null)return;if(!g.current)return;let I=[];if((O===d.current||O===h.current)&&(I=o(b.current)),I.length>0){const B=!!(S.current?.shiftKey&&S.current?.key==="Tab"),H=I[0],A=I[I.length-1];typeof H!="string"&&typeof A!="string"&&(B?A.focus():H.focus())}else N.focus()};R.addEventListener("focusin",T),R.addEventListener("keydown",E,!0);const k=setInterval(()=>{const N=bl(R);N&&N.tagName==="BODY"&&T()},50);return()=>{clearInterval(k),R.removeEventListener("focusin",T),R.removeEventListener("keydown",E,!0)}},[e,r,a,u,l,o]);const C=R=>{v.current===null&&(v.current=R.relatedTarget),g.current=!0,m.current=R.target;const E=n.props.onFocus;E&&E(R)},_=R=>{v.current===null&&(v.current=R.relatedTarget),g.current=!0};return le.jsxs(L.Fragment,{children:[le.jsx("div",{tabIndex:l?0:-1,onFocus:_,ref:d,"data-testid":"sentinelStart"}),L.cloneElement(n,{ref:x,onFocus:C}),le.jsx("div",{tabIndex:l?0:-1,onFocus:_,ref:h,"data-testid":"sentinelEnd"})]})}function K4(t){return typeof t=="function"?t():t}function X4(t){return t?t.props.hasOwnProperty("in"):!1}const Cw=()=>{},_f=new U4;function Y4(t){const{container:n,disableEscapeKeyDown:e=!1,disableScrollLock:r=!1,closeAfterTransition:a=!1,onTransitionEnter:o,onTransitionExited:u,children:l,onClose:c,open:d,rootRef:h}=t,v=L.useRef({}),m=L.useRef(null),g=L.useRef(null),b=sr(g,h),[x,S]=L.useState(!d),C=X4(l);let _=!0;(t["aria-hidden"]==="false"||t["aria-hidden"]===!1)&&(_=!1);const R=()=>ra(m.current),E=()=>(v.current.modalRef=g.current,v.current.mount=m.current,v.current),T=()=>{_f.mount(E(),{disableScrollLock:r}),g.current&&(g.current.scrollTop=0)},k=Mi(()=>{const j=K4(n)||R().body;_f.add(E(),j),g.current&&T()}),N=()=>_f.isTopModal(E()),O=Mi(j=>{m.current=j,j&&(d&&N()?T():g.current&&wl(g.current,_))}),I=L.useCallback(()=>{_f.remove(E(),_)},[_]);L.useEffect(()=>()=>{I()},[I]),L.useEffect(()=>{d?k():(!C||!a)&&I()},[d,I,C,a,k]);const B=j=>P=>{j.onKeyDown?.(P),!(P.key!=="Escape"||P.which===229||!N())&&(e||(P.stopPropagation(),c&&c(P,"escapeKeyDown")))},H=j=>P=>{j.onClick?.(P),P.target===P.currentTarget&&c&&c(P,"backdropClick")};return{getRootProps:(j={})=>{const P=lE(t);delete P.onTransitionEnter,delete P.onTransitionExited;const $={...P,...j};return{role:"presentation",...$,onKeyDown:B($),ref:b}},getBackdropProps:(j={})=>{const P=j;return{"aria-hidden":!0,...P,onClick:H(P),open:d}},getTransitionProps:()=>{const j=()=>{S(!1),o&&o()},P=()=>{S(!0),u&&u(),a&&I()};return{onEnter:iw(j,l?.props.onEnter??Cw),onExited:iw(P,l?.props.onExited??Cw)}},rootRef:b,portalRef:O,isTopModal:N,exited:x,hasTransition:C}}function Q4(t){return Bt("MuiModal",t)}Nt("MuiModal",["root","hidden","backdrop"]);const Z4=t=>{const{open:n,exited:e,classes:r}=t;return Ft({root:["root",!n&&e&&"hidden"],backdrop:["backdrop"]},Q4,r)},J4=Ue("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:e}=t;return[n.root,!e.open&&e.exited&&n.hidden]}})(tn(({theme:t})=>({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:n})=>!n.open&&n.exited,style:{visibility:"hidden"}}]}))),eI=Ue(g4,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),tI=L.forwardRef(function(n,e){const r=zt({name:"MuiModal",props:n}),{BackdropComponent:a=eI,BackdropProps:o,classes:u,className:l,closeAfterTransition:c=!1,children:d,container:h,component:v,components:m={},componentsProps:g={},disableAutoFocus:b=!1,disableEnforceFocus:x=!1,disableEscapeKeyDown:S=!1,disablePortal:C=!1,disableRestoreFocus:_=!1,disableScrollLock:R=!1,hideBackdrop:E=!1,keepMounted:T=!1,onClose:k,onTransitionEnter:N,onTransitionExited:O,open:I,slotProps:B={},slots:H={},theme:A,...q}=r,V={...r,closeAfterTransition:c,disableAutoFocus:b,disableEnforceFocus:x,disableEscapeKeyDown:S,disablePortal:C,disableRestoreFocus:_,disableScrollLock:R,hideBackdrop:E,keepMounted:T},{getRootProps:j,getBackdropProps:P,getTransitionProps:$,portalRef:Q,isTopModal:U,exited:G,hasTransition:M}=Y4({...V,rootRef:e}),K={...V,exited:G},Z=Z4(K),oe={};if(d.props.tabIndex===void 0&&(oe.tabIndex="-1"),M){const{onEnter:be,onExited:we}=$();oe.onEnter=be,oe.onExited=we}const pe={slots:{root:m.Root,backdrop:m.Backdrop,...H},slotProps:{...g,...B}},[ge,xe]=Un("root",{ref:e,elementType:J4,externalForwardedProps:{...pe,...q,component:v},getSlotProps:j,ownerState:K,className:Qe(l,Z?.root,!K.open&&K.exited&&Z?.hidden)}),[Ce,he]=Un("backdrop",{ref:o?.ref,elementType:a,externalForwardedProps:pe,shouldForwardComponentProp:!0,additionalProps:o,getSlotProps:be=>P({...be,onClick:we=>{be?.onClick&&be.onClick(we)}}),className:Qe(o?.className,Z?.backdrop),ownerState:K});return!T&&!I&&(!M||G)?null:le.jsx(t4,{ref:Q,container:h,disablePortal:C,children:le.jsxs(ge,{...xe,children:[!E&&a?le.jsx(Ce,{...he}):null,le.jsx($4,{disableEnforceFocus:x,disableAutoFocus:b,disableRestoreFocus:_,isEnabled:U,open:I,children:L.cloneElement(d,oe)})]})})}),nI=t=>{const{classes:n,disableUnderline:e,startAdornment:r,endAdornment:a,size:o,hiddenLabel:u,multiline:l}=t,c={root:["root",!e&&"underline",r&&"adornedStart",a&&"adornedEnd",o==="small"&&`size${Ze(o)}`,u&&"hiddenLabel",l&&"multiline"],input:["input"]},d=Ft(c,c4,n);return{...n,...d}},rI=Ue(Xd,{shouldForwardProp:t=>aa(t)||t==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:e}=t;return[...$d(t,n),!e.disableUnderline&&n.underline]}})(tn(({theme:t})=>{const n=t.palette.mode==="light",e=n?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=n?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",a=n?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",o=n?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:a,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r}},[`&.${xi.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r},[`&.${xi.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:o},variants:[{props:({ownerState:u})=>!u.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${xi.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${xi.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?t.alpha(t.vars.palette.common.onBackground,t.vars.opacity.inputUnderline):e}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${xi.disabled}, .${xi.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${xi.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(Ui()).map(([u])=>({props:{disableUnderline:!1,color:u},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[u]?.main}`}}})),{props:({ownerState:u})=>u.startAdornment,style:{paddingLeft:12}},{props:({ownerState:u})=>u.endAdornment,style:{paddingRight:12}},{props:({ownerState:u})=>u.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:u,size:l})=>u.multiline&&l==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:u})=>u.multiline&&u.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:u})=>u.multiline&&u.hiddenLabel&&u.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),aI=Ue(Yd,{name:"MuiFilledInput",slot:"Input",overridesResolver:Kd})(tn(({theme:t})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:n})=>n.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:0}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:0}},{props:({ownerState:n})=>n.hiddenLabel&&n.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:n})=>n.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),iy=L.forwardRef(function(n,e){const r=zt({props:n,name:"MuiFilledInput"}),{disableUnderline:a=!1,components:o={},componentsProps:u,fullWidth:l=!1,hiddenLabel:c,inputComponent:d="input",multiline:h=!1,slotProps:v,slots:m={},type:g="text",...b}=r,x={...r,disableUnderline:a,fullWidth:l,inputComponent:d,multiline:h,type:g},S=nI(r),C={root:{ownerState:x},input:{ownerState:x}},_=v??u?Gn(C,v??u):C,R=m.root??o.Root??rI,E=m.input??o.Input??aI;return le.jsx(oy,{slots:{root:R,input:E},slotProps:_,fullWidth:l,inputComponent:d,multiline:h,ref:e,type:g,...b,classes:S})});iy.muiName="Input";function oI(t){return Bt("MuiFormControl",t)}Nt("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const iI=t=>{const{classes:n,margin:e,fullWidth:r}=t,a={root:["root",e!=="none"&&`margin${Ze(e)}`,r&&"fullWidth"]};return Ft(a,oI,n)},sI=Ue("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:e}=t;return[n.root,n[`margin${Ze(e.margin)}`],e.fullWidth&&n.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),uI=L.forwardRef(function(n,e){const r=zt({props:n,name:"MuiFormControl"}),{children:a,className:o,color:u="primary",component:l="div",disabled:c=!1,error:d=!1,focused:h,fullWidth:v=!1,hiddenLabel:m=!1,margin:g="none",required:b=!1,size:x="medium",variant:S="outlined",...C}=r,_={...r,color:u,component:l,disabled:c,error:d,fullWidth:v,hiddenLabel:m,margin:g,required:b,size:x,variant:S},R=iI(_),[E,T]=L.useState(()=>{let j=!1;return a&&L.Children.forEach(a,P=>{if(!Hv(P,["Input","Select"]))return;const $=Hv(P,["Select"])?P.props.input:P;$&&o4($.props)&&(j=!0)}),j}),[k,N]=L.useState(()=>{let j=!1;return a&&L.Children.forEach(a,P=>{Hv(P,["Input","Select"])&&(id(P.props,!0)||id(P.props.inputProps,!0))&&(j=!0)}),j}),[O,I]=L.useState(!1);c&&O&&I(!1);const B=h!==void 0&&!c?h:O;let H;L.useRef(!1);const A=L.useCallback(()=>{N(!0)},[]),q=L.useCallback(()=>{N(!1)},[]),V=L.useMemo(()=>({adornedStart:E,setAdornedStart:T,color:u,disabled:c,error:d,filled:k,focused:B,fullWidth:v,hiddenLabel:m,size:x,onBlur:()=>{I(!1)},onFocus:()=>{I(!0)},onEmpty:q,onFilled:A,registerEffect:H,required:b,variant:S}),[E,u,c,d,k,B,v,m,H,q,A,b,x,S]);return le.jsx(ay.Provider,{value:V,children:le.jsx(sI,{as:l,ownerState:_,className:Qe(R.root,o),ref:e,...C,children:a})})});function lI(t){return Bt("MuiFormHelperText",t)}const Ew=Nt("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var Rw;const cI=t=>{const{classes:n,contained:e,size:r,disabled:a,error:o,filled:u,focused:l,required:c}=t,d={root:["root",a&&"disabled",o&&"error",r&&`size${Ze(r)}`,e&&"contained",l&&"focused",u&&"filled",c&&"required"]};return Ft(d,lI,n)},fI=Ue("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:e}=t;return[n.root,e.size&&n[`size${Ze(e.size)}`],e.contained&&n.contained,e.filled&&n.filled]}})(tn(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${Ew.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${Ew.error}`]:{color:(t.vars||t).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:n})=>n.contained,style:{marginLeft:14,marginRight:14}}]}))),dI=L.forwardRef(function(n,e){const r=zt({props:n,name:"MuiFormHelperText"}),{children:a,className:o,component:u="p",disabled:l,error:c,filled:d,focused:h,margin:v,required:m,variant:g,...b}=r,x=lu(),S=uu({props:r,muiFormControl:x,states:["variant","size","disabled","error","filled","focused","required"]}),C={...r,component:u,contained:S.variant==="filled"||S.variant==="outlined",variant:S.variant,size:S.size,disabled:S.disabled,error:S.error,filled:S.filled,focused:S.focused,required:S.required};delete C.ownerState;const _=cI(C);return le.jsx(fI,{as:u,className:Qe(_.root,o),ref:e,...b,ownerState:C,children:a===" "?Rw||(Rw=le.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):a})});function hI(t){return Bt("MuiFormLabel",t)}const Sl=Nt("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),pI=t=>{const{classes:n,color:e,focused:r,disabled:a,error:o,filled:u,required:l}=t,c={root:["root",`color${Ze(e)}`,a&&"disabled",o&&"error",u&&"filled",r&&"focused",l&&"required"],asterisk:["asterisk",o&&"error"]};return Ft(c,hI,n)},vI=Ue("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:e}=t;return[n.root,e.color==="secondary"&&n.colorSecondary,e.filled&&n.filled]}})(tn(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(t.palette).filter(Ui()).map(([n])=>({props:{color:n},style:{[`&.${Sl.focused}`]:{color:(t.vars||t).palette[n].main}}})),{props:{},style:{[`&.${Sl.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${Sl.error}`]:{color:(t.vars||t).palette.error.main}}}]}))),mI=Ue("span",{name:"MuiFormLabel",slot:"Asterisk"})(tn(({theme:t})=>({[`&.${Sl.error}`]:{color:(t.vars||t).palette.error.main}}))),gI=L.forwardRef(function(n,e){const r=zt({props:n,name:"MuiFormLabel"}),{children:a,className:o,color:u,component:l="label",disabled:c,error:d,filled:h,focused:v,required:m,...g}=r,b=lu(),x=uu({props:r,muiFormControl:b,states:["color","required","focused","disabled","error","filled"]}),S={...r,color:x.color||"primary",component:l,disabled:x.disabled,error:x.error,filled:x.filled,focused:x.focused,required:x.required},C=pI(S);return le.jsxs(vI,{as:l,ownerState:S,className:Qe(C.root,o),ref:e,...g,children:[a,x.required&&le.jsxs(mI,{ownerState:S,"aria-hidden":!0,className:C.asterisk,children:["","*"]})]})});function ag(t){return`scale(${t}, ${t**2})`}const yI={entering:{opacity:1,transform:ag(1)},entered:{opacity:1,transform:"none"}},qv=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),og=L.forwardRef(function(n,e){const{addEndListener:r,appear:a=!0,children:o,easing:u,in:l,onEnter:c,onEntered:d,onEntering:h,onExit:v,onExited:m,onExiting:g,style:b,timeout:x="auto",TransitionComponent:S=Da,...C}=n,_=oE(),R=L.useRef(),E=ey(),T=L.useRef(null),k=sr(T,Xl(o),e),N=j=>P=>{if(j){const $=T.current;P===void 0?j($):j($,P)}},O=N(h),I=N((j,P)=>{iE(j);const{duration:$,delay:Q,easing:U}=rd({style:b,timeout:x,easing:u},{mode:"enter"});let G;x==="auto"?(G=E.transitions.getAutoHeightDuration(j.clientHeight),R.current=G):G=$,j.style.transition=[E.transitions.create("opacity",{duration:G,delay:Q}),E.transitions.create("transform",{duration:qv?G:G*.666,delay:Q,easing:U})].join(","),c&&c(j,P)}),B=N(d),H=N(g),A=N(j=>{const{duration:P,delay:$,easing:Q}=rd({style:b,timeout:x,easing:u},{mode:"exit"});let U;x==="auto"?(U=E.transitions.getAutoHeightDuration(j.clientHeight),R.current=U):U=P,j.style.transition=[E.transitions.create("opacity",{duration:U,delay:$}),E.transitions.create("transform",{duration:qv?U:U*.666,delay:qv?$:$||U*.333,easing:Q})].join(","),j.style.opacity=0,j.style.transform=ag(.75),v&&v(j)}),q=N(m),V=j=>{x==="auto"&&_.start(R.current||0,j),r&&r(T.current,j)};return le.jsx(S,{appear:a,in:l,nodeRef:T,onEnter:I,onEntered:B,onEntering:O,onExit:A,onExited:q,onExiting:H,addEndListener:V,timeout:x==="auto"?null:x,...C,children:(j,{ownerState:P,...$})=>L.cloneElement(o,{style:{opacity:0,transform:ag(.75),visibility:j==="exited"&&!l?"hidden":void 0,...yI[j],...b,...o.props.style},ref:k,...$})})});og&&(og.muiSupportAuto=!0);const bI=t=>{const{classes:n,disableUnderline:e}=t,a=Ft({root:["root",!e&&"underline"],input:["input"]},u4,n);return{...n,...a}},xI=Ue(Xd,{shouldForwardProp:t=>aa(t)||t==="classes",name:"MuiInput",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:e}=t;return[...$d(t,n),!e.disableUnderline&&n.underline]}})(tn(({theme:t})=>{let e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(e=t.alpha(t.vars.palette.common.onBackground,t.vars.opacity.inputUnderline)),{position:"relative",variants:[{props:({ownerState:r})=>r.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:r})=>!r.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${ul.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${ul.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${e}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${ul.disabled}, .${ul.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${e}`}},[`&.${ul.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(Ui()).map(([r])=>({props:{color:r,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[r].main}`}}}))]}})),wI=Ue(Yd,{name:"MuiInput",slot:"Input",overridesResolver:Kd})({}),sy=L.forwardRef(function(n,e){const r=zt({props:n,name:"MuiInput"}),{disableUnderline:a=!1,components:o={},componentsProps:u,fullWidth:l=!1,inputComponent:c="input",multiline:d=!1,slotProps:h,slots:v={},type:m="text",...g}=r,b=bI(r),S={root:{ownerState:{disableUnderline:a}}},C=h??u?Gn(h??u,S):S,_=v.root??o.Root??xI,R=v.input??o.Input??wI;return le.jsx(oy,{slots:{root:_,input:R},slotProps:C,fullWidth:l,inputComponent:c,multiline:d,ref:e,type:m,...g,classes:b})});sy.muiName="Input";function SI(t){return Bt("MuiInputLabel",t)}Nt("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const CI=t=>{const{classes:n,formControl:e,size:r,shrink:a,disableAnimation:o,variant:u,required:l}=t,c={root:["root",e&&"formControl",!o&&"animated",a&&"shrink",r&&r!=="medium"&&`size${Ze(r)}`,u],asterisk:[l&&"asterisk"]},d=Ft(c,SI,n);return{...n,...d}},EI=Ue(gI,{shouldForwardProp:t=>aa(t)||t==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:e}=t;return[{[`& .${Sl.asterisk}`]:n.asterisk},n.root,e.formControl&&n.formControl,e.size==="small"&&n.sizeSmall,e.shrink&&n.shrink,!e.disableAnimation&&n.animated,e.focused&&n.focused,n[e.variant]]}})(tn(({theme:t})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:n})=>n.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:n})=>n.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:n})=>!n.disableAnimation,style:{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:n,ownerState:e})=>n==="filled"&&e.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:n,ownerState:e,size:r})=>n==="filled"&&e.shrink&&r==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:n,ownerState:e})=>n==="outlined"&&e.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),RI=L.forwardRef(function(n,e){const r=zt({name:"MuiInputLabel",props:n}),{disableAnimation:a=!1,margin:o,shrink:u,variant:l,className:c,...d}=r,h=lu();let v=u;typeof v>"u"&&h&&(v=h.filled||h.focused||h.adornedStart);const m=uu({props:r,muiFormControl:h,states:["size","variant","required","focused"]}),g={...r,disableAnimation:a,formControl:h,shrink:v,size:m.size,variant:m.variant,required:m.required,focused:m.focused},b=CI(g);return le.jsx(EI,{"data-shrink":v,ref:e,className:Qe(b.root,c),...d,ownerState:g,classes:b})}),_I=L.createContext({});function TI(t){return Bt("MuiList",t)}Nt("MuiList",["root","padding","dense","subheader"]);const AI=t=>{const{classes:n,disablePadding:e,dense:r,subheader:a}=t;return Ft({root:["root",!e&&"padding",r&&"dense",a&&"subheader"]},TI,n)},DI=Ue("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:e}=t;return[n.root,!e.disablePadding&&n.padding,e.dense&&n.dense,e.subheader&&n.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>t.subheader,style:{paddingTop:0}}]}),kI=L.forwardRef(function(n,e){const r=zt({props:n,name:"MuiList"}),{children:a,className:o,component:u="ul",dense:l=!1,disablePadding:c=!1,subheader:d,...h}=r,v=L.useMemo(()=>({dense:l}),[l]),m={...r,component:u,dense:l,disablePadding:c},g=AI(m);return le.jsx(_I.Provider,{value:v,children:le.jsxs(DI,{as:u,className:Qe(g.root,o),ref:e,ownerState:m,...h,children:[d,a]})})});function $v(t,n,e){return t===n?t.firstChild:n&&n.nextElementSibling?n.nextElementSibling:e?null:t.firstChild}function _w(t,n,e){return t===n?e?t.firstChild:t.lastChild:n&&n.previousElementSibling?n.previousElementSibling:e?null:t.lastChild}function vE(t,n){if(n===void 0)return!0;let e=t.innerText;return e===void 0&&(e=t.textContent),e=e.trim().toLowerCase(),e.length===0?!1:n.repeating?e[0]===n.keys[0]:e.startsWith(n.keys.join(""))}function ll(t,n,e,r,a,o){let u=!1,l=a(t,n,n?e:!1);for(;l;){if(l===t.firstChild){if(u)return!1;u=!0}const c=r?!1:l.disabled||l.getAttribute("aria-disabled")==="true";if(!l.hasAttribute("tabindex")||!vE(l,o)||c)l=a(t,l,e);else return l.focus(),!0}return!1}const NI=L.forwardRef(function(n,e){const{actions:r,autoFocus:a=!1,autoFocusItem:o=!1,children:u,className:l,disabledItemsFocusable:c=!1,disableListWrap:d=!1,onKeyDown:h,variant:v="selectedMenu",...m}=n,g=L.useRef(null),b=L.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Fi(()=>{a&&g.current.focus()},[a]),L.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(R,{direction:E})=>{const T=!g.current.style.width;if(R.clientHeight<g.current.clientHeight&&T){const k=`${pE(io(R))}px`;g.current.style[E==="rtl"?"paddingLeft":"paddingRight"]=k,g.current.style.width=`calc(100% + ${k})`}return g.current}}),[]);const x=R=>{const E=g.current,T=R.key;if(R.ctrlKey||R.metaKey||R.altKey){h&&h(R);return}const N=bl(ra(E));if(T==="ArrowDown")R.preventDefault(),ll(E,N,d,c,$v);else if(T==="ArrowUp")R.preventDefault(),ll(E,N,d,c,_w);else if(T==="Home")R.preventDefault(),ll(E,null,d,c,$v);else if(T==="End")R.preventDefault(),ll(E,null,d,c,_w);else if(T.length===1){const O=b.current,I=T.toLowerCase(),B=performance.now();O.keys.length>0&&(B-O.lastTime>500?(O.keys=[],O.repeating=!0,O.previousKeyMatched=!0):O.repeating&&I!==O.keys[0]&&(O.repeating=!1)),O.lastTime=B,O.keys.push(I);const H=N&&!O.repeating&&vE(N,O);O.previousKeyMatched&&(H||ll(E,N,!1,c,$v,O))?R.preventDefault():O.previousKeyMatched=!1}h&&h(R)},S=sr(g,e);let C=-1;L.Children.forEach(u,(R,E)=>{if(!L.isValidElement(R)){C===E&&(C+=1,C>=u.length&&(C=-1));return}R.props.disabled||(v==="selectedMenu"&&R.props.selected||C===-1)&&(C=E),C===E&&(R.props.disabled||R.props.muiSkipListHighlight||R.type.muiSkipListHighlight)&&(C+=1,C>=u.length&&(C=-1))});const _=L.Children.map(u,(R,E)=>{if(E===C){const T={};return o&&(T.autoFocus=!0),R.props.tabIndex===void 0&&v==="selectedMenu"&&(T.tabIndex=0),L.cloneElement(R,T)}return R});return le.jsx(kI,{role:"menu",ref:S,className:l,onKeyDown:x,tabIndex:a?0:-1,...m,children:_})});function MI(t){return Bt("MuiPopover",t)}Nt("MuiPopover",["root","paper"]);function Tw(t,n){let e=0;return typeof n=="number"?e=n:n==="center"?e=t.height/2:n==="bottom"&&(e=t.height),e}function Aw(t,n){let e=0;return typeof n=="number"?e=n:n==="center"?e=t.width/2:n==="right"&&(e=t.width),e}function Dw(t){return[t.horizontal,t.vertical].map(n=>typeof n=="number"?`${n}px`:n).join(" ")}function Tf(t){return typeof t=="function"?t():t}const OI=t=>{const{classes:n}=t;return Ft({root:["root"],paper:["paper"]},MI,n)},II=Ue(tI,{name:"MuiPopover",slot:"Root"})({}),mE=Ue(fE,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),BI=L.forwardRef(function(n,e){const r=zt({props:n,name:"MuiPopover"}),{action:a,anchorEl:o,anchorOrigin:u={vertical:"top",horizontal:"left"},anchorPosition:l,anchorReference:c="anchorEl",children:d,className:h,container:v,elevation:m=8,marginThreshold:g=16,open:b,PaperProps:x={},slots:S={},slotProps:C={},transformOrigin:_={vertical:"top",horizontal:"left"},TransitionComponent:R,transitionDuration:E="auto",TransitionProps:T={},disableScrollLock:k=!1,...N}=r,O=L.useRef(),I={...r,anchorOrigin:u,anchorReference:c,elevation:m,marginThreshold:g,transformOrigin:_,TransitionComponent:R,transitionDuration:E,TransitionProps:T},B=OI(I),H=L.useCallback(()=>{if(c==="anchorPosition")return l;const be=Tf(o),Re=(be&&be.nodeType===1?be:ra(O.current).body).getBoundingClientRect();return{top:Re.top+Tw(Re,u.vertical),left:Re.left+Aw(Re,u.horizontal)}},[o,u.horizontal,u.vertical,l,c]),A=L.useCallback(be=>({vertical:Tw(be,_.vertical),horizontal:Aw(be,_.horizontal)}),[_.horizontal,_.vertical]),q=L.useCallback(be=>{const we={width:be.offsetWidth,height:be.offsetHeight},Re=A(we);if(c==="none")return{top:null,left:null,transformOrigin:Dw(Re)};const Me=H();let Se=Me.top-Re.vertical,Fe=Me.left-Re.horizontal;const He=Se+we.height,vt=Fe+we.width,ut=io(Tf(o)),yt=ut.innerHeight-g,jt=ut.innerWidth-g;if(g!==null&&Se<g){const st=Se-g;Se-=st,Re.vertical+=st}else if(g!==null&&He>yt){const st=He-yt;Se-=st,Re.vertical+=st}if(g!==null&&Fe<g){const st=Fe-g;Fe-=st,Re.horizontal+=st}else if(vt>jt){const st=vt-jt;Fe-=st,Re.horizontal+=st}return{top:`${Math.round(Se)}px`,left:`${Math.round(Fe)}px`,transformOrigin:Dw(Re)}},[o,c,H,A,g]),[V,j]=L.useState(b),P=L.useCallback(()=>{const be=O.current;if(!be)return;const we=q(be);we.top!==null&&be.style.setProperty("top",we.top),we.left!==null&&(be.style.left=we.left),be.style.transformOrigin=we.transformOrigin,j(!0)},[q]);L.useEffect(()=>(k&&window.addEventListener("scroll",P),()=>window.removeEventListener("scroll",P)),[o,k,P]);const $=()=>{P()},Q=()=>{j(!1)};L.useEffect(()=>{b&&P()}),L.useImperativeHandle(a,()=>b?{updatePosition:()=>{P()}}:null,[b,P]),L.useEffect(()=>{if(!b)return;const be=tE(()=>{P()}),we=io(Tf(o));return we.addEventListener("resize",be),()=>{be.clear(),we.removeEventListener("resize",be)}},[o,b,P]);let U=E;const G={slots:{transition:R,...S},slotProps:{transition:T,paper:x,...C}},[M,K]=Un("transition",{elementType:og,externalForwardedProps:G,ownerState:I,getSlotProps:be=>({...be,onEntering:(we,Re)=>{be.onEntering?.(we,Re),$()},onExited:we=>{be.onExited?.(we),Q()}}),additionalProps:{appear:!0,in:b}});E==="auto"&&!M.muiSupportAuto&&(U=void 0);const Z=v||(o?ra(Tf(o)).body:void 0),[oe,{slots:pe,slotProps:ge,...xe}]=Un("root",{ref:e,elementType:II,externalForwardedProps:{...G,...N},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:S.backdrop},slotProps:{backdrop:cO(typeof C.backdrop=="function"?C.backdrop(I):C.backdrop,{invisible:!0})},container:Z,open:b},ownerState:I,className:Qe(B.root,h)}),[Ce,he]=Un("paper",{ref:O,className:B.paper,elementType:mE,externalForwardedProps:G,shouldForwardComponentProp:!0,additionalProps:{elevation:m,style:V?void 0:{opacity:0}},ownerState:I});return le.jsx(oe,{...xe,...!ad(oe)&&{slots:pe,slotProps:ge,disableScrollLock:k},children:le.jsx(M,{...K,timeout:U,children:le.jsx(Ce,{...he,children:d})})})});function FI(t){return Bt("MuiMenu",t)}Nt("MuiMenu",["root","paper","list"]);const PI={vertical:"top",horizontal:"right"},LI={vertical:"top",horizontal:"left"},zI=t=>{const{classes:n}=t;return Ft({root:["root"],paper:["paper"],list:["list"]},FI,n)},UI=Ue(BI,{shouldForwardProp:t=>aa(t)||t==="classes",name:"MuiMenu",slot:"Root"})({}),WI=Ue(mE,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),HI=Ue(NI,{name:"MuiMenu",slot:"List"})({outline:0}),VI=L.forwardRef(function(n,e){const r=zt({props:n,name:"MuiMenu"}),{autoFocus:a=!0,children:o,className:u,disableAutoFocusItem:l=!1,MenuListProps:c={},onClose:d,open:h,PaperProps:v={},PopoverClasses:m,transitionDuration:g="auto",TransitionProps:{onEntering:b,...x}={},variant:S="selectedMenu",slots:C={},slotProps:_={},...R}=r,E=dM(),T={...r,autoFocus:a,disableAutoFocusItem:l,MenuListProps:c,onEntering:b,PaperProps:v,transitionDuration:g,TransitionProps:x,variant:S},k=zI(T),N=a&&!l&&h,O=L.useRef(null),I=(U,G)=>{O.current&&O.current.adjustStyleForScrollbar(U,{direction:E?"rtl":"ltr"}),b&&b(U,G)},B=U=>{U.key==="Tab"&&(U.preventDefault(),d&&d(U,"tabKeyDown"))};let H=-1;L.Children.map(o,(U,G)=>{L.isValidElement(U)&&(U.props.disabled||(S==="selectedMenu"&&U.props.selected||H===-1)&&(H=G))});const A={slots:C,slotProps:{list:c,transition:x,paper:v,..._}},q=JO({elementType:C.root,externalSlotProps:_.root,ownerState:T,className:[k.root,u]}),[V,j]=Un("paper",{className:k.paper,elementType:WI,externalForwardedProps:A,shouldForwardComponentProp:!0,ownerState:T}),[P,$]=Un("list",{className:Qe(k.list,c.className),elementType:HI,shouldForwardComponentProp:!0,externalForwardedProps:A,getSlotProps:U=>({...U,onKeyDown:G=>{B(G),U.onKeyDown?.(G)}}),ownerState:T}),Q=typeof A.slotProps.transition=="function"?A.slotProps.transition(T):A.slotProps.transition;return le.jsx(UI,{onClose:d,anchorOrigin:{vertical:"bottom",horizontal:E?"right":"left"},transformOrigin:E?PI:LI,slots:{root:C.root,paper:V,backdrop:C.backdrop,...C.transition&&{transition:C.transition}},slotProps:{root:q,paper:j,backdrop:typeof _.backdrop=="function"?_.backdrop(T):_.backdrop,transition:{...Q,onEntering:(...U)=>{I(...U),Q?.onEntering?.(...U)}}},open:h,ref:e,transitionDuration:g,ownerState:T,...R,classes:m,children:le.jsx(P,{actions:O,autoFocus:a&&(H===-1||l),autoFocusItem:N,variant:S,...$,children:o})})});function jI(t){return Bt("MuiNativeSelect",t)}const uy=Nt("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),GI=t=>{const{classes:n,variant:e,disabled:r,multiple:a,open:o,error:u}=t,l={select:["select",e,r&&"disabled",a&&"multiple",u&&"error"],icon:["icon",`icon${Ze(e)}`,o&&"iconOpen",r&&"disabled"]};return Ft(l,jI,n)},gE=Ue("select",{name:"MuiNativeSelect"})(({theme:t})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${uy.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},variants:[{props:({ownerState:n})=>n.variant!=="filled"&&n.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}}]})),qI=Ue(gE,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:aa,overridesResolver:(t,n)=>{const{ownerState:e}=t;return[n.select,n[e.variant],e.error&&n.error,{[`&.${uy.multiple}`]:n.multiple}]}})({}),yE=Ue("svg",{name:"MuiNativeSelect"})(({theme:t})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${uy.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:({ownerState:n})=>n.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),$I=Ue(yE,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,n)=>{const{ownerState:e}=t;return[n.icon,e.variant&&n[`icon${Ze(e.variant)}`],e.open&&n.iconOpen]}})({}),KI=L.forwardRef(function(n,e){const{className:r,disabled:a,error:o,IconComponent:u,inputRef:l,variant:c="standard",...d}=n,h={...n,disabled:a,variant:c,error:o},v=GI(h);return le.jsxs(L.Fragment,{children:[le.jsx(qI,{ownerState:h,className:Qe(v.select,r),disabled:a,ref:l||e,...d}),n.multiple?null:le.jsx($I,{as:u,ownerState:h,className:v.icon})]})});var kw;const XI=Ue("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:aa})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),YI=Ue("legend",{name:"MuiNotchedOutlined",shouldForwardProp:aa})(tn(({theme:t})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:n})=>!n.withLabel,style:{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})}},{props:({ownerState:n})=>n.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:n})=>n.withLabel&&n.notched,style:{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}]})));function QI(t){const{children:n,classes:e,className:r,label:a,notched:o,...u}=t,l=a!=null&&a!=="",c={...t,notched:o,withLabel:l};return le.jsx(XI,{"aria-hidden":!0,className:r,ownerState:c,...u,children:le.jsx(YI,{ownerState:c,children:l?le.jsx("span",{children:a}):kw||(kw=le.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const ZI=t=>{const{classes:n}=t,r=Ft({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},l4,n);return{...n,...r}},JI=Ue(Xd,{shouldForwardProp:t=>aa(t)||t==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:$d})(tn(({theme:t})=>{const n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${da.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${da.notchedOutline}`]:{borderColor:t.vars?t.alpha(t.vars.palette.common.onBackground,.23):n}},[`&.${da.focused} .${da.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(t.palette).filter(Ui()).map(([e])=>({props:{color:e},style:{[`&.${da.focused} .${da.notchedOutline}`]:{borderColor:(t.vars||t).palette[e].main}}})),{props:{},style:{[`&.${da.error} .${da.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${da.disabled} .${da.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:14}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:14}},{props:({ownerState:e})=>e.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:e,size:r})=>e.multiline&&r==="small",style:{padding:"8.5px 14px"}}]}})),eB=Ue(QI,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(tn(({theme:t})=>{const n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?t.alpha(t.vars.palette.common.onBackground,.23):n}})),tB=Ue(Yd,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Kd})(tn(({theme:t})=>({padding:"16.5px 14px",...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:n})=>n.multiline,style:{padding:0}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:0}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:0}}]}))),ly=L.forwardRef(function(n,e){const r=zt({props:n,name:"MuiOutlinedInput"}),{components:a={},fullWidth:o=!1,inputComponent:u="input",label:l,multiline:c=!1,notched:d,slots:h={},slotProps:v={},type:m="text",...g}=r,b=ZI(r),x=lu(),S=uu({props:r,muiFormControl:x,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),C={...r,color:S.color||"primary",disabled:S.disabled,error:S.error,focused:S.focused,formControl:x,fullWidth:o,hiddenLabel:S.hiddenLabel,multiline:c,size:S.size,type:m},_=h.root??a.Root??JI,R=h.input??a.Input??tB,[E,T]=Un("notchedOutline",{elementType:eB,className:b.notchedOutline,shouldForwardComponentProp:!0,ownerState:C,externalForwardedProps:{slots:h,slotProps:v},additionalProps:{label:l!=null&&l!==""&&S.required?le.jsxs(L.Fragment,{children:[l,"","*"]}):l}});return le.jsx(oy,{slots:{root:_,input:R},slotProps:v,renderSuffix:k=>le.jsx(E,{...T,notched:typeof d<"u"?d:!!(k.startAdornment||k.filled||k.focused)}),fullWidth:o,inputComponent:u,multiline:c,ref:e,type:m,...g,classes:{...b,notchedOutline:null}})});ly.muiName="Input";function bE(t){return Bt("MuiSelect",t)}const cl=Nt("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var Nw;const nB=Ue(gE,{name:"MuiSelect",slot:"Select",overridesResolver:(t,n)=>{const{ownerState:e}=t;return[{[`&.${cl.select}`]:n.select},{[`&.${cl.select}`]:n[e.variant]},{[`&.${cl.error}`]:n.error},{[`&.${cl.multiple}`]:n.multiple}]}})({[`&.${cl.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),rB=Ue(yE,{name:"MuiSelect",slot:"Icon",overridesResolver:(t,n)=>{const{ownerState:e}=t;return[n.icon,e.variant&&n[`icon${Ze(e.variant)}`],e.open&&n.iconOpen]}})({}),aB=Ue("input",{shouldForwardProp:t=>eE(t)&&t!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function Mw(t,n){return typeof n=="object"&&n!==null?t===n:String(t)===String(n)}function oB(t){return t==null||typeof t=="string"&&!t.trim()}const iB=t=>{const{classes:n,variant:e,disabled:r,multiple:a,open:o,error:u}=t,l={select:["select",e,r&&"disabled",a&&"multiple",u&&"error"],icon:["icon",`icon${Ze(e)}`,o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return Ft(l,bE,n)},sB=L.forwardRef(function(n,e){const{"aria-describedby":r,"aria-label":a,autoFocus:o,autoWidth:u,children:l,className:c,defaultOpen:d,defaultValue:h,disabled:v,displayEmpty:m,error:g=!1,IconComponent:b,inputRef:x,labelId:S,MenuProps:C={},multiple:_,name:R,onBlur:E,onChange:T,onClose:k,onFocus:N,onKeyDown:O,onMouseDown:I,onOpen:B,open:H,readOnly:A,renderValue:q,required:V,SelectDisplayProps:j={},tabIndex:P,type:$,value:Q,variant:U="standard",...G}=n,[M,K]=uw({controlled:Q,default:h,name:"Select"}),[Z,oe]=uw({controlled:H,default:d,name:"Select"}),pe=L.useRef(null),ge=L.useRef(null),[xe,Ce]=L.useState(null),{current:he}=L.useRef(H!=null),[be,we]=L.useState(),Re=sr(e,x),Me=L.useCallback(Le=>{ge.current=Le,Le&&Ce(Le)},[]),Se=xe?.parentNode;L.useImperativeHandle(Re,()=>({focus:()=>{ge.current.focus()},node:pe.current,value:M}),[M]);const Fe=xe!==null&&Z;L.useEffect(()=>{if(!Fe||!Se||u||typeof ResizeObserver>"u")return;const Le=new ResizeObserver(()=>{we(Se.clientWidth)});return Le.observe(Se),()=>{Le.disconnect()}},[Fe,Se,u]),L.useEffect(()=>{d&&Z&&xe&&!he&&(we(u?null:Se.clientWidth),ge.current.focus())},[xe,u]),L.useEffect(()=>{o&&ge.current.focus()},[o]),L.useEffect(()=>{if(!S)return;const Le=ra(ge.current).getElementById(S);if(Le){const At=()=>{getSelection().isCollapsed&&ge.current.focus()};return Le.addEventListener("click",At),()=>{Le.removeEventListener("click",At)}}},[S]);const He=(Le,At)=>{Le?B&&B(At):k&&k(At),he||(we(u?null:Se.clientWidth),oe(Le))},vt=Le=>{I?.(Le),Le.button===0&&(Le.preventDefault(),ge.current.focus(),He(!0,Le))},ut=Le=>{He(!1,Le)},yt=L.Children.toArray(l),jt=Le=>{const At=yt.find(fn=>fn.props.value===Le.target.value);At!==void 0&&(K(At.props.value),T&&T(Le,At))},st=Le=>At=>{let fn;if(At.currentTarget.hasAttribute("tabindex")){if(_){fn=Array.isArray(M)?M.slice():[];const Xr=M.indexOf(Le.props.value);Xr===-1?fn.push(Le.props.value):fn.splice(Xr,1)}else fn=Le.props.value;if(Le.props.onClick&&Le.props.onClick(At),M!==fn&&(K(fn),T)){const Xr=At.nativeEvent||At,ei=new Xr.constructor(Xr.type,Xr);Object.defineProperty(ei,"target",{writable:!0,value:{value:fn,name:R}}),T(ei,Le)}_||He(!1,At)}},Pe=Le=>{A||([" ","ArrowUp","ArrowDown","Enter"].includes(Le.key)&&(Le.preventDefault(),He(!0,Le)),O?.(Le))},cn=Le=>{!Fe&&E&&(Object.defineProperty(Le,"target",{writable:!0,value:{value:M,name:R}}),E(Le))};delete G["aria-invalid"];let Ye,In;const $n=[];let En=!1;(id({value:M})||m)&&(q?Ye=q(M):En=!0);const nn=yt.map(Le=>{if(!L.isValidElement(Le))return null;let At;if(_){if(!Array.isArray(M))throw new Error(ao(2));At=M.some(fn=>Mw(fn,Le.props.value)),At&&En&&$n.push(Le.props.children)}else At=Mw(M,Le.props.value),At&&En&&(In=Le.props.children);return L.cloneElement(Le,{"aria-selected":At?"true":"false",onClick:st(Le),onKeyUp:fn=>{fn.key===" "&&fn.preventDefault(),Le.props.onKeyUp&&Le.props.onKeyUp(fn)},role:"option",selected:At,value:void 0,"data-value":Le.props.value})});En&&(_?$n.length===0?Ye=null:Ye=$n.reduce((Le,At,fn)=>(Le.push(At),fn<$n.length-1&&Le.push(", "),Le),[]):Ye=In);let Ar=be;!u&&he&&xe&&(Ar=Se.clientWidth);let Kr;typeof P<"u"?Kr=P:Kr=v?null:0;const Tt=j.id||(R?`mui-component-select-${R}`:void 0),cr={...n,variant:U,value:M,open:Fe,error:g},Bn=iB(cr),Yt={...C.PaperProps,...typeof C.slotProps?.paper=="function"?C.slotProps.paper(cr):C.slotProps?.paper},Xn={...C.MenuListProps,...typeof C.slotProps?.list=="function"?C.slotProps.list(cr):C.slotProps?.list},Fn=Qg();return le.jsxs(L.Fragment,{children:[le.jsx(nB,{as:"div",ref:Me,tabIndex:Kr,role:"combobox","aria-controls":Fe?Fn:void 0,"aria-disabled":v?"true":void 0,"aria-expanded":Fe?"true":"false","aria-haspopup":"listbox","aria-label":a,"aria-labelledby":[S,Tt].filter(Boolean).join(" ")||void 0,"aria-describedby":r,"aria-required":V?"true":void 0,"aria-invalid":g?"true":void 0,onKeyDown:Pe,onMouseDown:v||A?null:vt,onBlur:cn,onFocus:N,...j,ownerState:cr,className:Qe(j.className,Bn.select,c),id:Tt,children:oB(Ye)?Nw||(Nw=le.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):Ye}),le.jsx(aB,{"aria-invalid":g,value:Array.isArray(M)?M.join(","):M,name:R,ref:pe,"aria-hidden":!0,onChange:jt,tabIndex:-1,disabled:v,className:Bn.nativeInput,autoFocus:o,required:V,...G,ownerState:cr}),le.jsx(rB,{as:b,className:Bn.icon,ownerState:cr}),le.jsx(VI,{id:`menu-${R||""}`,anchorEl:Se,open:Fe,onClose:ut,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...C,slotProps:{...C.slotProps,list:{"aria-labelledby":S,role:"listbox","aria-multiselectable":_?"true":void 0,disableListWrap:!0,id:Fn,...Xn},paper:{...Yt,style:{minWidth:Ar,...Yt!=null?Yt.style:null}}},children:nn})]})}),uB=t=>{const{classes:n}=t,r=Ft({root:["root"]},bE,n);return{...n,...r}},cy={name:"MuiSelect",slot:"Root",shouldForwardProp:t=>aa(t)&&t!=="variant"},lB=Ue(sy,cy)(""),cB=Ue(ly,cy)(""),fB=Ue(iy,cy)(""),xE=L.forwardRef(function(n,e){const r=zt({name:"MuiSelect",props:n}),{autoWidth:a=!1,children:o,classes:u={},className:l,defaultOpen:c=!1,displayEmpty:d=!1,IconComponent:h=f4,id:v,input:m,inputProps:g,label:b,labelId:x,MenuProps:S,multiple:C=!1,native:_=!1,onClose:R,onOpen:E,open:T,renderValue:k,SelectDisplayProps:N,variant:O="outlined",...I}=r,B=_?KI:sB,H=lu(),A=uu({props:r,muiFormControl:H,states:["variant","error"]}),q=A.variant||O,V={...r,variant:q,classes:u},j=uB(V),{root:P,...$}=j,Q=m||{standard:le.jsx(lB,{ownerState:V}),outlined:le.jsx(cB,{label:b,ownerState:V}),filled:le.jsx(fB,{ownerState:V})}[q],U=sr(e,Xl(Q));return le.jsx(L.Fragment,{children:L.cloneElement(Q,{inputComponent:B,inputProps:{children:o,error:A.error,IconComponent:h,variant:q,type:void 0,multiple:C,..._?{id:v}:{autoWidth:a,defaultOpen:c,displayEmpty:d,labelId:x,MenuProps:S,onClose:R,onOpen:E,open:T,renderValue:k,SelectDisplayProps:{id:v,...N}},...g,classes:g?Gn($,g.classes):$,...m?m.props.inputProps:{}},...(C&&_||d)&&q==="outlined"?{notched:!0}:{},ref:U,className:Qe(Q.props.className,l,j.root),...!m&&{variant:q},...I})})});xE.muiName="Select";function dB(t){return Bt("MuiTextField",t)}Nt("MuiTextField",["root"]);const hB={standard:sy,filled:iy,outlined:ly},pB=t=>{const{classes:n}=t;return Ft({root:["root"]},dB,n)},vB=Ue(uI,{name:"MuiTextField",slot:"Root"})({}),mB=L.forwardRef(function(n,e){const r=zt({props:n,name:"MuiTextField"}),{autoComplete:a,autoFocus:o=!1,children:u,className:l,color:c="primary",defaultValue:d,disabled:h=!1,error:v=!1,FormHelperTextProps:m,fullWidth:g=!1,helperText:b,id:x,InputLabelProps:S,inputProps:C,InputProps:_,inputRef:R,label:E,maxRows:T,minRows:k,multiline:N=!1,name:O,onBlur:I,onChange:B,onFocus:H,placeholder:A,required:q=!1,rows:V,select:j=!1,SelectProps:P,slots:$={},slotProps:Q={},type:U,value:G,variant:M="outlined",...K}=r,Z={...r,autoFocus:o,color:c,disabled:h,error:v,fullWidth:g,multiline:N,required:q,select:j,variant:M},oe=pB(Z),pe=Qg(x),ge=b&&pe?`${pe}-helper-text`:void 0,xe=E&&pe?`${pe}-label`:void 0,Ce=hB[M],he={slots:$,slotProps:{input:_,inputLabel:S,htmlInput:C,formHelperText:m,select:P,...Q}},be={},we=he.slotProps.inputLabel;M==="outlined"&&(we&&typeof we.shrink<"u"&&(be.notched=we.shrink),be.label=E),j&&((!P||!P.native)&&(be.id=void 0),be["aria-describedby"]=void 0);const[Re,Me]=Un("root",{elementType:vB,shouldForwardComponentProp:!0,externalForwardedProps:{...he,...K},ownerState:Z,className:Qe(oe.root,l),ref:e,additionalProps:{disabled:h,error:v,fullWidth:g,required:q,color:c,variant:M}}),[Se,Fe]=Un("input",{elementType:Ce,externalForwardedProps:he,additionalProps:be,ownerState:Z}),[He,vt]=Un("inputLabel",{elementType:RI,externalForwardedProps:he,ownerState:Z}),[ut,yt]=Un("htmlInput",{elementType:"input",externalForwardedProps:he,ownerState:Z}),[jt,st]=Un("formHelperText",{elementType:dI,externalForwardedProps:he,ownerState:Z}),[Pe,cn]=Un("select",{elementType:xE,externalForwardedProps:he,ownerState:Z}),Ye=le.jsx(Se,{"aria-describedby":ge,autoComplete:a,autoFocus:o,defaultValue:d,fullWidth:g,multiline:N,name:O,rows:V,maxRows:T,minRows:k,type:U,value:G,id:pe,inputRef:R,onBlur:I,onChange:B,onFocus:H,placeholder:A,inputProps:yt,slots:{input:$.htmlInput?ut:void 0},...Fe});return le.jsxs(Re,{...Me,children:[E!=null&&E!==""&&le.jsx(He,{htmlFor:pe,id:xe,...vt,children:E}),j?le.jsx(Pe,{"aria-describedby":ge,id:pe,labelId:xe,value:G,input:Ye,...cn,children:u}):Ye,b&&le.jsx(jt,{id:ge,...st,children:b})]})});var Kv={exports:{}},Ow;function gB(){return Ow||(Ow=1,(function(t){var n=(function(e){var r=Object.prototype,a=r.hasOwnProperty,o=Object.defineProperty||function(U,G,M){U[G]=M.value},u,l=typeof Symbol=="function"?Symbol:{},c=l.iterator||"@@iterator",d=l.asyncIterator||"@@asyncIterator",h=l.toStringTag||"@@toStringTag";function v(U,G,M){return Object.defineProperty(U,G,{value:M,enumerable:!0,configurable:!0,writable:!0}),U[G]}try{v({},"")}catch{v=function(G,M,K){return G[M]=K}}function m(U,G,M,K){var Z=G&&G.prototype instanceof R?G:R,oe=Object.create(Z.prototype),pe=new P(K||[]);return o(oe,"_invoke",{value:A(U,M,pe)}),oe}e.wrap=m;function g(U,G,M){try{return{type:"normal",arg:U.call(G,M)}}catch(K){return{type:"throw",arg:K}}}var b="suspendedStart",x="suspendedYield",S="executing",C="completed",_={};function R(){}function E(){}function T(){}var k={};v(k,c,function(){return this});var N=Object.getPrototypeOf,O=N&&N(N($([])));O&&O!==r&&a.call(O,c)&&(k=O);var I=T.prototype=R.prototype=Object.create(k);E.prototype=T,o(I,"constructor",{value:T,configurable:!0}),o(T,"constructor",{value:E,configurable:!0}),E.displayName=v(T,h,"GeneratorFunction");function B(U){["next","throw","return"].forEach(function(G){v(U,G,function(M){return this._invoke(G,M)})})}e.isGeneratorFunction=function(U){var G=typeof U=="function"&&U.constructor;return G?G===E||(G.displayName||G.name)==="GeneratorFunction":!1},e.mark=function(U){return Object.setPrototypeOf?Object.setPrototypeOf(U,T):(U.__proto__=T,v(U,h,"GeneratorFunction")),U.prototype=Object.create(I),U},e.awrap=function(U){return{__await:U}};function H(U,G){function M(oe,pe,ge,xe){var Ce=g(U[oe],U,pe);if(Ce.type==="throw")xe(Ce.arg);else{var he=Ce.arg,be=he.value;return be&&typeof be=="object"&&a.call(be,"__await")?G.resolve(be.__await).then(function(we){M("next",we,ge,xe)},function(we){M("throw",we,ge,xe)}):G.resolve(be).then(function(we){he.value=we,ge(he)},function(we){return M("throw",we,ge,xe)})}}var K;function Z(oe,pe){function ge(){return new G(function(xe,Ce){M(oe,pe,xe,Ce)})}return K=K?K.then(ge,ge):ge()}o(this,"_invoke",{value:Z})}B(H.prototype),v(H.prototype,d,function(){return this}),e.AsyncIterator=H,e.async=function(U,G,M,K,Z){Z===void 0&&(Z=Promise);var oe=new H(m(U,G,M,K),Z);return e.isGeneratorFunction(G)?oe:oe.next().then(function(pe){return pe.done?pe.value:oe.next()})};function A(U,G,M){var K=b;return function(oe,pe){if(K===S)throw new Error("Generator is already running");if(K===C){if(oe==="throw")throw pe;return Q()}for(M.method=oe,M.arg=pe;;){var ge=M.delegate;if(ge){var xe=q(ge,M);if(xe){if(xe===_)continue;return xe}}if(M.method==="next")M.sent=M._sent=M.arg;else if(M.method==="throw"){if(K===b)throw K=C,M.arg;M.dispatchException(M.arg)}else M.method==="return"&&M.abrupt("return",M.arg);K=S;var Ce=g(U,G,M);if(Ce.type==="normal"){if(K=M.done?C:x,Ce.arg===_)continue;return{value:Ce.arg,done:M.done}}else Ce.type==="throw"&&(K=C,M.method="throw",M.arg=Ce.arg)}}}function q(U,G){var M=G.method,K=U.iterator[M];if(K===u)return G.delegate=null,M==="throw"&&U.iterator.return&&(G.method="return",G.arg=u,q(U,G),G.method==="throw")||M!=="return"&&(G.method="throw",G.arg=new TypeError("The iterator does not provide a '"+M+"' method")),_;var Z=g(K,U.iterator,G.arg);if(Z.type==="throw")return G.method="throw",G.arg=Z.arg,G.delegate=null,_;var oe=Z.arg;if(!oe)return G.method="throw",G.arg=new TypeError("iterator result is not an object"),G.delegate=null,_;if(oe.done)G[U.resultName]=oe.value,G.next=U.nextLoc,G.method!=="return"&&(G.method="next",G.arg=u);else return oe;return G.delegate=null,_}B(I),v(I,h,"Generator"),v(I,c,function(){return this}),v(I,"toString",function(){return"[object Generator]"});function V(U){var G={tryLoc:U[0]};1 in U&&(G.catchLoc=U[1]),2 in U&&(G.finallyLoc=U[2],G.afterLoc=U[3]),this.tryEntries.push(G)}function j(U){var G=U.completion||{};G.type="normal",delete G.arg,U.completion=G}function P(U){this.tryEntries=[{tryLoc:"root"}],U.forEach(V,this),this.reset(!0)}e.keys=function(U){var G=Object(U),M=[];for(var K in G)M.push(K);return M.reverse(),function Z(){for(;M.length;){var oe=M.pop();if(oe in G)return Z.value=oe,Z.done=!1,Z}return Z.done=!0,Z}};function $(U){if(U){var G=U[c];if(G)return G.call(U);if(typeof U.next=="function")return U;if(!isNaN(U.length)){var M=-1,K=function Z(){for(;++M<U.length;)if(a.call(U,M))return Z.value=U[M],Z.done=!1,Z;return Z.value=u,Z.done=!0,Z};return K.next=K}}return{next:Q}}e.values=$;function Q(){return{value:u,done:!0}}return P.prototype={constructor:P,reset:function(U){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(j),!U)for(var G in this)G.charAt(0)==="t"&&a.call(this,G)&&!isNaN(+G.slice(1))&&(this[G]=u)},stop:function(){this.done=!0;var U=this.tryEntries[0],G=U.completion;if(G.type==="throw")throw G.arg;return this.rval},dispatchException:function(U){if(this.done)throw U;var G=this;function M(xe,Ce){return oe.type="throw",oe.arg=U,G.next=xe,Ce&&(G.method="next",G.arg=u),!!Ce}for(var K=this.tryEntries.length-1;K>=0;--K){var Z=this.tryEntries[K],oe=Z.completion;if(Z.tryLoc==="root")return M("end");if(Z.tryLoc<=this.prev){var pe=a.call(Z,"catchLoc"),ge=a.call(Z,"finallyLoc");if(pe&&ge){if(this.prev<Z.catchLoc)return M(Z.catchLoc,!0);if(this.prev<Z.finallyLoc)return M(Z.finallyLoc)}else if(pe){if(this.prev<Z.catchLoc)return M(Z.catchLoc,!0)}else if(ge){if(this.prev<Z.finallyLoc)return M(Z.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(U,G){for(var M=this.tryEntries.length-1;M>=0;--M){var K=this.tryEntries[M];if(K.tryLoc<=this.prev&&a.call(K,"finallyLoc")&&this.prev<K.finallyLoc){var Z=K;break}}Z&&(U==="break"||U==="continue")&&Z.tryLoc<=G&&G<=Z.finallyLoc&&(Z=null);var oe=Z?Z.completion:{};return oe.type=U,oe.arg=G,Z?(this.method="next",this.next=Z.finallyLoc,_):this.complete(oe)},complete:function(U,G){if(U.type==="throw")throw U.arg;return U.type==="break"||U.type==="continue"?this.next=U.arg:U.type==="return"?(this.rval=this.arg=U.arg,this.method="return",this.next="end"):U.type==="normal"&&G&&(this.next=G),_},finish:function(U){for(var G=this.tryEntries.length-1;G>=0;--G){var M=this.tryEntries[G];if(M.finallyLoc===U)return this.complete(M.completion,M.afterLoc),j(M),_}},catch:function(U){for(var G=this.tryEntries.length-1;G>=0;--G){var M=this.tryEntries[G];if(M.tryLoc===U){var K=M.completion;if(K.type==="throw"){var Z=K.arg;j(M)}return Z}}throw new Error("illegal catch attempt")},delegateYield:function(U,G,M){return this.delegate={iterator:$(U),resultName:G,nextLoc:M},this.method==="next"&&(this.arg=u),_}},e})(t.exports);try{regeneratorRuntime=n}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}})(Kv)),Kv.exports}var Xv,Iw;function fy(){return Iw||(Iw=1,Xv=(t,n)=>`${t}-${n}-${Math.random().toString(16).slice(3,8)}`),Xv}var Yv,Bw;function wE(){if(Bw)return Yv;Bw=1;const t=fy();let n=0;return Yv=({id:e,action:r,payload:a={}})=>{let o=e;return typeof o>"u"&&(o=t("Job",n),n+=1),{id:o,action:r,payload:a}},Yv}var fl={},Fw;function dy(){if(Fw)return fl;Fw=1;let t=!1;return fl.logging=t,fl.setLogging=n=>{t=n},fl.log=(...n)=>t?console.log.apply(this,n):null,fl}var Qv,Pw;function yB(){if(Pw)return Qv;Pw=1;const t=wE(),{log:n}=dy(),e=fy();let r=0;return Qv=()=>{const a=e("Scheduler",r),o={},u={};let l=[];r+=1;const c=()=>l.length,d=()=>Object.keys(o).length,h=()=>{if(l.length!==0){const x=Object.keys(o);for(let S=0;S<x.length;S+=1)if(typeof u[x[S]]>"u"){l[0](o[x[S]]);break}}},v=(x,S)=>new Promise((C,_)=>{const R=t({action:x,payload:S});l.push(async E=>{l.shift(),u[E.id]=R;try{C(await E[x].apply(this,[...S,R.id]))}catch(T){_(T)}finally{delete u[E.id],h()}}),n(`[${a}]: Add ${R.id} to JobQueue`),n(`[${a}]: JobQueue length=${l.length}`),h()});return{addWorker:x=>(o[x.id]=x,n(`[${a}]: Add ${x.id}`),n(`[${a}]: Number of workers=${d()}`),h(),x.id),addJob:async(x,...S)=>{if(d()===0)throw Error(`[${a}]: You need to have at least one worker before adding jobs`);return v(x,S)},terminate:async()=>{Object.keys(o).forEach(async x=>{await o[x].terminate()}),l=[]},getQueueLen:c,getNumWorkers:d}},Qv}function bB(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Zv,Lw;function xB(){return Lw||(Lw=1,Zv=t=>{const n={};return typeof WorkerGlobalScope<"u"?n.type="webworker":typeof document=="object"?n.type="browser":typeof process=="object"&&typeof bB=="function"&&(n.type="node"),typeof t>"u"?n:n[t]}),Zv}var Jv,zw;function wB(){if(zw)return Jv;zw=1;const n=xB()("type")==="browser"?e=>new URL(e,window.location.href).href:e=>e;return Jv=e=>{const r={...e};return["corePath","workerPath","langPath"].forEach(a=>{e[a]&&(r[a]=n(r[a]))}),r},Jv}var em,Uw;function SE(){return Uw||(Uw=1,em={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),em}const SB="7.0.0",CB={version:SB};var tm,Ww;function EB(){return Ww||(Ww=1,tm={workerBlobURL:!0,logger:()=>{}}),tm}var nm,Hw;function RB(){if(Hw)return nm;Hw=1;const t=CB.version;return nm={...EB(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${t}/dist/worker.min.js`},nm}var rm,Vw;function _B(){return Vw||(Vw=1,rm=({workerPath:t,workerBlobURL:n})=>{let e;if(Blob&&URL&&n){const r=new Blob([`importScripts("${t}");`],{type:"application/javascript"});e=new Worker(URL.createObjectURL(r))}else e=new Worker(t);return e}),rm}var am,jw;function TB(){return jw||(jw=1,am=t=>{t.terminate()}),am}var om,Gw;function AB(){return Gw||(Gw=1,om=(t,n)=>{t.onmessage=({data:e})=>{n(e)}}),om}var im,qw;function DB(){return qw||(qw=1,im=async(t,n)=>{t.postMessage(n)}),im}var sm,$w;function kB(){if($w)return sm;$w=1;const t=e=>new Promise((r,a)=>{const o=new FileReader;o.onload=()=>{r(o.result)},o.onerror=({target:{error:{code:u}}})=>{a(Error(`File could not be read! Code=${u}`))},o.readAsArrayBuffer(e)}),n=async e=>{let r=e;if(typeof e>"u")return"undefined";if(typeof e=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e)?r=atob(e.split(",")[1]).split("").map(a=>a.charCodeAt(0)):r=await(await fetch(e)).arrayBuffer();else if(typeof HTMLElement<"u"&&e instanceof HTMLElement)e.tagName==="IMG"&&(r=await n(e.src)),e.tagName==="VIDEO"&&(r=await n(e.poster)),e.tagName==="CANVAS"&&await new Promise(a=>{e.toBlob(async o=>{r=await t(o),a()})});else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas){const a=await e.convertToBlob();r=await t(a)}else(e instanceof File||e instanceof Blob)&&(r=await t(e));return new Uint8Array(r)};return sm=n,sm}var um,Kw;function NB(){if(Kw)return um;Kw=1;const t=RB(),n=_B(),e=TB(),r=AB(),a=DB(),o=kB();return um={defaultOptions:t,spawnWorker:n,terminateWorker:e,onMessage:r,send:a,loadImage:o},um}var lm,Xw;function CE(){if(Xw)return lm;Xw=1;const t=wB(),n=wE(),{log:e}=dy(),r=fy(),a=SE(),{defaultOptions:o,spawnWorker:u,terminateWorker:l,onMessage:c,loadImage:d,send:h}=NB();let v=0;return lm=async(m="eng",g=a.LSTM_ONLY,b={},x={})=>{const S=r("Worker",v),{logger:C,errorHandler:_,...R}=t({...o,...b}),E={},T=typeof m=="string"?m.split("+"):m;let k=g,N=x;const O=[a.DEFAULT,a.LSTM_ONLY].includes(g)&&!R.legacyCore;let I,B;const H=new Promise((he,be)=>{B=he,I=be}),A=he=>{I(he.message)};let q=u(R);q.onerror=A,v+=1;const V=({id:he,action:be,payload:we})=>new Promise((Re,Me)=>{e(`[${S}]: Start ${he}, action=${be}`);const Se=`${be}-${he}`;E[Se]={resolve:Re,reject:Me},h(q,{workerId:S,jobId:he,action:be,payload:we})}),j=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),P=he=>V(n({id:he,action:"load",payload:{options:{lstmOnly:O,corePath:R.corePath,logging:R.logging}}})),$=(he,be,we)=>V(n({id:we,action:"FS",payload:{method:"writeFile",args:[he,be]}})),Q=(he,be)=>V(n({id:be,action:"FS",payload:{method:"readFile",args:[he,{encoding:"utf8"}]}})),U=(he,be)=>V(n({id:be,action:"FS",payload:{method:"unlink",args:[he]}})),G=(he,be,we)=>V(n({id:we,action:"FS",payload:{method:he,args:be}})),M=(he,be)=>V(n({id:be,action:"loadLanguage",payload:{langs:he,options:{langPath:R.langPath,dataPath:R.dataPath,cachePath:R.cachePath,cacheMethod:R.cacheMethod,gzip:R.gzip,lstmOnly:[a.DEFAULT,a.LSTM_ONLY].includes(k)&&!R.legacyLang}}})),K=(he,be,we,Re)=>V(n({id:Re,action:"initialize",payload:{langs:he,oem:be,config:we}})),Z=(he="eng",be,we,Re)=>{if(O&&[a.TESSERACT_ONLY,a.TESSERACT_LSTM_COMBINED].includes(be))throw Error("Legacy model requested but code missing.");const Me=be||k;k=Me;const Se=we||N;N=Se;const He=(typeof he=="string"?he.split("+"):he).filter(vt=>!T.includes(vt));return T.push(...He),He.length>0?M(He,Re).then(()=>K(he,Me,Se,Re)):K(he,Me,Se,Re)},oe=(he={},be)=>V(n({id:be,action:"setParameters",payload:{params:he}})),pe=async(he,be={},we={text:!0},Re)=>V(n({id:Re,action:"recognize",payload:{image:await d(he),options:be,output:we}})),ge=async(he,be)=>{if(O)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return V(n({id:be,action:"detect",payload:{image:await d(he)}}))},xe=async()=>(q!==null&&(l(q),q=null),Promise.resolve());c(q,({workerId:he,jobId:be,status:we,action:Re,data:Me})=>{const Se=`${Re}-${be}`;if(we==="resolve")e(`[${he}]: Complete ${be}`),E[Se].resolve({jobId:be,data:Me}),delete E[Se];else if(we==="reject")if(E[Se].reject(Me),delete E[Se],Re==="load"&&I(Me),_)_(Me);else throw Error(Me);else we==="progress"&&C({...Me,userJobId:be})});const Ce={id:S,worker:q,load:j,writeText:$,readText:Q,removeFile:U,FS:G,reinitialize:Z,setParameters:oe,recognize:pe,detect:ge,terminate:xe};return P().then(()=>M(m)).then(()=>K(m,g,x)).then(()=>B(Ce)).catch(()=>{}),H},lm}var cm,Yw;function MB(){if(Yw)return cm;Yw=1;const t=CE();return cm={recognize:async(r,a,o)=>{const u=await t(a,1,o);return u.recognize(r).finally(async()=>{await u.terminate()})},detect:async(r,a)=>{const o=await t("osd",0,a);return o.detect(r).finally(async()=>{await o.terminate()})}},cm}var fm,Qw;function OB(){return Qw||(Qw=1,fm={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),fm}var dm,Zw;function IB(){return Zw||(Zw=1,dm={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),dm}var hm,Jw;function BB(){if(Jw)return hm;Jw=1,gB();const t=yB(),n=CE(),e=MB(),r=OB(),a=SE(),o=IB(),{setLogging:u}=dy();return hm={languages:r,OEM:a,PSM:o,createScheduler:t,createWorker:n,setLogging:u,...e},hm}var FB=BB();const PB=Dg(FB);function LB(){const[t,n]=L.useState(null),[e,r]=L.useState(""),[a,o]=L.useState(!1),u=c=>{const d=c.target.files[0];d&&(n(URL.createObjectURL(d)),r(""))},l=()=>{t&&(o(!0),PB.recognize(t,"eng").then(({data:c})=>{const d=c.text.replace(/\s+/g," ").trim(),h=/[a-zA-Z0-9]/.test(d);if(o(!1),!h){r(""),alert("No readable text detected in this image");return}r(d)}).catch(()=>{o(!1),alert("Text recognition failed")}))};return le.jsx(jv,{sx:{minHeight:"85vh",bgcolor:"#f4f6f8",display:"flex",justifyContent:"center",alignItems:"center"},children:le.jsx(N4,{sx:{width:500,borderRadius:3,boxShadow:5},children:le.jsxs(B4,{children:[le.jsx(pw,{variant:"h5",fontWeight:"bold",children:"Image Text Recognition"}),le.jsxs(xw,{variant:"contained",component:"label",fullWidth:!0,sx:{mb:2},children:["Upload Image",le.jsx("input",{hidden:!0,type:"file",accept:"image/*",onChange:u})]}),t&&le.jsx(jv,{textAlign:"center",mb:2,children:le.jsx("img",{src:t,alt:"preview",style:{maxWidth:"100%",borderRadius:10}})}),t&&le.jsx(xw,{variant:"outlined",fullWidth:!0,onClick:l,disabled:a,sx:{mb:2},children:"Recognize Text"}),a&&le.jsx(jv,{display:"flex",justifyContent:"center",my:2,children:le.jsx(dE,{})}),e&&le.jsxs(le.Fragment,{children:[le.jsx(pw,{fontWeight:"bold",mb:1,children:"Recognized Text"}),le.jsx(mB,{multiline:!0,rows:8,fullWidth:!0,value:e,InputProps:{readOnly:!0}})]})]})})})}var EE=function(t,n){return(EE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var a in r)r.hasOwnProperty(a)&&(e[a]=r[a])})(t,n)};function oa(t,n){function e(){this.constructor=t}EE(t,n),t.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}function Ae(t,n,e,r){return new(e||(e=Promise))((function(a,o){function u(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?a(d.value):new e((function(h){h(d.value)})).then(u,l)}c((r=r.apply(t,[])).next())}))}function De(t,n){var e,r,a,o,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(d){return(function(h){if(e)throw new TypeError("Generator is already executing.");for(;u;)try{if(e=1,r&&(a=2&h[0]?r.return:h[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,h[1])).done)return a;switch(r=0,a&&(h=[2&h[0],a.value]),h[0]){case 0:case 1:a=h;break;case 4:return u.label++,{value:h[1],done:!1};case 5:u.label++,r=h[1],h=[0];continue;case 7:h=u.ops.pop(),u.trys.pop();continue;default:if(!(a=(a=u.trys).length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){u=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){u.label=h[1];break}if(h[0]===6&&u.label<a[1]){u.label=a[1],a=h;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(h);break}a[2]&&u.ops.pop(),u.trys.pop();continue}h=n.call(t,u)}catch(v){h=[6,v],r=0}finally{e=a=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}})([c,d])}}}var zB=(function(){function t(n){this.global=n,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return t.prototype.setPlatform=function(n,e){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+e+"."),this.platformName=n,this.platform=e},t.prototype.registerFlag=function(n,e,r){if(this.flagRegistry[n]={evaluationFn:e,setHook:r},this.urlFlags[n]!=null){var a=this.urlFlags[n];console.warn("Setting feature override from URL "+n+": "+a+"."),this.set(n,a)}},t.prototype.get=function(n){return n in this.flags?this.flags[n]:(this.flags[n]=this.evaluateFlag(n),this.flags[n])},t.prototype.getNumber=function(n){return this.get(n)},t.prototype.getBool=function(n){return this.get(n)},t.prototype.getFlags=function(){return this.flags},Object.defineProperty(t.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),t.prototype.set=function(n,e){if(this.flagRegistry[n]==null)throw new Error("Cannot set flag "+n+" as it has not been registered.");this.flags[n]=e,this.flagRegistry[n].setHook!=null&&this.flagRegistry[n].setHook(e)},t.prototype.evaluateFlag=function(n){if(this.flagRegistry[n]==null)throw new Error("Cannot evaluate flag '"+n+"': no evaluation function found.");return this.flagRegistry[n].evaluationFn()},t.prototype.setFlags=function(n){this.flags=Object.assign({},n)},t.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},t.prototype.populateURLFlags=function(){var n=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var e,r,a=(e=this.global.location.search,r={},e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(o){for(var u=[],l=1;l<arguments.length;l++)u[l-1]=arguments[l];return UB(r,u[0],u[1]),u.join("=")})),r);"tfjsflags"in a&&a.tfjsflags.split(",").forEach((function(o){var u=o.split(":"),l=u[0],c=u[1];n.urlFlags[l]=(function(d,h){if((h=h.toLowerCase())==="true"||h==="false")return h==="true";if(""+ +h===h)return+h;throw new Error("Could not parse value flag value "+h+" for flag "+d+".")})(l,c)}))}},t})();function UB(t,n,e){t[decodeURIComponent(n)]=decodeURIComponent(e||"")}function de(){return RE}var RE=null,sd=new Map,ig=new Map;function _E(t,n){var e=AE(t,n);return sd.get(e)}function WB(t){return ig.get(t)}function eS(t){for(var n=sd.entries(),e=[];;){var r=n.next(),a=r.done,o=r.value;if(a)break;var u=o[0],l=o[1];u.split("_")[0]===t&&e.push(l)}return e}function TE(t){var n=t.kernelName,e=t.backendName,r=AE(n,e);if(sd.has(r))throw new Error("The kernel '"+n+"' for backend '"+e+"' is already registered");sd.set(r,t)}function HB(t){var n=t.kernelName;ig.has(n)&&console.warn("Overriding the gradient for '"+n+"'"),ig.set(n,t)}function AE(t,n){return n+"_"+t}function sg(t,n,e){return Math.max(t,Math.min(n,e))}function DE(t){return t%2==0?t:t+1}function VB(t){for(var n=0,e=0;e<t.length;e++)n+=t[e];return n}function W(t,n){if(!t)throw new Error(typeof n=="string"?n:n())}function gt(t,n,e){e===void 0&&(e=""),W(Sn(t,n),(function(){return e+" Shapes "+t+" and "+n+" must match"}))}function cu(t){W(t!=null,(function(){return"The input to the tensor constructor must be a non-null value."}))}function nu(t,n,e){if(n===void 0&&(n=[]),e===void 0&&(e=!1),n==null&&(n=[]),Array.isArray(t)||Ea(t)&&!e)for(var r=0;r<t.length;++r)nu(t[r],n,e);else n.push(t);return n}function Ne(t){if(t.length===0)return 1;for(var n=t[0],e=1;e<t.length;e++)n*=t[e];return n}function Sn(t,n){if(t===n)return!0;if(t==null||n==null||t.length!==n.length)return!1;for(var e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}function Jt(t){return t%1==0}function jB(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var n=Math.exp(2*t);return(n-1)/(n+1)}function ug(t){var n=Math.ceil(Math.sqrt(t));return[n,Math.ceil(t/n)]}function $s(t,n){return n<=t.length?t:t+" ".repeat(n-t.length)}function tS(t,n,e){return n===void 0&&(n=function(r){return 0}),new Promise((function(r,a){var o=0,u=function(){if(t())r();else{o++;var l=n(o);e!=null&&o>=e?a():setTimeout(u,l)}};u()}))}function GB(t,n){for(var e=1,r=-1,a=0;a<t.length;++a)if(t[a]>=0)e*=t[a];else if(t[a]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+a);r=a}else if(t[a]<0)throw Error("Shapes can not be < 0. Found "+t[a]+" at dim "+a);if(r===-1){if(n>0&&n!==e)throw Error("Size("+n+") must match the product of shape "+t);return t}if(e===0)throw Error("Cannot infer the missing size in ["+t+"] when there are 0 elements");if(n%e!=0)throw Error("The implicit shape can't be a fractional number. Got "+n+" / "+e);var o=t.slice();return o[r]=n/e,o}function yn(t,n){var e=n.length;return W((t=t==null?n.map((function(r,a){return a})):[].concat(t)).every((function(r){return r>=-e&&r<e})),(function(){return"All values in axis param must be in range [-"+e+", "+e+") but got axis "+t})),W(t.every((function(r){return Jt(r)})),(function(){return"All values in axis param must be integers but got axis "+t})),t.map((function(r){return r<0?e+r:r}))}function Ti(t,n){for(var e=[],r=[],a=n!=null&&Array.isArray(n)&&n.length===0,o=n==null||a?null:yn(n,t).sort(),u=0,l=0;l<t.length;++l){if(o!=null){if(o[u]===l&&t[l]!==1)throw new Error("Can't squeeze axis "+l+" since its dim '"+t[l]+"' is not 1");(o[u]==null||o[u]>l)&&t[l]===1&&(e.push(t[l]),r.push(l)),o[u]<=l&&u++}t[l]!==1&&(e.push(t[l]),r.push(l))}return{newShape:e,keptDims:r}}function Nl(t,n){var e=null;if(t==null||t==="float32")e=new Float32Array(n);else if(t==="int32")e=new Int32Array(n);else{if(t!=="bool")throw new Error("Unknown data type "+t);e=new Uint8Array(n)}return e}function ud(t,n){var e=null;if(t==null||t==="float32")e=new Float32Array(n);else if(t==="int32")e=new Int32Array(n);else if(t==="bool")e=new Uint8Array(n);else{if(t!=="string")throw new Error("Unknown data type "+t);e=new Array(n)}return e}function qB(t,n){for(var e=0;e<t.length;e++){var r=t[e];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+n+" being uploaded contains "+r+".")}}function $B(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function KB(t,n){return n!=="complex64"&&(n!=="float32"||t==="complex64")&&(n!=="int32"||t==="float32"||t==="complex64")&&(n!=="bool"||t!=="bool")}function Ea(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function kE(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error("Unknown dtype "+t)}function XB(t){if(t==null)return 0;var n=0;return t.forEach((function(e){return n+=e.length})),n}function hy(t){return typeof t=="string"||t instanceof String}function YB(t){return typeof t=="boolean"}function QB(t){return typeof t=="number"}function Yl(t){return Array.isArray(t)?Yl(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":QB(t)?"float32":hy(t)?"string":YB(t)?"bool":"float32"}function lg(t){return!!(t&&t.constructor&&t.call&&t.apply)}function cg(t,n){for(var e=n;e<t;++e)if(t%e==0)return e;return t}function Ra(t){var n=t.length;if(n<2)return[];var e=new Array(n-1);e[n-2]=t[n-1];for(var r=n-3;r>=0;--r)e[r]=e[r+1]*t[r+1];return e}function NE(t,n,e){if(n==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=nu(t)),e&&qB(t,n),(function(o,u){return o instanceof Float32Array&&u==="float32"||o instanceof Int32Array&&u==="int32"||o instanceof Uint8Array&&u==="bool"})(t,n))return t;if(n==null||n==="float32"||n==="complex64")return new Float32Array(t);if(n==="int32")return new Int32Array(t);if(n==="bool"){for(var r=new Uint8Array(t.length),a=0;a<r.length;++a)Math.round(t[a])!==0&&(r[a]=1);return r}throw new Error("Unknown data type "+n)}function nS(t,n){if(t.length===0)return n[0];var e=t.reduce((function(r,a){return r*a}));if(e===0)return[];if(e!==n.length)throw new Error("["+t+"] does not match the input size.");return(function r(a,o,u){var l=new Array;if(o.length===1)for(var c=o[0],d=0;d<c;d++)l[d]=u[a+d];else{c=o[0];var h=o.slice(1),v=h.reduce((function(m,g){return m*g}));for(d=0;d<c;d++)l[d]=r(a+d*v,h,u)}return l})(0,t,n)}function ME(t,n){for(var e=Ql(t,n),r=0;r<e.length;r++)e[r]=1;return e}function Ql(t,n){if(n==null||n==="float32"||n==="complex64")return new Float32Array(t);if(n==="int32")return new Int32Array(t);if(n==="bool")return new Uint8Array(t);throw new Error("Unknown data type "+n)}function ga(){return de().platform.now()}function OE(t){t.forEach((function(n){W(Number.isInteger(n)&&n>=0,(function(){return"Tensor must have a shape comprised of positive integers but got shape ["+t+"]."}))}))}function ZB(t,n){return n===void 0&&(n="utf-8"),n=n||"utf-8",de().platform.encode(t,n)}function ld(t,n){return n===void 0&&(n="utf-8"),n=n||"utf-8",de().platform.decode(t,n)}function rS(t,n,e){if(n===0)return 0;if(n===1)return t[0];for(var r=t[t.length-1],a=0;a<t.length-1;++a)r+=e[a]*t[a];return r}function JB(t,n,e){if(n===0)return[];if(n===1)return[t];for(var r=new Array(n),a=0;a<r.length-1;++a)r[a]=Math.floor(t/e[a]),t-=r[a]*e[a];return r[r.length-1]=t,r}var eF=(function(){function t(n,e){this.backendTimer=n,this.logger=e,e==null&&(this.logger=new tF)}return t.prototype.profileKernel=function(n,e,r){var a,o=this,u=this.backendTimer.time((function(){a=r()}));return a.forEach((function(l){l.data().then((function(c){(function(d,h,v){if(h!=="float32")return!1;for(var m=0;m<d.length;m++){var g=d[m];if(isNaN(g)||!isFinite(g))return console.warn("Found "+g+" in the result of '"+v+"'"),!0}})(c,l.dtype,n),u.then((function(d){var h="";d.getExtraProfileInfo!=null&&(h=d.getExtraProfileInfo()),o.logger.logKernelProfile(n,l,c,d.kernelMs,e,h)}))}))})),a},t})(),tF=(function(){function t(){}return t.prototype.logKernelProfile=function(n,e,r,a,o,u){var l=typeof a=="number"?$s(a+"ms",9):a.error,c=$s(n,25),d=e.rank,h=e.size,v=$s(e.shape.toString(),14),m="";for(var g in o){var b=o[g].shape||e.shape,x=b.length;m+=g+": "+x+"D "+(x>0?b:"")+" "}console.log("%c"+c+"	%c"+l+"	%c"+d+"D "+v+"	%c"+h+"	%c"+m+"	%c"+u,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},t})(),aS=20,dl=3,pm=7;function nF(t,n,e,r){var a=Ra(n),o=(function(d,h,v,m){var g=Ne(h),b=m[m.length-1],x=new Array(b).fill(0),S=h.length,C=v==="complex64"?pl(d):d;if(S>1)for(var _=0;_<g/b;_++)for(var R=_*b,E=0;E<b;E++)x[E]=Math.max(x[E],hl(C[R+E],0,v).length);return x})(t,n,e,a),u=n.length,l=(function d(h,v,m,g,b,x){x===void 0&&(x=!0);var S=m==="complex64"?2:1,C=v[0],_=v.length;if(_===0)return m==="complex64"?[hl(pl(h)[0],0,m)]:m==="bool"?[IE(h[0])]:[h[0].toString()];if(_===1){if(C>aS){var R=dl*S,E=Array.from(h.slice(0,R)),T=Array.from(h.slice((C-dl)*S,C*S));return m==="complex64"&&(E=pl(E),T=pl(T)),["["+E.map((function(j,P){return hl(j,b[P],m)})).join(", ")+", ..., "+T.map((function(j,P){return hl(j,b[C-dl+P],m)})).join(", ")+"]"]}return["["+(m==="complex64"?pl(h):Array.from(h)).map((function(j,P){return hl(j,b[P],m)})).join(", ")+"]"]}var k=v.slice(1),N=g.slice(1),O=g[0]*S,I=[];if(C>aS){for(var B=0;B<dl;B++){var H=(A=B*O)+O;I.push.apply(I,d(h.slice(A,H),k,m,N,b,!1))}for(I.push("..."),B=C-dl;B<C;B++)H=(A=B*O)+O,I.push.apply(I,d(h.slice(A,H),k,m,N,b,B===C-1))}else for(B=0;B<C;B++){var A;H=(A=B*O)+O,I.push.apply(I,d(h.slice(A,H),k,m,N,b,B===C-1))}var q=_===2?",":"";for(I[0]="["+I[0]+q,B=1;B<I.length-1;B++)I[B]=" "+I[B]+q;var V=`,
`;for(B=2;B<_;B++)V+=`
`;return I[I.length-1]=" "+I[I.length-1]+"]"+(x?"":V),I})(t,n,e,a,o),c=["Tensor"];return r&&(c.push("  dtype: "+e),c.push("  rank: "+u),c.push("  shape: ["+n+"]"),c.push("  values:")),c.push(l.map((function(d){return"    "+d})).join(`
`)),c.join(`
`)}function hl(t,n,e){return $s(Array.isArray(t)?parseFloat(t[0].toFixed(pm))+" + "+parseFloat(t[1].toFixed(pm))+"j":hy(t)?"'"+t+"'":e==="bool"?IE(t):parseFloat(t.toFixed(pm)).toString(),n)}function IE(t){return t===0?"false":"true"}function pl(t){for(var n=[],e=0;e<t.length;e+=2)n.push([t[e],t[e+1]]);return n}var Ml=(function(){function t(n,e,r){var a=this;if(this.dtype=e,this.shape=n.slice(),this.size=Ne(n),r!=null){var o=r.length;W(o===this.size,(function(){return"Length of values '"+o+"' does not match the size inferred by the shape '"+a.size+"'."}))}if(e==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||ud(e,this.size),this.strides=Ra(n)}return t.prototype.set=function(n){for(var e=this,r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];r.length===0&&(r=[0]),W(r.length===this.rank,(function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+e.rank+")"}));var o=this.locToIndex(r);this.values[o]=n},t.prototype.get=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];n.length===0&&(n=[0]);for(var r=0,a=0,o=n;a<o.length;a++){var u=o[a];if(u<0||u>=this.shape[r]){var l="Requested out of range element at "+n+".   Buffer shape="+this.shape;throw new Error(l)}r++}for(var c=n[n.length-1],d=0;d<n.length-1;++d)c+=this.strides[d]*n[d];return this.values[c]},t.prototype.locToIndex=function(n){if(this.rank===0)return 0;if(this.rank===1)return n[0];for(var e=n[n.length-1],r=0;r<n.length-1;++r)e+=this.strides[r]*n[r];return e},t.prototype.indexToLoc=function(n){if(this.rank===0)return[];if(this.rank===1)return[n];for(var e=new Array(this.shape.length),r=0;r<e.length-1;++r)e[r]=Math.floor(n/this.strides[r]),n-=e[r]*this.strides[r];return e[e.length-1]=n,e},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return ba().makeTensor(this.values,this.shape,this.dtype)},t})(),ba=null,ue=null,BE=null,Ut=(function(){function t(n,e,r,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=n.slice(),this.dtype=e||"float32",this.size=Ne(n),this.strides=Ra(n),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),W(this.size===1,(function(){return"The array must have only 1 element."})),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(n,e){return this.throwIfDisposed(),this.reshape([n,e])},t.prototype.as3D=function(n,e,r){return this.throwIfDisposed(),this.reshape([n,e,r])},t.prototype.as4D=function(n,e,r,a){return this.throwIfDisposed(),this.reshape([n,e,r,a])},t.prototype.as5D=function(n,e,r,a,o){return this.throwIfDisposed(),this.reshape([n,e,r,a,o])},t.prototype.asType=function(n){return this.throwIfDisposed(),ue.cast(this,n)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.buffer=function(){return Ae(this,void 0,void 0,(function(){var n;return De(this,(function(e){switch(e.label){case 0:return[4,this.data()];case 1:return n=e.sent(),[2,ue.buffer(this.shape,this.dtype,n)]}}))}))},t.prototype.bufferSync=function(){return ue.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.array=function(){return Ae(this,void 0,void 0,(function(){var n;return De(this,(function(e){switch(e.label){case 0:return[4,this.data()];case 1:return n=e.sent(),[2,nS(this.shape,n)]}}))}))},t.prototype.arraySync=function(){return nS(this.shape,this.dataSync())},t.prototype.data=function(){return Ae(this,void 0,void 0,(function(){var n,e;return De(this,(function(r){switch(r.label){case 0:return this.throwIfDisposed(),n=ba().read(this.dataId),this.dtype!=="string"?[3,2]:[4,n];case 1:e=r.sent();try{return[2,e.map((function(a){return ld(a)}))]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,n]}}))}))},t.prototype.dataSync=function(){this.throwIfDisposed();var n=ba().readSync(this.dataId);if(this.dtype==="string")try{return n.map((function(e){return ld(e)}))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return n},t.prototype.bytes=function(){return Ae(this,void 0,void 0,(function(){var n;return De(this,(function(e){switch(e.label){case 0:return this.throwIfDisposed(),[4,ba().read(this.dataId)];case 1:return n=e.sent(),this.dtype==="string"?[2,n]:[2,new Uint8Array(n.buffer)]}}))}))},t.prototype.dispose=function(){this.isDisposed||(ba().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.print=function(n){return n===void 0&&(n=!1),ue.print(this,n)},t.prototype.reshape=function(n){return this.throwIfDisposed(),ue.reshape(this,n)},t.prototype.reshapeAs=function(n){return this.throwIfDisposed(),this.reshape(n.shape)},t.prototype.expandDims=function(n){return n===void 0&&(n=0),ue.expandDims(this,n)},t.prototype.cumsum=function(n,e,r){return n===void 0&&(n=0),e===void 0&&(e=!1),r===void 0&&(r=!1),ue.cumsum(this,n,e,r)},t.prototype.squeeze=function(n){return this.throwIfDisposed(),ue.squeeze(this,n)},t.prototype.clone=function(){return this.throwIfDisposed(),ue.clone(this)},t.prototype.oneHot=function(n,e,r){return this.throwIfDisposed(),ue.oneHot(this,n,e,r)},t.prototype.toString=function(n){return n===void 0&&(n=!1),nF(this.dataSync(),this.shape,this.dtype,n)},t.prototype.tile=function(n){return this.throwIfDisposed(),ue.tile(this,n)},t.prototype.gather=function(n,e){return e===void 0&&(e=0),this.throwIfDisposed(),ue.gather(this,n,e)},t.prototype.matMul=function(n,e,r){return e===void 0&&(e=!1),r===void 0&&(r=!1),this.throwIfDisposed(),ue.matMul(this,n,e,r)},t.prototype.dot=function(n){return this.throwIfDisposed(),ue.dot(this,n)},t.prototype.norm=function(n,e,r){return n===void 0&&(n="euclidean"),e===void 0&&(e=null),r===void 0&&(r=!1),this.throwIfDisposed(),ue.norm(this,n,e,r)},t.prototype.slice=function(n,e){return this.throwIfDisposed(),ue.slice(this,n,e)},t.prototype.reverse=function(n){return this.throwIfDisposed(),ue.reverse(this,n)},t.prototype.concat=function(n,e){return e===void 0&&(e=0),this.throwIfDisposed(),n instanceof t&&(n=[n]),ue.concat([this].concat(n),e)},t.prototype.split=function(n,e){return e===void 0&&(e=0),this.throwIfDisposed(),ue.split(this,n,e)},t.prototype.stack=function(n,e){return e===void 0&&(e=0),ue.stack([this,n],e)},t.prototype.unstack=function(n){return n===void 0&&(n=0),ue.unstack(this,n)},t.prototype.pad=function(n,e){return e===void 0&&(e=0),ue.pad(this,n,e)},t.prototype.batchNormalization=function(n,e,r,a,o){return r===void 0&&(r=.001),BE("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(n,e,o,a,r)},t.prototype.batchNorm=function(n,e,r,a,o){return o===void 0&&(o=.001),this.throwIfDisposed(),ue.batchNorm(this,n,e,r,a,o)},t.prototype.all=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),ue.all(this,n,e)},t.prototype.any=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),ue.any(this,n,e)},t.prototype.logSumExp=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),ue.logSumExp(this,n,e)},t.prototype.sum=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),ue.sum(this,n,e)},t.prototype.prod=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),ue.prod(this,n,e)},t.prototype.mean=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),ue.mean(this,n,e)},t.prototype.min=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),ue.min(this,n,e)},t.prototype.max=function(n,e){return n===void 0&&(n=null),e===void 0&&(e=!1),this.throwIfDisposed(),ue.max(this,n,e)},t.prototype.argMin=function(n){return n===void 0&&(n=null),this.throwIfDisposed(),ue.argMin(this,n)},t.prototype.argMax=function(n){return n===void 0&&(n=null),this.throwIfDisposed(),ue.argMax(this,n)},t.prototype.cast=function(n){return this.throwIfDisposed(),ue.cast(this,n)},t.prototype.add=function(n){return this.throwIfDisposed(),ue.add(this,n)},t.prototype.addStrict=function(n){return this.throwIfDisposed(),ue.addStrict(this,n)},t.prototype.atan2=function(n){return this.throwIfDisposed(),ue.atan2(this,n)},t.prototype.sub=function(n){return this.throwIfDisposed(),ue.sub(this,n)},t.prototype.subStrict=function(n){return this.throwIfDisposed(),ue.subStrict(this,n)},t.prototype.pow=function(n){return this.throwIfDisposed(),ue.pow(this,n)},t.prototype.powStrict=function(n){return this.throwIfDisposed(),ue.powStrict(this,n)},t.prototype.mul=function(n){return this.throwIfDisposed(),ue.mul(this,n)},t.prototype.mulStrict=function(n){return this.throwIfDisposed(),ue.mulStrict(this,n)},t.prototype.div=function(n){return this.throwIfDisposed(),ue.div(this,n)},t.prototype.divNoNan=function(n){return this.throwIfDisposed(),ue.divNoNan(this,n)},t.prototype.floorDiv=function(n){return this.throwIfDisposed(),ue.floorDiv(this,n)},t.prototype.divStrict=function(n){return this.throwIfDisposed(),ue.divStrict(this,n)},t.prototype.minimum=function(n){return this.throwIfDisposed(),ue.minimum(this,n)},t.prototype.minimumStrict=function(n){return this.throwIfDisposed(),ue.minimumStrict(this,n)},t.prototype.maximum=function(n){return this.throwIfDisposed(),ue.maximum(this,n)},t.prototype.maximumStrict=function(n){return this.throwIfDisposed(),ue.maximumStrict(this,n)},t.prototype.mod=function(n){return this.throwIfDisposed(),ue.mod(this,n)},t.prototype.modStrict=function(n){return this.throwIfDisposed(),ue.modStrict(this,n)},t.prototype.squaredDifferenceStrict=function(n){return this.throwIfDisposed(),ue.squaredDifferenceStrict(this,n)},t.prototype.transpose=function(n){return this.throwIfDisposed(),ue.transpose(this,n)},t.prototype.notEqual=function(n){return this.throwIfDisposed(),ue.notEqual(this,n)},t.prototype.notEqualStrict=function(n){return this.throwIfDisposed(),ue.notEqualStrict(this,n)},t.prototype.less=function(n){return this.throwIfDisposed(),ue.less(this,n)},t.prototype.lessStrict=function(n){return this.throwIfDisposed(),ue.lessStrict(this,n)},t.prototype.equal=function(n){return this.throwIfDisposed(),ue.equal(this,n)},t.prototype.equalStrict=function(n){return this.throwIfDisposed(),ue.equalStrict(this,n)},t.prototype.lessEqual=function(n){return this.throwIfDisposed(),ue.lessEqual(this,n)},t.prototype.lessEqualStrict=function(n){return this.throwIfDisposed(),ue.lessEqualStrict(this,n)},t.prototype.greater=function(n){return this.throwIfDisposed(),ue.greater(this,n)},t.prototype.greaterStrict=function(n){return this.throwIfDisposed(),ue.greaterStrict(this,n)},t.prototype.greaterEqual=function(n){return this.throwIfDisposed(),ue.greaterEqual(this,n)},t.prototype.greaterEqualStrict=function(n){return this.throwIfDisposed(),ue.greaterEqualStrict(this,n)},t.prototype.logicalAnd=function(n){return this.throwIfDisposed(),ue.logicalAnd(this,n)},t.prototype.logicalOr=function(n){return this.throwIfDisposed(),ue.logicalOr(this,n)},t.prototype.logicalNot=function(){return this.throwIfDisposed(),ue.logicalNot(this)},t.prototype.logicalXor=function(n){return this.throwIfDisposed(),ue.logicalXor(this,n)},t.prototype.where=function(n,e){return this.throwIfDisposed(),ue.where(n,this,e)},t.prototype.neg=function(){return this.throwIfDisposed(),ue.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),ue.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),ue.floor(this)},t.prototype.sign=function(){return this.throwIfDisposed(),ue.sign(this)},t.prototype.isNaN=function(){return this.throwIfDisposed(),ue.isNaN(this)},t.prototype.isInf=function(){return this.throwIfDisposed(),ue.isInf(this)},t.prototype.isFinite=function(){return this.throwIfDisposed(),ue.isFinite(this)},t.prototype.exp=function(){return this.throwIfDisposed(),ue.exp(this)},t.prototype.expm1=function(){return this.throwIfDisposed(),ue.expm1(this)},t.prototype.log=function(){return this.throwIfDisposed(),ue.log(this)},t.prototype.log1p=function(){return this.throwIfDisposed(),ue.log1p(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),ue.sqrt(this)},t.prototype.rsqrt=function(){return this.throwIfDisposed(),ue.rsqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),ue.square(this)},t.prototype.reciprocal=function(){return this.throwIfDisposed(),ue.reciprocal(this)},t.prototype.abs=function(){return this.throwIfDisposed(),ue.abs(this)},t.prototype.clipByValue=function(n,e){return this.throwIfDisposed(),ue.clipByValue(this,n,e)},t.prototype.relu=function(){return this.throwIfDisposed(),ue.relu(this)},t.prototype.relu6=function(){return this.throwIfDisposed(),ue.relu6(this)},t.prototype.elu=function(){return this.throwIfDisposed(),ue.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),ue.selu(this)},t.prototype.leakyRelu=function(n){return n===void 0&&(n=.2),this.throwIfDisposed(),ue.leakyRelu(this,n)},t.prototype.prelu=function(n){return this.throwIfDisposed(),ue.prelu(this,n)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),ue.sigmoid(this)},t.prototype.logSigmoid=function(){return this.throwIfDisposed(),ue.logSigmoid(this)},t.prototype.softplus=function(){return this.throwIfDisposed(),ue.softplus(this)},t.prototype.zerosLike=function(){return this.throwIfDisposed(),ue.zerosLike(this)},t.prototype.onesLike=function(){return this.throwIfDisposed(),ue.onesLike(this)},t.prototype.sin=function(){return this.throwIfDisposed(),ue.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),ue.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),ue.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),ue.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),ue.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),ue.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),ue.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),ue.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),ue.tanh(this)},t.prototype.asinh=function(){return this.throwIfDisposed(),ue.asinh(this)},t.prototype.acosh=function(){return this.throwIfDisposed(),ue.acosh(this)},t.prototype.atanh=function(){return this.throwIfDisposed(),ue.atanh(this)},t.prototype.erf=function(){return this.throwIfDisposed(),ue.erf(this)},t.prototype.round=function(){return this.throwIfDisposed(),ue.round(this)},t.prototype.step=function(n){return n===void 0&&(n=0),this.throwIfDisposed(),ue.step(this,n)},t.prototype.softmax=function(n){return n===void 0&&(n=-1),this.throwIfDisposed(),ue.softmax(this,n)},t.prototype.logSoftmax=function(n){return n===void 0&&(n=-1),this.throwIfDisposed(),ue.logSoftmax(this,n)},t.prototype.resizeBilinear=function(n,e){return e===void 0&&(e=!1),this.throwIfDisposed(),ue.image.resizeBilinear(this,n,e)},t.prototype.resizeNearestNeighbor=function(n,e){return e===void 0&&(e=!1),this.throwIfDisposed(),ue.image.resizeNearestNeighbor(this,n,e)},t.prototype.conv1d=function(n,e,r,a,o,u){return a===void 0&&(a="NWC"),o===void 0&&(o=1),this.throwIfDisposed(),ue.conv1d(this,n,e,r,a,o,u)},t.prototype.conv2d=function(n,e,r,a,o,u){return a===void 0&&(a="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),ue.conv2d(this,n,e,r,a,o,u)},t.prototype.conv2dTranspose=function(n,e,r,a,o){return this.throwIfDisposed(),ue.conv2dTranspose(this,n,e,r,a,o)},t.prototype.depthwiseConv2D=function(n,e,r,a,o,u){return a===void 0&&(a="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),ue.depthwiseConv2d(this,n,e,r,a,o,u)},t.prototype.separableConv2d=function(n,e,r,a,o,u){return o===void 0&&(o=[1,1]),u===void 0&&(u="NHWC"),this.throwIfDisposed(),ue.separableConv2d(this,n,e,r,a,o,u)},t.prototype.avgPool=function(n,e,r,a){return this.throwIfDisposed(),ue.avgPool(this,n,e,r,a)},t.prototype.maxPool=function(n,e,r,a){return this.throwIfDisposed(),ue.maxPool(this,n,e,r,a)},t.prototype.localResponseNormalization=function(n,e,r,a){return n===void 0&&(n=5),e===void 0&&(e=1),r===void 0&&(r=1),a===void 0&&(a=.5),ue.localResponseNormalization(this,n,e,r,a)},t.prototype.pool=function(n,e,r,a,o){return this.throwIfDisposed(),ue.pool(this,n,e,r,a,o)},t.prototype.variable=function(n,e,r){return n===void 0&&(n=!0),this.throwIfDisposed(),ba().makeVariable(this,n,e,r)},t.prototype.unsortedSegmentSum=function(n,e){return this.throwIfDisposed(),ue.unsortedSegmentSum(this,n,e)},t.prototype.batchToSpaceND=function(n,e){return this.throwIfDisposed(),ue.batchToSpaceND(this,n,e)},t.prototype.spaceToBatchND=function(n,e){return this.throwIfDisposed(),ue.spaceToBatchND(this,n,e)},t.prototype.topk=function(n,e){return n===void 0&&(n=1),e===void 0&&(e=!0),this.throwIfDisposed(),ue.topk(this,n,e)},t.prototype.stridedSlice=function(n,e,r,a,o,u,l,c){return a===void 0&&(a=0),o===void 0&&(o=0),u===void 0&&(u=0),l===void 0&&(l=0),c===void 0&&(c=0),this.throwIfDisposed(),ue.stridedSlice(this,n,e,r,a,o,u,l,c)},t.prototype.depthToSpace=function(n,e){return this.throwIfDisposed(),ue.depthToSpace(this,n,e)},t.prototype.fft=function(){return this.throwIfDisposed(),ue.spectral.fft(this)},t.prototype.ifft=function(){return this.throwIfDisposed(),ue.spectral.ifft(this)},t.prototype.rfft=function(){return this.throwIfDisposed(),ue.spectral.rfft(this)},t.prototype.irfft=function(){return this.throwIfDisposed(),ue.spectral.irfft(this)},t})();Object.defineProperty(Ut,Symbol.hasInstance,{value:function(t){return!!t&&t.dataId!=null&&t.shape!=null&&t.dtype!=null}});var oS,fg,dg,hg,pg,ru=(function(t){function n(e,r,a,o){var u=t.call(this,e.shape,e.dtype,e.dataId,o)||this;return u.trainable=r,u.name=a,u}return oa(n,t),n.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!Sn(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");ba().disposeTensor(this),this.dataId=e.dataId,ba().incRef(this,null)},n.prototype.dispose=function(){ba().disposeVariable(this),this.isDisposedInternal=!0},n})(Ut);Object.defineProperty(ru,Symbol.hasInstance,{value:function(t){return t instanceof Ut&&t.assign!=null&&t.assign instanceof Function}}),(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(oS||(oS={})),(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(fg||(fg={})),(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(dg||(dg={})),(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(hg||(hg={})),(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(pg||(pg={}));var rF={float32:hg,int32:fg,bool:dg,complex64:pg};function Nn(t,n){if(t==="string"||n==="string"){if(t==="string"&&n==="string")return"string";throw new Error("Can not upcast "+t+" with "+n)}return rF[t][n]}function vm(t){return Nn(t,"int32")}function Vt(t,n){if(t.dtype===n.dtype)return[t,n];var e=Nn(t.dtype,n.dtype);return[t.cast(e),n.cast(e)]}function aF(t,n){W(t.dtype===n.dtype,(function(){return"The dtypes of the first("+t.dtype+") and second("+n.dtype+") input must match"}))}function FE(t){var n=[];return(function e(r,a,o){if(r!=null){if(r instanceof Ut)return void a.push(r);if(u=r,!(!Array.isArray(u)&&typeof u!="object")){var u,l=r;for(var c in l){var d=l[c];o.has(d)||(o.add(d),e(d,a,o))}}}})(t,n,new Set),n}var mm,iS=(function(){function t(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return t.prototype.dispose=function(){for(var n in this.registeredVariables)this.registeredVariables[n].dispose()},t})(),oF=(function(){function t(n){this.ENV=n,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new iS}return t.prototype.ready=function(){return Ae(this,void 0,void 0,(function(){var n,e,r;return De(this,(function(a){switch(a.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then((function(){}))];if(this.backendInstance!=null)return[2];n=this.getSortedBackends(),e=0,a.label=1;case 1:return e<n.length?(r=n[e],[4,this.initializeBackend(r).success]):[3,5];case 2:return a.sent()?[4,this.setBackend(r)]:[3,4];case 3:return a.sent(),[2];case 4:return e++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}}))}))},Object.defineProperty(t.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var n=this.initializeBackendsAndReturnBest(),e=n.name;if(n.asyncInit)throw new Error("The highest priority backend '"+e+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance},enumerable:!0,configurable:!0}),t.prototype.backendNames=function(){return Object.keys(this.registryFactory)},t.prototype.findBackend=function(n){return!(n in this.registry)&&(!(n in this.registryFactory)||this.initializeBackend(n).asyncInit)?null:this.registry[n]},t.prototype.findBackendFactory=function(n){return n in this.registryFactory?this.registryFactory[n].factory:null},t.prototype.registerBackend=function(n,e,r){return r===void 0&&(r=1),n in this.registryFactory?(console.warn(n+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[n]={factory:e,priority:r},!0)},t.prototype.setBackend=function(n){return Ae(this,void 0,void 0,(function(){var e,r,a;return De(this,(function(o){switch(o.label){case 0:if(this.registryFactory[n]==null)throw new Error("Backend name '"+n+"' not found in registry");return this.backendName=n,this.registry[n]!=null?[3,4]:(this.backendInstance=null,e=this.initializeBackend(n),r=e.success,e.asyncInit?[4,r]:[3,2]);case 1:return a=o.sent(),[3,3];case 2:a=r,o.label=3;case 3:if(!a)return[2,!1];o.label=4;case 4:return this.backendInstance=this.registry[n],this.setupRegisteredKernels(),this.profiler=new eF(this.backendInstance),[2,!0]}}))}))},t.prototype.setupRegisteredKernels=function(){var n=this;eS(this.backendName).forEach((function(e){e.setupFunc!=null&&e.setupFunc(n.backendInstance)}))},t.prototype.disposeRegisteredKernels=function(n){var e=this;eS(n).forEach((function(r){r.disposeFunc!=null&&r.disposeFunc(e.registry[n])}))},t.prototype.initializeBackend=function(n){var e=this,r=this.registryFactory[n];if(r==null)throw new Error("Cannot initialize backend "+n+", no registration found.");try{var a=r.factory();if(Promise.resolve(a)===a){var o=++this.pendingBackendInitId,u=a.then((function(l){return!(o<e.pendingBackendInitId)&&(e.registry[n]=l,e.pendingBackendInit=null,!0)})).catch((function(l){return!(o<e.pendingBackendInitId)&&(e.pendingBackendInit=null,console.warn("Initialization of backend "+n+" failed"),console.warn(l.stack||l.message),!1)}));return this.pendingBackendInit=u,{success:u,asyncInit:!0}}return this.registry[n]=a,{success:!0,asyncInit:!1}}catch(l){return console.warn("Initialization of backend "+n+" failed"),console.warn(l.stack||l.message),{success:!1,asyncInit:!1}}},t.prototype.removeBackend=function(n){if(!(n in this.registryFactory))throw new Error(n+" backend not found in registry");this.backendName===n&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,n in this.registry&&(this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n]),delete this.registryFactory[n],this.backendName===n&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},t.prototype.getSortedBackends=function(){var n=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(e,r){return n.registryFactory[r].priority-n.registryFactory[e].priority}))},t.prototype.initializeBackendsAndReturnBest=function(){for(var n=this.getSortedBackends(),e=0;e<n.length;e++){var r=n[e],a=this.initializeBackend(r),o=a.success,u=a.asyncInit;if(u||o)return{name:r,asyncInit:u}}throw new Error("Could not initialize any backends, all backend initializations failed.")},t.prototype.moveData=function(n,e){var r=this.state.tensorInfo.get(e),a=r.backend,o=this.readSync(e);a.disposeData(e),r.backend=n,n.move(e,o,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},t.prototype.tidy=function(n,e){var r,a=this,o=null;if(e==null){if(typeof n!="function")throw new Error("Please provide a function to tidy()");e=n}else{if(typeof n!="string"&&!(n instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof e!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=n}return this.scopedRun((function(){return a.startScope(o)}),(function(){return a.endScope(r)}),(function(){return(r=e())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r}))},t.prototype.scopedRun=function(n,e,r){n();try{var a=r();return e(),a}catch(o){throw e(),o}},t.prototype.nextTensorId=function(){return t.nextTensorId++},t.prototype.nextVariableId=function(){return t.nextVariableId++},t.prototype.clone=function(n){var e=this.makeTensorFromDataId(n.dataId,n.shape,n.dtype),r={x:n};return this.addTapeNode(this.state.activeScope.name,r,[e],(function(a){return{x:function(){return a.toFloat()}}}),[]),e},t.prototype.runKernel=function(n,e,r,a,o){return this.runKernelFunc(null,e,null,n,r,a,o)},t.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},t.prototype.checkKernelForMemLeak=function(n,e,r){var a=this.backend.numDataIds(),o=0;r.forEach((function(c){o+=c.dtype==="complex64"?3:1}));var u=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],l=a-e-o-u;if(l>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+l+" data ids) after running '"+n+"'")},t.prototype.runKernelFunc=function(n,e,r,a,o,u,l){var c,d=this;u===void 0&&(u=[]),l===void 0&&(l=[]);var h=[],v=this.isTapeOn();a==null&&(a=this.state.activeScope!=null?this.state.activeScope.name:"");var m,g=function(_){v&&(h=_.map((function(R){return d.keep(d.clone(R))})))},b=this.state.numBytes,x=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var S,C=_E(a,this.backendName);return m=C!=null?function(){var _=d.backend.numDataIds();S=C.kernelFunc({inputs:e,attrs:o,backend:d.backend});var R=Array.isArray(S)?S:[S];d.shouldCheckForMemLeaks()&&d.checkKernelForMemLeak(a,_,R);var E=R.map((function(k){var N=k.dataId,O=k.shape,I=k.dtype;return d.makeTensorFromDataId(N,O,I)})),T=E.filter((function(k,N){return l[N]}));return g((u||[]).slice().concat(T)),E}:function(){var _=d.backend.numDataIds();S=d.tidy((function(){return n(d.backend,g)}));var R=Array.isArray(S)?S:[S];return d.shouldCheckForMemLeaks()&&d.checkKernelForMemLeak(a,_,R),R},this.scopedRun((function(){return d.state.kernelDepth++}),(function(){return d.state.kernelDepth--}),(function(){c=d.ENV.getBool("DEBUG")?d.profiler.profileKernel(a,e,(function(){return m()})):m()})),v&&this.addTapeNode(a,e,c,r,h),this.state.profiling&&this.state.activeProfile.kernels.push({name:a,bytesAdded:this.state.numBytes-b,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-x,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(e).map((function(_){return e[_].shape})),outputShapes:c.map((function(_){return _.shape}))}),Array.isArray(S)?c:c[0]},t.prototype.makeTensor=function(n,e,r,a){if(n==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",a=a||this.backend;var o=n;r==="string"&&hy(n[0])&&(o=n.map((function(h){return ZB(h)})));var u=a.write(o,e,r),l=new Ut(e,r,u,this.nextTensorId());if(this.incRef(l,a),r==="string"){var c=this.state.tensorInfo.get(u),d=XB(o);this.state.numBytes+=d-c.bytes,c.bytes=d}return l},t.prototype.makeTensorFromDataId=function(n,e,r,a){var o=new Ut(e,r=r||"float32",n,this.nextTensorId());return this.incRef(o,a),o},t.prototype.makeVariable=function(n,e,r,a){e===void 0&&(e=!0),r=r||this.nextVariableId().toString(),a!=null&&a!==n.dtype&&(n=n.asType(a));var o=new ru(n,e,r,this.nextTensorId());if(this.state.registeredVariables[o.name]!=null)throw new Error("Variable with name "+o.name+" was already registered");return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o},t.prototype.incRef=function(n,e){var r=this.state.tensorInfo.has(n.dataId)?this.state.tensorInfo.get(n.dataId).refCount:0;if(this.state.numTensors++,n.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var a=0;n.dtype!=="complex64"&&n.dtype!=="string"&&(a=n.size*kE(n.dtype)),this.state.tensorInfo.set(n.dataId,{backend:e||this.backend,dtype:n.dtype,shape:n.shape,bytes:a,refCount:0}),this.state.numBytes+=a}this.state.tensorInfo.get(n.dataId).refCount++,n instanceof ru||this.track(n)},t.prototype.disposeTensor=function(n){if(this.state.tensorInfo.has(n.dataId)){this.state.numTensors--,n.dtype==="string"&&this.state.numStringTensors--;var e=this.state.tensorInfo.get(n.dataId);e.refCount<=1?(n.dtype!=="complex64"&&(this.state.numBytes-=e.bytes),this.state.numDataBuffers--,e.backend.disposeData(n.dataId),this.state.tensorInfo.delete(n.dataId)):this.state.tensorInfo.get(n.dataId).refCount--}},t.prototype.disposeVariables=function(){for(var n in this.state.registeredVariables){var e=this.state.registeredVariables[n];this.disposeVariable(e)}},t.prototype.disposeVariable=function(n){this.disposeTensor(n),this.state.registeredVariables[n.name]!=null&&delete this.state.registeredVariables[n.name]},t.prototype.memory=function(){var n=this.backend.memory();return n.numTensors=this.state.numTensors,n.numDataBuffers=this.state.numDataBuffers,n.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(n.unreliable=!0,n.reasons==null&&(n.reasons=[]),n.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),n},t.prototype.profile=function(n){return Ae(this,void 0,void 0,(function(){var e,r;return De(this,(function(a){return this.state.profiling=!0,e=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=n(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map((function(o){return o.totalBytesSnapshot}))),this.state.activeProfile.newBytes=this.state.numBytes-e,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]}))}))},t.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},t.prototype.addTapeNode=function(n,e,r,a,o){var u=this,l={id:this.state.nextTapeNodeId++,kernelName:n,inputs:e,outputs:r,saved:o},c=WB(n);c!=null&&(a=c.gradFunc),a!=null&&(l.gradient=function(d){return d=d.map((function(h,v){if(h==null){var m=r[v],g=Ql(m.size,m.dtype);return u.makeTensor(g,m.shape,m.dtype)}return h})),a(d.length>1?d:d[0],o)}),this.state.activeTape.push(l)},t.prototype.keep=function(n){return n.kept=!0,n},t.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},t.prototype.endTape=function(){this.state.gradientDepth--},t.prototype.startScope=function(n){var e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};n&&(e.name=n),this.state.scopeStack.push(e),this.state.activeScope=e},t.prototype.endScope=function(n){for(var e=this,r=FE(n),a=new Set(r.map((function(c){return c.id}))),o=0;o<this.state.activeScope.track.length;o++){var u=this.state.activeScope.track[o];u.kept||a.has(u.id)||u.dispose()}var l=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach((function(c){c.kept||c.scopeId!==l.id||e.track(c)}))},t.prototype.gradients=function(n,e,r,a){var o=this;if(a===void 0&&(a=!1),W(e.length>0,(function(){return"gradients() received an empty list of xs."})),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var u=this.scopedRun((function(){return o.startTape()}),(function(){return o.endTape()}),(function(){return o.tidy("forward",n)}));W(u instanceof Ut,(function(){return"The result y returned by f() must be a tensor."}));var l=(function(c,d,h){for(var v={},m={},g=0;g<d.length;g++)v[d[g].id]=!0;for(g=0;g<c.length;g++){var b=(k=c[g]).inputs;for(var x in b){for(var S=b[x],C=!1,_=0;_<d.length;_++)if(v[S.id]){k.outputs.forEach((function(B){return v[B.id]=!0})),C=!0,m[k.id]=!0;break}if(C)break}}var R={};R[h.id]=!0;var E={};for(g=c.length-1;g>=0;g--)for(b=(k=c[g]).inputs,_=0;_<k.outputs.length;_++)if(R[k.outputs[_].id]){for(var x in b)R[b[x].id]=!0,E[k.id]=!0;break}var T=[];for(g=0;g<c.length;g++){var k;if(m[(k=c[g]).id]&&E[k.id]){var N={};for(var x in k.inputs){var O=k.inputs[x];v[O.id]&&(N[x]=O)}var I=Object.assign({},k);I.inputs=N,I.outputs=k.outputs,T.push(I)}}return T})(this.state.activeTape,e,u);if(!a&&l.length===0&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var c,d,h={};h[u.id]=r??(c=u.shape,d=ME(Ne(c),"float32"),ee.makeTensor(d,c,"float32")),(function(m,g,b){for(var x=function(C){var _=g[C],R=[];if(_.outputs.forEach((function(N){var O=m[N.id];O!=null?R.push(O):R.push(null)})),_.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+_.kernelName+".");var E=_.gradient(R),T=function(N){if(!(N in E))throw new Error("Cannot backprop through input "+N+". Available gradients found: "+Object.keys(E)+".");var O=b((function(){return E[N]()}));if(O.dtype!=="float32")throw new Error("Error in gradient for op "+_.kernelName+". The gradient of input "+N+" must have 'float32' dtype, but has '"+O.dtype+"'");var I=_.inputs[N];if(!Sn(O.shape,I.shape))throw new Error("Error in gradient for op "+_.kernelName+". The gradient of input '"+N+"' has shape '"+O.shape+"', which does not match the shape of the input '"+I.shape+"'");if(m[I.id]==null)m[I.id]=O;else{var B=m[I.id];m[I.id]=B.add(O),B.dispose()}};for(var k in _.inputs)T(k)},S=g.length-1;S>=0;S--)x(S)})(h,l,(function(m){return o.tidy(m)}));var v=e.map((function(m){return h[m.id]}));return o.state.gradientDepth===0&&(o.state.activeTape.forEach((function(m){for(var g=0,b=m.saved;g<b.length;g++)b[g].dispose()})),o.state.activeTape=null),{value:u,grads:v}}))},t.prototype.customGrad=function(n){var e=this;return W(lg(n),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var r,a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];W(a.every((function(l){return l instanceof Ut})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var u={};return a.forEach((function(l,c){u[c]=l})),e.runKernelFunc((function(l,c){return W((r=n.apply(void 0,a.concat([c]))).value instanceof Ut,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),W(lg(r.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),r.value}),u,(function(l,c){var d=r.gradFunc(l,c),h=Array.isArray(d)?d:[d];W(h.length===a.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),W(h.every((function(m){return m instanceof Ut})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var v={};return h.forEach((function(m,g){v[g]=function(){return m}})),v}))}},t.prototype.readSync=function(n){return this.state.tensorInfo.get(n).backend.readSync(n)},t.prototype.read=function(n){return this.state.tensorInfo.get(n).backend.read(n)},t.prototype.time=function(n){return Ae(this,void 0,void 0,(function(){var e,r;return De(this,(function(a){switch(a.label){case 0:return e=ga(),[4,this.backend.time(n)];case 1:return(r=a.sent()).wallMs=ga()-e,[2,r]}}))}))},t.prototype.track=function(n){return this.state.activeScope!=null&&(n.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(n)),n},Object.defineProperty(t.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),t.prototype.reset=function(){for(var n in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new iS,this.registry)this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},t.nextTensorId=0,t.nextVariableId=0,t})(),ee=(function(){var t=(function(){if(mm==null){var e=void 0;if(typeof window<"u")e=window;else if(typeof global<"u")e=global;else if(typeof process<"u")e=process;else{if(typeof self>"u")throw new Error("Could not find a global object");e=self}mm=e}return mm})();if(t._tfengine==null){var n=new zB(t);t._tfengine=new oF(n)}return(function(e){RE=e})(t._tfengine.ENV),ba=function(){return t._tfengine},t._tfengine})();function PE(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Ja=de();Ja.registerFlag("DEBUG",(function(){return!1}),(function(t){t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),Ja.registerFlag("IS_BROWSER",(function(){return PE()})),Ja.registerFlag("IS_NODE",(function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0})),Ja.registerFlag("IS_CHROME",(function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),Ja.registerFlag("PROD",(function(){return!1})),Ja.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return Ja.getBool("DEBUG")})),Ja.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),Ja.registerFlag("IS_TEST",(function(){return!1}));var Ol,wr,br,Ri={},gm={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function iF(t,n){Ri[t]=n}function ka(t){t in Ri||(Ri[t]=(function(e){if(e!==1&&e!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=(function(a){if(typeof OffscreenCanvas<"u"&&a===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")})(e);return r.addEventListener("webglcontextlost",(function(a){a.preventDefault(),delete Ri[e]}),!1),e===1?r.getContext("webgl",gm)||r.getContext("experimental-webgl",gm):r.getContext("webgl2",gm)})(t));var n=Ri[t];return n.isContextLost()?(delete Ri[t],ka(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Ri[t])}function Qd(t,n){return[n,t]}function Cl(t){var n=Ne(t);return ug(Math.ceil(n/4))}function Zl(t,n){return[Math.max(1,Math.ceil(n/2)),Math.max(1,Math.ceil(t/2))]}function py(t,n){var e,r,a,o,u,l,c,d,h,v=t;return de().getNumber("WEBGL_VERSION")===2?(e=v.R32F,r=v.R16F,a=v.RGBA16F,o=v.RGBA32F,u=v.RED,l=4,c=1,d=v.HALF_FLOAT,h=v.FLOAT):(e=t.RGBA,r=t.RGBA,a=t.RGBA,o=v.RGBA,u=t.RGBA,l=4,c=4,d=n!=null?n.HALF_FLOAT_OES:null,h=t.FLOAT),{internalFormatFloat:e,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:o,textureFormatFloat:u,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:l,defaultNumChannels:c,textureTypeHalfFloat:d,textureTypeFloat:h}}function Oe(t,n,e){var r=e();return n&&(function(a){var o=a.getError();if(o!==a.NO_ERROR)throw new Error("WebGL Error: "+cF(a,o))})(t),r}(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(Ol||(Ol={})),(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(wr||(wr={})),(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(br||(br={}));var sF=596e-10,uF=65504;function lF(t){return!!(de().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||sF<Math.abs(t)&&Math.abs(t)<uF)}function cF(t,n){switch(n){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+n}}function Af(t,n,e){return lo(t,n,(function(){return t.getExtension(e)}),'Extension "'+e+'" not supported on this browser.')}function fF(t,n,e){var r=lo(t,n,(function(){return t.createShader(t.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(Oe(t,n,(function(){return t.shaderSource(r,e)})),Oe(t,n,(function(){return t.compileShader(r)})),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function dF(t,n,e){var r=lo(t,n,(function(){return t.createShader(t.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(Oe(t,n,(function(){return t.shaderSource(r,e)})),Oe(t,n,(function(){return t.compileShader(r)})),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw(function(a,o){var u=hF.exec(o);if(u==null)return console.log("Couldn't parse line number in error: "+o),void console.log(a);for(var l=+u[1],c=a.split(`
`),d=c.length.toString().length+2,h=c.map((function(S,C){return $s((C+1).toString(),d)+S})),v=0,m=0;m<h.length;m++)v=Math.max(h[m].length,v);var g=h.slice(0,l-1),b=h.slice(l-1,l),x=h.slice(l);console.log(g.join(`
`)),console.log(o.split(`
`)[0]),console.log("%c "+$s(b[0],v),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(x.join(`
`))})(e,t.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var ym,bm,hF=/ERROR: [0-9]+:([0-9]+):/g;function pF(t,n){return lo(t,n,(function(){return t.createProgram()}),"Unable to create WebGLProgram.")}function vF(t,n,e){if(Oe(t,n,(function(){return t.linkProgram(e)})),t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function xm(t,n,e){if(Oe(t,n,(function(){return t.validateProgram(e)})),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function mF(t,n,e){var r=lo(t,n,(function(){return t.createBuffer()}),"Unable to create WebGLBuffer");return Oe(t,n,(function(){return t.bindBuffer(t.ARRAY_BUFFER,r)})),Oe(t,n,(function(){return t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)})),r}function gF(t,n,e){var r=lo(t,n,(function(){return t.createBuffer()}),"Unable to create WebGLBuffer");return Oe(t,n,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r)})),Oe(t,n,(function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)})),r}function yF(t,n){return lo(t,n,(function(){return t.createTexture()}),"Unable to create WebGLTexture.")}function bF(t,n){var e=de().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||n<=0){var r="["+t+"x"+n+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(t>e||n>e)throw r="["+t+"x"+n+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+e+"x"+e+"]")+".")}function xF(t,n){return lo(t,n,(function(){return t.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}function sS(t,n,e,r,a,o,u,l){var c=t.getAttribLocation(e,r);return c!==-1&&(Oe(t,n,(function(){return t.bindBuffer(t.ARRAY_BUFFER,a)})),Oe(t,n,(function(){return t.vertexAttribPointer(c,o,t.FLOAT,!1,u,l)})),Oe(t,n,(function(){return t.enableVertexAttribArray(c)})),!0)}function wF(t,n,e,r){_F(t,r),Oe(t,n,(function(){return t.activeTexture(t.TEXTURE0+r)})),Oe(t,n,(function(){return t.bindTexture(t.TEXTURE_2D,e)}))}function SF(t,n,e,r){return lo(t,n,(function(){return t.getUniformLocation(e,r)}),'uniform "'+r+'" not present in program.')}function CF(t,n,e){return t.getUniformLocation(n,e)}function EF(t,n,e,r,a,o){Oe(t,n,(function(){return wF(t,n,r,o)})),Oe(t,n,(function(){return t.uniform1i(a,o)}))}function wm(t,n,e,r){Oe(t,n,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,r)})),Oe(t,n,(function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)}))}function uS(t,n,e){Oe(t,n,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,e)})),Oe(t,n,(function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)}))}function Df(t){var n=t.checkFramebufferStatus(t.FRAMEBUFFER);if(n!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+RF(t,n))}function RF(t,n){switch(n){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+n}}function lo(t,n,e,r){var a=Oe(t,n,(function(){return e()}));if(a==null)throw new Error(r);return a}function _F(t,n){var e=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=n+t.TEXTURE0;if(r<t.TEXTURE0||r>e)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+e+"]")+".")}function cd(t,n){return n===void 0&&(n=2),Ne(t.slice(0,t.length-n))}function fd(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function Sm(t){var n=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(n=[cd(t)].concat(fd(t))),n}function TF(t,n){var e;n===void 0&&(n=!1);var r=de().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n&&(r*=2,(t=t.map((function(d,h){return h>=t.length-2?DE(t[h]):t[h]}))).length===1&&(t=[2,t[0]])),t.length!==2){var a=Ti(t);t=a.newShape}var o=Ne(t);if(t.length<=1&&o<=r)return[1,o];if(t.length===2&&t[0]<=r&&t[1]<=r)return t;if(t.length===3&&t[0]*t[1]<=r&&t[2]<=r)return[t[0]*t[1],t[2]];if(t.length===3&&t[0]<=r&&t[1]*t[2]<=r)return[t[0],t[1]*t[2]];if(t.length===4&&t[0]*t[1]*t[2]<=r&&t[3]<=r)return[t[0]*t[1]*t[2],t[3]];if(t.length===4&&t[0]<=r&&t[1]*t[2]*t[3]<=r)return[t[0],t[1]*t[2]*t[3]];if(n){var u=cd(t),l=2,c=2;return t.length&&(l=(e=fd(t))[0],c=e[1]),ug(o=u*(l/2)*(c/2)).map((function(d){return 2*d}))}return ug(o)}function kf(t){return t%2==0}function Nf(t,n){if(Sn(t=t.slice(-2),n=n.slice(-2))||!t.length||!n.length||t[0]===0||t[1]===0||n[0]===0||n[1]===0)return!0;if(t.length!==n.length){var e=t.slice(-1)[0],r=n.slice(-1)[0];if(e===r||kf(e)&&kf(r)&&(t[0]===1||n[0]===1))return!0}return t[1]===n[1]&&kf(t[0])&&kf(n[0])}function AF(t){if(ym==null){var n=ka(t);ym=n.getParameter(n.MAX_TEXTURE_SIZE)}return ym}function DF(t){if(bm==null){var n=ka(t);bm=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,bm)}function kF(t){if(t===0)return 0;var n=ka(t);return Vr(n,"EXT_disjoint_timer_query_webgl2")&&t===2?2:Vr(n,"EXT_disjoint_timer_query")?1:0}function Vr(t,n){return t.getExtension(n)!=null}function lS(t){try{if(ka(t)!=null)return!0}catch{return!1}return!1}function NF(t){if(t===0)return!1;var n=ka(t);if(t===1){if(!Vr(n,"OES_texture_float"))return!1}else if(!Vr(n,"EXT_color_buffer_float"))return!1;return vg(n)}function MF(t){if(t===0)return!1;var n=ka(t);if(t!==1){if(Vr(n,"EXT_color_buffer_float"))return vg(n);if(Vr(n,"EXT_color_buffer_half_float")){var e=n.getExtension("EXT_color_buffer_half_float");return(function(r,a){var o=py(r,a),u=r.createTexture();r.bindTexture(r.TEXTURE_2D,u),r.texImage2D(r.TEXTURE_2D,0,o.internalFormatHalfFloat,1,1,0,o.textureFormatFloat,o.textureTypeHalfFloat,null);var l=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,l),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,u,0);var c=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(u),r.deleteFramebuffer(l),c})(n,e)}return!1}return!!Vr(n,"OES_texture_float")&&!!Vr(n,"WEBGL_color_buffer_float")&&vg(n)}function vg(t){var n=py(t),e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatFloat,1,1,0,n.textureFormatFloat,n.textureTypeFloat,null);var r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);var a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(e),t.deleteFramebuffer(r),a}function OF(t){return t===2&&ka(t).fenceSync!=null}var Ve=de();function LE(t){de().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function _e(t,n){return ee.tidy(t,n)}function or(t){FE(t).forEach((function(n){return n.dispose()}))}function IF(t){return ee.keep(t)}function dd(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];de().getBool("IS_TEST")||console.warn.apply(console,t)}function Qo(t,n){var e=t;if(Ea(t))return n==="string"?[]:[t.length];if(!Array.isArray(t))return[];for(var r=[];Array.isArray(e)||Ea(e)&&n!=="string";)r.push(e.length),e=e[0];return Array.isArray(t)&&de().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&(function a(o,u,l){if(l=l||[],!Array.isArray(o)&&!Ea(o))return void W(u.length===0,(function(){return"Element arr["+l.join("][")+"] is a primitive, but should be an array/TypedArray of "+u[0]+" elements"}));W(u.length>0,(function(){return"Element arr["+l.join("][")+"] should be a primitive, but is an array of "+o.length+" elements"})),W(o.length===u[0],(function(){return"Element arr["+l.join("][")+"] should have "+u[0]+" elements, but has "+o.length+" elements"}));for(var c=u.slice(1),d=0;d<o.length;++d)a(o[d],c,l.concat(d))})(t,r,[]),r}function cS(t,n,e,r){if(t!=null&&(t!=="numeric"&&t!==n||t==="numeric"&&n==="string"))throw new Error("Argument '"+e+"' passed to '"+r+"' must be "+t+" tensor, but got "+n+" tensor")}function z(t,n,e,r){if(r===void 0&&(r="numeric"),t instanceof Ut)return cS(r,t.dtype,n,e),t;var a=Yl(t);if(a!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),cS(r,a,n,e),t==null||!Ea(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){var o=t==null?"null":t.constructor.name;throw new Error("Argument '"+n+"' passed to '"+e+"' must be a Tensor or TensorLike, but got '"+o+"'")}var u=Qo(t,a);Ea(t)||Array.isArray(t)||(t=[t]);var l=a!=="string"?NE(t,a,de().getBool("DEBUG")):nu(t,[],!0);return ee.makeTensor(l,u,a)}function hd(t,n,e,r){if(r===void 0&&(r="numeric"),!Array.isArray(t))throw new Error("Argument "+n+" passed to "+e+" must be a `Tensor[]` or `TensorLike[]`");return t.map((function(a,o){return z(a,n+"["+o+"]",e)}),r)}function zE(t,n){for(var e=0;e<t.length;++e)if(t[t.length-e-1]!==n-1-e)return!1;return!0}function BF(t,n,e){for(var r=t.length+n.length,a=[],o=0,u=0,l=0;l<r;l++)e.indexOf(l)===-1?a.push(t[o++]):a.push(n[u++]);return a}function zn(t,n){for(var e=[],r=t.length,a=0;a<r;a++)n.indexOf(a)===-1&&e.push(t[a]);return[e,n.map((function(o){return t[o]}))]}function ur(t,n){return BF(t,n.map((function(e){return 1})),n)}function yr(t,n,e){W(zE(n,e),(function(){return t+" supports only inner-most axes for now. Got axes "+n+" and rank-"+e+" input."}))}function Na(t,n){if(zE(t,n))return null;for(var e=[],r=0;r<n;++r)t.indexOf(r)===-1&&e.push(r);return t.forEach((function(a){return e.push(a)})),e}function vy(t){return t.map((function(n,e){return[e,n]})).sort((function(n,e){return n[1]-e[1]})).map((function(n){return n[0]}))}function Ma(t,n){for(var e=[],r=n-t;r<n;++r)e.push(r);return e}function FF(t,n){var e=t[0].length;t.forEach((function(a,o){W(a.length===e,(function(){return"Error in concat"+e+"D: rank of tensors["+o+"] must be the same as the rank of the rest ("+e+")"}))})),W(n>=0&&n<e,(function(){return"Error in concat"+e+"D: axis must be between 0 and "+(e-1)+"."}));var r=t[0];t.forEach((function(a,o){for(var u=0;u<e;u++)W(u===n||a[u]===r[u],(function(){return"Error in concat"+e+"D: Shape of tensors["+o+"] ("+a+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+o+"."}))}))}function au(t,n){for(var e=t[0].slice(),r=1;r<t.length;r++)e[n]+=t[r][n];return e}function Y(t){var n=Object.keys(t);if(n.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+n.length+" keys.");var e=n[0],r=t[e];e.endsWith("_")&&(e=e.substring(0,e.length-1));var a=function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];ee.startScope(e);try{var l=r.apply(void 0,o);return l instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),ee.endScope(l),l}catch(c){throw ee.endScope(null),c}};return Object.defineProperty(a,"name",{value:e,configurable:!0}),a}Ve.registerFlag("HAS_WEBGL",(function(){return Ve.getNumber("WEBGL_VERSION")>0})),Ve.registerFlag("WEBGL_VERSION",(function(){return lS(2)?2:lS(1)?1:0})),Ve.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return Ve.get("WEBGL_VERSION")===2})),Ve.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),Ve.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),Ve.registerFlag("WEBGL_PACK",(function(){return Ve.getBool("HAS_WEBGL")})),Ve.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return Ve.getBool("WEBGL_PACK")})),Ve.registerFlag("WEBGL_PACK_CLIP",(function(){return Ve.getBool("WEBGL_PACK")})),Ve.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return!1})),Ve.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return Ve.getBool("WEBGL_PACK")})),Ve.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return Ve.getBool("WEBGL_PACK")})),Ve.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return Ve.getBool("WEBGL_PACK")})),Ve.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return Ve.getBool("WEBGL_PACK")})),Ve.registerFlag("WEBGL_PACK_REDUCE",(function(){return Ve.getBool("WEBGL_PACK")})),Ve.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return Ve.getBool("WEBGL_PACK")})),Ve.registerFlag("WEBGL_CONV_IM2COL",(function(){return Ve.getBool("WEBGL_PACK")})),Ve.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return AF(Ve.getNumber("WEBGL_VERSION"))})),Ve.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return DF(Ve.getNumber("WEBGL_VERSION"))})),Ve.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var t=Ve.getNumber("WEBGL_VERSION");return t===0?0:kF(t)})),Ve.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return Ve.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(t=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))));var t})),Ve.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return NF(Ve.getNumber("WEBGL_VERSION"))})),Ve.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!Ve.getBool("WEBGL_FORCE_F16_TEXTURES")&&Ve.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),Ve.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return MF(Ve.getNumber("WEBGL_VERSION"))})),Ve.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return OF(Ve.getNumber("WEBGL_VERSION"))})),Ve.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return Ve.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),BE=LE;var kn=Y({complex_:function(t,n){var e=z(t,"real","complex"),r=z(n,"imag","complex");return gt(e.shape,r.shape,"real and imag shapes, "+e.shape+" and "+r.shape+", must match in call to tf.complex()."),ee.runKernelFunc((function(a){return a.complex(e,r)}),{$real:e,$imag:r})}}),Hr=Y({real_:function(t){var n=z(t,"input","real");return ee.runKernelFunc((function(e){return e.real(n)}),{$input:n})}}),xa=Y({imag_:function(t){var n=z(t,"input","imag");return ee.runKernelFunc((function(e){return e.imag(n)}),{$input:n})}});function On(t,n,e){return Zo(t,n,Qo(t,e),e)}function Zo(t,n,e,r){if(r==null&&(r=Yl(t)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Ea(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(n!=null){OE(n);var a=Ne(n),o=Ne(e);W(a===o,(function(){return"Based on the provided shape, ["+n+"], the tensor should have "+a+" values but has "+o}));for(var u=0;u<e.length;++u){var l=e[u],c=u!==e.length-1||l!==Ne(n.slice(u));W(e[u]===n[u]||!c,(function(){return"Error creating a new Tensor. Inferred shape ("+e+") does not match the provided shape ("+n+"). "}))}}return Ea(t)||Array.isArray(t)||(t=[t]),n=n||e,t=r!=="string"?NE(t,r,de().getBool("DEBUG")):nu(t,[],!0),ee.makeTensor(t,n,r)}function Ee(t,n){if((Ea(t)&&n!=="string"||Array.isArray(t))&&n!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(n==="string"&&Ea(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Zo(t,[],[],n)}function ln(t,n){cu(t);var e=Qo(t,n);if(e.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Zo(t,null,e,n)}function qo(t,n,e){if(cu(t),n!=null&&n.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=Qo(t,e);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Zo(t,n,r,e)}function my(t,n,e){if(cu(t),n!=null&&n.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=Qo(t,e);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Zo(t,n,r,e)}function rr(t,n,e){if(cu(t),n!=null&&n.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=Qo(t,e);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Zo(t,n,r,e)}function PF(t,n,e){if(cu(t),n!=null&&n.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=Qo(t,e);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Zo(t,n,r,e)}function LF(t,n,e){if(cu(t),n!=null&&n.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=Qo(t,e);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Zo(t,n=n||r,r,e)}function zF(t,n,e,r){return n===void 0&&(n=!0),ee.makeVariable(t,n,e,r)}function fu(t,n){if(n===void 0&&(n="float32"),n==="complex64"){var e=fu(t,"float32"),r=It(t,"float32");return kn(e,r)}var a=ME(Ne(t),n);return ee.makeTensor(a,t,n)}function It(t,n){if(n===void 0&&(n="float32"),n==="complex64"){var e=It(t,"float32"),r=It(t,"float32");return kn(e,r)}var a=Ql(Ne(t),n);return ee.makeTensor(a,t,n)}function _a(t,n,e){return ee.runKernelFunc((function(r){return r.fill(t,n,e)}),{})}function UF(t,n,e){if(e<=0)throw new Error("The number of values should be positive.");return ee.runKernelFunc((function(r){return r.linspace(t,n,e)}),{})}function pd(t,n,e,r){if(e===void 0&&(e=1),r===void 0&&(r="float32"),e===0)throw new Error("Cannot have a step of zero");if(t===n||t<n&&e<0||n<t&&e>1)return It([0],r);var a=Ql(Math.abs(Math.ceil((n-t)/e)),r);n<t&&e===1&&(e=-1),a[0]=t;for(var o=1;o<a.length;o++)a[o]=a[o-1]+e;return ln(a,r)}var UE=Y({onesLike_:function(t){var n=z(t,"x","onesLike");if(n.dtype==="complex64"){var e=UE(Hr(n)),r=it(xa(n));return kn(e,r)}return ee.runKernelFunc((function(a){return a.onesLike(n)}),{$x:n},(function(a,o){return{$x:function(){return it(a)}}}))}}),it=Y({zerosLike_:function(t){var n=z(t,"x","zerosLike");return ee.runKernelFunc((function(e){return e.zerosLike(n)}),{$x:n},(function(e,r){return{$x:function(){return it(e)}}}))}}),pn=Y({concat_:function(t,n){n===void 0&&(n=0),W(t.length>=1,(function(){return"Pass at least one tensor to concat"}));var e=hd(t,"tensors","concat");e[0].dtype==="complex64"&&e.forEach((function(l){if(l.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+l.dtype+". ")})),n=yn(n,e[0].shape)[0];var r=au(e.map((function(l){return l.shape})),n);if(Ne(r)===0)return On([],r);if((e=e.filter((function(l){return l.size>0}))).length===1)return e[0];var a=e.map((function(l){return l.shape}));FF(a,n);var o=e,u={axis:n};return ee.runKernelFunc((function(l){return l.concat(e,n)}),o,(function(l){var c=a.map((function(d){return d[n]}));return gy(l,c,n).map((function(d){return function(){return d}}))}),"Concat",u)}}),WF=Y({concat1d_:function(t){return pn(t,0)}}),HF=Y({concat2d_:function(t,n){return pn(t,n)}}),VF=Y({concat3d_:function(t,n){return pn(t,n)}}),jF=Y({concat4d_:function(t,n){return pn(t,n)}}),gy=Y({split_:function(t,n,e){e===void 0&&(e=0);var r,a=z(t,"x","split");return e=yn(e,a.shape)[0],typeof n=="number"?(W(a.shape[e]%n==0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(n).fill(a.shape[e]/n)):(W(a.shape[e]===n.reduce((function(o,u){return o+u})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=n),ee.runKernelFunc((function(o){return o.split(a,r,e)}),{$x:a},(function(o){return{$x:function(){return pn(o,e)}}}))}});function Wi(t,n){return t(n={exports:{}},n.exports),n.exports}var GF=Wi((function(t){(function(n,e,r){function a(l){var c,d=this,h=(c=4022871197,function(v){v=v.toString();for(var m=0;m<v.length;m++){var g=.02519603282416938*(c+=v.charCodeAt(m));g-=c=g>>>0,c=(g*=c)>>>0,c+=4294967296*(g-=c)}return 23283064365386963e-26*(c>>>0)});d.next=function(){var v=2091639*d.s0+23283064365386963e-26*d.c;return d.s0=d.s1,d.s1=d.s2,d.s2=v-(d.c=0|v)},d.c=1,d.s0=h(" "),d.s1=h(" "),d.s2=h(" "),d.s0-=h(l),d.s0<0&&(d.s0+=1),d.s1-=h(l),d.s1<0&&(d.s1+=1),d.s2-=h(l),d.s2<0&&(d.s2+=1),h=null}function o(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function u(l,c){var d=new a(l),h=c&&c.state,v=d.next;return v.int32=function(){return 4294967296*d.next()|0},v.double=function(){return v()+11102230246251565e-32*(2097152*v()|0)},v.quick=v,h&&(typeof h=="object"&&o(h,d),v.state=function(){return o(d,{})}),v}e&&e.exports?e.exports=u:this.alea=u})(0,t)})),qF=Wi((function(t){(function(n,e,r){function a(l){var c=this,d="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var v=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^v^v>>>8},l===(0|l)?c.x=l:d+=l;for(var h=0;h<d.length+64;h++)c.x^=0|d.charCodeAt(h),c.next()}function o(l,c){return c.x=l.x,c.y=l.y,c.z=l.z,c.w=l.w,c}function u(l,c){var d=new a(l),h=c&&c.state,v=function(){return(d.next()>>>0)/4294967296};return v.double=function(){do var m=((d.next()>>>11)+(d.next()>>>0)/4294967296)/2097152;while(m===0);return m},v.int32=d.next,v.quick=v,h&&(typeof h=="object"&&o(h,d),v.state=function(){return o(d,{})}),v}e&&e.exports?e.exports=u:this.xor128=u})(0,t)})),$F=Wi((function(t){(function(n,e,r){function a(l){var c=this,d="";c.next=function(){var v=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^v^v<<1)|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,l===(0|l)?c.x=l:d+=l;for(var h=0;h<d.length+64;h++)c.x^=0|d.charCodeAt(h),h==d.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function o(l,c){return c.x=l.x,c.y=l.y,c.z=l.z,c.w=l.w,c.v=l.v,c.d=l.d,c}function u(l,c){var d=new a(l),h=c&&c.state,v=function(){return(d.next()>>>0)/4294967296};return v.double=function(){do var m=((d.next()>>>11)+(d.next()>>>0)/4294967296)/2097152;while(m===0);return m},v.int32=d.next,v.quick=v,h&&(typeof h=="object"&&o(h,d),v.state=function(){return o(d,{})}),v}e&&e.exports?e.exports=u:this.xorwow=u})(0,t)})),KF=Wi((function(t){(function(n,e,r){function a(l){var c=this;c.next=function(){var d,h,v=c.x,m=c.i;return d=v[m],h=(d^=d>>>7)^d<<24,h^=(d=v[m+1&7])^d>>>10,h^=(d=v[m+3&7])^d>>>3,h^=(d=v[m+4&7])^d<<7,d=v[m+7&7],h^=(d^=d<<13)^d<<9,v[m]=h,c.i=m+1&7,h},(function(d,h){var v,m=[];if(h===(0|h))m[0]=h;else for(h=""+h,v=0;v<h.length;++v)m[7&v]=m[7&v]<<15^h.charCodeAt(v)+m[v+1&7]<<13;for(;m.length<8;)m.push(0);for(v=0;v<8&&m[v]===0;++v);for(v==8?m[7]=-1:m[v],d.x=m,d.i=0,v=256;v>0;--v)d.next()})(c,l)}function o(l,c){return c.x=l.x.slice(),c.i=l.i,c}function u(l,c){l==null&&(l=+new Date);var d=new a(l),h=c&&c.state,v=function(){return(d.next()>>>0)/4294967296};return v.double=function(){do var m=((d.next()>>>11)+(d.next()>>>0)/4294967296)/2097152;while(m===0);return m},v.int32=d.next,v.quick=v,h&&(h.x&&o(h,d),v.state=function(){return o(d,{})}),v}e&&e.exports?e.exports=u:this.xorshift7=u})(0,t)})),XF=Wi((function(t){(function(n,e,r){function a(l){var c=this;c.next=function(){var d,h,v=c.w,m=c.X,g=c.i;return c.w=v=v+1640531527|0,h=m[g+34&127],d=m[g=g+1&127],h^=h<<13,d^=d<<17,h^=h>>>15,d^=d>>>12,h=m[g]=h^d,c.i=g,h+(v^v>>>16)|0},(function(d,h){var v,m,g,b,x,S=[],C=128;for(h===(0|h)?(m=h,h=null):(h+="\0",m=0,C=Math.max(C,h.length)),g=0,b=-32;b<C;++b)h&&(m^=h.charCodeAt((b+32)%h.length)),b===0&&(x=m),m^=m<<10,m^=m>>>15,m^=m<<4,m^=m>>>13,b>=0&&(x=x+1640531527|0,g=(v=S[127&b]^=m+x)==0?g+1:0);for(g>=128&&(S[127&(h&&h.length||0)]=-1),g=127,b=512;b>0;--b)m=S[g+34&127],v=S[g=g+1&127],m^=m<<13,v^=v<<17,m^=m>>>15,v^=v>>>12,S[g]=m^v;d.w=x,d.X=S,d.i=g})(c,l)}function o(l,c){return c.i=l.i,c.w=l.w,c.X=l.X.slice(),c}function u(l,c){l==null&&(l=+new Date);var d=new a(l),h=c&&c.state,v=function(){return(d.next()>>>0)/4294967296};return v.double=function(){do var m=((d.next()>>>11)+(d.next()>>>0)/4294967296)/2097152;while(m===0);return m},v.int32=d.next,v.quick=v,h&&(h.X&&o(h,d),v.state=function(){return o(d,{})}),v}e&&e.exports?e.exports=u:this.xor4096=u})(0,t)})),YF=Wi((function(t){(function(n,e,r){function a(l){var c=this,d="";c.next=function(){var v=c.b,m=c.c,g=c.d,b=c.a;return v=v<<25^v>>>7^m,m=m-g|0,g=g<<24^g>>>8^b,b=b-v|0,c.b=v=v<<20^v>>>12^m,c.c=m=m-g|0,c.d=g<<16^m>>>16^b,c.a=b-v|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,l===Math.floor(l)?(c.a=l/4294967296|0,c.b=0|l):d+=l;for(var h=0;h<d.length+20;h++)c.b^=0|d.charCodeAt(h),c.next()}function o(l,c){return c.a=l.a,c.b=l.b,c.c=l.c,c.d=l.d,c}function u(l,c){var d=new a(l),h=c&&c.state,v=function(){return(d.next()>>>0)/4294967296};return v.double=function(){do var m=((d.next()>>>11)+(d.next()>>>0)/4294967296)/2097152;while(m===0);return m},v.int32=d.next,v.quick=v,h&&(typeof h=="object"&&o(h,d),v.state=function(){return o(d,{})}),v}e&&e.exports?e.exports=u:this.tychei=u})(0,t)})),_i=Wi((function(t){(function(n,e){var r,a=this,o=256,u=6,l="random",c=e.pow(o,u),d=e.pow(2,52),h=2*d,v=o-1;function m(C,_,R){var E=[],T=x((function O(I,B){var H,A=[],q=typeof I;if(B&&q=="object")for(H in I)try{A.push(O(I[H],B-1))}catch{}return A.length?A:q=="string"?I:I+"\0"})((_=_==1?{entropy:!0}:_||{}).entropy?[C,S(n)]:C??(function(){try{var O;return r&&(O=r.randomBytes)?O=O(o):(O=new Uint8Array(o),(a.crypto||a.msCrypto).getRandomValues(O)),S(O)}catch{var I=a.navigator,B=I&&I.plugins;return[+new Date,a,B,a.screen,S(n)]}})(),3),E),k=new g(E),N=function(){for(var O=k.g(u),I=c,B=0;O<d;)O=(O+B)*o,I*=o,B=k.g(1);for(;O>=h;)O/=2,I/=2,B>>>=1;return(O+B)/I};return N.int32=function(){return 0|k.g(4)},N.quick=function(){return k.g(4)/4294967296},N.double=N,x(S(k.S),n),(_.pass||R||function(O,I,B,H){return H&&(H.S&&b(H,k),O.state=function(){return b(k,{})}),B?(e[l]=O,I):O})(N,T,"global"in _?_.global:this==e,_.state)}function g(C){var _,R=C.length,E=this,T=0,k=E.i=E.j=0,N=E.S=[];for(R||(C=[R++]);T<o;)N[T]=T++;for(T=0;T<o;T++)N[T]=N[k=v&k+C[T%R]+(_=N[T])],N[k]=_;(E.g=function(O){for(var I,B=0,H=E.i,A=E.j,q=E.S;O--;)I=q[H=v&H+1],B=B*o+q[v&(q[H]=q[A=v&A+I])+(q[A]=I)];return E.i=H,E.j=A,B})(o)}function b(C,_){return _.i=C.i,_.j=C.j,_.S=C.S.slice(),_}function x(C,_){for(var R,E=C+"",T=0;T<E.length;)_[v&T]=v&(R^=19*_[v&T])+E.charCodeAt(T++);return S(_)}function S(C){return String.fromCharCode.apply(0,C)}if(e["seed"+l]=m,x(e.random(),n),t.exports){t.exports=m;try{r=require("crypto")}catch{}}})([],Math)}));_i.alea=GF,_i.xor128=qF,_i.xorwow=$F,_i.xorshift7=KF,_i.xor4096=XF,_i.tychei=YF;var Zd=_i.alea,yy=(function(){function t(n,e,r,a,o){this.mean=n,this.stdDev=e,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var u=o||Math.random();this.random=Zd(u.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var n=this.nextVal;return this.nextVal=NaN,n}for(var e,r,a=!1;!a;){var o=void 0,u=void 0,l=void 0;do l=(o=2*this.random()-1)*o+(u=2*this.random()-1)*u;while(l>=1||l===0);var c=Math.sqrt(-2*Math.log(l)/l);e=this.mean+this.stdDev*o*c,r=this.mean+this.stdDev*u*c,this.truncated&&!this.isValidTruncated(e)||(a=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(e)},t.prototype.convertValue=function(n){return this.dtype==null||this.dtype==="float32"?n:Math.round(n)},t.prototype.isValidTruncated=function(n){return n<=this.upper&&n>=this.lower},t})(),QF=(function(){function t(n,e,r,a){this.alpha=n,this.beta=1/e,this.dtype=r;var o=a||Math.random();this.randu=Zd(o.toString()),this.randn=new yy(0,1,r,!1,this.randu()),this.d=n<1?n+2/3:n-1/3,this.c=1/Math.sqrt(9*this.d)}return t.prototype.nextValue=function(){for(var n,e,r,a,o,u;;){do a=this.randn.nextValue(),u=1+this.c*a;while(u<=0);if(u*=u*u,e=1-.331*(n=a*a)*n,r=.5*n+this.d*(1-u+Math.log(u)),(o=this.randu())<e||Math.log(o)<r)break}return u=1/this.beta*this.d*u,this.alpha<1&&(u*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(u)},t.prototype.convertValue=function(n){return this.dtype==="float32"?n:Math.round(n)},t})(),ZF=(function(){function t(n,e,r,a){var o=this;if(n===void 0&&(n=0),e===void 0&&(e=1),this.canReturnFloat=function(){return o.dtype==null||o.dtype==="float32"},this.min=n,this.range=e-n,this.dtype=r,a==null&&(a=Math.random()),typeof a=="number"&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+n+" - "+e+" <= 1 and dtype is not float");this.random=Zd(a)}return t.prototype.convertValue=function(n){return this.canReturnFloat()?n:Math.round(n)},t.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},t})();function qe(t,n,e){return n===void 0&&(n="float32"),n=n||"float32",OE(t),new Ml(t,n,e)}function JF(t,n){n===void 0&&(n=!1),console.log(t.toString(n))}var WE=Y({batchToSpaceND_:function(t,n,e){var r=z(t,"x","batchToSpaceND"),a=n.reduce((function(o,u){return o*u}));return W(r.rank>=1+n.length,(function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+n.length})),W(e.length===n.length,(function(){return"crops.length is "+e.length+" but should be equal to blockShape.length  "+n.length})),W(r.shape[0]%a==0,(function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+n.join(" * ")+" === "+a})),ee.runKernelFunc((function(o){return o.batchToSpaceND(r,n,e)}),{$x:r},(function(o){return{$x:function(){return o.spaceToBatchND(n,e)}}}))}}),eP=Y({broadcastTo_:function(t,n){var e=z(t,"broadcastTo","x"),r=e.shape;if(n.some((function(c){return!(c>0)||c%1!=0})))throw new Error("broadcastTo(): Invalid broadcast shape ["+n+"].");if(n.length<e.rank)throw new Error("broadcastTo(): shape.length="+n.length+" < input.rank="+e.rank+".");if(n.length>e.rank){for(var a=e.shape.slice();a.length<n.length;)a.unshift(1);e=e.reshape(a)}for(var o=Array.from(n),u=n.length-1;u>=0;u--)if(e.shape[u]===n[u])o[u]=1;else if(e.shape[u]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+n+"].");var l=o.map((function(c,d){return c>1?d:-1})).filter((function(c){return c>=0}));return l.length===0?e.clone():ee.runKernelFunc((function(c){return c.tile(e,o)}),{input:e},(function(c){return{input:function(){return c.sum(l,!0)}}}))}}),tP=Y({cast_:function(t,n){var e=z(t,"x","cast");if(!$B(n))throw new Error("Failed to cast to unknown dtype "+n);if(n==="string"&&e.dtype!=="string"||n!=="string"&&e.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:n};return ee.runKernelFunc((function(a){return a.cast(e,n)}),{x:e},(function(a){return{x:function(){return a.clone()}}}),"Cast",r)}}),nP=Y({clone_:function(t){var n=z(t,"x","clone",null);return ee.runKernelFunc((function(){return ee.makeTensorFromDataId(n.dataId,n.shape,n.dtype)}),{$x:n},(function(e){return{$x:function(){return e.toFloat()}}}))}}),rP=Y({cumsum_:function(t,n,e,r){n===void 0&&(n=0),e===void 0&&(e=!1),r===void 0&&(r=!1);var a=z(t,"x","cumsum"),o=Na([n|=0],a.rank),u=a;o!=null&&(u=a.transpose(o));var l=Ma(1,a.rank)[0],c=ee.runKernelFunc((function(d){return d.cumsum(u,l,e,r)}),{permutedX:u},(function(d){return{permutedX:function(){return d.cumsum(n,e,!r)}}}));return o!=null&&(c=c.transpose(o)),c}}),aP=Y({depthToSpace_:function(t,n,e){e===void 0&&(e="NHWC");var r=z(t,"x","depthToSpace"),a=e==="NHWC"?r.shape[1]:r.shape[2],o=e==="NHWC"?r.shape[2]:r.shape[3],u=e==="NHWC"?r.shape[3]:r.shape[1];return W(a*n>=0,(function(){return`Negative dimension size caused by overflow when multiplying
      `+a+" and "+n+`  for depthToSpace with input shape
      `+r.shape})),W(o*n>=0,(function(){return`Negative dimension size caused by overflow when multiplying
      `+o+" and "+n+` for depthToSpace with input shape
          `+r.shape})),W(u%(n*n)==0,(function(){return"Dimension size must be evenly divisible by "+n*n+" but is "+u+" for depthToSpace with input shape "+r.shape})),ee.runKernelFunc((function(l){return l.depthToSpace(r,n,e)}),{$x:r})}}),Wr=Y({expandDims_:function(t,n){n===void 0&&(n=0);var e=z(t,"x","expandDims",null);W(n<=e.rank,(function(){return"Axis must be <= rank of the tensor"}));var r=e.shape.slice();return n<0&&(W(-(e.rank+1)<=n,(function(){return"Axis must be in the interval ["+-(e.rank+1)+", "+e.rank+"]"})),n=e.rank+n+1),r.splice(n,0,1),ta(e,r)}}),HE=Y({eye_:function(t,n,e,r){r===void 0&&(r="float32"),n==null&&(n=t);for(var a=qe([t,n],r),o=t<=n?t:n,u=0;u<o;++u)a.set(1,u,u);var l=a.toTensor().as2D(t,n);if(e==null)return l;if(e.length===1)return Ks(Wr(l,0),[e[0],1,1]);if(e.length===2)return Ks(Wr(Wr(l,0),0),[e[0],e[1],1,1]);if(e.length===3)return Ks(Wr(Wr(Wr(l,0),0),0),[e[0],e[1],e[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+e.length+"D.")}}),oP=Y({multinomial_:function(t,n,e,r){r===void 0&&(r=!1);var a=z(t,"logits","multinomial"),o=a.size,u=a.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+o+".");if(u>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+u);e=e||Math.random();var l=u===1?a.as2D(1,-1):a,c=ee.runKernelFunc((function(d){return d.multinomial(l,r,n,e)}),{logits2D:l});return u===1?c.as1D():c}}),mg=Y({oneHot_:function(t,n,e,r){if(e===void 0&&(e=1),r===void 0&&(r=0),n<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+n);var a=z(t,"indices","oneHot","int32"),o=a.shape.concat([n]);return a=a.flatten(),ee.runKernelFunc((function(u){return u.oneHot(a,n,e,r)}),{$indices:a},(function(u){return{$indices:function(){return It(a.shape,"float32")}}})).reshape(o)}}),Hi=Y({pad_:function(t,n,e){e===void 0&&(e=0);var r=z(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:n,constantValue:e};return ee.runKernelFunc((function(o){return o.pad(r,n,e)}),{x:r},(function(o){var u=n.map((function(l){return l[0]}));return{x:function(){return o.slice(u,r.shape)}}}),"PadV2",a)}}),iP=Y({pad1d_:function(t,n,e){return e===void 0&&(e=0),W(n.length===2,(function(){return"Invalid number of paddings. Must be length of 2."})),Hi(t,[n],e)}}),sP=Y({pad2d_:function(t,n,e){return e===void 0&&(e=0),W(n.length===2&&n[0].length===2&&n[1].length===2,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Hi(t,n,e)}}),uP=Y({pad3d_:function(t,n,e){return e===void 0&&(e=0),W(n.length===3&&n[0].length===2&&n[1].length===2&&n[2].length===2,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Hi(t,n,e)}}),lP=Y({pad4d_:function(t,n,e){return e===void 0&&(e=0),W(n.length===4&&n[0].length===2&&n[1].length===2&&n[2].length===2&&n[3].length===2,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Hi(t,n,e)}}),cP=Y({rand_:function(t,n,e){var r=Ne(t),a=null;if(e==null||e==="float32")a=new Float32Array(r);else if(e==="int32")a=new Int32Array(r);else{if(e!=="bool")throw new Error("Unknown data type "+e);a=new Uint8Array(r)}for(var o=0;o<r;o++)a[o]=n();return ee.makeTensor(a,t,e)}}),fP=Y({randomNormal_:function(t,n,e,r,a){if(n===void 0&&(n=0),e===void 0&&(e=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var o=new yy(n,e,r,!1,a),u=qe(t,r),l=0;l<u.values.length;l++)u.values[l]=o.nextValue();return u.toTensor()}}),dP=Y({randomGamma_:function(t,n,e,r,a){if(e===void 0&&(e=1),r===void 0&&(r="float32"),e==null&&(e=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var o=new QF(n,e,r,a),u=qe(t,r),l=0;l<u.values.length;l++)u.values[l]=o.nextValue();return u.toTensor()}}),VE=Y({randomUniform_:function(t,n,e,r,a){n===void 0&&(n=0),e===void 0&&(e=1),r===void 0&&(r="float32");for(var o=qe(t,r),u=new ZF(n,e,null,a),l=0;l<o.values.length;l++)o.values[l]=u.nextValue();return o.toTensor()}}),ta=Y({reshape_:function(t,n){var e=z(t,"x","reshape",null);n=GB(n,e.size),W(e.size===Ne(n),(function(){return"new shape and old shape must have the same number of elements."}));var r={shape:n};return ee.runKernelFunc((function(a){return a.reshape(e,n)}),{x:e},(function(a){return{x:function(){return a.reshape(e.shape)}}}),"Reshape",r)}}),jE=Y({spaceToBatchND_:function(t,n,e){var r=z(t,"x","spaceToBatchND");return W(r.rank>=1+n.length,(function(){return"input rank "+r.rank+" should be > than [blockShape] "+n.length})),W(e.length===n.length,(function(){return"paddings.shape[0] "+e.length+" must be equal to [blockShape] "+n.length})),W(r.shape.reduce((function(a,o,u){return u>0&&u<=n.length?a&&(o+e[u-1][0]+e[u-1][1])%n[u-1]==0:a}),!0),(function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+e.toString()+" must be divisible by blockShapes "+n.toString()})),ee.runKernelFunc((function(a){return a.spaceToBatchND(r,n,e)}),{$x:r},(function(a){return{$x:function(){return a.batchToSpaceND(n,e)}}}))}}),GE=Y({squeeze_:function(t,n){var e=z(t,"x","squeeze");return ta(e,Ti(e.shape,n).newShape)}}),_r=Y({stack_:function(t,n){n===void 0&&(n=0);var e=hd(t,"tensors","stack");if(W(e.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),e.length===1)return e[0].expandDims(n);var r=e[0].rank,a=e[0].shape,o=e[0].dtype;W(n<=r,(function(){return"Axis must be <= rank of the tensor"})),e.forEach((function(l){gt(a,l.shape,"All tensors passed to stack must have matching shapes")})),e.forEach((function(l){W(o===l.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var u=e.map((function(l){return l.expandDims(n)}));return pn(u,n)}}),Ks=Y({tile_:function(t,n){var e=z(t,"x","tile",null);W(e.rank===n.length,(function(){return"Error in transpose: rank of input "+e.rank+" must match length of reps "+n+"."}));var r=[e],a={reps:n};return ee.runKernelFunc((function(o,u){var l=o.tile(e,n);return u([e]),l}),{x:e},(function(o,u){var l=u[0];return{x:function(){var c=it(l);if(l.rank===1)for(var d=0;d<n[0];++d)c=c.add(o.slice([d*l.shape[0]],[l.shape[0]]));else if(l.rank===2)for(d=0;d<n[0];++d)for(var h=0;h<n[1];++h)c=c.add(o.slice([d*l.shape[0],h*l.shape[1]],[l.shape[0],l.shape[1]]));else if(l.rank===3)for(d=0;d<n[0];++d)for(h=0;h<n[1];++h)for(var v=0;v<n[2];++v)c=c.add(o.slice([d*l.shape[0],h*l.shape[1],v*l.shape[2]],[l.shape[0],l.shape[1],l.shape[2]]));else{if(l.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+l.rank+" tensors yet.");for(d=0;d<n[0];++d)for(h=0;h<n[1];++h)for(v=0;v<n[2];++v)for(var m=0;m<n[3];++m)c=c.add(o.slice([d*l.shape[0],h*l.shape[1],v*l.shape[2],m*l.shape[3]],[l.shape[0],l.shape[1],l.shape[2],l.shape[3]]))}return c}}}),"Tile",a,r)}}),hP=Y({truncatedNormal_:function(t,n,e,r,a){if(n===void 0&&(n=0),e===void 0&&(e=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var o=new yy(n,e,r,!0,a),u=qe(t,r),l=0;l<u.values.length;l++)u.values[l]=o.nextValue();return u.toTensor()}}),vn=Y({unstack_:function(t,n){n===void 0&&(n=0),n=n||0;var e=z(t,"x","unstack");W(n>=-e.shape.length&&n<e.shape.length,(function(){return"Axis = "+n+" is not in [-"+e.shape.length+", "+e.shape.length+")"})),n<0&&(n+=e.shape.length);var r={axis:n};return ee.runKernelFunc((function(a){return a.unstack(e,n)}),{x:e},(function(a){return{x:function(){return _r(a,n)}}}),"Unpack",r)}}),pP=function(t,n){return Ae(this,void 0,void 0,(function(){var e,r,a,o,u,l,c,d,h,v;return De(this,(function(m){switch(m.label){case 0:return e=z(t,"x","setdiff1d"),r=z(n,"y","setdiff1d"),W(e.dtype===r.dtype,(function(){return"x and y should have the same dtype, but got x ("+e.dtype+") and y ("+r.dtype+")."})),W(e.rank===1,(function(){return"x should be 1D tensor, but got x ("+e.shape+")."})),W(r.rank===1,(function(){return"y should be 1D tensor, but got y ("+r.shape+")."})),[4,e.data()];case 1:return a=m.sent(),[4,r.data()];case 2:for(o=m.sent(),u=new Set(o),l=0,h=0;h<a.length;h++)u.has(a[h])||l++;for(c=new Ml([l],e.dtype),d=new Ml([l],"int32"),h=0,v=0;h<a.length;h++)u.has(a[h])||(c.values[v]=a[h],d.values[v]=h,v++);return[2,[c.toTensor(),d.toTensor()]]}}))}))};function vd(t,n,e,r){r===void 0&&(r=!0);var a=[];if(r)(a=a.concat(n.slice(0))).push(t[0]/e),a=a.concat(t.slice(1));else{a=a.concat(t[0]);for(var o=n.length,u=0;u<o;++u)a=a.concat([t[u+1]/n[u],n[u]]);a=a.concat(t.slice(o+1))}return a}function md(t,n,e){e===void 0&&(e=!0);var r=[];if(e){r.push(n);for(var a=n+1;a<t;++a)a<=2*n?(r.push(a),r.push(a-(n+1))):r.push(a)}else{var o=[],u=[];for(a=1;a<t;++a)a>=2*n+1||a%2==1?u.push(a):o.push(a);r.push.apply(r,o),r.push(0),r.push.apply(r,u)}return r}function gd(t,n,e,r){r===void 0&&(r=!0);var a=[];r?a.push(t[0]/e):a.push(t[0]*e);for(var o=1;o<t.length;++o)o<=n.length?r?a.push(n[o-1]*t[o]):a.push(t[o]/n[o-1]):a.push(t[o]);return a}function qE(t,n){for(var e=[0],r=0;r<n;++r)e.push(t[r][0]);return e}function $E(t,n,e){for(var r=t.slice(0,1),a=0;a<e;++a)r.push(t[a+1]-n[a][0]-n[a][1]);return r}function KE(t,n){if(t.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+t.rank+".");if(n.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+n.rank+".");if(n.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+n.dtype+".");if(n.shape[n.rank-1]>t.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+n.shape[n.rank-1]+" vs. "+t.rank);if(t.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+t.shape+".");for(var e=n.shape,r=e[e.length-1],a=1,o=0;o<e.length-1;++o)a*=e[o];var u=t.shape,l=e.slice();l.pop();var c=1;for(o=r;o<t.rank;++o)c*=u[o],l.push(u[o]);var d=Ra(t.shape).map((function(h){return h/c})).concat([1]).slice(0,r);return[l,a,c,d]}var XE=30;function Cm(t){return t<=XE?t:cg(t,Math.floor(Math.sqrt(t)))}function vP(t,n,e){var r=n.rank>1?n.shape[n.rank-1]:1,a=n.rank>1?n.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+e.shape+", indices.shape: "+n.shape+", shape: "+t+", sliceDim: "+r+", and batchDim: "+a+".";if(e.rank<a)throw new Error(o+" update.rank < "+a+". ");if(t.length<r+(e.rank-a))throw new Error(o+" Output shape length < "+(r+(e.rank-a)));if(e.rank!==a+t.length-r)throw new Error(o+" update.rank != "+(a+t.length-r));for(var u=0;u<a;++u)if(e.shape[u]!==n.shape[u])throw new Error(o+" updates.shape["+u+"] ("+e.shape[u]+") != indices.shape["+u+"] ("+n.shape[u]+").");for(u=0;u<e.rank-a;++u)if(e.shape[u+a]!==t[u+r])throw new Error(o+" updates.shape["+(u+a)+"] ("+e.shape[u+a]+") != shape["+(u+a)+"] ("+t[u+a]+")")}function mP(t,n,e){if(n.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+n.rank+".");if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+t.rank+".");if(n.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+n.dtype);if(e.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+e);if(e.length===0){if(n.size===0)throw new Error("Indices specified for empty output. indices shape: "+n.shape);if(t.size===0)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}vP(e,n,t)}function yd(t,n,e){for(var r=n.shape.length,a=r>1?n.shape[r-1]:1,o=e.length,u=1,l=a;l<o;++l)u*=e[l];var c=a<1?1:a;return{sliceRank:a,numUpdates:Ne(n.shape)/c,sliceSize:u,strides:Ra(e.slice(0,a)).concat([1]),outputSize:Ne(e)}}function gP(t,n,e){W(t.rank===n.length,(function(){return"Error in slice"+t.rank+"D: Length of begin "+n+" must match the rank of the array ("+t.rank+")."})),W(t.rank===e.length,(function(){return"Error in slice"+t.rank+"D: Length of size "+e+" must match the rank of the array ("+t.rank+")."}));for(var r=function(o){W(n[o]+e[o]<=t.shape[o],(function(){return"Error in slice"+t.rank+"D: begin["+o+"] + size["+o+"] ("+(n[o]+e[o])+") would overflow input.shape["+o+"] ("+t.shape[o]+")"}))},a=0;a<t.rank;++a)r(a)}function fS(t){for(var n=[],e=0;t>0;)1&t&&n.push(e),t/=2,e++;return n}function by(t,n,e){for(var r=[],a=0;a<t.length;a++)r[a]=Math.ceil((n[a]-t[a])/e[a]);return r}function yP(t,n,e,r,a){var o=n[a],u=e[a]||1;(t&1<<a||o==null)&&(o=u>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var l=r[a];return o<0&&(o+=l),o=sg(0,o,l-1)}function bP(t,n,e,r,a){var o=n[a],u=e[a]||1;(t&1<<a||o==null)&&(o=u>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var l=r[a];return o<0&&(o+=l),o=u>0?sg(0,o,l):sg(-1,o,l-1)}function YE(t,n,e){for(var r=e.length,a=0;a<e.length;a++)if(e[a]>1){r=a;break}for(a=r+1;a<e.length;a++)if(n[a]>0||e[a]!==t[a])return!1;return!0}function QE(t,n){for(var e=t.length>0?t[t.length-1]:1,r=0;r<t.length-1;r++)e+=t[r]*n[r];return e}function xP(t,n){W(lg(t),(function(){return"The f passed in variableGrads(f) must be a function"})),W(n==null||Array.isArray(n)&&n.every((function(h){return h instanceof ru})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var e=n!=null;if(!e)for(var r in n=[],ee.registeredVariables)n.push(ee.registeredVariables[r]);var a=e?n.filter((function(h){return!h.trainable})):null,o=n.length;W((n=n.filter((function(h){return h.trainable}))).length>0,(function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+o+" variables is trainable."}));var u=ee.gradients(t,n,null,!0),l=u.value,c=u.grads;W(c.some((function(h){return h!=null})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),W(l.rank===0,(function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+l.rank+" tensor"}));var d={};return n.forEach((function(h,v){c[v]!=null&&(d[h.name]=c[v])})),a?.forEach((function(h){return d[h.name]=null})),{value:l,grads:d}}function Jd(t){return ee.customGrad(t)}var co=Y({softmax_:function(t,n){n===void 0&&(n=-1);var e=z(t,"logits","softmax","float32");if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+e.rank+" and dim was "+n);return ee.runKernelFunc((function(r,a){var o=r.softmax(e,n);return a([o]),o}),{logits:e},(function(r,a){var o=a[0],u=r.mul(o);return{logits:function(){return u.sub(u.sum([n],!0).mul(o))}}}),"Softmax",{dim:n},[],[!0])}}),wP=Y({logSoftmax_:function(t,n){n===void 0&&(n=-1);var e=z(t,"logits","logSoftmax");if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+e.rank+" and axis was "+n);return Jd((function(r,a){var o=r.max(n,!0),u=r.sub(o),l=u.toFloat().sub(u.exp().sum(n,!0).log());return a([l]),{value:l,gradFunc:function(c,d){var h=d[0].exp();return c.sub(c.sum(n,!0).mul(h))}}}))(e)}}),ZE=(function(){function t(n,e){this.backend=n,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}return t.prototype.get=function(n){return this.data.has(n)||this.dataMover.moveData(this.backend,n),this.data.get(n)},t.prototype.set=function(n,e){this.dataIdsCount++,this.data.set(n,e)},t.prototype.has=function(n){return this.data.has(n)},t.prototype.delete=function(n){return this.dataIdsCount--,this.data.delete(n)},t.prototype.numDataIds=function(){return this.dataIdsCount},t})(),JE=(function(){function t(){}return t.prototype.time=function(n){return ie("time")},t.prototype.read=function(n){return ie("read")},t.prototype.readSync=function(n){return ie("readSync")},t.prototype.numDataIds=function(){return ie("numDataIds")},t.prototype.disposeData=function(n){return ie("disposeData")},t.prototype.write=function(n,e,r){return ie("write")},t.prototype.move=function(n,e,r,a){return ie("move")},t.prototype.memory=function(){return ie("memory")},t.prototype.floatPrecision=function(){return ie("floatPrecision")},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.batchMatMul=function(n,e,r,a){return ie("batchMatMul")},t.prototype.fusedBatchMatMul=function(n){return n.a,n.b,n.transposeA,n.transposeB,n.bias,n.activation,n.preluActivationWeights,ie("fusedBatchMatMul")},t.prototype.slice=function(n,e,r){return ie("slice")},t.prototype.stridedSlice=function(n,e,r,a){return ie("stridedSlice")},t.prototype.unstack=function(n,e){return ie("unstack")},t.prototype.reverse=function(n,e){return ie("reverse")},t.prototype.concat=function(n,e){return ie("concat")},t.prototype.neg=function(n){return ie("neg")},t.prototype.add=function(n,e){return ie("add")},t.prototype.addN=function(n){return ie("addN")},t.prototype.subtract=function(n,e){return ie("subtract")},t.prototype.multiply=function(n,e){return ie("multiply")},t.prototype.realDivide=function(n,e){return ie("realDivide")},t.prototype.floorDiv=function(n,e){return ie("floorDiv")},t.prototype.sum=function(n,e){return ie("sum")},t.prototype.prod=function(n,e){return ie("prod")},t.prototype.unsortedSegmentSum=function(n,e,r){return ie("unsortedSegmentSum")},t.prototype.argMin=function(n,e){return ie("argMin")},t.prototype.argMax=function(n,e){return ie("argMax")},t.prototype.equal=function(n,e){return ie("equal")},t.prototype.notEqual=function(n,e){return ie("notEqual")},t.prototype.less=function(n,e){return ie("less")},t.prototype.lessEqual=function(n,e){return ie("lessEqual")},t.prototype.greater=function(n,e){return ie("greater")},t.prototype.greaterEqual=function(n,e){return ie("greaterEqual")},t.prototype.logicalNot=function(n){return ie("logicalNot")},t.prototype.logicalAnd=function(n,e){return ie("logicalAnd")},t.prototype.logicalOr=function(n,e){return ie("logicalOr")},t.prototype.where=function(n){return ie("where")},t.prototype.select=function(n,e,r){return ie("select")},t.prototype.topk=function(n,e,r){return ie("topk")},t.prototype.min=function(n,e){return ie("min")},t.prototype.minimum=function(n,e){return ie("minimum")},t.prototype.mod=function(n,e){return ie("mod")},t.prototype.max=function(n,e){return ie("max")},t.prototype.maximum=function(n,e){return ie("maximum")},t.prototype.all=function(n,e){return ie("all")},t.prototype.any=function(n,e){return ie("any")},t.prototype.squaredDifference=function(n,e){return ie("squaredDifference")},t.prototype.ceil=function(n){return ie("ceil")},t.prototype.floor=function(n){return ie("floor")},t.prototype.round=function(n){return ie("round")},t.prototype.sign=function(n){return ie("sign")},t.prototype.isNaN=function(n){return ie("isNaN")},t.prototype.isInf=function(n){return ie("isInf")},t.prototype.isFinite=function(n){return ie("isFinite")},t.prototype.pow=function(n,e){return ie("pow")},t.prototype.exp=function(n){return ie("exp")},t.prototype.expm1=function(n){return ie("expm1")},t.prototype.softmax=function(n,e){return ie("softmax")},t.prototype.log=function(n){return ie("log")},t.prototype.log1p=function(n){return ie("log1p")},t.prototype.sqrt=function(n){return ie("sqrt")},t.prototype.rsqrt=function(n){return ie("rsqrt")},t.prototype.square=function(n){return ie("square")},t.prototype.reciprocal=function(n){return ie("reciprocal")},t.prototype.relu=function(n){return ie("relu")},t.prototype.relu6=function(n){return ie("relu6")},t.prototype.prelu=function(n,e){return ie("prelu")},t.prototype.elu=function(n){return ie("elu")},t.prototype.eluDer=function(n,e){return ie("eluDer")},t.prototype.selu=function(n){return ie("selu")},t.prototype.int=function(n){return ie("int")},t.prototype.clip=function(n,e,r){return ie("clip")},t.prototype.abs=function(n){return ie("abs")},t.prototype.complexAbs=function(n){return ie("complexAbs")},t.prototype.sigmoid=function(n){return ie("sigmoid")},t.prototype.softplus=function(n){return ie("softplus")},t.prototype.sin=function(n){return ie("sin")},t.prototype.cos=function(n){return ie("cos")},t.prototype.tan=function(n){return ie("tan")},t.prototype.asin=function(n){return ie("asin")},t.prototype.acos=function(n){return ie("acos")},t.prototype.atan=function(n){return ie("atan")},t.prototype.atan2=function(n,e){return ie("atan2")},t.prototype.sinh=function(n){return ie("sinh")},t.prototype.cosh=function(n){return ie("cosh")},t.prototype.tanh=function(n){return ie("tanh")},t.prototype.asinh=function(n){return ie("asinh")},t.prototype.acosh=function(n){return ie("acosh")},t.prototype.atanh=function(n){return ie("atanh")},t.prototype.erf=function(n){return ie("erf")},t.prototype.step=function(n,e){return ie("step")},t.prototype.fusedConv2d=function(n){return n.input,n.filter,n.convInfo,n.bias,n.activation,n.preluActivationWeights,ie("fusedConv2d")},t.prototype.conv2d=function(n,e,r){return ie("conv2d")},t.prototype.conv2dDerInput=function(n,e,r){return ie("conv2dDerInput")},t.prototype.conv2dDerFilter=function(n,e,r){return ie("conv2dDerFilter")},t.prototype.fusedDepthwiseConv2D=function(n){return n.input,n.filter,n.convInfo,n.bias,n.activation,n.preluActivationWeights,ie("fusedDepthwiseConv2D")},t.prototype.depthwiseConv2D=function(n,e,r){return ie("depthwiseConv2D")},t.prototype.depthwiseConv2DDerInput=function(n,e,r){return ie("depthwiseConv2DDerInput")},t.prototype.depthwiseConv2DDerFilter=function(n,e,r){return ie("depthwiseConv2DDerFilter")},t.prototype.conv3d=function(n,e,r){return ie("conv3d")},t.prototype.conv3dDerInput=function(n,e,r){return ie("conv3dDerInput")},t.prototype.conv3dDerFilter=function(n,e,r){return ie("conv3dDerFilter")},t.prototype.maxPool=function(n,e){return ie("maxPool")},t.prototype.maxPoolBackprop=function(n,e,r,a){return ie("maxPoolBackprop")},t.prototype.avgPool=function(n,e){return ie("avgPool")},t.prototype.avgPoolBackprop=function(n,e,r){return ie("avgPoolBackprop")},t.prototype.avgPool3d=function(n,e){return ie("avgPool3d")},t.prototype.avgPool3dBackprop=function(n,e,r){return ie("avgPool3dBackprop")},t.prototype.maxPool3d=function(n,e){return ie("maxPool3d")},t.prototype.maxPool3dBackprop=function(n,e,r,a){return ie("maxPool3dBackprop")},t.prototype.reshape=function(n,e){return ie("reshape")},t.prototype.cast=function(n,e){return ie("cast")},t.prototype.tile=function(n,e){return ie("tile")},t.prototype.pad=function(n,e,r){return ie("pad")},t.prototype.transpose=function(n,e){return ie("transpose")},t.prototype.gather=function(n,e,r){return ie("gather")},t.prototype.gatherND=function(n,e){return ie("gatherND")},t.prototype.scatterND=function(n,e,r){return ie("scatterND")},t.prototype.batchToSpaceND=function(n,e,r){return ie("batchToSpaceND")},t.prototype.spaceToBatchND=function(n,e,r){return ie("spaceToBatchND")},t.prototype.resizeBilinear=function(n,e,r,a){return ie("resizeBilinear")},t.prototype.resizeBilinearBackprop=function(n,e,r){return ie("resizeBilinearBackprop")},t.prototype.resizeNearestNeighbor=function(n,e,r,a){return ie("resizeNearestNeighbor")},t.prototype.resizeNearestNeighborBackprop=function(n,e,r){return ie("resizeNearestNeighborBackprop")},t.prototype.batchNormalization=function(n,e,r,a,o,u){return ie("batchNormalization")},t.prototype.localResponseNormalization4D=function(n,e,r,a,o){return ie("localResponseNormalization4D")},t.prototype.LRNGrad=function(n,e,r,a,o,u,l){return ie("LRNGrad")},t.prototype.multinomial=function(n,e,r,a){return ie("multinomial")},t.prototype.oneHot=function(n,e,r,a){return ie("oneHot")},t.prototype.cumsum=function(n,e,r,a){return ie("cumsum")},t.prototype.nonMaxSuppression=function(n,e,r,a,o){return ie("nonMaxSuppression")},t.prototype.fft=function(n){return ie("fft")},t.prototype.ifft=function(n){return ie("ifft")},t.prototype.complex=function(n,e){return ie("complex")},t.prototype.real=function(n){return ie("real")},t.prototype.imag=function(n){return ie("imag")},t.prototype.cropAndResize=function(n,e,r,a,o,u){return ie("cropAndResize")},t.prototype.depthToSpace=function(n,e,r){return ie("depthToSpace")},t.prototype.split=function(n,e,r){return ie("split")},t.prototype.sparseToDense=function(n,e,r,a){return ie("sparseToDense")},t.prototype.diag=function(n){return ie("diag")},t.prototype.fill=function(n,e,r){return ie("fill")},t.prototype.onesLike=function(n){return ie("onesLike")},t.prototype.zerosLike=function(n){return ie("zerosLike")},t.prototype.linspace=function(n,e,r){return ie("linspace")},t.prototype.dispose=function(){return ie("dispose")},t})();function ie(t){throw new Error("'"+t+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function Ho(t,n){for(var e=t.length,r=[],a=0;a<e;a++){var o=e-1-a,u=t[o]||1;(n[n.length-1-a]||1)>1&&u===1&&r.unshift(o)}return r}function mn(t,n){for(var e=[],r=0;r<n.length;r++){var a=t[t.length-r-1],o=n.length-r-1,u=n[o];(a==null||a===1&&u>1)&&e.unshift(o)}return e}function nt(t,n){for(var e=[],r=Math.max(t.length,n.length),a=0;a<r;a++){var o=t[t.length-a-1];o==null&&(o=1);var u=n[n.length-a-1];if(u==null&&(u=1),o===1)e.unshift(u);else if(u===1)e.unshift(o);else{if(o!==u)throw Error("Operands could not be broadcast together with shapes "+t+" and "+n+".");e.unshift(o)}}return e}function Il(t,n,e,r,a,o,u){u===void 0&&(u="channelsLast");var l,c=wd(n),d=c[0],h=c[1];if(u==="channelsLast")l=[d,h,t[3],t[3]];else{if(u!=="channelsFirst")throw new Error("Unknown dataFormat "+u);l=[d,h,t[1],t[1]]}return Vi(t,l,e,r,a,o,!1,u)}function bd(t,n,e,r,a,o,u){u===void 0&&(u="NDHWC");var l,c,d=gg(n),h=d[0],v=d[1],m=d[2];if(u==="NDHWC")c="channelsLast",l=[h,v,m,t[4],t[4]];else{if(u!=="NCDHW")throw new Error("Unknown dataFormat "+u);c="channelsFirst",l=[h,v,m,t[1],t[1]]}return xd(t,l,e,r,a,!1,c,o)}function Vi(t,n,e,r,a,o,u,l){u===void 0&&(u=!1),l===void 0&&(l="channelsLast");var c=[-1,-1,-1,-1],d=c[0],h=c[1],v=c[2],m=c[3];if(l==="channelsLast")d=t[0],h=t[1],v=t[2],m=t[3];else{if(l!=="channelsFirst")throw new Error("Unknown dataFormat "+l);d=t[0],m=t[1],h=t[2],v=t[3]}var g,b=n[0],x=n[1],S=n[3],C=wd(e),_=C[0],R=C[1],E=wd(r),T=E[0],k=E[1],N=Xs(b,T),O=Xs(x,k),I=(function(V,j,P,$,Q,U,G,M){var K,Z,oe;if(typeof V=="number"){K={top:V,bottom:V,left:V,right:V,type:V===0?"VALID":"NUMBER"};var pe=(function(we,Re,Me,Se,Fe){Se==null&&(Se=eR(we,Re,Me));var He=we[0],vt=we[1],ut=El((He-Re+2*Se)/Me+1,Fe);W(Jt(ut),(function(){return"The output # of rows ("+ut+") must be an integer. Change the stride and/or zero pad parameters"}));var yt=El((vt-Re+2*Se)/Me+1,Fe);return W(Jt(yt),(function(){return"The output # of columns ("+yt+") must be an integer. Change the stride and/or zero pad parameters"})),[ut,yt]})([j,P],U,$,V,M);Z=pe[0],oe=pe[1]}else if(V==="same"){Z=Math.ceil(j/$),oe=Math.ceil(P/Q);var ge=Math.max(0,(Z-1)*$+U-j),xe=Math.max(0,(oe-1)*Q+G-P),Ce=Math.floor(ge/2),he=ge-Ce,be=Math.floor(xe/2);K={top:Ce,bottom:he,left:be,right:xe-be,type:"SAME"}}else{if(V!=="valid")throw Error("Unknown padding parameter: "+V);K={top:0,bottom:0,left:0,right:0,type:"VALID"},Z=Math.ceil((j-U+1)/$),oe=Math.ceil((P-G+1)/Q)}return{padInfo:K,outHeight:Z,outWidth:oe}})(a,h,v,_,R,N,O,o),B=I.padInfo,H=I.outHeight,A=I.outWidth,q=u?S*m:S;return l==="channelsFirst"?g=[d,q,H,A]:l==="channelsLast"&&(g=[d,H,A,q]),{batchSize:d,dataFormat:l,inHeight:h,inWidth:v,inChannels:m,outHeight:H,outWidth:A,outChannels:q,padInfo:B,strideHeight:_,strideWidth:R,filterHeight:b,filterWidth:x,effectiveFilterHeight:N,effectiveFilterWidth:O,dilationHeight:T,dilationWidth:k,inShape:t,outShape:g,filterShape:n}}function xd(t,n,e,r,a,o,u,l){o===void 0&&(o=!1),u===void 0&&(u="channelsLast");var c=[-1,-1,-1,-1,-1],d=c[0],h=c[1],v=c[2],m=c[3],g=c[4];if(u==="channelsLast")d=t[0],h=t[1],v=t[2],m=t[3],g=t[4];else{if(u!=="channelsFirst")throw new Error("Unknown dataFormat "+u);d=t[0],g=t[1],h=t[2],v=t[3],m=t[4]}var b,x=n[0],S=n[1],C=n[2],_=n[4],R=gg(e),E=R[0],T=R[1],k=R[2],N=gg(r),O=N[0],I=N[1],B=N[2],H=Xs(x,O),A=Xs(S,I),q=Xs(C,B),V=(function(G,M,K,Z,oe,pe,ge,xe,Ce,he,be){var we,Re,Me,Se;if(typeof G=="number"){we={top:G,bottom:G,left:G,right:G,front:G,back:G,type:G===0?"VALID":"NUMBER"};var Fe=(function(Ye,In,$n,En,nn,Ar){nn==null&&(nn=eR(Ye,In,En));var Kr=Ye[0],Tt=Ye[1],cr=Ye[2],Bn=El((Kr-In+2*nn)/En+1,Ar);W(Jt(Bn),(function(){return"The output # of depths ("+Bn+") must be an integer. Change the stride and/or zero pad parameters"}));var Yt=El((Tt-In+2*nn)/En+1,Ar);W(Jt(Yt),(function(){return"The output # of rows ("+Yt+") must be an integer. Change the stride and/or zero pad parameters"}));var Xn=El((cr-In+2*nn)/En+1,Ar);return W(Jt(Xn),(function(){return"The output # of columns ("+Xn+") must be an integer. Change the stride and/or zero pad parameters"})),[Bn,Yt,Xn,$n]})([M,K,Z,1],xe,1,oe,G,be);Re=Fe[0],Me=Fe[1],Se=Fe[2]}else if(G==="same"){Re=Math.ceil(M/oe),Me=Math.ceil(K/pe),Se=Math.ceil(Z/ge);var He=(Re-1)*oe+xe-M,vt=(Me-1)*pe+Ce-K,ut=(Se-1)*ge+he-Z,yt=Math.floor(He/2),jt=He-yt,st=Math.floor(vt/2),Pe=vt-st,cn=Math.floor(ut/2);we={top:st,bottom:Pe,left:cn,right:ut-cn,front:yt,back:jt,type:"SAME"}}else{if(G!=="valid")throw Error("Unknown padding parameter: "+G);we={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},Re=Math.ceil((M-xe+1)/oe),Me=Math.ceil((K-Ce+1)/pe),Se=Math.ceil((Z-he+1)/ge)}return{padInfo:we,outDepth:Re,outHeight:Me,outWidth:Se}})(a,h,v,m,E,T,k,H,A,q,l),j=V.padInfo,P=V.outDepth,$=V.outHeight,Q=V.outWidth,U=o?_*g:_;return u==="channelsFirst"?b=[d,U,P,$,Q]:u==="channelsLast"&&(b=[d,P,$,Q,U]),{batchSize:d,dataFormat:u,inDepth:h,inHeight:v,inWidth:m,inChannels:g,outDepth:P,outHeight:$,outWidth:Q,outChannels:U,padInfo:j,strideDepth:E,strideHeight:T,strideWidth:k,filterDepth:x,filterHeight:S,filterWidth:C,effectiveFilterDepth:H,effectiveFilterHeight:A,effectiveFilterWidth:q,dilationDepth:O,dilationHeight:I,dilationWidth:B,inShape:t,outShape:b,filterShape:n}}function eR(t,n,e,r){r===void 0&&(r=1);var a=Xs(n,r);return Math.floor((t[0]*(e-1)-e+a)/2)}function wd(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function gg(t){return typeof t=="number"?[t,t,t]:t}function Xs(t,n){return n<=1?t:t+(t-1)*(n-1)}function El(t,n){if(!n)return t;switch(n){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+n)}}function ou(t){var n=wd(t),e=n[0],r=n[1],a=n[2];return e===1&&r===1&&a===1}function lr(t,n){return ou(t)||ou(n)}function xy(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+t)}function tR(t,n,e){if(n==="complex64"){if(t.dtype==="complex64")return t.clone();var r=It(t.shape),a=t.toFloat(),o=e.complex(a,r);return r.dispose(),a.dispose(),o}if(!KB(t.dtype,n))return ee.makeTensorFromDataId(t.dataId,t.shape,n);if(t.dtype==="complex64"){var u=e.real(t);return o=u.cast(n),u.dispose(),o}if(n==="int32")return e.int(t);if(n==="bool"){var l=Ee(0,t.dtype);return o=e.notEqual(t,l),l.dispose(),o}throw new Error("Error in Cast: failed to cast "+t.dtype+" to "+n)}function yg(t,n){return ee.makeTensorFromDataId(t.dataId,n,t.dtype)}function nR(t,n,e){var r=(n-t)/(e-1),a=Ql(e,"float32");a[0]=t;for(var o=1;o<a.length;o++)a[o]=a[o-1]+r;return ln(a,"float32")}function bg(t,n){if(t.length!==n.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+t.length+", imag: "+n.length+".");for(var e=new Float32Array(2*t.length),r=0;r<e.length;r+=2)e[r]=t[r/2],e[r+1]=n[r/2];return e}function dS(t,n){return{real:t[2*n],imag:t[2*n+1]}}function SP(t,n,e,r){t[2*r]=n,t[2*r+1]=e}function CP(t,n,e){var r=(e?2:-2)*Math.PI*(t/n);return{real:Math.cos(r),imag:Math.sin(r)}}function EP(t,n,e){var r=(function(o,u,l){return(function(c,d,h){for(var v=0,m=c.length,g=0,b=!1;v<m;){var x=h(d,c[g=v+(m-v>>>1)]);x>0?v=g+1:(m=g,b=!x)}return b?v:-v-1})(o,u,l||RP)})(t,n,e),a=r<0?-(r+1):r;t.splice(a,0,n)}function RP(t,n){return t>n?1:t<n?-1:0}function wy(t,n,e,r,a){return rR(t,n,e,r,a,0).selectedIndices}function Sy(t,n,e,r,a,o){var u=rR(t,n,e,r,a,o);return u.numValidOutputs.dispose(),{selectedIndices:u.selectedIndices,selectedScores:u.selectedScores}}function rR(t,n,e,r,a,o,u,l){l===void 0&&(l=!1);for(var c=Array.from(n).map((function(E,T){return{score:E,boxIndex:T,suppressBeginIndex:0}})).filter((function(E){return E.score>a})).sort(hS),d=o>0?-.5/o:0,h=[],v=[];h.length<e&&c.length>0;){var m=c.pop(),g=m.score,b=m.boxIndex,x=m.suppressBeginIndex;if(g<a)break;for(var S=!1,C=h.length-1;C>=x;--C){var _=_P(t,b,h[C]);if(_>=r){S=!0;break}if(m.score=m.score*TP(r,d,_),m.score<=a)break}m.suppressBeginIndex=h.length,S||(m.score===g?(h.push(b),v.push(m.score)):m.score>a&&EP(c,m,hS))}var R=h.length;return l&&(h.fill(0,R),v.fill(0,R)),{selectedIndices:ln(h,"int32"),selectedScores:ln(v,"float32"),numValidOutputs:Ee(R,"int32")}}function _P(t,n,e){var r=t.subarray(4*n,4*n+4),a=t.subarray(4*e,4*e+4),o=Math.min(r[0],r[2]),u=Math.min(r[1],r[3]),l=Math.max(r[0],r[2]),c=Math.max(r[1],r[3]),d=Math.min(a[0],a[2]),h=Math.min(a[1],a[3]),v=Math.max(a[0],a[2]),m=Math.max(a[1],a[3]),g=(l-o)*(c-u),b=(v-d)*(m-h);if(g<=0||b<=0)return 0;var x=Math.max(o,d),S=Math.max(u,h),C=Math.min(l,v),_=Math.min(c,m),R=Math.max(C-x,0)*Math.max(_-S,0);return R/(g+b-R)}function TP(t,n,e){var r=Math.exp(n*e*e);return e<=t?r:0}function hS(t,n){return t.score-n.score||t.score===n.score&&n.boxIndex-t.boxIndex}function aR(t,n,e){var r=new Array(t.rank).fill(0),a=t.shape.slice();return n.map((function(o){a[e]=o;var u=t.slice(r,a);return r[e]+=o,u}))}function oR(t,n){for(var e=new Array(t.rank),r=0;r<e.length;r++)e[r]=t.shape[r]*n[r];var a=qe(e,t.dtype);for(r=0;r<a.values.length;++r){for(var o=a.indexToLoc(r),u=new Array(t.rank),l=0;l<u.length;l++)u[l]=o[l]%t.shape[l];var c=t.locToIndex(u);a.values[r]=t.values[c]}return a.toTensor()}function iR(t,n,e,r,a){for(var o=n[n.length-1],u=[t.length/o,o],l=u[0],c=u[1],d=Nl(e,l*r),h=Nl("int32",l*r),v=0;v<l;v++){for(var m=v*c,g=t.subarray(m,m+c),b=[],x=0;x<g.length;x++)b.push({value:g[x],index:x});b.sort((function(E,T){return T.value-E.value}));var S=v*r,C=d.subarray(S,S+r),_=h.subarray(S,S+r);for(x=0;x<r;x++)C[x]=b[x].value,_[x]=b[x].index}var R=n.slice();return R[R.length-1]=r,[On(d,R,e),On(h,R,"int32")]}function Cy(t,n){for(var e=[],r=0;r<n.length;r++)n[r]&&e.push(r);var a=qe(t,"int32"),o=qe([e.length,t.length],"int32");for(r=0;r<e.length;r++){var u=a.indexToLoc(e[r]),l=r*t.length;o.values.set(u,l)}return o.toTensor()}var AP=function(t,n){this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(a,o){return"T"+o}));var e=[];this.variableNames.forEach((function(a){e.push("float v"+a+" = get"+a+"AtOutCoords();")}));var r=this.variableNames.map((function(a){return"v"+a})).join(" + ");this.userCode=`
      void main() {
        `+e.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},DP=function(t,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(a,o){return"T"+o}));var e=[];this.variableNames.forEach((function(a){e.push("vec4 v"+a+" = get"+a+"AtOutCoords();")}));var r=this.variableNames.map((function(a){return"v"+a})).join(" + ");this.userCode=`
      void main() {
        `+e.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},kP=function(t,n,e){this.variableNames=["A"];var r=t.windowSize,a=t.batchSize,o=t.inSize,u=Math.ceil(o/r);e||this.variableNames.push("bestIndicesA"),this.outputShape=[a,u];var l=n==="max"?">":"<",c=e?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+c+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+l+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function sR(t,n){return["x","y","z","w","u","v"].slice(0,n).map((function(e){return t+"."+e}))}function ar(t,n){return n===1?[t]:sR(t,n)}function Hn(){var t,n,e,r,a,o,u,l,c,d;return de().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",n="in",e="out",r="in",a="texture",o="outputColor",u="out vec4 outputColor;",l=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,c="",d=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",n="attribute",e="varying",r="varying",a="texture2D",o="gl_FragColor",u="",l=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,c=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,d=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:n,varyingVs:e,varyingFs:r,texture2D:a,output:o,defineOutput:u,defineSpecialNaN:l,defineSpecialInf:c,defineRound:d}}function ki(t,n,e){e===void 0&&(e="index");var r=Ra(n);return r.map((function(a,o){return"int "+t[o]+" = "+e+" / "+a+"; "+(o===r.length-1?"int "+t[o+1]+" = "+e+" - "+t[o]+" * "+a:"index -= "+t[o]+" * "+a)+";"})).join("")}function Ey(t){var n=Ra(t).map((function(e){return e.toString()}));return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+n[0]+" + coords.y * "+n[1]+` + coords.z;
  }
`}var uR=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function NP(t,n,e,r){var a=[];t.forEach((function(g){var b=Ne(g.shapeInfo.logicalShape);g.shapeInfo.isUniform?a.push("uniform float "+g.name+(b>1?"["+b+"]":"")+";"):(a.push("uniform sampler2D "+g.name+";"),a.push("uniform int offset"+g.name+";"))}));var o,u,l=a.join(`
`),c=t.map((function(g){return(function(b,x,S){S===void 0&&(S=!1);var C="";C+=S?lR(b):Ws(b);var _=b.shapeInfo.logicalShape,R=x.logicalShape;return _.length<=R.length&&(C+=S?(function(E,T){var k,N=E.name,O=N.charAt(0).toUpperCase()+N.slice(1),I="get"+O+"AtOutCoords",B=E.shapeInfo.logicalShape.length,H=T.logicalShape.length,A=Ho(E.shapeInfo.logicalShape,T.logicalShape),q=kt(H),V=H-B,j=["x","y","z","w","u","v"];k=B===0?"":H<2&&A.length>=1?"coords = 0;":A.map((function(K){return"coords."+j[K+V]+" = 0;"})).join(`
`);var P="";P=H<2&&B>0?"coords":E.shapeInfo.logicalShape.map((function(K,Z){return"coords."+j[Z+V]})).join(", ");var $="return outputValue;",Q=Ne(E.shapeInfo.logicalShape)===1,U=Ne(T.logicalShape)===1;if(B!==1||Q||U){if(Q&&!U)$=H===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(A.length){var G=B-2,M=B-1;A.indexOf(G)>-1&&A.indexOf(M)>-1?$="return vec4(outputValue.x);":A.indexOf(G)>-1?$="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":A.indexOf(M)>-1&&($="return vec4(outputValue.xx, outputValue.zz);")}}else $=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+I+`() {
      `+q+` coords = getOutputCoords();
      `+k+`
      vec4 outputValue = get`+O+"("+P+`);
      `+$+`
    }
  `})(b,x):(function(E,T){var k=E.name,N=k.charAt(0).toUpperCase()+k.slice(1),O="get"+N+"AtOutCoords",I=T.texShape,B=E.shapeInfo.texShape,H=E.shapeInfo.logicalShape.length,A=T.logicalShape.length;if(!E.shapeInfo.isUniform&&H===A&&E.shapeInfo.flatOffset==null&&Sn(B,I))return`
      float `+O+`() {
        return sampleTexture(`+k+`, resultUV);
      }
    `;var q,V=kt(A),j=Ho(E.shapeInfo.logicalShape,T.logicalShape),P=A-H,$=["x","y","z","w","u","v"];q=H===0?"":A<2&&j.length>=1?"coords = 0;":j.map((function(U){return"coords."+$[U+P]+" = 0;"})).join(`
`);var Q="";return Q=A<2&&H>0?"coords":E.shapeInfo.logicalShape.map((function(U,G){return"coords."+$[G+P]})).join(", "),`
    float `+O+`() {
      `+V+` coords = getOutputCoords();
      `+q+`
      return get`+N+"("+Q+`);
    }
  `})(b,x)),C})(g,n,r)})).join(`
`),d=n.texShape,h=Hn(),v=(function(g){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+g.texture2D+`(textureSampler, uv).r;
    }
  `})(h),m=(function(g){return g.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+g.varyingFs+` vec2 resultUV;
    `+g.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+g.defineSpecialNaN+`
    `+g.defineSpecialInf+`
    `+g.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+MP+`
    `+OP+`
    `+IP+`
  `})(h);return n.isPacked?(o=(function(g,b){switch(g.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return(function(E,T){var k=[Math.ceil(T[0]/2),Math.ceil(T[1]/2)];return k[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+k[1]+`.0);
      }
    `:k[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+k[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+k[0]+", "+k[1]+`));
      return 2 * (resTexRC.x * `+k[1]+` + resTexRC.y);
    }
  `})(0,b);case 2:return(function(E,T){var k=[Math.ceil(T[0]/2),Math.ceil(T[1]/2)];if(Sn(E,T))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+k[0]+", "+k[1]+`));
      }
    `;var N=Math.ceil(E[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+k[0]+", "+k[1]+`));

      int index = resTexRC.x * `+k[1]+` + resTexRC.y;
      int r = 2 * (index / `+N+`);
      int c = imod(index, `+N+`) * 2;

      return ivec2(r, c);
    }
  `})(g,b);case 3:return x=g,S=b,C=[Math.ceil(S[0]/2),Math.ceil(S[1]/2)],_=Math.ceil(x[2]/2),R=_*Math.ceil(x[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));
      int index = resTexRC.x * `+C[1]+` + resTexRC.y;

      int b = index / `+R+`;
      index -= b * `+R+`;

      int r = 2 * (index / `+_+`);
      int c = imod(index, `+_+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return(function(E,T){for(var k=[Math.ceil(T[0]/2),Math.ceil(T[1]/2)],N=Math.ceil(E[E.length-1]/2),O=N*Math.ceil(E[E.length-2]/2),I=O,B="",H="b, r, c",A=2;A<E.length-1;A++)I*=E[E.length-A-1],B=`
      int b`+A+" = index / "+I+`;
      index -= b`+A+" * "+I+`;
    `+B,H="b"+A+", "+H;return`
    ivec`+E.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+k[0]+", "+k[1]+`));
      int index = resTexRC.x * `+k[1]+` + resTexRC.y;

      `+B+`

      int b = index / `+O+`;
      index -= b * `+O+`;

      int r = 2 * (index / `+N+`);
      int c = imod(index, `+N+`) * 2;

      return ivec`+E.length+"("+H+`);
    }
  `})(g,b)}var x,S,C,_,R})(n.logicalShape,d),u=(function(g){return`
    void setOutput(vec4 val) {
      `+g.output+` = val;
    }
  `})(h)):(o=(function(g,b){switch(g.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return(function(C,_){return _[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+_[1]+`.0);
      }
    `:_[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+_[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+_[0]+", "+_[1]+`));
      return resTexRC.x * `+_[1]+` + resTexRC.y;
    }
  `})(0,b);case 2:return(function(C,_){return Sn(C,_)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+_[0]+", "+_[1]+`));
      }
    `:C[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+_[0]+", "+_[1]+`));
        int index = resTexRC.x * `+_[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:C[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+_[0]+", "+_[1]+`));
        int index = resTexRC.x * `+_[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+_[0]+", "+_[1]+`));
      int index = resTexRC.x * `+_[1]+` + resTexRC.y;
      int r = index / `+C[1]+`;
      int c = index - r * `+C[1]+`;
      return ivec2(r, c);
    }
  `})(g,b);case 3:return x=b,S=ki(["r","c","d"],g),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+x[0]+", "+x[1]+`));
      int index = resTexRC.x * `+x[1]+` + resTexRC.y;
      `+S+`
      return ivec3(r, c, d);
    }
  `;case 4:return(function(C,_){var R=ki(["r","c","d","d2"],C);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+_[0]+", "+_[1]+`));
      int index = resTexRC.x * `+_[1]+` + resTexRC.y;
      `+R+`
      return ivec4(r, c, d, d2);
    }
  `})(g,b);case 5:return(function(C,_){var R=ki(["r","c","d","d2","d3"],C);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+_[0]+`,
                             `+_[1]+`));

      int index = resTexRC.x * `+_[1]+` + resTexRC.y;

      `+R+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `})(g,b);case 6:return(function(C,_){var R=ki(["r","c","d","d2","d3","d4"],C);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+_[0]+", "+_[1]+`));
      int index = resTexRC.x * `+_[1]+` + resTexRC.y;

      `+R+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `})(g,b);default:throw new Error(g.length+"-D output sampling is not yet supported")}var x,S})(n.logicalShape,d),u=(function(g){return`
    void setOutput(float val) {
      `+g.output+` = vec4(val, 0, 0, 0);
    }
  `})(h)),r&&(m+=BP),[m,v,u,l,o,c,e].join(`
`)}function Ws(t){var n=t.shapeInfo.logicalShape;switch(n.length){case 0:return(function(e){var r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1);if(e.shapeInfo.isUniform)return"float "+a+"() {return "+r+";}";var o=e.shapeInfo.texShape,u=o[0],l=o[1];if(u===1&&l===1)return`
      float `+a+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var c=e.shapeInfo.texShape,d=c[0],h=c[1],v=Si(r);return`
    float `+a+`() {
      vec2 uv = uvFromFlat(`+d+", "+h+", "+v+`);
      return sampleTexture(`+r+`, uv);
    }
  `})(t);case 1:return(function(e){var r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1);if(e.shapeInfo.isUniform)return`
      float `+a+`(int index) {
        `+Fs(e)+`
      }
    `;var o=e.shapeInfo.texShape,u=o[0],l=o[1];if(l===1&&u===1)return`
      float `+a+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var c=Si(r);return l===1?`
      float `+a+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+c+") + 0.5) / "+u+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:u===1?`
      float `+a+`(int index) {
        vec2 uv = vec2((float(index + `+c+") + 0.5) / "+l+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+a+`(int index) {
      vec2 uv = uvFromFlat(`+u+", "+l+", index + "+c+`);
      return sampleTexture(`+r+`, uv);
    }
  `})(t);case 2:return(function(e){var r=e.shapeInfo.logicalShape,a=e.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),u=e.shapeInfo.texShape;if(u!=null&&Sn(r,u)){var l=u[0],c=u[1];return`
    float `+o+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+l+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `}var d=Ti(r),h=d.newShape,v=d.keptDims,m=h;if(m.length<r.length){var g=Hs(e,m);return`
      `+Ws(g)+`
      float `+o+`(int row, int col) {
        return `+o+"("+Vs(["row","col"],v)+`);
      }
    `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+Fs(e)+`
      }
    `;var b=u[0],x=u[1],S=Si(a);return x===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+S+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+b+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `:b===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+S+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+x+`.0, 0.5);
      return sampleTexture(`+a+`, uv);
    }
  `:`
  float `+o+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+S+`;
    vec2 uv = uvFromFlat(`+b+", "+x+`, index);
    return sampleTexture(`+a+`, uv);
  }
`})(t);case 3:return(function(e){var r=e.shapeInfo.logicalShape,a=e.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),u=r[1]*r[2],l=r[2],c=Ti(r),d=c.newShape,h=c.keptDims,v=d;if(v.length<r.length){var m=Hs(e,v);return`
        `+Ws(m)+`
        float `+o+`(int row, int col, int depth) {
          return `+o+"("+Vs(["row","col","depth"],h)+`);
        }
      `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+u+", "+l+`, 1)));
        `+Fs(e)+`
      }
    `;var g=e.shapeInfo.texShape,b=g[0],x=g[1],S=e.shapeInfo.flatOffset;if(x===u&&S==null)return`
        float `+o+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+l+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+x+".0, "+b+`.0);
          return sampleTexture(`+a+`, uv);
        }
      `;if(x===l&&S==null)return`
    float `+o+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+x+".0, "+b+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `;var C=Si(a);return`
      float `+o+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+u+" + col * "+l+" + depth + "+C+`;
        vec2 uv = uvFromFlat(`+b+", "+x+`, index);
        return sampleTexture(`+a+`, uv);
      }
  `})(t);case 4:return(function(e){var r=e.shapeInfo.logicalShape,a=e.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),u=r[3],l=r[2]*u,c=r[1]*l,d=Ti(r),h=d.newShape,v=d.keptDims;if(h.length<r.length){var m=Hs(e,h);return`
      `+Ws(m)+`
      float `+o+`(int row, int col, int depth, int depth2) {
        return `+o+"("+Vs(["row","col","depth","depth2"],v)+`);
      }
    `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+c+", "+l+", "+u+`, 1)));
        `+Fs(e)+`
      }
    `;var g=e.shapeInfo.flatOffset,b=e.shapeInfo.texShape,x=b[0],S=b[1];if(S===c&&g==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+l+", "+u+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+S+".0, "+x+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(S===u&&g==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+S+".0, "+x+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var C=Si(a);return`
    float `+o+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+c+" + col * "+l+` +
          depth * `+u+` + depth2;
      vec2 uv = uvFromFlat(`+x+", "+S+", index + "+C+`);
      return sampleTexture(`+a+`, uv);
    }
  `})(t);case 5:return(function(e){var r=e.shapeInfo.logicalShape,a=e.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),u=r[4],l=r[3]*u,c=r[2]*l,d=r[1]*c,h=Ti(r),v=h.newShape,m=h.keptDims;if(v.length<r.length){var g=Hs(e,v);return`
      `+Ws(g)+`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        return `+o+"("+Vs(["row","col","depth","depth2","depth3"],m)+`);
      }
    `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+d+", "+c+", "+l+", "+u+`)) +
          depth3;
        `+Fs(e)+`
      }
    `;var b=e.shapeInfo.flatOffset,x=e.shapeInfo.texShape,S=x[0],C=x[1];if(C===d&&b==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+c+", "+l+", "+u+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+C+".0, "+S+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(C===u&&b==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+C+".0, "+S+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var _=Si(a);return`
    float `+o+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+d+" + col * "+c+" + depth * "+l+` +
          depth2 * `+u+" + depth3 + "+_+`;
      vec2 uv = uvFromFlat(`+S+", "+C+`, index);
      return sampleTexture(`+a+`, uv);
    }
  `})(t);case 6:return(function(e){var r=e.shapeInfo.logicalShape,a=e.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),u=Ti(r),l=u.newShape,c=u.keptDims;if(l.length<r.length){var d=Hs(e,l);return`
      `+Ws(d)+`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+o+"("+Vs(["row","col","depth","depth2","depth3","depth4"],c)+`);
      }
    `}var h=r[5],v=r[4]*h,m=r[3]*v,g=r[2]*m,b=r[1]*g;if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+b+", "+g+", "+m+", "+v+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+h+`, 1)));
        `+Fs(e)+`
      }
    `;var x=e.shapeInfo.flatOffset,S=e.shapeInfo.texShape,C=S[0],_=S[1];if(_===b&&x==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+g+", "+m+", "+v+", "+h+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+_+".0, "+C+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(_===h&&x==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+_+".0, "+C+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var R=Si(a);return`
    float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+b+" + col * "+g+" + depth * "+m+` +
          depth2 * `+v+" + depth3 * "+h+" + depth4 + "+R+`;
      vec2 uv = uvFromFlat(`+C+", "+_+`, index);
      return sampleTexture(`+a+`, uv);
    }
  `})(t);default:throw new Error(n.length+"-D input sampling is not yet supported")}}function lR(t){var n,e,r;switch(t.shapeInfo.logicalShape.length){case 0:return n=t.name,e="get"+n.charAt(0).toUpperCase()+n.slice(1),r=Hn(),`
    vec4 `+e+`() {
      return `+r.texture2D+"("+n+`, halfCR);
    }
  `;case 1:return(function(a){var o=a.name,u="get"+o.charAt(0).toUpperCase()+o.slice(1),l=a.shapeInfo.texShape,c=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],d=Hn();return`
    vec4 `+u+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+c[0]+", "+c[1]+`, index);
      return `+d.texture2D+"("+o+`, uv);
    }
  `})(t);case 2:return(function(a){var o=a.shapeInfo.logicalShape,u=a.name,l="get"+u.charAt(0).toUpperCase()+u.slice(1),c=a.shapeInfo.texShape,d=c[0],h=c[1],v=Hn();if(c!=null&&Sn(o,c))return`
      vec4 `+l+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+h+".0, "+d+`.0);

        return `+v.texture2D+"("+u+`, uv);
      }
    `;var m=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)],g=Math.ceil(o[1]/2);return`
    vec4 `+l+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+g+", "+m[0]+", "+m[1]+`, row, col);
      return `+v.texture2D+"("+u+`, uv);
    }
  `})(t);case 3:return(function(a){var o=a.shapeInfo.logicalShape,u=a.name,l="get"+u.charAt(0).toUpperCase()+u.slice(1),c=a.shapeInfo.texShape,d=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)];if(o[0]===1){var h=o.slice(1),v=Hs(a,h);return`
        `+lR(v)+`
        vec4 `+l+`(int b, int row, int col) {
          return `+l+"("+Vs(["b","row","col"],[1,2])+`);
        }
      `}var m=d[0],g=d[1],b=Math.ceil(o[2]/2),x=b*Math.ceil(o[1]/2),S=Hn();return`
    vec4 `+l+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+m+", "+g+", "+x+", "+b+`, b, row, col);
      return `+S.texture2D+"("+u+`, uv);
    }
  `})(t);default:return(function(a){for(var o=a.shapeInfo.logicalShape,u=o.length,l=a.name,c="get"+l.charAt(0).toUpperCase()+l.slice(1),d=a.shapeInfo.texShape,h=[Math.ceil(d[0]/2),Math.ceil(d[1]/2)],v=h[0],m=h[1],g=Math.ceil(o[u-1]/2),b=g*Math.ceil(o[u-2]/2),x="int b, int row, int col",S="b * "+b+" + (row / 2) * "+g+" + (col / 2)",C=2;C<u-1;C++)x="int b"+C+", "+x,b*=o[u-C-1],S="b"+C+" * "+b+" + "+S;var _=Hn();return`
    vec4 `+c+"("+x+`) {
      int index = `+S+`;
      int texR = index / `+m+`;
      int texC = index - texR * `+m+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+m+", "+v+`);
      return `+_.texture2D+"("+l+`, uv);
    }
  `})(t)}}var MP=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,OP=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,IP=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,BP=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Si(t){return"offset"+t}function Fs(t){var n=t.name,e=Ne(t.shapeInfo.logicalShape);return e<2?"return "+n+";":`
    for (int i = 0; i < `+e+`; i++) {
      if (i == index) {
        return `+n+`[i];
      }
    }
  `}function kt(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error("GPU for rank "+t+" is not yet supported")}function Hs(t,n){var e=JSON.parse(JSON.stringify(t));return e.shapeInfo.logicalShape=n,e}function Vs(t,n){return n.map((function(e){return t[e]})).join(", ")}var FP=function(t,n,e,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,W(t.length>2,(function(){return"Packed arg"+(e.charAt(0).toUpperCase()+e.slice(1))+" supports only inputs with rank above 2."}));var a=t[t.length-1],o=Math.ceil(a/n);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");var u,l,c=this.outputShape,d=c.length,h=kt(d),v=ar("coords",d);if(o===1){var m=kt(l=d+1);u=`
        `+m+" sourceLocR = "+m+"("+v.join()+`, 0);
        ++`+v[d-1]+`;
        `+m+" sourceLocG = "+m+"("+v.join()+`, 0);
        ++`+v[d-2]+`;
        `+m+" sourceLocA = "+m+"("+v.join()+`, 0);
        --`+v[d-1]+`;
        `+m+" sourceLocB = "+m+"("+v.join()+`, 0);
        --`+v[d-2]+";"}else l=d,u=`
        `+h+` sourceLocR = coords;
        ++`+v[d-1]+`;
        `+h+` sourceLocG = coords;
        ++`+v[d-2]+`;
        `+h+` sourceLocA = coords;
        --`+v[d-1]+`;
        `+h+` sourceLocB = coords;
        --`+v[d-2]+";";var g=["x","y","z","w","u","v"].slice(0,l),b="."+g[l-1],x=g.map((function(O){return"int "+O})),S=ar("sourceLocR",l-1).concat("inIdx.r"),C=ar("sourceLocG",l-1).concat("inIdx.g"),_=ar("sourceLocB",l-1).concat("inIdx.b"),R=ar("sourceLocA",l-1).concat("inIdx.a"),E=e==="max"?"greaterThan":"lessThan",T=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+S.join()+`),
                             getBestIndicesAChannel(`+C.join()+`),
                             getBestIndicesAChannel(`+_.join()+`),
                             getBestIndicesAChannel(`+R.join()+")));",k=`vec4(
            getAChannel(`+S.join()+`),
            hasNextCol ? getAChannel(`+C.join()+`) : 0.,
            hasNextRow ? getAChannel(`+_.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+R.join()+") : 0.)",N=r?"":`
      float getBestIndicesAChannel(`+x.join()+`) {
        return getChannel(getBestIndicesA(`+g.join()+`),
                                          vec2(`+g.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+x.join()+`) {
        return getChannel(getA(`+g.join()+`),
                               vec2(`+g.slice(-2).join()+`));
      }
      `+N+`
      void main() {
        `+h+` coords = getOutputCoords();
        bool hasNextCol = `+v[d-1]+" < "+(c[d-1]-1)+`;
        bool hasNextRow = `+v[d-2]+" < "+(c[d-2]-1)+`;
        `+u+`
        ivec4 srcIdx = ivec4(sourceLocR`+b+", sourceLocG"+b+`,
          sourceLocB`+b+", sourceLocA"+b+") * "+n+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+k+`;

        for (int i = 0; i < `+n+`; i++) {
          inIdx = srcIdx;
          `+T+`
          vec4 candidate = `+k+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+E+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},PP=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,e=t.filterWidth,r=t.strideHeight,a=t.strideWidth,o=t.dilationHeight,u=t.dilationWidth,l=t.effectiveFilterHeight,c=t.effectiveFilterWidth,d=l-1-t.padInfo.top,h=c-1-t.padInfo.left,v=1/(n*e);this.userCode=`
      const ivec2 pads = ivec2(`+d+", "+h+`);
      const float avgMultiplier = float(`+v+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+l+`;
            wR += `+o+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+c+`;
            wC+= `+u+`) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},LP=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,e=t.filterHeight,r=t.filterWidth,a=t.strideDepth,o=t.strideHeight,u=t.strideWidth,l=t.dilationDepth,c=t.dilationHeight,d=t.dilationWidth,h=t.effectiveFilterDepth,v=t.effectiveFilterHeight,m=t.effectiveFilterWidth,g=h-1-t.padInfo.front,b=v-1-t.padInfo.top,x=m-1-t.padInfo.left,S=1/(n*e*r);this.userCode=`
      const ivec3 pads = ivec3(`+g+", "+b+", "+x+`);
      const float avgMultiplier = float(`+S+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+h+`;
            wD += `+l+`) {
          float dyD = float(dyDCorner + wD) / `+a+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+v+`;
              wR += `+c+`) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+m+`;
                wC += `+d+`) {
              float dyC = float(dyCCorner + wC) / `+u+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},zP=function(t,n,e,r,a,o){this.outputShape=[],this.variableNames=["x","mean","variance"],nt(t,n),nt(t,e);var u="0.0";r!=null&&(nt(t,r),this.variableNames.push("offset"),u="getOffsetAtOutCoords()");var l="1.0";a!=null&&(nt(t,a),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+u+`;
        float scale = `+l+`;
        float inv = scale * inversesqrt(variance + float(`+o+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},UP=function(t,n,e,r,a,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],nt(t,n),nt(t,e);var u="vec4(0.0)";r!=null&&(nt(t,r),this.variableNames.push("offset"),u="getOffsetAtOutCoords()");var l="vec4(1.0)";a!=null&&(nt(t,a),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = `+u+`;
        vec4 scale = `+l+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+o+`));

        setOutput((x - mean) * inv + offset);
      }
    `},WP="return areal * breal - aimag * bimag;",HP="return areal * bimag + aimag * breal;",pS=function(t,n,e){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=nt(n,e),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+t+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},Em="return a + b;",Rm="return a - b;",vS="return a * b;",cR="return (a < 0.) ? b * a : a;",$t=function(t,n,e){this.variableNames=["A","B"],this.outputShape=nt(n,e),this.userCode=`
      float binaryOperation(float a, float b) {
        `+t+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},fR=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,eo=function(t,n,e,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=nt(n,e);var a=this.outputShape.length,o="";if(r)if(a===0||Ne(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          `+kt(a)+` coords = getOutputCoords();
        `,a===1)o+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var u=ar("coords",a);o+=`
            bool nextRowOutOfBounds =
              (`+u[a-2]+" + 1) >= "+this.outputShape[a-2]+`;
            bool nextColOutOfBounds =
              (`+u[a-1]+" + 1) >= "+this.outputShape[a-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+t+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+o+`

        setOutput(result);
      }
    `},VP=(function(){function t(n){this.variableNames=["A"],this.outputShape=n,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return t.prototype.getCustomSetupFunc=function(n,e){var r=this;return function(a,o){r.minLoc==null&&(r.minLoc=a.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=a.getUniformLocationNoThrow(o,"maxVal")),a.gl.uniform1f(r.minLoc,n),a.gl.uniform1f(r.maxLoc,e)}},t})(),jP=(function(){function t(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return t.prototype.getCustomSetupFunc=function(n,e){var r=this;return function(a,o){r.minLoc==null&&(r.minLoc=a.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=a.getUniformLocationNoThrow(o,"maxVal")),a.gl.uniform1f(r.minLoc,n),a.gl.uniform1f(r.maxLoc,e)}},t})(),GP=function(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},qP=function(t){this.outputShape=[],this.outputShape=au(t,1),this.variableNames=t.map((function(l,c){return"T"+c}));var n=new Array(t.length-1);n[0]=t[0][1];for(var e=1;e<n.length;e++)n[e]=n[e-1]+t[e][1];var r=["if (yC < "+n[0]+") setOutput(getT0(yR, yC));"];for(e=1;e<n.length;e++){var a=n[e-1];r.push("else if (yC < "+n[e]+") setOutput(getT"+e+"(yR, yC-"+a+"));")}var o=n.length,u=n[n.length-1];r.push("else setOutput(getT"+o+"(yR, yC-"+u+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},$P=function(t,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=au(t,n);var e=this.outputShape,r=e.length,a=kt(r),o=ar("coords",r),u=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map((function(S,C){return"T"+C}));var l=new Array(t.length-1);l[0]=t[0][n];for(var c=1;c<l.length;c++)l[c]=l[c-1]+t[c][n];var d=u[n],h=u.slice(-2),v=u.join(),m="if ("+d+" < "+l[0]+`) {
        return getChannel(
            getT0(`+v+"), vec2("+h.join()+`));
        }`;for(c=1;c<l.length;c++){var g=l[c-1];m+=`
        if (`+d+" < "+l[c]+"  && "+d+" >= "+l[c-1]+`) {
          return getChannel(
            getT`+c+"("+Mf(u,d,g)+`),
            vec2(`+Mf(h,d,g)+`));
        }`}var b=l.length,x=l[l.length-1];m+=`
        return getChannel(
          getT`+b+"("+Mf(u,d,x)+`),
          vec2(`+Mf(h,d,x)+"));",this.userCode=`
      float getValue(`+u.map((function(S){return"int "+S}))+`) {
        `+m+`
      }

      void main() {
        `+a+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+o+`), 0., 0., 0.);

        `+o[r-1]+" = "+o[r-1]+` + 1;
        if (`+o[r-1]+" < "+e[r-1]+`) {
          result.g = getValue(`+o+`);
        }

        `+o[r-2]+" = "+o[r-2]+` + 1;
        if (`+o[r-2]+" < "+e[r-2]+`) {
          result.a = getValue(`+o+`);
        }

        `+o[r-1]+" = "+o[r-1]+` - 1;
        if (`+o[r-2]+" < "+e[r-2]+` &&
            `+o[r-1]+" < "+e[r-1]+`) {
          result.b = getValue(`+o+`);
        }
        setOutput(result);
      }
    `};function Mf(t,n,e){var r=t.indexOf(n);return t.map((function(a,o){return o===r?a+" - "+e:a})).join()}var KP=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,e=t.strideWidth,r=t.padInfo.top,a=t.padInfo.left,o=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+n+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+e+" - "+a+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              if (`+o+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},XP=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,e=t.filterWidth,r=t.strideHeight,a=t.strideWidth,o=t.dataFormat==="channelsLast",u=n-1-t.padInfo.top,l=e-1-t.padInfo.left,c=o?1:2,d=o?2:3,h=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+u+", "+l+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+h+`];

        ivec2 dyCorner = ivec2(coords[`+c+"], coords["+d+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+n+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+n+` - 1 - wR;

          for (int wC = 0; wC < `+e+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+e+` - 1 - wC;

            for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {

              if (`+o+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},YP=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,e=t.strideHeight,r=t.strideWidth,a=t.padInfo.front,o=t.padInfo.top,u=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yF = 0; yF < `+t.outDepth+`; yF++) {
            int xF = wF + yF * `+n+" - "+a+`;

            if (xF < 0 || xF >= `+t.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+t.outHeight+`; yR++) {
              int xR = wR + yR * `+e+" - "+o+`;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+t.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+u+`;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},QP=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,e=t.filterHeight,r=t.filterWidth,a=t.strideDepth,o=t.strideHeight,u=t.strideWidth,l=n-1-t.padInfo.front,c=e-1-t.padInfo.top,d=r-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+l+", "+c+", "+d+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+n+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+a+`.0;

          if (dyF < 0.0 || dyF >= `+t.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+n+` - 1 - wF;

          for (int wR = 0; wR < `+e+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+e+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+u+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},ZP=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,e=t.strideWidth,r=t.padInfo.top,a=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+o+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+n+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+e+" - "+a+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},JP=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,e=t.filterWidth,r=t.strideHeight,a=t.strideWidth,o=n-1-t.padInfo.top,u=e-1-t.padInfo.left,l=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+u+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+n+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+n+` - 1 - wR;

          for (int wC = 0; wC < `+e+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+e+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+l+`; dm++) {
              int d2 = d1 * `+l+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},mS=function(t,n,e,r){n===void 0&&(n=!1),e===void 0&&(e=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var a=t.padInfo.top,o=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,d=t.dilationWidth,h=t.filterHeight,v=t.filterWidth,m=4*Math.floor(t.inChannels/4),g=t.inChannels%4,b=t.dataFormat==="channelsLast",x=b?1:2,S=b?2:3,C=b?3:1,_="",R="";e&&(_=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+e+`
        }`:`
          float activation(float x) {
            `+e+`
          }
        `,R="result = activation(result);");var E=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+_+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+a+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+C+`];

        ivec2 xRCCorner =
            ivec2(coords[`+x+"], coords["+S+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+h+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+v+`; wC++) {
            int xC = xCCorner + wC * `+d+`;

            if (xC < 0 || xC >= `+t.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+m+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+b+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(g===1)+`) {

              if (`+b+`) {
                dotProd +=
                    getX(batch, xR, xC, `+m+`) *
                    getW(wR, wC, `+m+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+m+`, xR, xC) *
                    getW(wR, wC, `+m+`, d2);
              }

            } else if (`+(g===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+m+`, d2),
                getW(wR, wC, `+m+` + 1, d2)
              );

              if (`+b+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+m+`),
                  getX(batch, xR, xC, `+m+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+m+`, xR, xC),
                  getX(batch, `+m+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(g===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+m+`, d2),
                getW(wR, wC, `+m+` + 1, d2),
                getW(wR, wC, `+m+` + 2, d2)
              );

              if (`+b+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+m+`),
                  getX(batch, xR, xC, `+m+` + 1),
                  getX(batch, xR, xC, `+m+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+m+`, xR, xC),
                  getX(batch, `+m+` + 1, xR, xC),
                  getX(batch, `+m+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+E+`
        `+R+`
        setOutput(result);
      }
    `},eL=function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,e=t.padInfo.top,r=t.padInfo.left,a=t.strideDepth,o=t.strideHeight,u=t.strideWidth,l=t.dilationDepth,c=t.dilationHeight,d=t.dilationWidth,h=t.filterDepth,v=t.filterHeight,m=t.filterWidth,g=4*Math.floor(t.inChannels/4),b=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+a+", "+o+", "+u+`);
      const ivec3 pads = ivec3(`+n+", "+e+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+h+`; wF++) {
          int xF = xFCorner + wF * `+l+`;

          if (xF < 0 || xF >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+v+`; wR++) {
            int xR = xRCorner + wR * `+c+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+m+`; wC++) {
              int xC = xCCorner + wC * `+d+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+g+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(b===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+g+`) *
                  getW(wF, wR, wC, `+g+`, d2);
              } else if (`+(b===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+g+`),
                  getX(batch, xF, xR, xC, `+g+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+g+`, d2),
                  getW(wF, wR, wC, `+g+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(b===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+g+`),
                  getX(batch, xF, xR, xC, `+g+` + 1),
                  getX(batch, xF, xR, xC, `+g+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+g+`, d2),
                  getW(wF, wR, wC, `+g+` + 1, d2),
                  getW(wF, wR, wC, `+g+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},gS=function(t,n,e,r){n===void 0&&(n=!1),e===void 0&&(e=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var a=t.inHeight,o=t.inWidth,u=t.padInfo.top,l=t.padInfo.left,c=t.strideHeight,d=t.strideWidth,h=t.dilationHeight,v=t.dilationWidth,m=t.filterHeight,g=t.filterWidth,b=t.outChannels/t.inChannels,x="",S="";e&&(x=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+e+`
        }`:`
          float activation(float x) {
            `+e+`
          }
        `,S="result = activation(result);");var C=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+x+`

      const ivec2 strides = ivec2(`+c+", "+d+`);
      const ivec2 pads = ivec2(`+u+", "+l+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+b+`;
        int q = d2 - d1 * `+b+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+m+`; wR++) {
          int xR = xRCorner + wR * `+h+`;

          if (xR < 0 || xR >= `+a+`) {
            continue;
          }

          for (int wC = 0; wC < `+g+`; wC++) {
            int xC = xCCorner + wC * `+v+`;

            if (xC < 0 || xC >= `+o+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+C+`
        `+S+`
        setOutput(result);
      }
    `},yS=function(t,n,e,r){n===void 0&&(n=!1),e===void 0&&(e=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;for(var a=t.inHeight,o=t.inWidth,u=t.padInfo.top,l=t.padInfo.left,c=t.strideHeight,d=t.strideWidth,h=t.dilationHeight,v=t.dilationWidth,m=t.filterHeight,g=t.filterWidth,b=g,x="int xR; int xC; int xCOffset;",S=0;S<m;S++)for(var C=0;C<g;C++)x+=`
          vec4 xTexelR`+S+"C"+2*C+` = vec4(0.);
          vec4 wR`+S+"C"+C+` = vec4(0.);
          vec4 xR`+S+"C"+C+" = vec4(0.);";for(S=0;S<m;S++)for(var _=0;_<b;_++){if(x+=`
          xR = xRCorner + `+S*h+`;
          xC = xCCorner + `+(C=2*_)*v+`;
        `,d===1){if(C<g&&(x+=l%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+a+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  xTexelR`+S+"C"+C+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+o+`) {
                    xTexelR`+S+"C"+C+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+S+"C"+C+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+a+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+o+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+S+"C"+C+" = vec4(previous.zw, xTexelR"+S+"C"+C+`.xy);
                } else {
                  xR`+S+"C"+C+" = vec4(0, 0, xTexelR"+S+"C"+C+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+a+" && xC >= 0 && xC < "+o+`) {
                  xTexelR`+S+"C"+C+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+S+"C"+C+` = vec4(0.);
                }

                xR`+S+"C"+C+" = xTexelR"+S+"C"+C+`;
              `,C+1<g)){var R=l%2==0?DE(v):v;v%2==0&&l%2==1||v%2!=0&&l%2!=1?(x+=`
                  xCOffset = xC + `+l%2+" + "+R+`;

                  if(xR >= 0 && xR < `+a+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+S+"C"+(C+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,v>1&&(x+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+a+` &&
                      xCOffset >= 0 && xCOffset < `+o+`) {
                      xTexelR`+S+"C"+C+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+S+"C"+C+` = vec4(0.);
                    }
                  `),x+=`
                  xR`+S+"C"+(C+1)+` = vec4(
                    xTexelR`+S+"C"+C+".zw, xTexelR"+S+"C"+(C+2)+`.xy);
                `):x+=`
                  xCOffset = xC + `+R+`;

                  if(xR >= 0 && xR < `+a+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+S+"C"+(C+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+S+"C"+(C+1)+" = xTexelR"+S+"C"+(C+2)+`;
                `}}else C<g&&(x+=`
              if(xR >= 0 && xR < `+a+`) {
            `,l%2==1?(x+=`
                xCOffset = xC + 1 - `+d+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+S+"C"+C+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+S+"C"+C+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+o+`) {
                  xTexelR`+S+"C"+(C+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+S+"C"+(C+2)+` = vec4(0.);
                }

                xR`+S+"C"+C+` = vec4(
                  xTexelR`+S+"C"+C+".zw, xTexelR"+S+"C"+(C+2)+`.zw);
              `,C+1<g&&(x+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+d+`;
                  if(xCOffset >= 0 && xCOffset < `+o+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+S+"C"+(C+1)+" = vec4(xTexelR"+S+"C"+(C+2)+`.xy, final.xy);
                `)):(x+=`
                if(xC >= 0 && xC < `+o+`) {
                  xTexelR`+S+"C"+C+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+S+"C"+C+` = vec4(0.);
                }

                xCOffset = xC + `+d+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+S+"C"+(C+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+S+"C"+(C+2)+` = vec4(0.);
                }

                xR`+S+"C"+C+` = vec4(
                  xTexelR`+S+"C"+C+".xy, xTexelR"+S+"C"+(C+2)+`.xy);
              `,C+1<g&&(x+=`
                  xR`+S+"C"+(C+1)+` = vec4(
                    xTexelR`+S+"C"+C+".zw, xTexelR"+S+"C"+(C+2)+`.zw);
                `)),x+="}");C<g&&(x+=`
            vec4 wTexelR`+S+"C"+C+" = getW("+S+", "+C+`, d1, q);
            wR`+S+"C"+C+" = vec4(wTexelR"+S+"C"+C+".xz, wTexelR"+S+"C"+C+`.xz);
          `,C+1<g&&(x+=`
              vec4 wTexelR`+S+"C"+(C+1)+" = getW("+S+", "+(C+1)+`, d1, q);
              wR`+S+"C"+(C+1)+` =
                vec4(wTexelR`+S+"C"+(C+1)+".xz, wTexelR"+S+"C"+(C+1)+".xz);"))}for(S=0;S<m;S++)for(C=0;C<g;C++)x+="dotProd += xR"+S+"C"+C+" * wR"+S+"C"+C+";";var E="",T="";e&&(E=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+e+`
        }`:`vec4 activation(vec4 x) {
          `+e+`
        }`,T="result = activation(result);");var k=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+E+`

      const ivec2 strides = ivec2(`+c+", "+d+`);
      const ivec2 pads = ivec2(`+u+", "+l+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+x+`

        vec4 result = dotProd;
        `+k+`
        `+T+`
        setOutput(result);
      }
    `},tL=function(t,n,e,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=t[0],u=t[1],l=t[2],c=t[3],d=n[0],h=e[0],v=e[1];this.outputShape=[d,h,v,c];var m=r==="bilinear"?1:0,g=[u-1+".0",l-1+".0"],b=g[0],x=g[1],S=h>1?[""+(u-1)/(h-1),"(y2-y1) * height_ratio","y1*"+b+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+b],C=S[0],_=S[1],R=S[2],E=v>1?[""+(l-1)/(v-1),"(x2-x1) * width_ratio","x1*"+x+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+x],T=E[0],k=E[1],N=E[2];this.userCode=`
      const float height_ratio = float(`+C+`);
      const float width_ratio = float(`+T+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+o+`) {
          return;
        }

        float height_scale = `+_+`;
        float width_scale = `+k+`;

        float in_y = `+R+`;
        if( in_y < 0.0 || in_y > `+b+` ) {
          setOutput(float(`+a+`));
          return;
        }
        float in_x = `+N+`;
        if( in_x < 0.0 || in_x > `+x+` ) {
          setOutput(float(`+a+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+m+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},nL=function(t,n,e){this.variableNames=["x"],this.outputShape=t;var r=t.length,a=t[t.length-1],o=e?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(e?"return "+a+" -i - 1;":"return i;")+`
      }

      void main() {
        `+kt(r)+` coords = getOutputCoords();
        int end = `+bS(r,"coords")+`;
        float val = 0.0;
        for (int i = `+a+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+o+` end) {
            continue;
          }
          if (idx == end && `+n+`) {
            continue;
          }
          `+bS(r,"coords")+` = idx;
          val += getX(`+(function(u,l){if(u===1)return""+l;if(u===2)return l+".x, "+l+".y";if(u===3)return l+".x, "+l+".y, "+l+".z";if(u===4)return l+".x, "+l+".y, "+l+".z, "+l+".w";throw Error("Cumulative sum for rank "+u+" is not yet supported")})(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function bS(t,n){if(t===1)return""+n;if(t===2)return n+".y";if(t===3)return n+".z";if(t===4)return n+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}var rL=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Ol.DENSE;var n=Cl(t),e=Hn();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+ki(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+n[0]+", "+n[1]+`));
        int index = 4 * (resTexRC.x * `+n[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+e.output+` = result;
      }
    `},aL=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Ol.DENSE;var n=Cl(t),e=Hn();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+ki(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+n[0]+", "+n[1]+`));
        int index = 4 * (resTexRC.x * `+n[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+e.output+` = result;
      }
    `},oL=(function(){function t(n,e,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=n,this.blockSize=e,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+e+`;
      int offset_h = imod(h, `+e+`);
      int in_w = w / `+e+`;
      int offset_w = imod(w, `+e+`);
      int offset_d = (offset_h * `+e+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return t.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},t.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},t.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},t.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},t.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},t})(),iL=function(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},sL=function(t){this.variableNames=["A"],this.outTexUsage=wr.DOWNLOAD;var n=Hn();this.outputShape=t,this.userCode=`
      `+uR+`

      void main() {
        float x = getAAtOutCoords();
        `+n.output+` = encode_float(x);
      }
    `},uL=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=wr.DOWNLOAD;var n=Hn();this.outputShape=t,this.userCode=`
      `+uR+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+n.output+` = encode_float(x);
      }
    `},lL=function(t,n,e){e===void 0&&(e=!1),this.variableNames=["A"];var r=Hn(),a=n[0],o=n[1];this.outputShape=t;var u="result";e&&(u="floor(result * 255. + 0.5)"),this.userCode=`
      `+Ey(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+o+`;
        int c = imod(flatIndex, `+o+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+a+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+u+`, 0., 0., 0.);
      }
    `},cL=function(t,n,e){e===void 0&&(e=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Hn(),a=n[0],o=n[1];this.outputShape=t;var u="",l="result";e&&(l="floor(result * 255. + 0.5)");for(var c=0;c<=1;c++)for(var d=0;d<=1;d++){var h=2*c+d;u+=`
          localCoords = coords;
          if(localCoords[2] + `+d+" < "+t[2]+`) {
            localCoords[2] += `+d+`;
            if(localCoords[1] + `+c+" < "+t[1]+`) {
              localCoords[1] += `+c+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+o+`;
              c = imod(flatIndex, `+o+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+a+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+h+`] = values[0];
              } else if(offset == 1) {
                result[`+h+`] = values[1];
              } else if(offset == 2) {
                result[`+h+`] = values[2];
              } else {
                result[`+h+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+Ey(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+u+`

        `+r.output+" = "+l+`;
      }
    `},fL="return real * expR - imag * expI;",dL="return real * expI + imag * expR;",xS=function(t,n,e){this.variableNames=["real","imag"];var r=n[1];this.outputShape=n;var a=e?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,o=e?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+a+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+t+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+o+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},hL=(function(){function t(n,e){this.outputShape=[],this.variableNames=["x"],this.outputShape=n,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return t.prototype.getCustomSetupFunc=function(n){var e=this;return function(r,a){e.valueLoc==null&&(e.valueLoc=r.getUniformLocationNoThrow(a,"value")),r.gl.uniform1f(e.valueLoc,n)}},t})(),pL=function(t,n,e){this.variableNames=["A","indices"];var r=t.slice();r[e]=n,this.outputShape=r,this.rank=r.length;var a=kt(this.rank),o=(function(u,l){var c=u.length;if(c>4)throw Error("Gather for rank "+c+" is not yet supported");if(c===1)return"int(getIndices(resRC))";for(var d=["resRC.x","resRC.y","resRC.z","resRC.w"],h=[],v=0;v<u.length;v++)v===l?h.push("int(getIndices("+d[v]+"))"):h.push(""+d[v]);return h.join()})(t,e);this.userCode=`
      void main() {
        `+a+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `},vL=function(t,n,e){this.sliceDim=t,this.strides=n,this.variableNames=["x","indices"],this.outputShape=e;var r=kt(n.length),a=kt(e.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+a+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+o+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function mL(t,n){var e=Hn();return fF(t,n,e.version+`
    precision highp float;
    `+e.attribute+` vec3 clipSpacePos;
    `+e.attribute+` vec2 uv;
    `+e.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function gL(t,n){return mF(t,n,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function yL(t,n){return gF(t,n,new Uint16Array([0,1,2,2,1,3]))}function Jl(t,n,e,r,a,o,u){bF(e,r);var l=yF(t,n),c=t.TEXTURE_2D;return Oe(t,n,(function(){return t.bindTexture(c,l)})),Oe(t,n,(function(){return t.texParameteri(c,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)})),Oe(t,n,(function(){return t.texParameteri(c,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)})),Oe(t,n,(function(){return t.texParameteri(c,t.TEXTURE_MIN_FILTER,t.NEAREST)})),Oe(t,n,(function(){return t.texParameteri(c,t.TEXTURE_MAG_FILTER,t.NEAREST)})),Oe(t,n,(function(){return t.texImage2D(c,0,a,e,r,0,o,u,null)})),Oe(t,n,(function(){return t.bindTexture(t.TEXTURE_2D,null)})),l}function bL(t,n,e,r,a){var o=Qd(e,r);return Jl(t,n,o[0],o[1],a.internalFormatFloat,a.textureFormatFloat,t.FLOAT)}function xL(t,n,e,r,a){var o=Qd(e,r);return Jl(t,n,o[0],o[1],a.internalFormatHalfFloat,a.textureFormatFloat,a.textureTypeHalfFloat)}function wL(t,n,e,r,a){var o=Qd(e,r);return Jl(t,n,o[0],o[1],t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}function SL(t,n,e,r,a){var o=Zl(e,r);return Jl(t,n,o[0],o[1],a.internalFormatPackedFloat,t.RGBA,t.FLOAT)}function CL(t,n,e,r,a){var o=Zl(e,r);return Jl(t,n,o[0],o[1],a.internalFormatPackedHalfFloat,t.RGBA,a.textureTypeHalfFloat)}function EL(t,n,e,r){return Oe(t,n,(function(){return t.bindBuffer(t.ARRAY_BUFFER,r)})),sS(t,n,e,"clipSpacePos",r,3,20,0)&&sS(t,n,e,"uv",r,2,20,12)}function RL(t,n,e,r,a,o,u){var l,c,d;Oe(t,n,(function(){return t.bindTexture(t.TEXTURE_2D,e)})),o instanceof Uint8Array?(l=new Uint8Array(r*a*4),c=t.UNSIGNED_BYTE,d=t.RGBA):(l=new Float32Array(r*a*4),c=t.FLOAT,d=u.internalFormatPackedFloat),l.set(o),Oe(t,n,(function(){return t.texImage2D(t.TEXTURE_2D,0,d,r,a,0,t.RGBA,c,l)})),Oe(t,n,(function(){return t.bindTexture(t.TEXTURE_2D,null)}))}function _L(t,n,e,r){Oe(t,n,(function(){return t.bindTexture(t.TEXTURE_2D,e)})),r.data instanceof Uint8Array?Oe(t,n,(function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r.width,r.height,0,t.RGBA,t.UNSIGNED_BYTE,r.data)})):Oe(t,n,(function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)})),Oe(t,n,(function(){return t.bindTexture(t.TEXTURE_2D,null)}))}function TL(t,n,e,r,a){var o=t.createBuffer();Oe(t,n,(function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,o)}));var u=16*e*r;return Oe(t,n,(function(){return t.bufferData(t.PIXEL_PACK_BUFFER,u,t.STREAM_READ)})),Oe(t,n,(function(){return t.readPixels(0,0,r,e,t.RGBA,t.FLOAT,0)})),Oe(t,n,(function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,null)})),o}function AL(t,n,e){var r=t,a=new Float32Array(e);return r.bindBuffer(r.PIXEL_PACK_BUFFER,n),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function DL(t,n,e,r,a){var o=Qd(e,r),u=o[0],l=o[1],c=new Uint8Array(e*r*4);return Oe(t,n,(function(){return t.readPixels(0,0,u,l,a.downloadTextureFormat,t.UNSIGNED_BYTE,c)})),new Float32Array(c.buffer)}function kL(t,n,e,r,a,o,u,l){var c=t,d=new Float32Array((function(h,v){var m=Zl(h,v);return m[0]*m[1]*4})(o,u));return c.bindBuffer(c.PIXEL_PACK_BUFFER,n),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,d),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),d}function NL(t,n,e,r){var a=new Float32Array(e*r*4);return Oe(t,n,(function(){return t.readPixels(0,0,r,e,t.RGBA,t.FLOAT,a)})),a}var ML=(function(){function t(n){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var e=de().getNumber("WEBGL_VERSION");n!=null?(this.gl=n,iF(e,n)):this.gl=ka(e);var r="WEBGL_color_buffer_float";if(de().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=Af(this.gl,this.debug,"OES_texture_float"),Vr(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=Af(this.gl,this.debug,"OES_texture_half_float");else if(de().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Vr(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=Af(this.gl,this.debug,"EXT_color_buffer_half_float");else if(de().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Vr(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!Vr(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=gL(this.gl,this.debug),this.indexBuffer=yL(this.gl,this.debug),this.framebuffer=xF(this.gl,this.debug),this.textureConfig=py(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(t.prototype,"debug",{get:function(){return de().getBool("DEBUG")},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){var n=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var e=this.gl;Oe(e,this.debug,(function(){return e.finish()})),Oe(e,this.debug,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)})),Oe(e,this.debug,(function(){return e.deleteFramebuffer(n.framebuffer)})),Oe(e,this.debug,(function(){return e.bindBuffer(e.ARRAY_BUFFER,null)})),Oe(e,this.debug,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)})),Oe(e,this.debug,(function(){return e.deleteBuffer(n.indexBuffer)})),this.disposed=!0}},t.prototype.createFloat32MatrixTexture=function(n,e){return this.throwIfDisposed(),bL(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.createFloat16MatrixTexture=function(n,e){return this.throwIfDisposed(),xL(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.createUnsignedBytesMatrixTexture=function(n,e){return this.throwIfDisposed(),wL(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.uploadPixelDataToTexture=function(n,e){this.throwIfDisposed(),_L(this.gl,this.debug,n,e)},t.prototype.uploadDenseMatrixToTexture=function(n,e,r,a){this.throwIfDisposed(),RL(this.gl,this.debug,n,e,r,a,this.textureConfig)},t.prototype.createFloat16PackedMatrixTexture=function(n,e){return this.throwIfDisposed(),CL(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.createPackedMatrixTexture=function(n,e){return this.throwIfDisposed(),SL(this.gl,this.debug,n,e,this.textureConfig)},t.prototype.deleteMatrixTexture=function(n){var e=this;this.throwIfDisposed(),this.outputTexture===n&&(uS(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Oe(this.gl,this.debug,(function(){return e.gl.deleteTexture(n)}))},t.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(n,e,r){var a=this;return this.downloadMatrixDriver(n,(function(){return DL(a.gl,a.debug,e,r,a.textureConfig)}))},t.prototype.downloadPackedMatrixFromBuffer=function(n,e,r,a,o,u){return kL(this.gl,n,0,0,0,o,u,this.textureConfig)},t.prototype.downloadFloat32MatrixFromBuffer=function(n,e){return AL(this.gl,n,e)},t.prototype.createBufferFromTexture=function(n,e,r){this.bindTextureToFrameBuffer(n);var a=TL(this.gl,this.debug,e,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),a},t.prototype.createAndWaitForFence=function(){var n=this.createFence(this.gl);return this.pollFence(n)},t.prototype.createFence=function(n){var e,r,a=this;if(de().getBool("WEBGL_FENCE_API_ENABLED")){var o=n,u=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);n.flush(),r=function(){var l=o.clientWaitSync(u,0,0);return l===o.ALREADY_SIGNALED||l===o.CONDITION_SATISFIED},e=u}else de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),r=function(){return a.isQueryAvailable(e,de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:e,isFencePassed:r}},t.prototype.downloadMatrixFromPackedTexture=function(n,e,r){var a=this;return this.downloadMatrixDriver(n,(function(){return NL(a.gl,a.debug,e,r)}))},t.prototype.createProgram=function(n){this.throwIfDisposed();var e=this.gl,r=dF(e,this.debug,n),a=mL(e,this.debug),o=pF(e,this.debug);return Oe(e,this.debug,(function(){return e.attachShader(o,a)})),Oe(e,this.debug,(function(){return e.attachShader(o,r)})),vF(e,this.debug,o),this.debug&&xm(e,this.debug,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=EL(e,this.debug,this.program,this.vertexBuffer)),o},t.prototype.deleteProgram=function(n){var e=this;this.throwIfDisposed(),n===this.program&&(this.program=null),n!=null&&Oe(this.gl,this.debug,(function(){return e.gl.deleteProgram(n)}))},t.prototype.setProgram=function(n){var e=this;this.throwIfDisposed(),this.program=n,this.program!=null&&this.debug&&xm(this.gl,this.debug,this.program),Oe(this.gl,this.debug,(function(){return e.gl.useProgram(n)}))},t.prototype.getUniformLocation=function(n,e,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?SF(this.gl,this.debug,n,e):CF(this.gl,n,e)},t.prototype.getAttributeLocation=function(n,e){var r=this;return this.throwIfDisposed(),Oe(this.gl,this.debug,(function(){return r.gl.getAttribLocation(n,e)}))},t.prototype.getUniformLocationNoThrow=function(n,e){return this.throwIfDisposed(),this.gl.getUniformLocation(n,e)},t.prototype.setInputMatrixTexture=function(n,e,r){this.throwIfDisposed(),this.throwIfNoProgram(),EF(this.gl,this.debug,this.program,n,e,r)},t.prototype.setOutputMatrixTexture=function(n,e,r){this.setOutputMatrixTextureDriver(n,r,e)},t.prototype.setOutputPackedMatrixTexture=function(n,e,r){this.throwIfDisposed();var a=Zl(e,r),o=a[0],u=a[1];this.setOutputMatrixTextureDriver(n,o,u)},t.prototype.setOutputMatrixWriteRegion=function(n,e,r,a){this.setOutputMatrixWriteRegionDriver(r,n,a,e)},t.prototype.setOutputPackedMatrixWriteRegion=function(n,e,r,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){this.program!=null&&xm(this.gl,this.debug,this.program),Df(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var n=this.gl;this.debug&&this.debugValidate(),Oe(n,this.debug,(function(){return n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)}))},t.prototype.blockUntilAllProgramsCompleted=function(){var n=this;this.throwIfDisposed(),Oe(this.gl,this.debug,(function(){return n.gl.finish()}))},t.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Af(this.gl,this.debug,de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.beginQuery=function(){if(de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var n=this.gl,e=this.getQueryTimerExtensionWebGL2(),r=n.createQuery();return n.beginQuery(e.TIME_ELAPSED_EXT,r),r}var a=this.getQueryTimerExtensionWebGL1(),o=a.createQueryEXT();return a.beginQueryEXT(a.TIME_ELAPSED_EXT,o),o},t.prototype.endQuery=function(){if(de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var n=this.getQueryTimerExtensionWebGL1();n.endQueryEXT(n.TIME_ELAPSED_EXT)}else{var e=this.gl,r=this.getQueryTimerExtensionWebGL2();e.endQuery(r.TIME_ELAPSED_EXT)}},t.prototype.waitForQueryAndGetTime=function(n){return Ae(this,void 0,void 0,(function(){var e=this;return De(this,(function(r){switch(r.label){case 0:return[4,tS((function(){return e.disposed||e.isQueryAvailable(n,de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}))];case 1:return r.sent(),[2,this.getQueryTime(n,de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}}))}))},t.prototype.getQueryTime=function(n,e){if(e===0)return null;if(e===2){var r=this.gl;return r.getQueryParameter(n,r.QUERY_RESULT)/1e6}var a=this.getQueryTimerExtensionWebGL1();return a.getQueryObjectEXT(n,a.QUERY_RESULT_EXT)/1e6},t.prototype.isQueryAvailable=function(n,e){if(e===0)return!0;if(e===2){var r=this.gl,a=this.getQueryTimerExtensionWebGL2(),o=r.getQueryParameter(n,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(a=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(n,a.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),o&&!this.disjoint},t.prototype.pollFence=function(n){var e=this;return new Promise((function(r){e.addItemToPoll((function(){return n.isFencePassed()}),(function(){return r()}))}))},t.prototype.pollItems=function(){for(var n=(function(r){for(var a=0;a<r.length&&r[a]();++a);return a-1})(this.itemsToPoll.map((function(r){return r.isDoneFn}))),e=0;e<=n;++e)(0,this.itemsToPoll[e].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(n+1)},t.prototype.addItemToPoll=function(n,e){var r=this;this.itemsToPoll.push({isDoneFn:n,resolveFn:e}),this.itemsToPoll.length>1||tS((function(){return r.pollItems(),r.itemsToPoll.length===0}))},t.prototype.bindTextureToFrameBuffer=function(n){this.throwIfDisposed(),wm(this.gl,this.debug,n,this.framebuffer),this.debug&&Df(this.gl)},t.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(wm(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Df(this.gl)):uS(this.gl,this.debug,this.framebuffer)},t.prototype.downloadMatrixDriver=function(n,e){this.bindTextureToFrameBuffer(n);var r=e();return this.unbindTextureToFrameBuffer(),r},t.prototype.setOutputMatrixTextureDriver=function(n,e,r){this.throwIfDisposed();var a=this.gl;wm(a,this.debug,n,this.framebuffer),this.debug&&Df(a),this.outputTexture=n,Oe(a,this.debug,(function(){return a.viewport(0,0,e,r)})),Oe(a,this.debug,(function(){return a.scissor(0,0,e,r)}))},t.prototype.setOutputMatrixWriteRegionDriver=function(n,e,r,a){var o=this;this.throwIfDisposed(),Oe(this.gl,this.debug,(function(){return o.gl.scissor(n,e,r,a)}))},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},t})();function wS(t,n){if(t.length!==n.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+n.length+" inputs");t.forEach((function(e,r){var a=e.logicalShape,o=n[r],u=o.shape;if(!Sn(a,u))throw Error("Binary was compiled with different shapes than the current args. Shapes "+a+" and "+u+" must match");if(!e.isUniform||!o.isUniform){var l=e.texShape,c=o.isUniform?null:o.texData.texShape;if(!Sn(l,c))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+l+" and "+c+" must match")}}))}var OL=function(t,n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var r=e.filterWidth,a=e.inChannels,o=e.strideWidth,u=e.strideHeight,l=e.padInfo,c=e.outWidth,d=e.dilationWidth,h=e.dilationHeight,v=e.dataFormat,m=l.left,g=l.top,b=a*r,x=Hn(),S=v==="channelsLast",C=S?0:1,_=S?1:2,R="",E=0;E<=1;E++)for(var T=0;T<=1;T++)R+=`
          blockIndex = rc.y + `+T+`;
          pos = rc.x + `+E+`;

          if(blockIndex < `+t[1]+" && pos < "+t[0]+`) {
            offsetY = int(blockIndex / (`+c+")) * "+u+" - "+g+`;
            d0 = offsetY + `+h+" * (pos / "+b+`);

            if(d0 < `+n[C]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+c+".) * "+o+". - "+m+`.);
              d1 = offsetX + `+d+" * (int(mod(float(pos), "+b+".) / "+a+`.));

              if(d1 < `+n[_]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+a+`.));

                if (`+S+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*E+T)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*E+T)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+R+`

        `+x.output+` = result;
      }
    `},IL=function(t,n,e,r,a){this.variableNames=["x"],this.outputShape=[];var o,u=n,l=t[3]-1;this.outputShape=t;var c="float("+e+") + float("+r+") * sum";o=a===.5?"inversesqrt("+c+")":a===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+a+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+u+"; j <= "+u+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+l+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+o+`;
        setOutput(val);
      }
    `},BL=function(t,n,e,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=e,this.alpha=r,this.beta=a,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+n+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+n+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+e+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+a+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+a+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},FL=function(t,n,e,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,u=n,l=t[3]-1;this.outputShape=t;var c="float("+e+") + float("+r+") * sum";o=a===.5?"inversesqrt("+c+")":a===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+a+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+u+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+u+"; j <= "+u+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+l+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+o+`;
        setOutput(result);
      }
    `},PL=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,e=t.strideWidth,r=t.dilationHeight,a=t.effectiveFilterHeight,o=t.effectiveFilterWidth,u=a-1-t.padInfo.top,l=o-1-t.padInfo.left,c=a*o-1;this.userCode=`
      const ivec2 pads = ivec2(`+u+", "+l+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+a+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+n+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+o+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+e+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+c+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+o+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},LL=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,e=t.strideHeight,r=t.strideWidth,a=t.dilationDepth,o=t.dilationHeight,u=t.dilationWidth,l=t.effectiveFilterDepth,c=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=l-1-t.padInfo.front,v=c-1-t.padInfo.top,m=d-1-t.padInfo.left,g=l*c*d-1;this.userCode=`
      const ivec3 pads = ivec3(`+h+", "+v+", "+m+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+l+`;
           wD += `+a+`) {
          float dyD = float(dyDCorner + wD) / `+n+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+c+`;
              wR += `+o+`) {
            float dyR = float(dyRCorner + wR) / `+e+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+d+`;
                wC += `+u+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+g+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+c+" * "+d+` +
                  wR * `+d+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},_m=function(t,n,e,r,a,o,u){e===void 0&&(e=!1),r===void 0&&(r=!1),a===void 0&&(a=!1),o===void 0&&(o=null),u===void 0&&(u=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;var l=e?t[1]:t[2],c=Math.ceil(l/2),d=e?"i * 2, rc.y":"rc.y, i * 2",h=r?"rc.z, i * 2":"i * 2, rc.z",v=e?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],g="",b="";o&&(g=u?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+o+`
        }`:`vec4 activation(vec4 x) {
          `+o+`
        }`,b="result = activation(result);");var x=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+g+`

      const float sharedDimension = `+c+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+c+`; i++) {
          vec4 a = getMatrixA(rc.x, `+d+`);
          vec4 b = getMatrixB(rc.x, `+h+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+v[0]+" * "+m[0]+`);
          result += (`+v[1]+" * "+m[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+x+`

        `+b+`

        setOutput(result);
      }
    `},zL=(function(){function t(n,e,r){this.variableNames=["probs"],this.outputShape=[n,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(e-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(e-1)+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(n){var e=this;return function(r,a){e.seedLoc==null&&(e.seedLoc=r.getUniformLocation(a,"seed")),r.gl.uniform1f(e.seedLoc,n)}},t})(),UL=function(t,n,e,r){this.variableNames=["indices"],this.outputShape=[t,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+e+`),
                      float(index == coords.y)));
      }
    `},WL=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;var n=t.length;if(n===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var e=ar("rc",n),r=kt(n),a=(function(l,c,d){if(l===1)return"rc > "+c[0];for(var h="",v=l-2;v<l;v++)h+=d[v]+" >= "+c[v],v<l-1&&(h+="||");return h})(n,t,e),o=(function(l,c,d,h){if(l===1)return"";var v=h.slice(-2);return`
    int r = `+v[0]+`;
    int c = `+v[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+c+`;
    bool rEdge = rp1 >= `+d+`;
  `})(n,t[t.length-1],t[t.length-2],e),u=(function(l,c){var d=l.length,h=(function(v,m){for(var g=[],b=0;b<=1;b++)for(var x=0;x<=1;x++){for(var S=(b===0?"r":"rp1")+", "+(x===0?"c":"cp1"),C=2;C<v;C++)S=m[m.length-1-C]+","+S;g.push(S)}return g})(d,c);return d===1?`getA(rc),
            rc + 1 >= `+l[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+h[0]+`),
          cEdge ? 0. : getA(`+h[1]+`),
          rEdge ? 0. : getA(`+h[2]+`),
          rEdge || cEdge ? 0. : getA(`+h[3]+")"})(t,e);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+a+`) {
            setOutput(vec4(0));
          } else {
            `+o+`

            setOutput(vec4(`+u+`));
          }
        }
      `}},HL=function(t,n,e){this.variableNames=["x"],this.outputShape=n.map((function(c,d){return c[0]+t[d]+c[1]}));var r=t.length,a=kt(r),o=n.map((function(c){return c[0]})).join(","),u=n.map((function(c,d){return c[0]+t[d]})).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+a+" start = "+a+"("+o+`);
      `+a+" end = "+a+"("+u+`);

      void main() {
        `+a+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+e+`));
        } else {
          `+a+` coords = outC - start;
          setOutput(getX(`+l+`));
        }
      }
    `:`
        int start = `+o+`;
        int end = `+u+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+e+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},VL=function(t,n,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(S,C){return S[0]+t[C]+S[1]}));for(var r=t.length,a=kt(r),o=n.map((function(S){return S[0]})).join(","),u=n.map((function(S,C){return S[0]+t[C]})).join(","),l=ar("rc",r),c=ar("source",r),d=l[r-1]+" < "+this.outputShape[r-1],h=r===1?"source":"vec2("+c.slice(-2).join()+")",v=[a+" rc = outputLoc;",l[r-1]+` += 1;
       if(`+d+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+l[r-2]+` += 1;
       if(`+l[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+l[r-1]+` += 1;
         if(`+d+") {"],m=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",g="",b=0,x=r===1?2:4;b<x;b++)g+=`
        `+v[b]+`
        if (`+m+`) {
          result[`+b+"] = float("+e+`);
        } else {
          `+a+` source = rc - start;
          result[`+b+"] = getChannel(getX("+c.join()+"), "+h+`);
        }
      `;g+=r===1?"} ":"}}",this.userCode=`
      const `+a+" start = "+a+"("+o+`);
      const `+a+" end = "+a+"("+u+`);

      void main() {
        `+a+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+g+`
        setOutput(result);
      }
    `},Tm=function(t,n,e){if(this.variableNames=["x"],n==="avg"&&e)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,u=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=t.padInfo.top,v=t.padInfo.left;this.outputShape=t.outShape;var m=n==="avg",g="0.0";if(m||(g="-1.0 / 1e-20"),e)this.userCode=`
        const ivec2 strides = ivec2(`+a+", "+o+`);
        const ivec2 pads = ivec2(`+h+", "+v+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+c+`;
              wR += `+u+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+d+`;
                wC += `+l+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+d+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var b=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="avg"&&(b="avgValue / count");var x=4*Math.floor(r/4),S=r%4,C=`
      if (`+m+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+a+", "+o+`);
      const ivec2 pads = ivec2(`+h+", "+v+`);
      const float initializationValue = `+g+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+g+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+c+`;
            wR += `+u+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+x+`; wC += 4) {
            int xC = xCCorner + wC * `+l+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              getValue(batch, xR, xC + 2 * `+l+`, d),
              getValue(batch, xR, xC + 3 * `+l+`, d)
            );

            `+C+`
          }

          int xC = xCCorner + `+x+`;
          if (`+(S===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+C+`
          } else if (`+(S===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              initializationValue,
              initializationValue
            );

            `+C+`
          } else if (`+(S===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              getValue(batch, xR, xC + 2 * `+l+`, d),
              initializationValue
            );

            `+C+`
          }
        }
        setOutput(`+b+`);
      }
    `}},Am=function(t,n,e){if(this.variableNames=["x"],n==="avg"&&e)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,a=t.strideDepth,o=t.strideHeight,u=t.strideWidth,l=t.dilationDepth,c=t.dilationHeight,d=t.dilationWidth,h=t.effectiveFilterDepth,v=t.effectiveFilterHeight,m=t.effectiveFilterWidth,g=t.padInfo.front,b=t.padInfo.top,x=t.padInfo.left;this.outputShape=t.outShape;var S=n==="avg",C="0.0";if(S||(C="-1.0 / 1e-20"),e)this.userCode=`
        const ivec3 strides =
            ivec3(`+a+", "+o+", "+u+`);
        const ivec3 pads = ivec3(`+g+", "+b+", "+x+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+h+`;
              wD += `+l+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+t.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+v+`;
                wR += `+c+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+m+`;
                  wC += `+d+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+v+" * "+m+` +
                      wR * `+m+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var _=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="avg"&&(_="avgValue / count");var R=4*Math.floor(r/4),E=r%4,T=`
      if (`+S+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+a+", "+o+", "+u+`);
      const ivec3 pads = ivec3(`+g+", "+b+", "+x+`);
      const float initializationValue = `+C+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+C+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+h+`;
            wD += `+l+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+v+`;
            wR += `+c+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+R+`; wC += 4) {
              int xC = xCCorner + wC * `+d+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+d+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+d+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+d+`, ch)
              );

              `+T+`
            }

            int xC = xCCorner + `+R+`;
            if (`+(E===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+T+`
            } else if (`+(E===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+d+`, ch),
                initializationValue,
                initializationValue
              );

              `+T+`
            } else if (`+(E===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+d+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+d+`, ch),
                initializationValue
              );

              `+T+`
            }
          }
          setOutput(`+_+`);
        }
      }
    `}},jL=function(t,n){this.variableNames=["x"];var e=t.windowSize,r=t.batchSize,a=t.inSize,o=Math.ceil(a/e);this.outputShape=[r,o];var u="0.0",l="";n==="prod"?u="1.0":n==="min"?(u="1.0 / 1e-20",l="min"):n==="max"&&(u="-1.0 / 1e-20",l="max");var c=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");var d=4*Math.floor(e/4),h=e%4,v=`
      if (`+(n==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(n==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+l+`(values, minMaxValue);
      }
    `,m="vec4";n==="all"?(u="1.0",v=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,m="bvec4"):n==="any"&&(u="0.0",v=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,m="bvec4");var g="";a%e>0&&(g=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+u+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+g+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+e+`;

        vec4 minMaxValue = vec4(`+u+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+d+`; i += 4) {
          int inIdx = inOffset + i;
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+v+`
        }

        int inIdx = inOffset + `+d+`;
        if (`+(h===1)+`) {
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+v+`
        } else if (`+(h===2)+`) {
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+v+`
        } else if (`+(h===3)+`) {
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+v+`
        }
        setOutput(`+c+`);
      }
    `},GL=function(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var e="",r=0;r<4;r++){var a="thisRC = rc;";r%2==1&&(a+="thisRC.z += 1;"),r>1&&(a+="thisRC.y += 1;"),e+=`
        `+a+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+ki(["r","c","d"],n)+`
      return ivec3(r, c, d);
    }
  
      `+Ey(t)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+t[1]+`;
        int cols = `+t[2]+`;

        `+e+`

        setOutput(result);
      }
    `},qL=function(t,n,e){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n.shape;var r=n.shape,a=r[1],o=r[2],u=t.shape,l=u[1],c=u[2],d=[e&&l>1?a-1:a,e&&c>1?o-1:o],h=[e&&l>1?l-1:l,e&&c>1?c-1:c],v=d[0]/h[0],m=d[1]/h[1],g=1/v,b=1/m,x=2*Math.ceil(g)+2,S=2*Math.ceil(b)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+v+`);
        const float widthScale = float(`+m+`);

        const float invHeightScale = float(`+g+`);
        const float invWidthScale = float(`+b+`);

        const int winHeight = int(`+x+`);
        const int winWidth = int(`+S+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+l+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(a-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(o-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},$L=function(t,n,e,r){this.variableNames=["A"],this.outputShape=[];var a=t[0],o=t[1],u=t[2],l=t[3];this.outputShape=[a,n,e,l];var c=[r&&n>1?o-1:o,r&&e>1?u-1:u],d=[r&&n>1?n-1:n,r&&e>1?e-1:e];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/d[0]+`,
          `+c[1]/d[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+u+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},KL=function(t,n,e,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var a=t[0],o=t[1],u=t[2],l=t[3];this.outputShape=[a,n,e,l];var c=[r&&n>1?o-1:o,r&&e>1?u-1:u],d=[r&&n>1?n-1:n,r&&e>1?e-1:e];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+c[0]/d[0]+`,
          `+c[1]/d[1]+`,
          `+c[1]/d[1]+`);
      const vec3 inputShapeRC = vec3(`+o+".0, "+u+`.0,
                                     `+u+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(l-1)+`;
        bool hasNextRow = coords.z < `+(e-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},XL=function(t,n,e){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n.shape;var r=n.shape,a=r[1],o=r[2],u=t.shape,l=u[1],c=u[2],d=[e&&l>1?a-1:a,e&&c>1?o-1:o],h=[e&&l>1?l-1:l,e&&c>1?c-1:c],v=d[0]/h[0],m=d[1]/h[1],g=1/v,b=1/m,x=2*Math.ceil(g)+2,S=2*Math.ceil(b)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+v+`);
        const float widthScale = float(`+m+`);

        const float invHeightScale = float(`+g+`);
        const float invWidthScale = float(`+b+`);

        const int winHeight = int(`+x+`);
        const int winWidth = int(`+S+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+l+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float sourceFracRow =
              float(`+d[0]+`) *
                (float(dyR) / float(`+h[0]+`));

            float sourceFracCol =
                float(`+d[1]+`) *
                  (float(dyC) / float(`+h[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+a+`) - 1),
                `+e+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+o+`) - 1),
                `+e+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},YL=function(t,n,e,r){this.variableNames=["A"],this.outputShape=[];var a=t[0],o=t[1],u=t[2],l=t[3];this.outputShape=[a,n,e,l];var c=[r&&n>1?o-1:o,r&&e>1?u-1:u],d=[r&&n>1?n-1:n,r&&e>1?e-1:e],h=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/d[0]+`,
          `+c[1]/d[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+u+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+h+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},QL=function(t,n){this.variableNames=["x"];var e=t.length;if(e>4)throw new Error("WebGL backend: Reverse of rank-"+e+" tensor is not yet supported");if(this.outputShape=t,e!==1){var r=t.map((function(o,u){return(function(l){return n.indexOf(l)!==-1&&t[l]!==1?t[l]+" - coords["+l+"] - 1":"coords["+l+"]"})(u)})).join(","),a=kt(e);this.userCode=`
      void main() {
        `+a+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+t[0]+` - coord - 1));
        }
      `},ZL=function(t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var e=t.length;if(e>4)throw new Error("WebGL backend: Reverse of rank-"+e+" tensor is not yet supported");this.outputShape=t;var r=ar("rc",e),a=r[e-1]+" + 1 < "+this.outputShape[e-1],o=r[e-2]+" + 1 < "+this.outputShape[e-2],u=kt(e);function l(c){var d=t.map((function(h,v){return(function(m,g){return n.indexOf(m)!==-1&&t[m]!==1?t[m]+" - "+g[m]+" - 1":""+g[m]})(v,c)}));return"getChannel(getX("+d.join(",")+"), vec2("+d.slice(-2).join(",")+"))"}this.userCode=e===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+t[0]+` - rc - 1),
            `+t[0]+` - rc - 1);
          if(`+a+`){
              result.g = getChannel(getX(`+t[0]+` - (rc  + 1) - 1),
                `+t[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+u+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+(function(c){return l(c)})(r.slice())+`;
          if(`+a+`){
            result.g = `+(function(c){return c[e-1]="("+c[e-1]+" + 1)",l(c)})(r.slice())+`;
          }
          if(`+o+`) {
            result.b = `+(function(c){return c[e-2]="("+c[e-2]+" + 1)",l(c)})(r.slice())+`;
            if(`+a+`) {
              result.a = `+(function(c){return c[e-1]="("+c[e-1]+" + 1)",c[e-2]="("+c[e-2]+" + 1)",l(c)})(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},SS=function(t,n,e,r,a,o,u){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var l=kt(a.length),c=kt(o.length),d="";e===1?d="i":e===2&&(d="i, j");var h="getIndices("+d+")",v="";r===1?v="i":r===2&&(v="i, coords[1]");var m="getUpdates("+v+")",g=n>1?"strides[j]":"strides";this.userCode=`
        `+l+" strides = "+l+"("+a+`);

        void main() {
          `+c+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+t+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+n+`; j++) {
              int index = round(`+h+`);
              flattenedIndex += index * `+g+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+m+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},JL=function(t,n){this.variableNames=["x","segmentIds"];var e=t.windowSize,r=t.batchSize,a=t.inSize,o=t.numSegments,u=o*Math.ceil(a/e);this.outputShape=[r,u];var l=4*Math.floor(e/4),c=e%4,d=`
        sumValue += dot(values, segFilter);
    `,h="";a%e>0&&(h=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return initializationValue;
        }
      `);var v="";a%e>0&&(v=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+h+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+v+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+o+")) * float("+e+`));
        int currentSeg = int(mod(float(outIdx), float(`+o+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+l+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+d+`
        }

        int inIdx = inOffset + `+l+`;
        if (`+(c===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+d+`
        } else if (`+(c===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+d+`
        } else if (`+(c===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+d+`
        }
        setOutput(sumValue);
      }
    `},e5=function(t,n,e){var r,a;if(this.variableNames=["c","a","b"],this.outputShape=n,e>4)throw Error("Where for rank "+e+" is not yet supported");if(e===1)a="resRC",r="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],u=[],l=[],c=0;c<n.length;c++)l.push(""+o[c]),c<t&&u.push(""+o[c]);r=u.join(),a=l.join()}var d=kt(e);this.userCode=`
      void main() {
        `+d+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+a+`));
        } else {
          setOutput(getB(`+a+`));
        }
      }
    `},t5=(function(){function t(n){this.variableNames=["source"],this.outputShape=n,this.rank=n.length;var e,r=kt(this.rank),a="uniform int start["+this.rank+"];",o=(function(u){if(u===1)return"sourceLoc";if(u<=6)return Dm.slice(0,u).map((function(l){return"sourceLoc."+l})).join(",");throw Error("Slicing for rank "+u+" is not yet supported")})(this.rank);e=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+n.map((function(u,l){return"sourceLoc."+Dm[l]+" = start["+l+"] + coords."+Dm[l]+";"})).join(`
`)+`
      `,this.userCode=`
      `+a+`
      void main() {
        `+e+`
        setOutput(getSource(`+o+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(n){var e=this;if(n.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+n.length+")");return function(r,a){e.startLoc==null&&(e.startLoc=r.getUniformLocationNoThrow(a,"start"),e.startLoc==null)||r.gl.uniform1iv(e.startLoc,n)}},t})(),Dm=["x","y","z","w","u","v"],n5=(function(){function t(n){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.rank=n.length;var e=kt(this.rank),r=ar("coords",this.rank),a=ar("sourceLoc",this.rank),o=this.rank===1?"sourceLoc":"vec2("+a.slice(-2).join()+")",u="getChannel(getSource("+a.join()+"), "+o+")",l=`
      result.x = `+u+`;
      if (++`+r[this.rank-1]+" < "+n[this.rank-1]+`) {
        ++`+a[this.rank-1]+`;
        result.y = `+u+`;
        --`+a[this.rank-1]+`;
      }
    `,c=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+n[this.rank-2]+`) {
        ++`+a[this.rank-2]+`;
        result.z = `+u+`;
        if (++`+r[this.rank-1]+" < "+n[this.rank-1]+`) {
          ++`+a[this.rank-1]+`;
          result.w = `+u+`;
        }
      }
    `,d=this.rank<=4?`sourceLoc = coords +
            `+e+"("+n.map((function(h,v){return"start["+v+"]"})).join()+");":n.map((function(h,v){return a[v]+" = "+r[v]+" + start["+v+"];"})).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+e+` coords = getOutputCoords();
        `+e+` sourceLoc;
        `+d+`
        vec4 result = vec4(0.);
        `+l+`
        `+c+`
        setOutput(result);
      }
    `}return t.prototype.getCustomSetupFunc=function(n){var e=this;if(n.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+n.length+")");return function(r,a){e.startLoc==null&&(e.startLoc=r.getUniformLocationNoThrow(a,"start"),e.startLoc==null)||r.gl.uniform1iv(e.startLoc,n)}},t})(),r5=function(t,n,e){this.variableNames=["x"],this.outputShape=e;var r=e.length,a=kt(e.length),o=kt(e.length),u="";if(r===1)u="coords * strides + begin";else{var l=0;u=e.map((function(c,d){return l++,e.length===1?"coords * strides["+d+"] + begin["+d+"]":"coords["+(l-1)+"] * strides["+d+"] + begin["+d+"]"})).join(",")}this.userCode=`
      `+a+" begin = "+a+"("+t+`);
      `+a+" strides = "+a+"("+n+`);

      void main() {
        `+o+` coords = getOutputCoords();
        setOutput(getX(`+u+`));
      }
    `},a5=(function(){function t(n){this.gpgpu=n,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return t.prototype.acquireTexture=function(n,e,r){var a,o=CS(e,r),u=ES(n,o,r);if(u in this.freeTextures||(this.freeTextures[u]=[]),u in this.usedTextures||(this.usedTextures[u]=[]),this.freeTextures[u].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var l=this.freeTextures[u].shift();return this.usedTextures[u].push(l),l}return this.numUsedTextures++,this.log(),o===br.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(n[0],n[1]):o===br.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(n[0],n[1]):o===br.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(n[0],n[1]):o===br.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(n[0],n[1]):o===br.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(n[0],n[1])),this.usedTextures[u].push(a),a},t.prototype.releaseTexture=function(n,e,r,a){if(this.freeTextures!=null){var o=ES(e,CS(r,a),a);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(n),this.numFreeTextures++,this.numUsedTextures--;var u=this.usedTextures[o],l=u.indexOf(n);if(l<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(l,1),this.log()}},t.prototype.log=function(){if(this.logEnabled){var n=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+n+")")}},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var n=this;if(this.freeTextures!=null){for(var e in this.freeTextures)this.freeTextures[e].forEach((function(r){n.gpgpu.deleteMatrixTexture(r)}));for(var e in this.usedTextures)this.usedTextures[e].forEach((function(a){n.gpgpu.deleteMatrixTexture(a)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},t})();function CS(t,n){if(t===wr.UPLOAD)return br.PACKED_2X2_FLOAT32;if(t===wr.RENDER||t==null)return(function(e){return de().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?br.PACKED_2X2_FLOAT32:br.UNPACKED_FLOAT32:e?br.PACKED_2X2_FLOAT16:br.UNPACKED_FLOAT16})(n);if(t===wr.DOWNLOAD||t===wr.PIXELS)return br.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+t)}function ES(t,n,e){return t[0]+"_"+t[1]+"_"+n+"_"+e}var o5=function(t,n){this.variableNames=["A"];for(var e=new Array(t.length),r=0;r<e.length;r++)e[r]=t[r]*n[r];this.outputShape=e,this.rank=e.length;var a=kt(this.rank),o=(function(u){var l=u.length;if(l>5)throw Error("Tile for rank "+l+" is not yet supported");if(l===1)return"imod(resRC, "+u[0]+")";for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],d=[],h=0;h<u.length;h++)d.push("imod("+c[h]+", "+u[h]+")");return d.join()})(t);this.userCode=`
      void main() {
        `+a+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `},i5=function(t,n){this.variableNames=["A"];for(var e=new Array(t.length),r=0;r<e.length;r++)e[r]=t[n[r]];this.outputShape=e,this.rank=e.length;var a=kt(this.rank),o=(function(u){var l=u.length;if(l>6)throw Error("Transpose for rank "+l+" is not yet supported");for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],d=new Array(l),h=0;h<u.length;h++)d[u[h]]=c[h];return d.join()})(n);this.userCode=`
    void main() {
      `+a+` resRC = getOutputCoords();
      setOutput(getA(`+o+`));
    }
    `},s5=function(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var e=new Array(t.length),r=0;r<e.length;r++)e[r]=t[n[r]];if(this.outputShape=e,this.rank=e.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var a=kt(this.rank),o=sR("rc",this.rank),u=new Array(this.rank);for(r=0;r<n.length;r++)u[n[r]]=o[r];var l="vec2("+u.slice(-2).join()+")",c="++"+o[this.rank-1]+" < "+e[this.rank-1],d="getChannel(getA("+u.join()+"), "+l+")";this.userCode=`
    void main() {
      `+a+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+d+`;
      if(`+c+`) {
        result[1] = `+d+`;
      }
      --`+o[this.rank-1]+`;
      if(++`+o[this.rank-2]+" < "+e[this.rank-2]+`) {
        result[2] = `+d+`;
        if(`+c+`) {
          result[3] = `+d+`;
        }
      }
      setOutput(result);
    }
    `},Ry=1.7580993408473768,_y=1.0507009873554805,Xe=function(t,n){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      float unaryOperation(float x) {
        `+n+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},ia="if (isnan(x)) return x;",u5="return x;",RS="return abs(x);",dR=ia+`
  return (x < 0.0) ? 0.0 : x;
`,hR=ia+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,pR="return (x >= 0.0) ? x : (exp(x) - 1.0);",l5=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+Ry+`;
  float scale = `+_y+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,_S="return -x;",TS="return ceil(x);",AS="return floor(x);",DS="return exp(x);",kS="return exp(x) - 1.0;",c5=ia+`
  return sin(x);
`,f5=ia+`
  return cos(x);
`,d5=ia+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,h5=ia+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,p5=ia+`
  return atan(x);
`,v5=ia+"return log(x + sqrt(x * x + 1.0));",m5=ia+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,g5=ia+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Of="return x;",y5="return x;",vR=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,mR=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,gR=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,vl=function(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+n+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},b5=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;var n=t.length,e=ar("rc",n),r=kt(n),a=(function(l,c){if(l===1)return"rc";for(var d="",h=0;h<l;h++)d+=c[h],h<l-1&&(d+=",");return d})(n,e),o=e.slice(-2),u=n<=1?"rc":"vec2("+o.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+a+`);

        setOutput(getChannel(packedInput, `+u+`));
      }
    `},If={};function Bf(t,n){if(n===void 0&&(n=!1),t==="linear")return n?y5:u5;if(t==="relu")return n?vR:dR;if(t==="elu")return n?gR:pR;if(t==="relu6")return n?mR:hR;if(t==="prelu")return n?fR:cR;throw new Error("Activation "+t+" has not been implemented for the WebGL backend.")}var x5=600,w5=(function(t){function n(e){var r,a=t.call(this)||this;if(a.pendingRead=new WeakMap,a.pendingDisposal=new WeakSet,a.dataRefCount=new WeakMap,a.numBytesInGPU=0,a.uploadWaitMs=0,a.downloadWaitMs=0,a.warnedAboutMemory=!1,a.pendingDeletes=0,a.disposed=!1,!de().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(e==null){var o=ka(de().getNumber("WEBGL_VERSION"));a.binaryCache=((r=de().getNumber("WEBGL_VERSION"))in If||(If[r]={}),If[r]),a.gpgpu=new ML(o),a.canvas=o.canvas,a.gpgpuCreatedLocally=!0}else a.gpgpu=e,a.binaryCache={},a.gpgpuCreatedLocally=!1,a.canvas=e.gl.canvas;return a.textureManager=new a5(a.gpgpu),a.numMBBeforeWarning=de().global.screen==null?1024:de().global.screen.height*de().global.screen.width*window.devicePixelRatio*x5/1024/1024,a.texData=new ZE(a,ee),a}return oa(n,t),n.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},n.prototype.write=function(e,r,a){if(de().getBool("DEBUG")&&this.checkNumericalProblems(e),a==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var o={};return this.texData.set(o,{shape:r,dtype:a,values:e,usage:wr.UPLOAD}),o},n.prototype.move=function(e,r,a,o){if(de().getBool("DEBUG")&&this.checkNumericalProblems(r),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:a,dtype:o,values:r,usage:wr.UPLOAD})},n.prototype.readSync=function(e){var r=this.texData.get(e),a=r.values,o=r.dtype,u=r.complexTensors,l=r.slice,c=r.shape,d=r.isPacked;if(l!=null){var h=void 0;h=d?new vl(c,Of):new Xe(c,Of);var v=this.runWebGLProgram(h,[{dataId:e,shape:c,dtype:o}],o),m=this.readSync(v.dataId);return this.disposeData(v.dataId),m}if(a!=null)return this.convertAndCacheOnCPU(e);if(o==="string")return a;var g,b,x=this.activeTimers!=null;return x&&(g=ga()),o==="complex64"?b=bg(u.real.dataSync(),u.imag.dataSync()):b=this.getValuesFromTexture(e),x&&(this.downloadWaitMs+=ga()-g),this.convertAndCacheOnCPU(e,b)},n.prototype.read=function(e){return Ae(this,void 0,void 0,(function(){var r,a,o,u,l,c,d,h,v,m,g,b,x,S,C,_,R,E,T,k,N,O;return De(this,(function(I){switch(I.label){case 0:if(this.pendingRead.has(e))return r=this.pendingRead.get(e),[2,new Promise((function(B){return r.push(B)}))];if(a=this.texData.get(e),o=a.values,u=a.shape,l=a.slice,c=a.dtype,d=a.complexTensors,h=a.isPacked,l!=null)return v=void 0,v=h?new vl(u,Of):new Xe(u,Of),m=this.runWebGLProgram(v,[{dataId:e,shape:u,dtype:c}],c),g=this.read(m.dataId),this.disposeData(m.dataId),[2,g];if(o!=null)return[2,this.convertAndCacheOnCPU(e)];if(!de().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&de().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return b=null,c!=="complex64"&&de().get("WEBGL_BUFFER_SUPPORTED")&&(x=this.decode(e),S=this.texData.get(x.dataId),b=(O=this.gpgpu).createBufferFromTexture.apply(O,[S.texture].concat(Cl(u)))),this.pendingRead.set(e,[]),c==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:I.sent(),I.label=2;case 2:return c!=="complex64"?[3,4]:[4,Promise.all([d.real.data(),d.imag.data()])];case 3:return _=I.sent(),R=_[0],E=_[1],C=bg(R,E),[3,5];case 4:b==null?C=this.getValuesFromTexture(e):(T=Ne(u),C=this.gpgpu.downloadFloat32MatrixFromBuffer(b,T)),I.label=5;case 5:return x!=null&&this.disposeData(x.dataId),k=this.convertAndCacheOnCPU(e,C),N=this.pendingRead.get(e),this.pendingRead.delete(e),N.forEach((function(B){return B(k)})),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e),this.pendingDeletes--),[2,k]}}))}))},n.prototype.checkNumericalProblems=function(e){if(e!=null)for(var r=0;r<e.length;r++){var a=e[r];if(!lF(a))throw de().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+a+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+a+" cannot be represented on this device.")}},n.prototype.getValuesFromTexture=function(e){var r,a=this.texData.get(e),o=a.shape,u=a.dtype,l=a.isPacked,c=Ne(o);if(de().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var d=this.decode(e),h=this.texData.get(d.dataId),v=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[h.texture].concat(Cl(o))).subarray(0,c);return this.disposeData(d.dataId),v}var m=de().getBool("WEBGL_PACK")&&l===!0,g=m?Sm(o):o,b=m?new uL(g):new sL(g),x=this.runWebGLProgram(b,[{shape:g,dtype:u,dataId:e}],"float32"),S=this.texData.get(x.dataId),C=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(S.texture,S.texShape[0],S.texShape[1]).subarray(0,c);return this.disposeData(x.dataId),C},n.prototype.time=function(e){return Ae(this,void 0,void 0,(function(){var r,a,o,u,l,c,d;return De(this,(function(h){switch(h.label){case 0:return r=this.activeTimers,a=[],o=!1,this.programTimersStack==null?(this.programTimersStack=a,o=!0):this.activeTimers.push(a),this.activeTimers=a,e(),u=nu(this.activeTimers.map((function(v){return v.query}))).filter((function(v){return v!=null})),l=nu(this.activeTimers.map((function(v){return v.name}))).filter((function(v){return v!=null})),this.activeTimers=r,o&&(this.programTimersStack=null),c={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(u)]:[3,2];case 1:return d=h.sent(),c.kernelMs=VB(d),c.getExtraProfileInfo=function(){return d.map((function(v,m){return{name:l[m],ms:v}})).map((function(v){return v.name+": "+v.ms})).join(", ")},[3,3];case 2:c.kernelMs={error:"WebGL query timers are not supported in this environment."},h.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,c]}}))}))},n.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},n.prototype.startTimer=function(){return de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:ga(),endMs:null}},n.prototype.endTimer=function(e){return de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=ga(),e)},n.prototype.getQueryTime=function(e){return Ae(this,void 0,void 0,(function(){var r;return De(this,(function(a){return de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(r=e).endMs-r.startMs]}))}))},n.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(this.texData.has(e)){this.releaseGPUData(e);var r=this.texData.get(e).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(e)}}},n.prototype.releaseGPUData=function(e){var r=this.texData.get(e),a=r.texture,o=r.dtype,u=r.texShape,l=r.usage,c=r.isPacked,d=r.slice,h=d&&d.origDataId||e,v=this.dataRefCount.get(h);v>1?this.dataRefCount.set(h,v-1):(this.dataRefCount.delete(h),a!=null&&(this.numBytesInGPU-=this.computeBytes(u,o),this.textureManager.releaseTexture(a,u,l,c)));var m=this.texData.get(e);m.texture=null,m.texShape=null,m.isPacked=!1,m.slice=null},n.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},n.prototype.getDataInfo=function(e){return this.texData.get(e)},n.prototype.getCPUBackend=function(){return de().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=ee.findBackend("cpu")),this.cpuBackend):null},n.prototype.shouldExecuteOnCPU=function(e,r){var a=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&e.every((function(o){return a.texData.get(o.dataId).texture==null&&o.size<r}))},n.prototype.getGPGPUContext=function(){return this.gpgpu},n.prototype.complex=function(e,r){var a=this.makeOutput(e.shape,"complex64");return this.texData.get(a.dataId).complexTensors={real:ee.keep(e.clone()),imag:ee.keep(r.clone())},a},n.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},n.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},n.prototype.slice=function(e,r,a){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,r,a);if(Ne(a)===0)return On([],a,e.dtype);var o=this.texData.get(e.dataId).isPacked,u=YE(e.shape,r,a);if(o||!u){var l=de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new n5(a):new t5(a),c=l.getCustomSetupFunc(r);return this.compileAndRun(l,[e],null,c)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,r,a)},n.prototype.shallowSlice=function(e,r,a){var o=this.texData.get(e.dataId),u=this.makeOutput(a,e.dtype),l=this.texData.get(u.dataId);Object.assign(l,o),l.shape=a,l.dtype=e.dtype;var c=QE(r,e.strides);o.slice&&(c+=o.slice.flatOffset),l.slice={flatOffset:c,origDataId:o.slice&&o.slice.origDataId||e.dataId};var d=this.dataRefCount.get(l.slice.origDataId)||1;return this.dataRefCount.set(l.slice.origDataId,d+1),u},n.prototype.stridedSlice=function(e,r,a,o){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,r,a,o);var u=by(r,a,o);if(u.some((function(c){return c===0})))return On([],u);var l=new r5(r,o,u);return this.compileAndRun(l,[e])},n.prototype.reverse=function(e,r){var a=de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ZL(e.shape,r):new QL(e.shape,r);return this.compileAndRun(a,[e])},n.prototype.concat=function(e,r){if(e[0].dtype==="complex64"){var a=e.map((function(g){return Hr(g)})),o=e.map((function(g){return xa(g)}));return kn(this.concat(a,r),this.concat(o,r))}if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,r);if(e.length===1)return e[0];if(e.length>de().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var u=Math.floor(e.length/2),l=this.concat(e.slice(0,u),r),c=this.concat(e.slice(u),r);return this.concat([l,c],r)}if(de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var d=new $P(e.map((function(g){return g.shape})),r);return this.compileAndRun(d,e)}var h=au(e.map((function(g){return g.shape})),r),v=e.map((function(g){return g.as2D(-1,Ne(g.shape.slice(r)))})),m=new qP(v.map((function(g){return g.shape})));return this.compileAndRun(m,v).reshape(h)},n.prototype.neg=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.neg(e);if(de().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,_S,e.dtype);var r=new Xe(e.shape,_S);return this.compileAndRun(r,[e])},n.prototype.batchMatMul=function(e,r,a,o){var u=a?e.shape[2]:e.shape[1],l=o?r.shape[1]:r.shape[2],c=a?e.shape[1]:e.shape[2],d=e.shape[0];if((u===1||l===1)&&c>1e3){a&&(e=e.transpose([0,2,1])),o&&(r=r.transpose([0,2,1]));var h=l===1?e:e.as3D(d,c,1),v=l===1?2:1,m=l===1?r.as3D(d,1,c):r;return this.multiply(h,m).sum(v,!0)}var g=Nn(e.dtype,r.dtype),b=new _m(e.shape,[d,u,l],a,o);return this.compileAndRun(b,[e,r],g)},n.prototype.fusedBatchMatMul=function(e){var r=e.a,a=e.b,o=e.transposeA,u=e.transposeB,l=e.bias,c=e.activation,d=e.preluActivationWeights,h=o?r.shape[2]:r.shape[1],v=u?a.shape[1]:a.shape[2],m=r.shape[0],g=Nn(r.dtype,a.dtype),b=l!=null,x=d!=null,S=c?Bf(c,!0):null,C=new _m(r.shape,[m,h,v],o,u,b,S,x),_=[r,a];return l&&_.push(l),d&&_.push(d),this.compileAndRun(C,_,g)},n.prototype.multiply=function(e,r){if(e.dtype==="complex64"){var a=this.texData.get(e.dataId),o=this.texData.get(r.dataId),u=new pS(WP,e.shape,r.shape),l=new pS(HP,e.shape,r.shape),c=[this.makeComplexComponentTensorInfo(e,a.complexTensors.real),this.makeComplexComponentTensorInfo(e,a.complexTensors.imag),this.makeComplexComponentTensorInfo(r,o.complexTensors.real),this.makeComplexComponentTensorInfo(r,o.complexTensors.imag)],d=this.compileAndRun(u,c),h=this.compileAndRun(l,c),v=this.complex(d,h);return d.dispose(),h.dispose(),v}if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.multiply(e,r);if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,vS,e.dtype);var m=new $t(vS,e.shape,r.shape);return this.compileAndRun(m,[e,r],e.dtype)},n.prototype.batchNormalization=function(e,r,a,o,u,l){var c=[e,r,a],d=null;l!=null&&(d=l.shape,c.push(l));var h=null;if(u!=null&&(h=u.shape,c.push(u)),de().getBool("WEBGL_PACK_NORMALIZATION")){var v=new UP(e.shape,r.shape,a.shape,d,h,o);return this.compileAndRun(v,c)}var m=new zP(e.shape,r.shape,a.shape,d,h,o);return this.compileAndRun(m,c)},n.prototype.localResponseNormalization4D=function(e,r,a,o,u){var l=de().getBool("WEBGL_PACK_NORMALIZATION")?new FL(e.shape,r,a,o,u):new IL(e.shape,r,a,o,u);return this.compileAndRun(l,[e])},n.prototype.LRNGrad=function(e,r,a,o,u,l,c){var d=new BL(r.shape,o,u,l,c);return this.compileAndRun(d,[r,a,e])},n.prototype.tile=function(e,r){if(e.dtype==="string"){var a=this.readSync(e.dataId).map((function(u){return ld(u)}));return oR(qe(e.shape,e.dtype,a),r)}var o=new o5(e.shape,r);return this.compileAndRun(o,[e])},n.prototype.pad=function(e,r,a){var o=de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new VL(e.shape,r,a):new HL(e.shape,r,a);return this.compileAndRun(o,[e])},n.prototype.transpose=function(e,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.transpose(e,r);var a=de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new s5(e.shape,r):new i5(e.shape,r);return this.compileAndRun(a,[e])},n.prototype.gather=function(e,r,a){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.gather(e,r,a);var o=new pL(e.shape,r.size,a);return this.compileAndRun(o,[e,r])},n.prototype.batchToSpaceND=function(e,r,a){W(e.rank<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var o=r.reduce((function(v,m){return v*m})),u=vd(e.shape,r,o),l=md(u.length,r.length),c=gd(e.shape,r,o),d=qE(a,r.length),h=$E(c,a,r.length);return e.reshape(u).transpose(l).reshape(c).slice(d,h)},n.prototype.spaceToBatchND=function(e,r,a){W(e.rank<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var o=r.reduce((function(m,g){return m*g})),u=[[0,0]];u.push.apply(u,a);for(var l=1+r.length;l<e.shape.length;++l)u.push([0,0]);var c=e.pad(u),d=vd(c.shape,r,o,!1),h=md(d.length,r.length,!1),v=gd(c.shape,r,o,!1);return c.reshape(d).transpose(h).reshape(v)},n.prototype.reduce=function(e,r,a){var o=e.shape[0],u=e.shape[1],l=Cm(u),c=new jL({windowSize:l,inSize:u,batchSize:o},r),d=this.compileAndRun(c,[e],a);return d.shape[1]===1?d:this.reduce(d,r,a)},n.prototype.argReduce=function(e,r,a){a===void 0&&(a=null);var o=e.shape[0],u=e.shape[1];a!=null&&(o=a.shape[0],u=a.shape[1]);var l=Cm(u),c=new kP({windowSize:l,inSize:u,batchSize:o},r,a==null),d=[e];a!=null&&d.push(a);var h=this.compileAndRun(c,d,"int32");return h.shape[1]===1?h:this.argReduce(e,r,h)},n.prototype.argReducePacked=function(e,r,a){a===void 0&&(a=null);var o=a!=null?a.shape:e.shape,u=Cm(o[o.length-1]),l=new FP(o,u,r,a==null),c=a==null?[e]:[e,a],d=this.compileAndRun(l,c,"int32");return d.rank===e.rank?this.argReducePacked(e,r,d):d},n.prototype.sum=function(e,r){yr("sum",r,e.rank);var a=zn(e.shape,r),o=a[0],u=Ne(a[1]),l=e.as2D(-1,u),c=vm(e.dtype);return this.reduce(l,"sum",c).reshape(o)},n.prototype.prod=function(e,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,r);var a=zn(e.shape,r),o=a[0],u=Ne(a[1]),l=e.as2D(-1,u),c=vm(e.dtype);return this.reduce(l,"prod",c).reshape(o)},n.prototype.unsortedSegmentSum=function(e,r,a){var o=0,u=Na([o],e.rank),l=e;u!=null&&(l=e.transpose(u),o=Ma(1,e.rank)[0]);var c=(function(g,b,x){for(var S=[],C=g.length,_=0;_<C;_++)_!==b?S.push(g[_]):S.push(x);return S})(l.shape,o,a),d=Ne([l.shape[o]]),h=l.as2D(-1,d),v=vm(e.dtype),m=this.segOpCompute(h,"unsortedSegmentSum",r,v,a).reshape(c);return u!=null&&(m=m.transpose(vy(u))),m},n.prototype.segOpCompute=function(e,r,a,o,u){var l=e.shape[0],c=e.shape[1],d=(function(m,g){var b,x=!1;for(m<=XE?(b=m,x=!0):b=cg(m,Math.floor(Math.sqrt(m)));!x;)b>g||b===m?x=!0:b=cg(m,b+1);return b})(c,u),h=new JL({windowSize:d,inSize:c,batchSize:l,numSegments:u}),v=this.compileAndRun(h,[e,a],o);return v.shape[1]===u?v:(a=pd(0,u).tile([c/d]),this.segOpCompute(v,r,a,o,u))},n.prototype.argMinMaxReduce=function(e,r,a){var o=[r];if(yr("arg"+a.charAt(0).toUpperCase()+a.slice(1),o,e.rank),!de().getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var u=zn(e.shape,o),l=u[0],c=Ne(u[1]),d=e.as2D(-1,c);return this.argReduce(d,a).reshape(l)}return this.argReducePacked(e,a)},n.prototype.argMin=function(e,r){return this.argMinMaxReduce(e,r,"min")},n.prototype.argMax=function(e,r){return this.argMinMaxReduce(e,r,"max")},n.prototype.cumsum=function(e,r,a,o){if(r!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+r);var u=new nL(e.shape,a,o);return this.compileAndRun(u,[e])},n.prototype.equal=function(e,r){if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(equal(a, b));
`,"bool");var a=new $t("return float(a == b);",e.shape,r.shape);return this.compileAndRun(a,[e,r],"bool")},n.prototype.notEqual=function(e,r){if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(notEqual(a, b));
`,"bool");var a=new $t("return float(a != b);",e.shape,r.shape);return this.compileAndRun(a,[e,r],"bool")},n.prototype.less=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.less(e,r);if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(lessThan(a, b));
`,"bool");var a=new $t("return float(a < b);",e.shape,r.shape);return this.compileAndRun(a,[e,r],"bool")},n.prototype.lessEqual=function(e,r){if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var a=new $t("return float(a <= b);",e.shape,r.shape);return this.compileAndRun(a,[e,r],"bool")},n.prototype.greater=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.greater(e,r);if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(greaterThan(a, b));
`,"bool");var a=new $t("return float(a > b);",e.shape,r.shape);return this.compileAndRun(a,[e,r],"bool")},n.prototype.greaterEqual=function(e,r){if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var a=new $t("return float(a >= b);",e.shape,r.shape);return this.compileAndRun(a,[e,r],"bool")},n.prototype.logicalNot=function(e){var r=new Xe(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[e])},n.prototype.logicalAnd=function(e,r){if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var a=new $t("return float(a >= 1.0 && b >= 1.0);",e.shape,r.shape);return this.compileAndRun(a,[e,r],"bool")},n.prototype.logicalOr=function(e,r){if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var a=new $t("return float(a >= 1.0 || b >= 1.0);",e.shape,r.shape);return this.compileAndRun(a,[e,r],"bool")},n.prototype.select=function(e,r,a){var o=new e5(e.rank,r.shape,r.rank);return this.compileAndRun(o,[e,r,a],Nn(r.dtype,a.dtype))},n.prototype.where=function(e){dd("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=e.dataSync();return Cy(e.shape,r)},n.prototype.topk=function(e,r,a){return iR(e.dataSync(),e.shape,e.dtype,r)},n.prototype.min=function(e,r){yr("min",r,e.rank);var a=zn(e.shape,r),o=a[0],u=Ne(a[1]),l=e.as2D(-1,u);return this.reduce(l,"min",l.dtype).reshape(o)},n.prototype.minimum=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.minimum(e,r);var a=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new eo(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new $t(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,e.shape,r.shape);return this.compileAndRun(a,[e,r])},n.prototype.mod=function(e,r){var a=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new eo(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new $t(`if (b == 0.0) return NAN;
  return mod(a, b);`,e.shape,r.shape);return this.compileAndRun(a,[e,r])},n.prototype.max=function(e,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,r);yr("max",r,e.rank);var a=zn(e.shape,r),o=a[0],u=Ne(a[1]),l=e.as2D(-1,u);return this.reduce(l,"max",l.dtype).reshape(o)},n.prototype.maximum=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.maximum(e,r);var a=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new eo(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new $t(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,e.shape,r.shape);return this.compileAndRun(a,[e,r])},n.prototype.all=function(e,r){yr("all",r,e.rank);var a=zn(e.shape,r),o=a[0],u=Ne(a[1]),l=e.as2D(-1,u);return this.reduce(l,"all",l.dtype).reshape(o)},n.prototype.any=function(e,r){yr("any",r,e.rank);var a=zn(e.shape,r),o=a[0],u=Ne(a[1]),l=e.as2D(-1,u);return this.reduce(l,"any",l.dtype).reshape(o)},n.prototype.realDivide=function(e,r){if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var a=new $t(`
if (a == b) {
  return 1.0;
};
return a / b;`,e.shape,r.shape);return this.compileAndRun(a,[e,r],"float32")},n.prototype.floorDiv=function(e,r){if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var a=new $t(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,e.shape,r.shape);return this.compileAndRun(a,[e,r],"int32")},n.prototype.add=function(e,r){if(e.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(e,r,Em);if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.add(e,r);var a=Nn(e.dtype,r.dtype);if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,Em,a);var o=new $t(Em,e.shape,r.shape);return this.compileAndRun(o,[e,r],a)},n.prototype.packedUnaryOp=function(e,r,a){var o=new vl(e.shape,r);return this.compileAndRun(o,[e],a)},n.prototype.packedBinaryOp=function(e,r,a,o,u){u===void 0&&(u=!1);var l=new eo(a,e.shape,r.shape,u);return this.compileAndRun(l,[e,r],o)},n.prototype.complexSeparableBinaryOp=function(e,r,a){var o=this,u=this.texData.get(e.dataId),l=this.texData.get(r.dataId),c=[[u.complexTensors.real,l.complexTensors.real],[u.complexTensors.imag,l.complexTensors.imag]].map((function(m){var g=m[0],b=m[1],x=o.makeComplexComponentTensorInfo(e,g),S=o.makeComplexComponentTensorInfo(r,b),C=new $t(a,e.shape,r.shape);return o.compileAndRun(C,[x,S],Nn(g.dtype,b.dtype))})),d=c[0],h=c[1],v=this.complex(d,h);return d.dispose(),h.dispose(),v},n.prototype.makeComplexComponentTensorInfo=function(e,r){return{dataId:r.dataId,dtype:r.dtype,shape:e.shape}},n.prototype.addN=function(e){if(e.length===1)return e[0];if(e.length>de().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(e.length/2),a=this.addN(e.slice(0,r)),o=this.addN(e.slice(r));return this.addN([a,o])}var u=e.map((function(d){return d.dtype})).reduce((function(d,h){return Nn(d,h)})),l=e.map((function(d){return d.shape})),c=de().getBool("WEBGL_PACK")?new DP(e[0].shape,l):new AP(e[0].shape,l);return this.compileAndRun(c,e,u)},n.prototype.subtract=function(e,r){if(e.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(e,r,Rm);if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.subtract(e,r);var a=Nn(e.dtype,r.dtype);if(de().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,Rm,e.dtype);var o=new $t(Rm,e.shape,r.shape);return this.compileAndRun(o,[e,r],a)},n.prototype.pow=function(e,r){var a=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new eo(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new $t(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,e.shape,r.shape),o=Nn(e.dtype,r.dtype);return this.compileAndRun(a,[e,r],o)},n.prototype.ceil=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.ceil(e);if(de().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,TS,e.dtype);var r=new Xe(e.shape,TS);return this.compileAndRun(r,[e])},n.prototype.floor=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.floor(e);if(de().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,AS,e.dtype);var r=new Xe(e.shape,AS);return this.compileAndRun(r,[e])},n.prototype.sign=function(e){var r=new Xe(e.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[e])},n.prototype.isNaN=function(e){var r=new Xe(e.shape,"return float(isnan(x));");return this.compileAndRun(r,[e],"bool")},n.prototype.isInf=function(e){var r=new Xe(e.shape,"return float(isinf(x));");return this.compileAndRun(r,[e],"bool")},n.prototype.isFinite=function(e){var r=new Xe(e.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[e],"bool")},n.prototype.round=function(e){var r=new Xe(e.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[e])},n.prototype.exp=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.exp(e);if(de().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,DS,e.dtype);var r=new Xe(e.shape,DS);return this.compileAndRun(r,[e])},n.prototype.expm1=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.expm1(e);if(de().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,kS,e.dtype);var r=new Xe(e.shape,kS);return this.compileAndRun(r,[e])},n.prototype.softmax=function(e,r){var a=yn([r],e.shape),o=this.max(e,a),u=ur(o.shape,a),l=this.subtract(e,o.reshape(u)),c=this.exp(l),d=this.sum(c,a).reshape(u);return this.realDivide(c,d)},n.prototype.log=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.log(e);if(de().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,e.dtype);var r=new Xe(e.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[e])},n.prototype.log1p=function(e){var r=new Xe(e.shape,"return log(1.0 + x);");return this.compileAndRun(r,[e])},n.prototype.sqrt=function(e){var r=new Xe(e.shape,"return sqrt(x);");return this.compileAndRun(r,[e])},n.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var r=new Xe(e.shape,"return inversesqrt(x);");return this.compileAndRun(r,[e])},n.prototype.reciprocal=function(e){var r=new Xe(e.shape,"return 1.0 / x;");return this.compileAndRun(r,[e])},n.prototype.relu=function(e){var r;return r=de().getBool("WEBGL_PACK")?new vl(e.shape,vR):new Xe(e.shape,dR),this.compileAndRun(r,[e])},n.prototype.relu6=function(e){var r;return r=de().getBool("WEBGL_PACK")?new vl(e.shape,mR):new Xe(e.shape,hR),this.compileAndRun(r,[e])},n.prototype.prelu=function(e,r){var a=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new eo(fR,e.shape,r.shape):new $t(cR,e.shape,r.shape);return this.compileAndRun(a,[e,r])},n.prototype.elu=function(e){if(de().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,gR,e.dtype);var r=new Xe(e.shape,pR);return this.compileAndRun(r,[e])},n.prototype.eluDer=function(e,r){var a=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new eo(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,e.shape,r.shape):new $t("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,r.shape);return this.compileAndRun(a,[e,r])},n.prototype.selu=function(e){var r=new Xe(e.shape,l5);return this.compileAndRun(r,[e])},n.prototype.int=function(e){var r=new Xe(e.shape,"return float(int(x));");return this.compileAndRun(r,[e],"int32")},n.prototype.clip=function(e,r,a){var o,u=(o=de().getBool("WEBGL_PACK_CLIP")?new jP(e.shape):new VP(e.shape)).getCustomSetupFunc(r,a);return this.compileAndRun(o,[e],null,u)},n.prototype.abs=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.abs(e);if(de().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,RS,e.dtype);var r=new Xe(e.shape,RS);return this.compileAndRun(r,[e])},n.prototype.complexAbs=function(e){var r=this.texData.get(e.dataId),a=new GP(e.shape),o=[this.makeComplexComponentTensorInfo(e,r.complexTensors.real),this.makeComplexComponentTensorInfo(e,r.complexTensors.imag)];return this.compileAndRun(a,o)},n.prototype.sigmoid=function(e){var r=new Xe(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[e])},n.prototype.softplus=function(e){var r=new Xe(e.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[e])},n.prototype.sin=function(e){var r=new Xe(e.shape,c5);return this.compileAndRun(r,[e])},n.prototype.cos=function(e){var r=new Xe(e.shape,f5);return this.compileAndRun(r,[e])},n.prototype.tan=function(e){var r=new Xe(e.shape,"return tan(x);");return this.compileAndRun(r,[e])},n.prototype.asin=function(e){var r=new Xe(e.shape,d5);return this.compileAndRun(r,[e])},n.prototype.acos=function(e){var r=new Xe(e.shape,h5);return this.compileAndRun(r,[e])},n.prototype.atan=function(e){var r=new Xe(e.shape,p5);return this.compileAndRun(r,[e])},n.prototype.atan2=function(e,r){var a=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new eo(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new $t(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,e.shape,r.shape);return this.compileAndRun(a,[e,r])},n.prototype.sinh=function(e){var r=new Xe(e.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[e])},n.prototype.cosh=function(e){var r=new Xe(e.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[e])},n.prototype.tanh=function(e){var r=new Xe(e.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[e])},n.prototype.asinh=function(e){var r=new Xe(e.shape,v5);return this.compileAndRun(r,[e])},n.prototype.acosh=function(e){var r=new Xe(e.shape,m5);return this.compileAndRun(r,[e])},n.prototype.atanh=function(e){var r=new Xe(e.shape,g5);return this.compileAndRun(r,[e])},n.prototype.erf=function(e){var r=new Xe(e.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[e])},n.prototype.step=function(e,r){var a=new Xe(e.shape,(function(o){return o===void 0&&(o=0),ia+`
    return x > 0.0 ? 1.0 : float(`+o+`);
  `})(r));return this.compileAndRun(a,[e])},n.prototype.conv2dByMatMul=function(e,r,a,o,u,l){var c=e.shape,d=this.texData.get(e.dataId),h=a.inChannels,v=c[0]*c[1]*c[2],m=a.outChannels,g=a.dataFormat==="channelsLast",b=(v===1||m===1)&&h>1e3,x=c[2]%2!=0&&!!d.isPacked;if(b||!de().getBool("WEBGL_LAZILY_UNPACK")||!de().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!x){var S=g?c[0]*c[1]*c[2]:c[0]*c[2]*c[3],C=this.reshape(e,[1,S,a.inChannels]),_=this.reshape(r,[1,a.inChannels,a.outChannels]);return this.reshape(this.fusedBatchMatMul({a:C,b:_,transposeA:!1,transposeB:!1,bias:o,activation:u,preluActivationWeights:l}),a.outShape)}var R=g?c[0]*c[1]*(c[2]+1):c[0]*c[2]*(c[3]+1),E={dataId:e.dataId,shape:[1,R,a.inChannels],dtype:e.dtype},T=d.shape;d.shape=d.shape.slice(),d.shape[d.shape.length-2]++,W(Nf(d.shape,E.shape),(function(){return"packed reshape "+d.shape+" to "+E.shape+" isn't free"}));var k=this.reshape(r,[1,a.inChannels,a.outChannels]),N=this.fusedBatchMatMul({a:E,b:k,transposeA:!1,transposeB:!1,bias:o,activation:u,preluActivationWeights:l}),O=this.texData.get(N.dataId);return W(O.isPacked,(function(){return"batchMatMul result is expected to be packed"})),d.shape=T,O.shape=a.outShape,ee.makeTensorFromDataId(N.dataId,a.outShape,N.dtype)},n.prototype.conv2dWithIm2Row=function(e,r,a,o,u,l){var c=a.filterWidth,d=a.filterHeight,h=a.inChannels,v=a.outWidth,m=a.outHeight,g=a.dataFormat==="channelsLast",b=c*d*h,x=m*v,S=[b,x],C=e.squeeze([0]),_=r.reshape([1,b,-1]),R=new OL(S,C.shape,a),E=this.compileAndRun(R,[C]).reshape([1,S[0],S[1]]),T=o!=null,k=l!=null,N=u?Bf(u,!0):null,O=new _m(E.shape,[1,x,a.outChannels],!0,!1,T,N,k),I=[E,_];o&&I.push(o),k&&I.push(l);var B=this.compileAndRun(O,I);return g?B.reshape([1,m,v,a.outChannels]):B.reshape([1,a.outChannels,m,v])},n.prototype.fusedConv2d=function(e){var r=e.input,a=e.filter,o=e.convInfo,u=e.bias,l=e.activation,c=e.preluActivationWeights;if(o.filterHeight===1&&o.filterWidth===1&&o.dilationHeight===1&&o.dilationWidth===1&&o.strideHeight===1&&o.strideWidth===1&&(o.padInfo.type==="SAME"||o.padInfo.type==="VALID"))return this.conv2dByMatMul(r,a,o,u,l,c);if(de().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,a,o,u,l,c);var d=u!=null,h=c!=null,v=l?Bf(l,!1):null,m=new mS(o,d,v,h),g=[r,a];return u&&g.push(u),c&&g.push(c),this.compileAndRun(m,g)},n.prototype.conv2d=function(e,r,a){if(a.filterHeight===1&&a.filterWidth===1&&a.dilationHeight===1&&a.dilationWidth===1&&a.strideHeight===1&&a.strideWidth===1&&(a.padInfo.type==="SAME"||a.padInfo.type==="VALID"))return this.conv2dByMatMul(e,r,a);if(de().getBool("WEBGL_CONV_IM2COL")&&e.shape[0]===1)return this.conv2dWithIm2Row(e,r,a);var o=new mS(a);return this.compileAndRun(o,[e,r])},n.prototype.conv2dDerInput=function(e,r,a){var o=new XP(a);return this.compileAndRun(o,[e,r])},n.prototype.conv2dDerFilter=function(e,r,a){var o=new KP(a);return this.compileAndRun(o,[e,r])},n.prototype.fusedDepthwiseConv2D=function(e){var r,a=e.input,o=e.filter,u=e.convInfo,l=e.bias,c=e.activation,d=e.preluActivationWeights,h=de().getBool("WEBGL_PACK_DEPTHWISECONV")&&u.strideWidth<=2&&u.outChannels/u.inChannels==1,v=c?Bf(c,h):null,m=[a,o],g=l!=null,b=d!=null;return g&&m.push(l),b&&m.push(d),h?(r=new yS(u,g,v,b),this.compileAndRun(r,m)):(r=new gS(u,g,v,b),this.compileAndRun(r,m))},n.prototype.depthwiseConv2D=function(e,r,a){var o;return de().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels==1?(o=new yS(a),this.compileAndRun(o,[e,r])):(o=new gS(a),this.compileAndRun(o,[e,r]))},n.prototype.depthwiseConv2DDerInput=function(e,r,a){var o=new JP(a);return this.compileAndRun(o,[e,r])},n.prototype.depthwiseConv2DDerFilter=function(e,r,a){var o=new ZP(a);return this.compileAndRun(o,[e,r])},n.prototype.conv3d=function(e,r,a){var o=new eL(a);return this.compileAndRun(o,[e,r])},n.prototype.conv3dDerInput=function(e,r,a){var o=new QP(a);return this.compileAndRun(o,[e,r])},n.prototype.conv3dDerFilter=function(e,r,a){var o=new YP(a);return this.compileAndRun(o,[e,r])},n.prototype.maxPool=function(e,r){var a=new Tm(r,"max",!1);return this.compileAndRun(a,[e])},n.prototype.avgPool=function(e,r){var a=new Tm(r,"avg",!1);return this.compileAndRun(a,[e],"float32")},n.prototype.maxPoolBackprop=function(e,r,a,o){var u=new Tm(o,"max",!0),l=this.compileAndRun(u,[r]),c=new PL(o),d=this.compileAndRun(c,[e,l],r.dtype);return l.dispose(),d},n.prototype.avgPoolBackprop=function(e,r,a){var o=new PP(a);return this.compileAndRun(o,[e],r.dtype)},n.prototype.cast=function(e,r){return tR(e,r,this)},n.prototype.unstack=function(e,r){for(var a=e.shape[r],o=new Array(e.rank-1),u=0,l=0;l<e.rank;l++)l!==r&&(o[u++]=e.shape[l]);var c=new Array(e.rank).fill(0),d=e.shape.slice();d[r]=1;var h=new Array(a);for(l=0;l<h.length;l++)c[r]=l,h[l]=this.slice(e,c,d).reshape(o);return h},n.prototype.avgPool3d=function(e,r){var a=new Am(r,"avg",!1);return this.compileAndRun(a,[e],"float32")},n.prototype.avgPool3dBackprop=function(e,r,a){var o=new LP(a);return this.compileAndRun(o,[e],r.dtype)},n.prototype.maxPool3d=function(e,r){var a=new Am(r,"max",!1);return this.compileAndRun(a,[e],"float32")},n.prototype.maxPool3dBackprop=function(e,r,a,o){var u=new Am(o,"max",!0),l=this.compileAndRun(u,[r]),c=new LL(o),d=this.compileAndRun(c,[e,l],r.dtype);return l.dispose(),d},n.prototype.reshape=function(e,r){var a=this.texData.get(e.dataId);if(a.isPacked&&!Nf(e.shape,r)&&(a.texture===null||!Nf(a.shape,r))){var o=this.packedReshape(e,r);return ee.makeTensorFromDataId(o.dataId,o.shape,o.dtype)}return yg(e,r)},n.prototype.resizeBilinear=function(e,r,a,o){var u=de().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new KL(e.shape,r,a,o):new $L(e.shape,r,a,o);return this.compileAndRun(u,[e],"float32")},n.prototype.resizeBilinearBackprop=function(e,r,a){var o=new qL(e,r,a);return this.compileAndRun(o,[e])},n.prototype.resizeNearestNeighbor=function(e,r,a,o){var u=new YL(e.shape,r,a,o);return this.compileAndRun(u,[e])},n.prototype.resizeNearestNeighborBackprop=function(e,r,a){var o=new XL(e,r,a);return this.compileAndRun(o,[e])},n.prototype.multinomial=function(e,r,a,o){var u=r?e:co(e),l=u.shape[0],c=u.shape[1],d=new zL(l,c,a),h=d.getCustomSetupFunc(o);return this.compileAndRun(d,[u],"int32",h)},n.prototype.oneHot=function(e,r,a,o){var u=new UL(e.size,r,a,o);return this.compileAndRun(u,[e])},n.prototype.diag=function(e){var r=new iL(e.size);return this.compileAndRun(r,[e])},n.prototype.nonMaxSuppression=function(e,r,a,o,u){return dd("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),wy(e.dataSync(),r.dataSync(),a,o,u)},n.prototype.cropAndResize=function(e,r,a,o,u,l){var c=new tL(e.shape,r.shape,o,u,l);return this.compileAndRun(c,[e,r,a],"float32")},n.prototype.depthToSpace=function(e,r,a){W(r>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+r}));var o=e.shape[0],u=a==="NHWC"?e.shape[1]:e.shape[2],l=a==="NHWC"?e.shape[2]:e.shape[3],c=a==="NHWC"?e.shape[3]:e.shape[1],d=u*r,h=l*r,v=c/(r*r),m=new oL(a==="NHWC"?[o,d,h,v]:[o,v,d,h],r,a);return this.compileAndRun(m,[e])},n.prototype.split=function(e,r,a){return aR(e,r,a)},n.prototype.scatterND=function(e,r,a){var o=yd(0,e,a),u=o.sliceRank,l=o.numUpdates,c=o.sliceSize,d=o.strides,h=o.outputSize,v=[h/c,c],m=e.reshape([l,u]),g=r.reshape([l,c]);if(h===0)return yg(On([]),a);var b=Ee(0),x=new SS(l,u,m.rank,g.rank,d,v);return this.compileAndRun(x,[g,m,b]).reshape(a)},n.prototype.sparseToDense=function(e,r,a,o){var u=yd(0,e,a),l=u.sliceRank,c=u.numUpdates,d=u.strides,h=u.outputSize,v=new SS(c,l,e.rank,r.rank,d,[h,1]);return this.compileAndRun(v,[r,e,o]).reshape(a)},n.prototype.fft=function(e){return this.fftImpl(e,!1)},n.prototype.ifft=function(e){return this.fftImpl(e,!0)},n.prototype.fftImpl=function(e,r){var a=this.texData.get(e.dataId),o=new xS(fL,e.shape,r),u=new xS(dL,e.shape,r),l=[this.makeComplexComponentTensorInfo(e,a.complexTensors.real),this.makeComplexComponentTensorInfo(e,a.complexTensors.imag)],c=this.compileAndRun(o,l),d=this.compileAndRun(u,l),h=this.complex(c,d).as2D(e.shape[0],e.shape[1]);return c.dispose(),d.dispose(),h},n.prototype.gatherND=function(e,r){var a=r.shape,o=a[a.length-1],u=KE(e,r),l=u[0],c=u[1],d=u[2],h=u[3],v=r.reshape([c,o]),m=e.reshape([e.size/d,d]),g=new vL(o,h,[c,d]);return this.compileAndRun(g,[m,v]).reshape(l)},n.prototype.fill=function(e,r,a){if((a=a||Yl(r))==="string"){var o=ud(a,Ne(e));return o.fill(r),ee.makeTensor(o,e,a,this)}var u=new hL(e,r),l=u.getCustomSetupFunc(r);return this.compileAndRun(u,[],a,l)},n.prototype.onesLike=function(e){if(e.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},n.prototype.zerosLike=function(e){return this.fill(e.shape,e.dtype==="string"?"":0,e.dtype)},n.prototype.linspace=function(e,r,a){return nR(e,r,a)},n.prototype.makeTensorInfo=function(e,r){var a=this.write(null,e,r);return this.texData.get(a).usage=null,{dataId:a,shape:e,dtype:r}},n.prototype.makeOutput=function(e,r){var a=this.makeTensorInfo(e,r).dataId;return ee.makeTensorFromDataId(a,e,r,this)},n.prototype.unpackTensor=function(e){var r=new b5(e.shape);return this.runWebGLProgram(r,[e],e.dtype)},n.prototype.packTensor=function(e){var r=new WL(e.shape);return this.runWebGLProgram(r,[e],e.dtype,null,!0)},n.prototype.packedReshape=function(e,r){var a=[cd(e.shape)].concat(fd(e.shape)),o={dtype:e.dtype,shape:a,dataId:e.dataId},u=[cd(r)].concat(fd(r)),l=new GL(u,a),c=this.runWebGLProgram(l,[o],e.dtype,null,!0);return{dataId:c.dataId,shape:r,dtype:c.dtype}},n.prototype.decode=function(e){var r,a=this.texData.get(e),o=a.isPacked,u=a.shape,l=a.dtype,c=Sm(u);return r=o?new aL(c):new rL(c),{dtype:l,shape:u,dataId:this.runWebGLProgram(r,[{shape:c,dtype:l,dataId:e}],l,null,!0).dataId}},n.prototype.runWebGLProgram=function(e,r,a,o,u){var l=this;u===void 0&&(u=!1);var c=this.makeTensorInfo(e.outputShape,a),d=this.texData.get(c.dataId);if(e.packedOutput&&(d.isPacked=!0),e.outPackingScheme===Ol.DENSE){var h=Cl(e.outputShape);d.texShape=h.map((function(R){return 2*R}))}if(e.outTexUsage!=null&&(d.usage=e.outTexUsage),Ne(c.shape)===0)return d.values=Nl(c.dtype,0),c;var v=[],m=r.map((function(R){if(R.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var E=l.texData.get(R.dataId);if(E.texture==null){if(!e.packedInputs&&Ne(R.shape)<=de().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:R.shape,texData:null,isUniform:!0,uniformValues:E.values};e.packedInputs&&(E.isPacked=!0,E.shape=R.shape)}else if(!!E.isPacked!=!!e.packedInputs)R=E.isPacked?l.unpackTensor(R):l.packTensor(R),v.push(R),E=l.texData.get(R.dataId);else if(E.isPacked&&!Nf(E.shape,R.shape)){var T=R,k=R.shape;R.shape=E.shape,R=l.packedReshape(R,k),v.push(R),E=l.texData.get(R.dataId),T.shape=k}return l.uploadToGPU(R.dataId),{shape:R.shape,texData:E,isUniform:!1}}));this.uploadToGPU(c.dataId);var g,b={shape:c.shape,texData:d,isUniform:!1},x=(function(R,E,T){var k="";E.concat(T).forEach((function(I){var B=I.texData!=null&&I.texData.slice!=null&&I.texData.slice.flatOffset>0,H=I.isUniform?"uniform":I.texData.texShape;k+=I.shape+"_"+H+"_"+B}));var N=R.userCode,O=R.constructor.name;return O+="_"+k+"_"+N})(e,m,b),S=this.getAndSaveBinary(x,(function(){return(function(R,E,T,k){var N=E.userCode,O=T.map((function(Q,U){var G={logicalShape:Q.shape,texShape:Q.isUniform?null:Q.texData.texShape,isUniform:Q.isUniform,isPacked:!Q.isUniform&&Q.texData.isPacked,flatOffset:null};return Q.texData!=null&&Q.texData.slice!=null&&Q.texData.slice.flatOffset>0&&(G.flatOffset=Q.texData.slice.flatOffset),{name:E.variableNames[U],shapeInfo:G}})),I=O.map((function(Q){return Q.shapeInfo})),B={logicalShape:k.shape,texShape:k.texData.texShape,isUniform:!1,isPacked:k.texData.isPacked,flatOffset:null},H=NP(O,B,N,E.packedInputs),A=R.createProgram(H),q=null,V=R.getUniformLocation(A,"NAN",!1);de().getNumber("WEBGL_VERSION")===1&&(q=R.getUniformLocation(A,"INFINITY",!1));for(var j={},P=0;P<E.variableNames.length;P++){var $=E.variableNames[P];j[$]=R.getUniformLocation(A,$,!1),j["offset"+$]=R.getUniformLocation(A,"offset"+$,!1)}return{program:E,source:H,webGLProgram:A,uniformLocations:j,inShapeInfos:I,outShapeInfo:B,infLoc:q,nanLoc:V}})(l.gpgpu,e,m,b)})),C=this.activeTimers!=null;if(C&&(g=this.startTimer()),(function(R,E,T,k,N){wS(E.inShapeInfos,T),wS([E.outShapeInfo],[k]);var O=k.texData.texture,I=k.texData.texShape;k.texData.isPacked?R.setOutputPackedMatrixTexture(O,I[0],I[1]):R.setOutputMatrixTexture(O,I[0],I[1]),R.setProgram(E.webGLProgram),de().getNumber("WEBGL_VERSION")===1&&E.infLoc!==null&&R.gl.uniform1f(E.infLoc,1/0),E.nanLoc!==null&&R.gl.uniform1f(E.nanLoc,NaN),T.forEach((function(B,H){var A=E.program.variableNames[H],q=E.uniformLocations[A],V=E.uniformLocations["offset"+A];if(q!=null)if(B.isUniform)if(Ne(B.shape)<2)R.gl.uniform1f(q,B.uniformValues[0]);else{var j=B.uniformValues;j instanceof Float32Array||(j=new Float32Array(j)),R.gl.uniform1fv(q,j)}else B.texData.slice!=null&&V!=null&&R.gl.uniform1i(V,B.texData.slice.flatOffset),R.setInputMatrixTexture(B.texData.texture,q,H)})),N?.(R,E.webGLProgram),R.executeProgram()})(this.gpgpu,S,m,b,o),v.forEach((function(R){return l.disposeData(R.dataId)})),C&&(g=this.endTimer(g),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(g)})),!de().getBool("WEBGL_LAZILY_UNPACK")&&d.isPacked&&u===!1){var _=this.unpackTensor(c);return this.disposeData(c.dataId),_}return c},n.prototype.compileAndRun=function(e,r,a,o,u){u===void 0&&(u=!1),a=a||r[0].dtype;var l=this.runWebGLProgram(e,r,a,o,u);return ee.makeTensorFromDataId(l.dataId,l.shape,l.dtype)},n.prototype.getAndSaveBinary=function(e,r){return e in this.binaryCache||(this.binaryCache[e]=r()),this.binaryCache[e]},n.prototype.getTextureManager=function(){return this.textureManager},n.prototype.dispose=function(){var e=this;this.disposed||(de().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((function(r){e.gpgpu.deleteProgram(e.binaryCache[r].webGLProgram),delete e.binaryCache[r]})),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},n.prototype.floatPrecision=function(){var e=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=_e((function(){if(!de().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=de().getBool("DEBUG");de().set("DEBUG",!1);var a=e.abs(Ee(1e-8)).dataSync()[0];if(de().set("DEBUG",r),a>0)return 32}return 16}))),this.floatPrecisionValue},n.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},n.prototype.uploadToGPU=function(e){var r,a=this.texData.get(e),o=a.shape,u=a.dtype,l=a.values,c=a.texture,d=a.usage,h=a.isPacked;if(c==null){var v,m=this.activeTimers!=null;m&&(v=ga());var g=a.texShape;if(g==null&&(g=TF(o,h),a.texShape=g),l!=null){var b=Sm(o),x=void 0,S=g[1],C=g[0],_=l instanceof Uint8Array;h?(S=(r=Zl(g[0],g[1]))[0],C=r[1],x=new cL(b,[C,S],_)):x=new lL(b,[C,S],_);var R=this.makeTensorInfo([C,S],u);this.texData.get(R.dataId).usage=_?wr.PIXELS:wr.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(R.dataId),S,C,l);var E=this.runWebGLProgram(x,[R],u,null,!0),T=this.texData.get(E.dataId);a.texture=T.texture,a.texShape=T.texShape,a.isPacked=T.isPacked,a.usage=T.usage,this.disposeData(R.dataId),this.texData.delete(E.dataId),a.values=null,m&&(this.uploadWaitMs+=ga()-v)}else{var k=this.acquireTexture(g,d,u,h);a.texture=k}}},n.prototype.convertAndCacheOnCPU=function(e,r){var a=this.texData.get(e),o=a.dtype;return this.releaseGPUData(e),r!=null&&(a.values=(function(u,l){if(l==="float32"||l==="complex64")return u;if(l==="int32"||l==="bool"){for(var c=l==="int32"?new Int32Array(u.length):new Uint8Array(u.length),d=0;d<c.length;++d)c[d]=Math.round(u[d]);return c}throw new Error("Unknown dtype "+l)})(r,o)),a.values},n.prototype.acquireTexture=function(e,r,a,o){if(this.numBytesInGPU+=this.computeBytes(e,a),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var u=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+u+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,r,o)},n.prototype.computeBytes=function(e,r){return e[0]*e[1]*kE(r)},n})(JE);PE()&&ee.registerBackend("webgl",(function(){return new w5}),2);var S5=Y({square_:function(t){var n=z(t,"x","square"),e=[n];return ee.runKernelFunc((function(r,a){return a([n]),r.square(n)}),{x:n},null,"Square",{},e,[])}}),Bl="SquaredDifference",yR=Y({squaredDifference_:function(t,n){var e,r=z(t,"a","squaredDifference"),a=z(n,"b","squaredDifference");e=Vt(r,a),r=e[0],a=e[1],nt(r.shape,a.shape);var o={a:r,b:a},u=[r,a];return ee.runKernelFunc((function(l,c){var d=l.squaredDifference(r,a);return c([r,a]),d}),o,(function(l,c){var d=c[0],h=c[1],v=Ee(2);return{a:function(){return l.mul(d.sub(h).mul(v))},b:function(){return l.mul(h.sub(d).mul(v))}}}),Bl,{},u,[])}}),C5=Y({abs_:function(t){var n=z(t,"x","abs");return n.dtype==="complex64"?ee.runKernelFunc((function(e){return e.complexAbs(n)}),{$x:n}):ee.runKernelFunc((function(e,r){var a=e.abs(n);return r([n]),a}),{x:n},(function(e,r){var a=r[0];return{x:function(){return e.mul(a.toFloat().step(-1))}}}),"Abs")}}),E5=Y({acos_:function(t){var n=z(t,"x","acos");return ee.runKernelFunc((function(e,r){var a=e.acos(n);return r([n]),a}),{$x:n},(function(e,r){var a=r[0];return{$x:function(){return e.divStrict(Ee(1).sub(a.toFloat().square()).sqrt()).neg()}}}))}}),R5=Y({acosh_:function(t){var n=z(t,"x","acosh");return ee.runKernelFunc((function(e,r){var a=e.acosh(n);return r([n]),a}),{$x:n},(function(e,r){var a=r[0];return{$x:function(){return e.divStrict(a.toFloat().square().sub(1).sqrt())}}}))}}),_5=Y({asin_:function(t){var n=z(t,"x","asin");return ee.runKernelFunc((function(e,r){var a=e.asin(n);return r([n]),a}),{$x:n},(function(e,r){var a=r[0];return{$x:function(){return e.divStrict(Ee(1).sub(a.toFloat().square()).sqrt())}}}))}}),T5=Y({asinh_:function(t){var n=z(t,"x","asinh");return ee.runKernelFunc((function(e,r){var a=e.asinh(n);return r([n]),a}),{$x:n},(function(e,r){var a=r[0];return{$x:function(){return e.divStrict(Ee(1).add(a.toFloat().square()).sqrt())}}}))}}),A5=Y({atan_:function(t){var n=z(t,"x","atan");return ee.runKernelFunc((function(e,r){var a=e.atan(n);return r([n]),a}),{$x:n},(function(e,r){var a=r[0];return{$x:function(){return e.div(a.toFloat().square().add(1))}}}))}}),D5=Y({atanh_:function(t){var n=z(t,"x","atanh");return ee.runKernelFunc((function(e,r){var a=e.atanh(n);return r([n]),a}),{$x:n},(function(e,r){var a=r[0];return{$x:function(){return e.div(Ee(1).sub(a.toFloat().square()))}}}))}}),k5=Y({ceil_:function(t){var n=z(t,"x","ceil");return ee.runKernelFunc((function(e){return e.ceil(n)}),{$x:n},(function(e){return{$x:function(){return it(e)}}}))}}),Ty=Y({clipByValue_:function(t,n,e){var r=z(t,"x","clipByValue");W(n<=e,(function(){return"Error in clip: min ("+n+") must be less than or equal to max ("+e+")."}));var a=[r],o={min:n,max:e};return ee.runKernelFunc((function(u,l){var c=u.clip(r,n,e);return l([r]),c}),{x:r},(function(u,l){var c=l[0];return{x:function(){return u.where(c.greaterEqual(n).logicalAnd(c.lessEqual(e)),it(u))}}}),"ClipByValue",o,a)}}),N5=Y({cos_:function(t){var n=z(t,"x","cos"),e=[n];return ee.runKernelFunc((function(r,a){var o=r.cos(n);return a([n]),o}),{x:n},(function(r,a){var o=a[0];return{x:function(){return o.toFloat().sin().neg().mul(r)}}}),"Cos",{},e)}}),M5=Y({cosh_:function(t){var n=z(t,"x","cosh");return ee.runKernelFunc((function(e,r){var a=e.cosh(n);return r([n]),a}),{$x:n},(function(e,r){var a=r[0];return{$x:function(){return a.toFloat().sinh().mulStrict(e)}}}))}}),O5=Y({erf_:function(t){var n=z(t,"x","erf");return W(n.dtype==="int32"||n.dtype==="float32",(function(){return"Input dtype must be `int32` or `float32`."})),n.dtype==="int32"&&(n=n.toFloat()),ee.runKernelFunc((function(e,r){var a=e.erf(n);return r([n]),a}),{$x:n},(function(e,r){var a=r[0];return{$x:function(){return e.mul(a.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}}))}}),xg=Y({exp_:function(t){var n=z(t,"x","exp");return ee.runKernelFunc((function(e,r){var a=e.exp(n);return r([a]),a}),{x:n},(function(e,r){return{x:function(){return e.mulStrict(r[0])}}}),"Exp",{},[],[!0])}}),I5=Y({expm1_:function(t){var n=z(t,"x","expm1");return ee.runKernelFunc((function(e,r){var a=e.expm1(n);return r([n]),a}),{$x:n},(function(e,r){var a=r[0];return{$x:function(){return e.mul(a.exp())}}}))}}),B5=Y({floor_:function(t){var n=z(t,"x","floor");return ee.runKernelFunc((function(e){return e.floor(n)}),{$x:n},(function(e){return{$x:function(){return it(e)}}}))}}),F5=Y({log_:function(t){var n=z(t,"x","log"),e=[n];return ee.runKernelFunc((function(r,a){var o=r.log(n);return a([n]),o}),{x:n},(function(r,a){var o=a[0];return{x:function(){return r.div(o.toFloat())}}}),"Log",{},e)}}),P5=Y({log1p_:function(t){var n=z(t,"x","log1p");return ee.runKernelFunc((function(e,r){var a=e.log1p(n);return r([n]),a}),{$x:n},(function(e,r){var a=r[0];return{$x:function(){return e.div(a.add(1))}}}))}}),L5=Y({logSigmoid_:function(t){var n=z(t,"x","logSigmoid");return ee.runKernelFunc((function(e,r){var a=e.softplus(n.neg()).neg();return r([n]),a}),{$x:n},(function(e,r){var a=r[0];return{$x:function(){return e.mul(a.neg().sigmoid())}}}))}}),Sd=Y({neg_:function(t){var n=z(t,"x","neg"),e=[n];return ee.runKernelFunc((function(r){return r.neg(n)}),{x:n},(function(r){return{x:function(){return r.neg()}}}),"Neg",{},e)}}),z5=Y({reciprocal_:function(t){var n=z(t,"x","reciprocal");return ee.runKernelFunc((function(e,r){var a=e.reciprocal(n);return r([n]),a}),{$x:n},(function(e,r){var a=r[0];return{$x:function(){return e.div(a.square().neg())}}}))}}),U5=Y({round_:function(t){var n=z(t,"x","round");return ee.runKernelFunc((function(e){return e.round(n)}),{$x:n},(function(e){return{$x:function(){return it(e)}}}))}}),bR=Y({rsqrt_:function(t){var n=z(t,"x","rsqrt"),e=[n];return ee.runKernelFunc((function(r,a){var o=r.rsqrt(n);return a([n]),o}),{x:n},(function(r,a){var o=a[0];return{x:function(){return r.div(o.pow(1.5).mul(2)).neg()}}}),"Rsqrt",{},e)}}),xR=Y({sigmoid_:function(t){var n=z(t,"x","sigmoid");return ee.runKernelFunc((function(e,r){var a=e.sigmoid(n);return r([a]),a}),{x:n},(function(e,r){var a=r[0];return{x:function(){return e.mul(a.mul(Ee(1).sub(a)))}}}),"Sigmoid")}}),W5=Y({sign_:function(t){var n=z(t,"x","sign");return ee.runKernelFunc((function(e){return e.sign(n)}),{$x:n},(function(e){return{$x:function(){return it(e)}}}))}}),H5=Y({isNaN_:function(t){var n=z(t,"x","isNaN");return ee.runKernelFunc((function(e){return e.isNaN(n)}),{$x:n},(function(e){return{$x:function(){return it(e)}}}))}}),V5=Y({isInf_:function(t){var n=z(t,"x","isInf");return ee.runKernelFunc((function(e){return e.isInf(n)}),{$x:n},(function(e){return{$x:function(){return it(e)}}}))}}),j5=Y({isFinite_:function(t){var n=z(t,"x","isFinite");return ee.runKernelFunc((function(e){return e.isFinite(n)}),{$x:n},(function(e){return{$x:function(){return it(e)}}}))}}),G5=Y({sin_:function(t){var n=z(t,"x","sin"),e=[n];return ee.runKernelFunc((function(r,a){var o=r.sin(n);return a([n]),o}),{x:n},(function(r,a){var o=a[0];return{x:function(){return o.toFloat().cos().mul(r)}}}),"Sin",{},e)}}),q5=Y({sinh_:function(t){var n=z(t,"x","sinh");return ee.runKernelFunc((function(e,r){var a=e.sinh(n);return r([n]),a}),{$x:n},(function(e,r){var a=r[0];return{$x:function(){return a.toFloat().cosh().mulStrict(e)}}}))}}),$5=Y({softplus_:function(t){var n=z(t,"x","softplus");return ee.runKernelFunc((function(e,r){var a=e.softplus(n);return r([n]),a}),{$x:n},(function(e,r){var a=r[0];return{$x:function(){return e.mul(a.sigmoid())}}}))}}),K5=Y({sqrt_:function(t){var n=z(t,"x","sqrt");return ee.runKernelFunc((function(e,r){var a=e.sqrt(n);return r([n]),a}),{$x:n},(function(e,r){var a=r[0];return{$x:function(){return e.div(a.toFloat().sqrt().mul(2))}}}))}}),X5=Y({step_:function(t,n){n===void 0&&(n=0);var e=z(t,"x","step");return ee.runKernelFunc((function(r){return r.step(e,n)}),{$x:e},(function(r){return{$x:function(){return it(r)}}}))}}),Y5=Y({tan_:function(t){var n=z(t,"x","tan");return ee.runKernelFunc((function(e,r){var a=e.tan(n);return r([n]),a}),{$x:n},(function(e,r){var a=r[0];return{$x:function(){return e.div(a.cos().square())}}}))}}),Q5=Y({tanh_:function(t){var n=z(t,"x","tanh");return ee.runKernelFunc((function(e,r){var a=e.tanh(n);return r([a]),a}),{x:n},(function(e,r){var a=r[0];return{x:function(){return Ee(1).sub(a.square()).mulStrict(e)}}}),"Tanh",{},null,[!0])}});function wR(t,n,e,r,a,o){var u,l,c=z(t,"x","batchNorm"),d=z(n,"mean","batchNorm"),h=z(e,"variance","batchNorm");return a!=null&&(u=z(a,"scale","batchNorm")),r!=null&&(l=z(r,"offset","batchNorm")),W(c.rank===2,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."})),W(d.rank===2||d.rank===1,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+d.rank+"."})),W(h.rank===2||h.rank===1,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+h.rank+"."})),u!=null&&W(u.rank===2||u.rank===1,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+u.rank+"."})),l!=null&&W(l.rank===2||l.rank===1,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+l.rank+"."})),ec(c,d,h,l,u,o)}function SR(t,n,e,r,a,o){var u,l,c=z(t,"x","batchNorm"),d=z(n,"mean","batchNorm"),h=z(e,"variance","batchNorm");return a!=null&&(u=z(a,"scale","batchNorm")),r!=null&&(l=z(r,"offset","batchNorm")),W(c.rank===3,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."})),W(d.rank===3||d.rank===1,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+d.rank+"."})),W(h.rank===3||h.rank===1,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+h.rank+"."})),u!=null&&W(u.rank===3||u.rank===1,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+u.rank+"."})),l!=null&&W(l.rank===3||l.rank===1,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+l.rank+"."})),ec(c,d,h,l,u,o)}function CR(t,n,e,r,a,o){var u,l,c=z(t,"x","batchNorm"),d=z(n,"mean","batchNorm"),h=z(e,"variance","batchNorm");return a!=null&&(u=z(a,"scale","batchNorm")),r!=null&&(l=z(r,"offset","batchNorm")),W(c.rank===4,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+c.rank+"."})),W(d.rank===4||d.rank===1,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+d.rank+"."})),W(h.rank===4||h.rank===1,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+h.rank+"."})),u!=null&&W(u.rank===4||u.rank===1,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+u.rank+"."})),l!=null&&W(l.rank===4||l.rank===1,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+l.rank+"."})),ec(c,d,h,l,u,o)}function ec(t,n,e,r,a,o){o==null&&(o=.001);var u,l,c,d=z(t,"x","batchNorm"),h=z(n,"mean","batchNorm"),v=z(e,"variance","batchNorm");a!=null&&(u=z(a,"scale","batchNorm")),r!=null&&(l=z(r,"offset","batchNorm")),W(h.rank===v.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),W(l==null||h.rank===l.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),W(u==null||h.rank===u.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),c=d.rank===0||d.rank===1?d.as4D(1,1,1,d.size):d.rank===2?d.as4D(1,1,d.shape[0],d.shape[1]):d.rank===3?d.as4D(1,d.shape[0],d.shape[1],d.shape[2]):d;var m=[d,h,v,u];return ee.runKernelFunc((function(g,b){var x=g.batchNormalization(c,Ff(h),Ff(v),o,Ff(u),Ff(l));return b([d,h,v,u]),x}),{x:d,mean:h,variance:v,scale:u,offset:l},(function(g,b){var x=b,S=x[0],C=x[1],_=x[2],R=x[3],E=R??Ee(1),T=mn(C.shape,c.shape),k=[];if(C.rank===1){for(var N=0;N<c.shape.length-1;++N)k.push(c.shape[N]);k.push(1)}var O=S.sub(C),I=g.mul(E),B=bR(_.add(Ee(o))),H=B.mul(B).mul(B).mul(Ee(-.5));return{x:function(){return C.rank===1?g.mul(Ks(B.as4D(1,1,1,C.shape[0]),k)).mul(E).reshape(S.shape):g.mul(B).mul(E).reshape(S.shape)},mean:function(){var A=B.mul(Ee(-1)).mul(I);return C.rank===1&&(A=A.sum(T)),A.reshape(C.shape)},variance:function(){var A=H.mul(O).mul(I);return C.rank===1&&(A=A.sum(T)),A.reshape(C.shape)},scale:function(){var A=O.mul(B),q=g.mul(A);return C.rank===1&&(q=q.sum(T)),q.reshape(C.shape)},offset:function(){var A=g;return C.rank===1&&(A=A.sum(T)),A.reshape(C.shape)}}}),"BatchNormalization",{varianceEpsilon:o},m).reshape(d.shape)}function Ff(t){return t==null?null:t.rank===0?t.as1D():t.rank===1?t:t.rank===2?t.as4D(1,1,t.shape[0],t.shape[1]):t.rank===3?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}function eh(){LE("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var Z5=Y({batchNormalization2d_:function(t,n,e,r,a,o){return r===void 0&&(r=.001),eh(),wR(t,n,e,o,a,r)}}),J5=Y({batchNormalization3d_:function(t,n,e,r,a,o){return r===void 0&&(r=.001),eh(),SR(t,n,e,o,a,r)}}),ez=Y({batchNormalization4d_:function(t,n,e,r,a,o){return r===void 0&&(r=.001),eh(),CR(t,n,e,o,a,r)}}),tz=Y({batchNormalization_:function(t,n,e,r,a,o){return r===void 0&&(r=.001),eh(),ec(t,n,e,o,a,r)}}),ER=Y({batchNorm_:ec}),nz=Y({batchNorm2d_:wR}),rz=Y({batchNorm3d_:SR}),az=Y({batchNorm4d_:CR}),th=Y({logicalAnd_:function(t,n){var e=z(t,"a","logicalAnd","bool"),r=z(n,"b","logicalAnd","bool");return nt(e.shape,r.shape),ee.runKernelFunc((function(a){return a.logicalAnd(e,r)}),{a:e,b:r},null,"LogicalAnd")}}),oz=Y({logicalNot_:function(t){var n=z(t,"x","logicalNot","bool");return ee.runKernelFunc((function(e){return e.logicalNot(n)}),{$x:n})}}),RR=Y({logicalOr_:function(t,n){var e=z(t,"a","logicalOr","bool"),r=z(n,"b","logicalOr","bool");return nt(e.shape,r.shape),ee.runKernelFunc((function(a){return a.logicalOr(e,r)}),{$a:e,$b:r})}}),iz=Y({logicalXor_:function(t,n){var e=z(t,"a","logicalXor","bool"),r=z(n,"b","logicalXor","bool");return nt(e.shape,r.shape),RR(t,n).logicalAnd(th(t,n).logicalNot())}}),Pi=Y({where_:function(t,n,e){var r=z(n,"a","where"),a=z(e,"b","where"),o=z(t,"condition","where","bool");return gt(r.shape,a.shape,"Error in where: "),o.rank===1?W(o.shape[0]===r.shape[0],(function(){return"The first dimension of `a` must match the size of `condition`."})):gt(o.shape,a.shape,"Error in where: "),ee.runKernelFunc((function(u,l){var c=u.select(o,r,a);return l([o]),c}),{$condition:o,$a:r,$b:a},(function(u,l){var c=l[0];return{$condition:function(){return it(c).toFloat()},$a:function(){return u.mul(c.cast(u.dtype))},$b:function(){return u.mul(c.logicalNot().cast(u.dtype))}}}))}}),_R=function(t){return Ae(this,void 0,void 0,(function(){var n,e,r;return De(this,(function(a){switch(a.label){case 0:return[4,(n=z(t,"condition","whereAsync","bool")).data()];case 1:return e=a.sent(),r=Cy(n.shape,e),t!==n&&n.dispose(),[2,r]}}))}))},Je=Y({add_:function(t,n){var e,r=z(t,"a","add"),a=z(n,"b","add");e=Vt(r,a),r=e[0],a=e[1];var o=nt(r.shape,a.shape);return ee.runKernelFunc((function(u){return u.add(r,a)}),{a:r,b:a},(function(u){return{a:function(){var l=u,c=mn(r.shape,o);return c.length>0&&(l=l.sum(c)),l.reshape(r.shape)},b:function(){var l=u,c=mn(a.shape,o);return c.length>0&&(l=l.sum(c)),l.reshape(a.shape)}}}),"Add")}}),sz=Y({addN_:function(t){W(Array.isArray(t),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),W(t.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+t.length}));var n=t.map((function(a,o){return z(a,"tensors"+o,"addN")})),e=n[0];n.forEach((function(a){if(a.dtype!==e.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),n.forEach((function(a){if(!Sn(a.shape,e.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=n;return ee.runKernelFunc((function(a){return a.addN(n)}),r,(function(a){var o={};return n.forEach((function(u,l){o[l]=function(){return a.clone()}})),o}),"AddN")}}),uz=Y({addStrict_:function(t,n){var e=z(t,"a","addStrict"),r=z(n,"b","addStrict");return gt(e.shape,r.shape,"Error in addStrict: "),e.add(r)}}),lz=Y({atan2_:function(t,n){var e,r=z(t,"a","atan2"),a=z(n,"b","atan2");e=Vt(r,a),r=e[0],a=e[1];var o=nt(r.shape,a.shape);return ee.runKernelFunc((function(u,l){var c=u.atan2(r,a);return l([r,a]),c}),{$a:r,$b:a},(function(u,l){var c=l[0],d=l[1];return{$a:function(){var h=Je(c.square(),d.square()),v=u.mul(d.div(h)),m=mn(c.shape,o);return m.length>0&&(v=v.sum(m)),v.reshape(c.shape)},$b:function(){var h=Je(c.square(),d.square()),v=Sd(u.mul(c.div(h))),m=mn(d.shape,o);return m.length>0&&(v=v.sum(m)),v.reshape(d.shape)}}}))}}),ea=Y({div_:function(t,n){var e,r=z(t,"a","div"),a=z(n,"b","div");if(e=Vt(r,a),r=e[0],a=e[1],r.dtype==="int32"&&a.dtype==="int32")return TR(r,a);var o=nt(r.shape,a.shape);return ee.runKernelFunc((function(u,l){var c=u.realDivide(r,a);return l([r,a]),c}),{a:r,b:a},(function(u,l){var c=l[0],d=l[1];return{a:function(){var h=u.div(d.toFloat()),v=mn(c.shape,o);return v.length>0?h.sum(v).reshape(c.shape):h},b:function(){var h=u.mul(c.toFloat()),v=mn(d.shape,o);v.length>0&&(h=h.sum(v).reshape(d.shape));var m=d.square();return h.div(m.toFloat()).neg()}}}),"Div")}}),cz=Y({divNoNan_:function(t,n){var e,r=z(t,"a","div"),a=z(n,"b","div");r=(e=Vt(r,a))[0],a=e[1];var o=ea(r,a),u=it(o),l=a.equal(u);return Pi(l,u,o)}}),fz=Y({divStrict_:function(t,n){var e=z(t,"a","div"),r=z(n,"b","div");return gt(e.shape,r.shape,"Error in divideStrict: "),e.div(r)}}),TR=Y({floorDiv_:function(t,n){var e,r=z(t,"a","floorDiv"),a=z(n,"b","floorDiv");e=Vt(r,a),r=e[0],a=e[1];var o=nt(r.shape,a.shape);return ee.runKernelFunc((function(u,l){var c=u.floorDiv(r,a);return l([r,a]),c}),{a:r,b:a},(function(u,l){var c=l[0],d=l[1];return{a:function(){var h=u.div(d.toFloat()),v=mn(c.shape,o);return v.length>0?h.sum(v).reshape(c.shape):h},b:function(){var h=u.mul(c.toFloat()),v=mn(d.shape,o);v.length>0&&(h=h.sum(v).reshape(d.shape));var m=d.square();return h.div(m.toFloat()).neg()}}}),"FloorDiv")}}),Ay=Y({maximum_:function(t,n){var e,r=z(t,"a","maximum"),a=z(n,"b","maximum");return e=Vt(r,a),r=e[0],a=e[1],r.dtype==="bool"&&(r=r.toInt(),a=a.toInt()),nt(r.shape,a.shape),ee.runKernelFunc((function(o,u){var l=o.maximum(r,a);return u([r,a]),l}),{a:r,b:a},(function(o,u){var l=u[0],c=u[1];return{a:function(){return o.mul(l.greaterEqual(c).toFloat())},b:function(){return o.mul(l.less(c).toFloat())}}}),"Maximum")}}),dz=Y({maximumStrict_:function(t,n){var e=z(t,"a","maximumStrict"),r=z(n,"b","maximumStrict");return gt(e.shape,r.shape,"Error in maximumStrict: "),e.maximum(r)}}),AR=Y({minimum_:function(t,n){var e,r=z(t,"a","minimum"),a=z(n,"b","minimum");return e=Vt(r,a),r=e[0],a=e[1],r.dtype==="bool"&&(r=r.toInt(),a=a.toInt()),nt(r.shape,a.shape),ee.runKernelFunc((function(o,u){var l=o.minimum(r,a);return u([r,a]),l}),{a:r,b:a},(function(o,u){var l=u[0],c=u[1];return{a:function(){return o.mul(l.lessEqual(c).toFloat())},b:function(){return o.mul(l.greater(c).toFloat())}}}),"Minimum")}}),hz=Y({minimumStrict_:function(t,n){var e=z(t,"a","minimumStrict"),r=z(n,"b","minimumStrict");return gt(e.shape,r.shape,"Error in minimumStrict: "),e.minimum(r)}}),pz=Y({mod_:function(t,n){var e,r=z(t,"a","mod"),a=z(n,"b","mod");e=Vt(r,a),r=e[0],a=e[1];var o=nt(r.shape,a.shape);return ee.runKernelFunc((function(u,l){var c=u.mod(r,a);return l([r,a]),c}),{$a:r,$b:a},(function(u,l){var c=l[0],d=l[1];return{$a:function(){var h=mn(c.shape,o);return h.length>0?u.sum(h).reshape(c.shape):u},$b:function(){var h=u.mul(c.div(d).floor().neg()),v=mn(d.shape,o);return v.length>0?h.sum(v).reshape(d.shape):h}}}))}}),vz=Y({modStrict_:function(t,n){var e=z(t,"a","modStrict"),r=z(n,"b","modStrict");return gt(e.shape,r.shape,"Error in modStrict: "),e.mod(r)}}),jn=Y({mul_:function(t,n){var e,r=z(t,"a","mul"),a=z(n,"b","mul");e=Vt(r,a),r=e[0],a=e[1];var o=nt(r.shape,a.shape);return ee.runKernelFunc((function(u,l){var c=u.multiply(r,a);return l([r,a]),c}),{a:r,b:a},(function(u,l){var c=l[0],d=l[1];return{a:function(){var h=u.mul(d.toFloat()),v=mn(c.shape,o);return v.length>0?h.sum(v).reshape(c.shape):h},b:function(){var h=u.mul(c.toFloat()),v=mn(d.shape,o);return v.length>0?h.sum(v).reshape(d.shape):h}}}),"Mul")}}),mz=Y({mulStrict_:function(t,n){var e=z(t,"a","mul"),r=z(n,"b","mul");return gt(e.shape,r.shape,"Error in multiplyStrict: "),e.mul(r)}}),Cd=Y({pow_:function(t,n){var e,r=z(t,"base","pow"),a=z(n,"exp","pow");e=Vt(r,a),r=e[0],a=e[1];var o=nt(r.shape,a.shape),u=[r,a];return ee.runKernelFunc((function(l,c){var d=l.pow(r,a);return c([r,a,d]),d}),{a:r,b:a},(function(l,c){var d=c[0],h=c[1],v=c[2];return{a:function(){var m=h.toFloat(),g=l.mul(m.mul(d.pow(m.sub(Ee(1))))),b=mn(d.shape,o);return b.length>0&&(g=g.sum(b)),g.reshape(d.shape)},b:function(){var m=d.greater(0),g=d.log().where(m,it(d)),b=l.mul(v.mul(g)),x=mn(h.shape,o);return x.length>0&&(b=b.sum(x)),b.reshape(h.shape)}}}),"Pow",{},u,[!0])}}),gz=Y({powStrict_:function(t,n){return gt(t.shape,n.shape,"Error in powStrict: "),t.pow(n)}}),yz=Y({squaredDifferenceStrict_:function(t,n){var e=z(t,"a","squaredDifferenceStrict"),r=z(n,"b","squaredDifferenceStrict");return gt(e.shape,r.shape,"Error in squaredDifferenceStrict: "),e.squaredDifference(r)}}),gn=Y({sub_:function(t,n){var e,r=z(t,"a","sub"),a=z(n,"b","sub");e=Vt(r,a),r=e[0],a=e[1];var o=nt(r.shape,a.shape);return ee.runKernelFunc((function(u){return u.subtract(r,a)}),{a:r,b:a},(function(u){return{a:function(){var l=u,c=mn(r.shape,o);return c.length>0&&(l=l.sum(c)),l.reshape(r.shape)},b:function(){var l=u,c=mn(a.shape,o);return c.length>0&&(l=l.sum(c)),l.neg().reshape(a.shape)}}}),"Sub")}}),bz=Y({subStrict_:function(t,n){var e=z(t,"a","subStrict"),r=z(n,"b","subStrict");return gt(e.shape,r.shape,"Error in subStrict: "),e.sub(r)}}),DR=Y({equal_:function(t,n){var e,r=z(t,"a","equal"),a=z(n,"b","equal");return e=Vt(r,a),r=e[0],a=e[1],nt(r.shape,a.shape),ee.runKernelFunc((function(o){return o.equal(r,a)}),{$a:r,$b:a})}}),xz=Y({equalStrict_:function(t,n){var e=z(t,"a","equalStrict"),r=z(n,"b","equalStrict");return gt(e.shape,r.shape,"Error in equalStrict: "),e.equal(r)}}),wz=Y({greater_:function(t,n){var e,r=z(t,"a","greater"),a=z(n,"b","greater");return e=Vt(r,a),r=e[0],a=e[1],nt(r.shape,a.shape),ee.runKernelFunc((function(o){return o.greater(r,a)}),{a:r,b:a},null,"Greater")}}),kR=Y({greaterEqual_:function(t,n){var e,r=z(t,"a","greaterEqual"),a=z(n,"b","greaterEqual");return e=Vt(r,a),r=e[0],a=e[1],nt(r.shape,a.shape),ee.runKernelFunc((function(o,u){var l=o.greaterEqual(r,a);return u([r,a]),l}),{a:r,b:a},(function(o,u){var l=u[0],c=u[1];return{a:function(){return it(l)},b:function(){return it(c)}}}),"GreaterEqual")}}),Sz=Y({greaterEqualStrict_:function(t,n){var e=z(t,"a","greaterEqualStrict"),r=z(n,"b","greaterEqualStrict");return gt(e.shape,r.shape,"Error in greaterEqualStrict: "),e.greaterEqual(r)}}),Cz=Y({greaterStrict_:function(t,n){var e=z(t,"a","greaterStrict"),r=z(n,"b","greaterStrict");return gt(e.shape,r.shape,"Error in greaterStrict: "),e.greater(r)}}),Ez=Y({less_:function(t,n){var e,r=z(t,"a","less"),a=z(n,"b","less");return e=Vt(r,a),r=e[0],a=e[1],nt(r.shape,a.shape),ee.runKernelFunc((function(o){return o.less(r,a)}),{a:r,b:a},null,"Less")}}),Rz=Y({lessEqual_:function(t,n){var e,r=z(t,"a","lessEqual"),a=z(n,"b","lessEqual");return e=Vt(r,a),r=e[0],a=e[1],nt(r.shape,a.shape),ee.runKernelFunc((function(o,u){var l=o.lessEqual(r,a);return u([r,a]),l}),{a:r,b:a},null,"LessEqual")}}),_z=Y({lessEqualStrict_:function(t,n){var e=z(t,"a","lessEqualStrict"),r=z(n,"b","lessEqualStrict");return gt(e.shape,r.shape,"Error in lessEqualStrict: "),e.lessEqual(r)}}),Tz=Y({lessStrict_:function(t,n){var e=z(t,"a","lessStrict"),r=z(n,"b","lessStrict");return gt(e.shape,r.shape,"Error in lessStrict: "),e.less(r)}}),Az=Y({notEqual_:function(t,n){var e,r=z(t,"a","notEqual"),a=z(n,"b","notEqual");return e=Vt(r,a),r=e[0],a=e[1],nt(r.shape,a.shape),ee.runKernelFunc((function(o){return o.notEqual(r,a)}),{a:r,b:a},null,"NotEqual")}}),Dz=Y({notEqualStrict_:function(t,n){var e=z(t,"a","notEqualStrict"),r=z(n,"b","notEqualStrict");return gt(e.shape,r.shape,"Error in notEqualStrict: "),e.notEqual(r)}});function NS(t,n){for(var e=[],r=t;r<n;++r)e.push(r);return e}function MS(t){for(var n=[],e=0;e<t.length;++e)for(var r=0;r<t[e].length;++r)n.push(t[e][r]);return n}var Dy=Y({gather_:function(t,n,e){e===void 0&&(e=0);var r=z(t,"x","gather"),a=z(n,"indices","gather","int32");e=yn(e,r.shape)[0];var o=(function(u,l,c){for(var d=u.shape[c],h=[],v=1,m=1,g=0;g<c;g++)h.push(u.shape[g]),v*=u.shape[g];for(g=0;g<l.rank;g++)h.push(l.shape[g]);for(g=c+1;g<u.rank;g++)h.push(u.shape[g]),m*=u.shape[g];return{batchSize:v,sliceSize:m,dimSize:d,outputShape:h}})(r,a,e);return ee.runKernelFunc((function(u,l){var c=u.gather(r,a.flatten(),e);return l([a]),c}),{x:r,indices:a},(function(u,l){var c=l[0];return{x:function(){var d=r.shape,h=c.size,v=d.slice(0,e),m=v.length,g=d.slice(e,d.length).slice(1),b=g.length,x=NS(0,m),S=NS(m+1,m+1+b),C=MS([v,[h],g]),_=u.reshape(C),R=c.reshape([h]),E=MS([[m],x,S]),T=_.transpose(E),k=NR(T,R,r.shape[e]),N=vy(E);return k=k.transpose(N)},indices:function(){return c}}}),"Gather",{axis:e}).reshape(o.outputShape)}}),NR=Y({unsortedSegmentSum_:function(t,n,e){var r=z(t,"x","unsortedSegmentSum"),a=z(n,"segmentIds","unsortedSegmentSum","int32");return W(Jt(e),(function(){return"numSegments must be of dtype int"})),ee.runKernelFunc((function(o,u){var l=o.unsortedSegmentSum(r,a,e);return u([a]),l}),{$x:r},(function(o,u){var l=u[0];return{$x:function(){return(function(c,d){for(var h=Ay(d,it(d)),v=Dy(c,h),m=kR(d,Ee(0,"int32")),g=v.rank-m.rank,b=0;b<g;++b)m=Wr(m,b+1);m=th(m,fu(v.shape,"bool"));var x=it(v);return Pi(m,v,x)})(o,l)}}}))}}),kz=function(t,n,e){return Ae(this,void 0,void 0,(function(){var r,a,o,u,l,c,d,h,v,m,g,b,x;return De(this,(function(S){switch(S.label){case 0:for(r=z(t,"tensor","boolMask"),a=z(n,"mask","boolMask","bool"),o=e??0,u=a.rank,l=r.shape,W(u>0,(function(){return"mask cannot be scalar"})),gt(l.slice(o,o+u),a.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,d=o;d<o+u;d++)c*=l[d];return h=l.slice(0,o).concat([c],l.slice(o+u)),v=r.reshape(h),m=a.reshape([-1]),[4,_R(m)];case 1:return g=S.sent(),b=g.squeeze([1]),x=Dy(v,b,o),t!==r&&r.dispose(),n!==a&&a.dispose(),b.dispose(),v.dispose(),m.dispose(),g.dispose(),[2,x]}}))}))};function MR(t,n,e,r,a,o,u){o===void 0&&(o="NHWC"),W(t.length===n.rank,(function(){return"Length of inShape ("+t.length+") and rank of dy ("+n.rank+") must match"}));var l=t,c=n,d=!1;n.rank===3&&(d=!0,c=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]),l=[1,t[0],t[1],t[2]]),W(l.length===4,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+l.length+"."})),W(c.rank===4,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+c.rank})),W(e.rank===4,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+e.rank}));var h=o==="NHWC"?l[3]:l[1],v=o==="NHWC"?c.shape[3]:c.shape[1];W(h===e.shape[2],(function(){return"Error in conv2dDerInput: depth of input ("+h+") must match input depth for filter "+e.shape[2]+"."})),W(v===e.shape[3],(function(){return"Error in conv2dDerInput: depth of output ("+v+") must match output depth for filter "+e.shape[3]+"."})),u!=null&&W(Jt(a),(function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+a+"."}));var m=xy(o),g=Vi(l,e.shape,r,1,a,u,!1,m),b=ee.runKernelFunc((function(x,S){var C=x.conv2dDerInput(c,e,g);return S([e,c]),C}),{dy4D:c,filter:e},(function(x,S){var C=S[0],_=S[1];return{dy4D:function(){return $r(x,C,r,a,o,1,u)},filter:function(){return ky(x,_,C.shape,r,a,o,u)}}}));return d?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}function km(t){var n=(function(o){return typeof o=="number"?[o,o,o]:o.length===2?[o[0],o[1],1]:o})(t),e=n[0],r=n[1],a=n[2];return e===1&&r===1&&a===1}function OR(t,n,e,r,a){W(t.length===n.rank,(function(){return"Length of inShape ("+t.length+") and rank of dy ("+n.rank+") must match"}));var o=t,u=n,l=!1;n.rank===4&&(l=!0,u=n.as5D(1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]),o=[1,t[0],t[1],t[2],t[3]]);var c=o[4],d=u.shape[4];W(o.length===5,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+o.length+"."})),W(u.rank===5,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+u.rank})),W(e.rank===5,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+e.rank})),W(c===e.shape[3],(function(){return"Error in conv3dDerInput: depth of input ("+c+") must match input depth for filter "+e.shape[3]+"."})),W(d===e.shape[4],(function(){return"Error in conv3dDerInput: depth of output ("+d+") must match output depth for filter "+e.shape[4]+"."}));var h=xd(o,e.shape,r,1,a),v=ee.runKernelFunc((function(m){return m.conv3dDerInput(u,e,h)}),{dy5D:u});return l?v.as4D(v.shape[1],v.shape[2],v.shape[3],v.shape[4]):v}var Nz=Y({conv1d_:function(t,n,e,r,a,o,u){a===void 0&&(a="NWC"),o===void 0&&(o=1);var l=z(t,"x","conv1d"),c=z(n,"filter","conv1d"),d=l,h=!1;l.rank===2&&(h=!0,d=l.as3D(1,l.shape[0],l.shape[1])),W(d.rank===3,(function(){return"Error in conv1d: input must be rank 3, but got rank "+d.rank+"."})),W(c.rank===3,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+c.rank+"."})),u!=null&&W(Jt(r),(function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+r+"."})),W(d.shape[2]===c.shape[1],(function(){return"Error in conv1d: depth of input ("+d.shape[2]+") must match input depth for filter "+c.shape[1]+"."})),W(lr(e,o),(function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+e+" and dilation '"+o+"'"})),W(a==="NWC",(function(){return"Error in conv1d: got dataFormat of "+a+" but only NWC is currently supported."}));var v=c.as4D(1,c.shape[0],c.shape[1],c.shape[2]),m=d.as4D(d.shape[0],1,d.shape[1],d.shape[2]),g=$r(m,v,[1,e],r,"NHWC",[1,o],u);return h?g.as2D(g.shape[2],g.shape[3]):g.as3D(g.shape[0],g.shape[2],g.shape[3])}}),$r=Y({conv2d_:function(t,n,e,r,a,o,u){a===void 0&&(a="NHWC"),o===void 0&&(o=[1,1]);var l=z(t,"x","conv2d"),c=z(n,"filter","conv2d"),d=l,h=!1;l.rank===3&&(h=!0,d=l.as4D(1,l.shape[0],l.shape[1],l.shape[2])),W(d.rank===4,(function(){return"Error in conv2d: input must be rank 4, but got rank "+d.rank+"."})),W(c.rank===4,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+c.rank+"."})),u!=null&&W(Jt(r),(function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+r+"."}));var v=a==="NHWC"?d.shape[3]:d.shape[1];W(v===c.shape[2],(function(){return"Error in conv2d: depth of input ("+v+") must match input depth for filter "+c.shape[2]+"."})),W(lr(e,o),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"}));var m=xy(a),g=Vi(d.shape,c.shape,e,o,r,u,!1,m),b=[c,d],x=ee.runKernelFunc((function(S,C){var _=S.conv2d(d,c,g);return C([c,d]),_}),{x:d,filter:c},(function(S,C){var _=C,R=_[0],E=_[1];return W(ou(o),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"})),{x:function(){return IR(E.shape,S,R,e,r,a)},filter:function(){return ky(E,S,R.shape,e,r,a)}}}),"Conv2D",g,b);return h?x.as3D(x.shape[1],x.shape[2],x.shape[3]):x}}),Mz=Y({conv3d_:function(t,n,e,r,a,o){a===void 0&&(a="NDHWC"),o===void 0&&(o=[1,1,1]);var u=z(t,"x","conv3d"),l=z(n,"filter","conv3d"),c=u,d=!1;u.rank===4&&(d=!0,c=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),W(c.rank===5,(function(){return"Error in conv3d: input must be rank 5, but got rank "+c.rank+"."})),W(l.rank===5,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+l.rank+"."})),W(c.shape[4]===l.shape[3],(function(){return"Error in conv3d: depth of input ("+c.shape[4]+") must match input depth for filter "+l.shape[3]+"."})),W((function(m,g){return km(m)||km(g)})(e,o),(function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"})),W(a==="NDHWC",(function(){return"Error in conv3d: got dataFormat of "+a+" but only NDHWC is currently supported."}));var h=xd(c.shape,l.shape,e,o,r),v=ee.runKernelFunc((function(m,g){var b=m.conv3d(c,l,h);return g([c,l]),b}),{x:c,$filter:l},(function(m,g){W(km(o),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"}));var b=g[0],x=g[1];return{x:function(){return OR(b.shape,m,x,e,r)},$filter:function(){return(function(S,C,_,R,E){var T=S;S.rank===4&&(T=S.as5D(1,S.shape[0],S.shape[1],S.shape[2],S.shape[3]));var k=C;k.rank===4&&(k=C.as5D(1,C.shape[0],C.shape[1],C.shape[2],C.shape[3])),W(T.rank===5,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+T.shape+"."})),W(k.rank===5,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+k.shape+"."})),W(_.length===5,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+_+"."})),W(T.shape[4]===_[3],(function(){return"Error in conv3dDerFilter: depth of input "+T.shape[4]+") must match input depth in filter ("+_[3]+"."})),W(k.shape[4]===_[4],(function(){return"Error in conv3dDerFilter: depth of dy ("+k.shape[4]+") must match output depth for filter ("+_[4]+")."}));var N=xd(T.shape,_,R,1,E);return ee.runKernelFunc((function(O){return O.conv3dDerFilter(T,k,N)}),{x5D:T,dy5D:k})})(b,m,x.shape,e,r)}}}));return d?v.as4D(v.shape[1],v.shape[2],v.shape[3],v.shape[4]):v}}),ky=Y({conv2dDerFilter_:function(t,n,e,r,a,o,u){o===void 0&&(o="NHWC");var l=t;t.rank===3&&(l=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var c=n;c.rank===3&&(c=n.as4D(1,n.shape[0],n.shape[1],n.shape[2])),W(l.rank===4,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+l.shape+"."})),W(c.rank===4,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+c.shape+"."})),W(e.length===4,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+e+"."}));var d=o==="NHWC"?l.shape[3]:l.shape[1],h=o==="NHWC"?c.shape[3]:c.shape[1];W(d===e[2],(function(){return"Error in conv2dDerFilter: depth of input "+d+") must match input depth in filter ("+e[2]+"."})),W(h===e[3],(function(){return"Error in conv2dDerFilter: depth of dy ("+h+") must match output depth for filter ("+e[3]+")."})),u!=null&&W(Jt(a),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+a+"."}));var v=xy(o),m=Vi(l.shape,e,r,1,a,u,!1,v);return ee.runKernelFunc((function(g){return g.conv2dDerFilter(l,c,m)}),{x4D:l,dy4D:c})}}),IR=Y({conv2dDerInput_:MR}),nh=Y({depthwiseConv2d_:function(t,n,e,r,a,o,u){o===void 0&&(o=[1,1]);var l=z(t,"x","depthwiseConv2d"),c=z(n,"filter","depthwiseConv2d"),d=l,h=!1;l.rank===3&&(h=!0,d=l.as4D(1,l.shape[0],l.shape[1],l.shape[2])),W(d.rank===4,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+d.rank+"."})),W(c.rank===4,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+c.rank+"."})),W(d.shape[3]===c.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels ("+d.shape[3]+") must match the inChannels dimension in filter "+c.shape[2]+"."})),o==null&&(o=[1,1]),W(lr(e,o),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"})),u!=null&&W(Jt(r),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+r+"."}));var v=Vi(d.shape,c.shape,e,o,r,u,!0),m=[d,c],g=ee.runKernelFunc((function(b,x){var S=b.depthwiseConv2D(d,c,v);return x([d,c]),S}),{x:d,filter:c},(function(b,x){W(ou(o),(function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+o+"'"}));var S=x[0],C=x[1];return{x:function(){return BR(S.shape,b,C,v)},filter:function(){return FR(S,b,C.shape,v)}}}),"DepthwiseConv2dNative",v,m);return h?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}}),BR=Y({depthwiseConv2dDerInput_:function(t,n,e,r){var a=n,o=!1;n.rank===3&&(o=!0,a=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var u=ee.runKernelFunc((function(l){return l.depthwiseConv2DDerInput(a,e,r)}),{dy4D:a});return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),FR=Y({depthwiseConv2dDerFilter_:function(t,n,e,r){var a=t;t.rank===3&&(a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var o=n;return o.rank===3&&(o=n.as4D(1,n.shape[0],n.shape[1],n.shape[2])),ee.runKernelFunc((function(u){return u.depthwiseConv2DDerFilter(a,o,r)}),{x4D:a,dy4D:o})}}),Ny=Y({separableConv2d_:function(t,n,e,r,a,o,u){o===void 0&&(o=[1,1]),u===void 0&&(u="NHWC");var l=z(t,"x","separableConv2d"),c=z(n,"depthwiseFilter","separableConv2d"),d=z(e,"pointwiseFilter","separableConv2d"),h=l,v=!1;if(l.rank===3&&(v=!0,h=l.as4D(1,l.shape[0],l.shape[1],l.shape[2])),u==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");W(h.rank===4,(function(){return"Error in separableConv2d: input must be rank 4, but got rank "+h.rank+"."})),W(c.rank===4,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+c.rank+"."})),W(d.rank===4,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+c.rank+"."})),W(d.shape[0]===1,(function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+d.shape[0]+"."})),W(d.shape[1]===1,(function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+d.shape[1]+"."}));var m=c.shape[2],g=c.shape[3];W(d.shape[2]===m*g,(function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+m*g+", but got "+d.shape[2]+"."}));var b=nh(h,c,r,a,u,o),x=$r(b,d,1,"valid",u);return v?x.as3D(x.shape[1],x.shape[2],x.shape[3]):x}}),Oz=Y({conv2dTranspose_:function(t,n,e,r,a,o){return MR(e,z(t,"x","conv2dTranspose"),z(n,"filter","conv2dTranspose"),r,a,"NHWC",o)}}),Iz=Y({conv3dTranspose_:function(t,n,e,r,a){return OR(e,z(t,"x","conv3dTranspose"),z(n,"filter","conv3dTranspose"),r,a)}}),rh=Y({matMul_:function(t,n,e,r){var a;e===void 0&&(e=!1),r===void 0&&(r=!1);var o=z(t,"a","matMul"),u=z(n,"b","matMul");a=Vt(o,u),o=a[0],u=a[1];var l=e?o.shape[o.rank-2]:o.shape[o.rank-1],c=r?u.shape[u.rank-1]:u.shape[u.rank-2],d=e?o.shape[o.rank-1]:o.shape[o.rank-2],h=r?u.shape[u.rank-2]:u.shape[u.rank-1],v=o.shape.slice(0,-2),m=u.shape.slice(0,-2),g=Ne(v),b=Ne(m);W(o.rank>=2&&u.rank>=2&&o.rank===u.rank,(function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+o.rank+" and "+u.rank+"."})),W(Sn(v,m),(function(){return"Error in matMul: outer dimensions ("+v+") and ("+m+") of Tensors with shapes "+o.shape+" and "+u.shape+" must match."})),W(l===c,(function(){return"Error in matMul: inner shapes ("+l+") and ("+c+") of Tensors with shapes "+o.shape+" and "+u.shape+" and transposeA="+e+" and transposeB="+r+" must match."}));var x=o.shape.slice(0,-2).concat([d,h]),S=e?o.as3D(g,l,d):o.as3D(g,d,l),C=r?u.as3D(b,h,c):u.as3D(b,c,h),_={transposeA:e,transposeB:r};return ee.runKernelFunc((function(R,E){var T=R.batchMatMul(S,C,e,r);return E([S,C]),T}),{a:S,b:C},(function(R,E){var T=E,k=T[0],N=T[1];return e||r?!e&&r?{a:function(){return R.matMul(N,!1,!1)},b:function(){return R.matMul(k,!0,!1)}}:e&&!r?{a:function(){return N.matMul(R,!1,!0)},b:function(){return k.matMul(R,!1,!1)}}:{a:function(){return N.matMul(R,!0,!0)},b:function(){return R.matMul(k,!0,!0)}}:{a:function(){return R.matMul(N,!1,!0)},b:function(){return k.matMul(R,!0,!1)}}}),"BatchMatMul",_).reshape(x)}}),Bz=Y({dot_:function(t,n){var e=z(t,"t1","dot"),r=z(n,"t2","dot");W(!(e.rank!==1&&e.rank!==2||r.rank!==1&&r.rank!==2),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+e.rank+" and "+r.rank+"."}));var a=e.rank===1?e.size:e.shape[1],o=r.rank===1?r.size:r.shape[0];return W(a===o,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+a+" and "+o+"."})),e.rank===1&&r.rank===1?e.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():e.rank===1&&r.rank===2?e.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():e.rank===2&&r.rank===1?e.matMul(r.as2D(-1,1)).as1D():e.matMul(r.as2D(r.shape[0],r.shape[1]))}}),Fz=Y({outerProduct_:function(t,n){var e=z(t,"v1","outerProduct"),r=z(n,"v2","outerProduct");return W(e.rank===1&&r.rank===1,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+e.rank+" and "+r.rank+"."})),e.as2D(-1,1).matMul(r.as2D(1,-1))}}),tc=Y({reverse_:function(t,n){var e=z(t,"x","reverse");if(e.rank===0)return e.clone();var r=yn(n,e.shape);return ee.runKernelFunc((function(a){return a.reverse(e,r)}),{$x:e},(function(a){return{$x:function(){return a.reverse(r)}}})).reshapeAs(e)}}),Pz=Y({reverse1d_:function(t){var n=z(t,"x","reverse");return W(n.rank===1,(function(){return"Error in reverse1D: x must be rank 1 but got rank "+n.rank+"."})),tc(n,0)}}),Lz=Y({reverse2d_:function(t,n){var e=z(t,"x","reverse");return W(e.rank===2,(function(){return"Error in reverse2D: x must be rank 2 but got rank "+e.rank+"."})),tc(e,n)}}),zz=Y({reverse3d_:function(t,n){var e=z(t,"x","reverse");return W(e.rank===3,(function(){return"Error in reverse3D: x must be rank 3 but got rank "+e.rank+"."})),tc(e,n)}}),Uz=Y({reverse4d_:function(t,n){var e=z(t,"x","reverse");return W(e.rank===4,(function(){return"Error in reverse4D: x must be rank 4 but got rank "+e.rank+"."})),tc(e,n)}});function PR(t,n,e,r,a,o){var u=z(t,"x","maxPool"),l=u,c=!1;u.rank===3&&(c=!0,l=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),W(l.rank===4,(function(){return"Error in maxPool: input must be rank 4 but got rank "+l.rank+"."})),W(lr(e,r),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+r+"'"})),o!=null&&W(Jt(a),(function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."}));var d=Il(l.shape,n,e,r,a,o);if(d.filterWidth===1&&d.filterHeight===1&&Sn(d.inShape,d.outShape))return u.clone();var h=[l],v=ee.runKernelFunc((function(m,g){var b=m.maxPool(l,d);return g([l,b]),b}),{x:l},(function(m,g){var b=g[0],x=g[1];return{x:function(){return(function(S,C,_,R,E,T,k,N){var O=z(S,"dy","maxPoolBackprop"),I=z(C,"input","maxPoolBackprop"),B=z(_,"output","maxPoolBackprop");W(I.rank===O.rank,(function(){return"Rank of input ("+I.rank+") does not match rank of dy ("+O.rank+")"})),W(lr(E,T),(function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+E+" and dilations '"+T+"'"})),W(O.rank===4,(function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+O.rank+"."})),W(I.rank===4,(function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+I.rank+"."}));var H=Il(I.shape,R,E,T,k,N);return ee.runKernelFunc((function(A){return A.maxPoolBackprop(O,I,B,H)}),{$dy:O,$input:I})})(m,b,x,n,e,r,a)}}}),"MaxPool",d,h);return c?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}function LR(t,n,e,r,a,o){var u=z(t,"x","avgPool","float32");W(lr(e,r),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+r+"'"}));var l=u,c=!1;u.rank===3&&(c=!0,l=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),W(l.rank===4,(function(){return"Error in avgPool: x must be rank 4 but got rank "+l.rank+"."})),o!=null&&W(Jt(a),(function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."}));var d=Il(l.shape,n,e,r,a,o);if(d.filterWidth===1&&d.filterHeight===1&&Sn(d.inShape,d.outShape))return u.clone();var h=ee.runKernelFunc((function(v){return v.avgPool(l,d)}),{x:l},(function(v){return{x:function(){return(function(m,g,b,x,S,C){var _=z(m,"dy","avgPoolBackprop"),R=z(g,"input","avgPoolBackprop");W(R.rank===_.rank,(function(){return"Rank of input ("+R.rank+") does not match rank of dy ("+_.rank+")"})),W(lr(x,S),(function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+x+" and dilations '"+S+"'"}));var E=R,T=_,k=!1;R.rank===3&&(k=!0,E=R.as4D(1,R.shape[0],R.shape[1],R.shape[2]),T=_.as4D(1,_.shape[0],_.shape[1],_.shape[2])),W(T.rank===4,(function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+T.rank+"."})),W(E.rank===4,(function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+E.rank+"."}));var N=Il(E.shape,b,x,S,C),O=ee.runKernelFunc((function(I){return I.avgPoolBackprop(T,E,N)}),{dy4D:T,input4D:E});return k?O.as3D(O.shape[1],O.shape[2],O.shape[3]):O})(v,l,n,e,r,a)}}}),"AvgPool",d);return h=h.cast(u.dtype),c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}var wn=Y({maxPool_:function(t,n,e,r,a){return PR(t,n,e,1,r,a)}}),nc=Y({avgPool_:function(t,n,e,r,a){return LR(t,n,e,1,r,a)}}),Wz=Y({pool_:function(t,n,e,r,a,o){a==null&&(a=[1,1]),o==null&&(o=1),r===0&&(r="valid");var u=z(t,"x","maxPool"),l=u,c=!1;u.rank===3&&(c=!0,l=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),W(lr(o,a),(function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+a+"'"}));var d,h=Il(l.shape,n,o,a,r),v=[h.dilationHeight,h.dilationWidth];d=r==="same"?(function(E,T){var k=E.map((function(I,B){return I+(I-1)*(T[B]-1)})).map((function(I){return I-1})),N=k.map((function(I){return Math.floor(I/2)})),O=k.map((function(I,B){return I-N[B]}));return k.map((function(I,B){return[N[B],O[B]]}))})([h.filterHeight,h.filterWidth],v):[[0,0],[0,0]];var m=v[0]===1&&v[1]===1,g=(function(E,T,k){var N=k.map((function(V){return V[0]})),O=k.map((function(V){return V[1]})),I=E.concat(N,O),B=T.map((function(V,j){return(V-I[j]%V)%V})),H=O.map((function(V,j){return V+B[j]})),A=T.map((function(V,j){return[N[j],H[j]]})),q=T.map((function(V,j){return[0,B[j]]}));return[A,q]})([h.inHeight,h.inWidth],v,d),b=g[0],x=g[1],S=m?r:"valid",C=m?l:jE(l,v,b),_=(e==="avg"?function(){return LR(C,n,o,1,S)}:function(){return PR(C,n,o,1,S)})(),R=m?_:WE(_,v,x);return c?R.as3D(R.shape[1],R.shape[2],R.shape[3]):R}}),Hz=Y({maxPool3d_:function(t,n,e,r,a,o,u){o===void 0&&(o="NDHWC");var l=z(t,"x","maxPool3d"),c=l,d=!1;l.rank===4&&(d=!0,c=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),u==null&&(u=[1,1,1]),W(c.rank===5,(function(){return"Error in maxPool3d: x must be rank 5 but got rank "+c.rank+"."})),W(o==="NDHWC",(function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+o})),W(lr(e,u),(function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+u+"'"})),a!=null&&W(Jt(r),(function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}));var h=bd(c.shape,n,e,u,r,a,o),v=ee.runKernelFunc((function(m,g){var b=m.maxPool3d(c,h);return g([c,b]),b}),{x:c},(function(m,g){var b=g[0],x=g[1];return{x:function(){return(function(S,C,_,R,E,T,k,N){var O=z(S,"dy","maxPool3dBackprop"),I=z(C,"input","maxPool3dBackprop"),B=z(_,"output","maxPool3dBackprop"),H=O,A=I,q=B,V=!1;I.rank===4&&(V=!0,H=O.as5D(1,O.shape[0],O.shape[1],O.shape[2],O.shape[3]),A=I.as5D(1,I.shape[0],I.shape[1],I.shape[2],I.shape[3]),q=B.as5D(1,B.shape[0],B.shape[1],B.shape[2],B.shape[3])),W(H.rank===5,(function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+H.rank+"."})),W(A.rank===5,(function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+A.rank+"."})),W(q.rank===5,(function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+q.rank+"."})),T==null&&(T=[1,1,1]),W(lr(E,T),(function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+E+" and dilations '"+T+"'"})),N!=null&&W(Jt(k),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+N+" but got pad "+k+"."}));var j=bd(A.shape,R,E,T,k,N),P=ee.runKernelFunc((function($){return $.maxPool3dBackprop(H,A,q,j)}),{dy5D:H,input5D:A});return V?P.as4D(P.shape[1],P.shape[2],P.shape[3],P.shape[4]):P})(m,b,x,n,e,u,r,a)}}}));return d?v.as4D(v.shape[1],v.shape[2],v.shape[3],v.shape[4]):v}}),Vz=Y({avgPool3d_:function(t,n,e,r,a,o,u){o===void 0&&(o="NDHWC");var l=z(t,"x","avgPool3d","float32"),c=l,d=!1;l.rank===4&&(d=!0,c=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),u==null&&(u=[1,1,1]),W(c.rank===5,(function(){return"Error in avgPool3d: x must be rank 5 but got rank "+c.rank+"."})),W(o==="NDHWC",(function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+o})),W(lr(e,u),(function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+u+"'"})),a!=null&&W(Jt(r),(function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}));var h=bd(c.shape,n,e,u,r,a,o),v=ee.runKernelFunc((function(m){return m.avgPool3d(c,h)}),{x:c},(function(m){return{x:function(){return(function(g,b,x,S,C,_,R){var E=z(g,"dy","avgPool3dBackprop"),T=z(b,"input","avgPool3dBackprop"),k=E,N=T,O=!1;T.rank===4&&(O=!0,k=E.as5D(1,E.shape[0],E.shape[1],E.shape[2],E.shape[3]),N=T.as5D(1,T.shape[0],T.shape[1],T.shape[2],T.shape[3])),W(k.rank===5,(function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+k.rank+"."})),W(N.rank===5,(function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+N.rank+"."})),C==null&&(C=[1,1,1]),W(lr(S,C),(function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+S+" and dilations '"+C+"'"})),R!=null&&W(Jt(_),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+R+" but got pad "+_+"."}));var I=bd(N.shape,x,S,C,_,R),B=ee.runKernelFunc((function(H){return H.avgPool3dBackprop(k,N,I)}),{dy5D:k,input5D:N});return O?B.as4D(B.shape[1],B.shape[2],B.shape[3],B.shape[4]):B})(m,c,n,e,u,r,a)}}}));return v=v.cast(c.dtype),d?v.as4D(v.shape[1],v.shape[2],v.shape[3],v.shape[4]):v}}),Ta=Y({slice_:function(t,n,e){var r,a,o=z(t,"x","slice");if(o.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof n=="number"?[n].concat(new Array(o.rank-1).fill(0)):n.length<o.rank?n.concat(new Array(o.rank-n.length).fill(0)):n.slice()).forEach((function(c){W(c!==-1,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=e==null?new Array(o.rank).fill(-1):typeof e=="number"?[e].concat(new Array(o.rank-1).fill(-1)):e.length<o.rank?e.concat(new Array(o.rank-e.length).fill(-1)):e).map((function(c,d){return c>=0?c:(W(c===-1,(function(){return"Negative size values should be exactly -1 but got "+c+" for the slice() size at index "+d+"."})),o.shape[d]-r[d])})),gP(o,r,a);var u=o.shape,l={begin:r,size:a};return ee.runKernelFunc((function(c){return c.slice(o,r,a)}),{x:o},(function(c){for(var d=[],h=0;h<c.rank;h++)d.push([r[h],u[h]-r[h]-a[h]]);return{x:function(){return c.pad(d)}}}),"Slice",l)}}),jz=Y({slice1d_:function(t,n,e){var r=z(t,"x","slice1d");return W(r.rank===1,(function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"})),Ta(r,[n],[e])}}),Gz=Y({slice2d_:function(t,n,e){var r=z(t,"x","slice2d");return W(r.rank===2,(function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"})),Ta(r,n,e)}}),zR=Y({slice3d_:function(t,n,e){var r=z(t,"x","slice3d");return W(r.rank===3,(function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"})),Ta(r,n,e)}}),qz=Y({slice4d_:function(t,n,e){var r=z(t,"x","slice4d");return W(r.rank===4,(function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"})),Ta(r,n,e)}});function UR(t,n,e,r,a){return n.rank<e.rank&&(n=n.reshape(ur(n.shape,r))),t.rank<e.rank&&(t=t.reshape(ur(t.shape,r))),{x:function(){var o=t.mul(e.equal(n).cast(t.dtype));return a==null?o:o.transpose(a)}}}var $z=Y({all_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=z(t,"x","all","bool"),a=yn(n,r.shape),o=a,u=Na(o,r.rank);u!=null&&(r=r.transpose(u),o=Ma(o.length,r.rank));var l=ee.runKernelFunc((function(d){return d.all(r,o)}),{$x:r});if(e){var c=ur(l.shape,a);return l.reshape(c)}return l}}),Kz=Y({any_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=z(t,"x","any","bool"),a=yn(n,r.shape),o=a,u=Na(o,r.rank);u!=null&&(r=r.transpose(u),o=Ma(o.length,r.rank));var l=ee.runKernelFunc((function(d){return d.any(r,o)}),{$x:r});if(e){var c=ur(l.shape,a);return l.reshape(c)}return l}}),Xz=Y({argMax_:function(t,n){n===void 0&&(n=0);var e=z(t,"x","argMax");n==null&&(n=0);var r=yn(n,e.shape),a=Na(r,e.rank);a!=null&&(e=e.transpose(a),r=Ma(r.length,e.rank));var o={axis:r[0]},u=[e];return ee.runKernelFunc((function(l,c){var d=l.argMax(e,r[0]);return c([e]),d}),{x:e},(function(l,c){var d=c[0];return{x:function(){return it(d)}}}),"ArgMax",o,u)}}),Yz=Y({argMin_:function(t,n){n===void 0&&(n=0);var e=z(t,"x","argMin");n==null&&(n=0);var r=yn(n,e.shape),a=Na(r,e.rank);return a!=null&&(e=e.transpose(a),r=Ma(r.length,e.rank)),ee.runKernelFunc((function(o,u){var l=o.argMin(e,r[0]);return u([e]),l}),{$x:e},(function(o,u){var l=u[0];return{$x:function(){return it(l)}}}))}}),Qz=Y({logSumExp_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=z(t,"x","logSumExp"),a=yn(n,r.shape),o=r.max(a,!0),u=r.sub(o).exp().sum(a).log(),l=o.reshape(u.shape).add(u);if(e){var c=ur(l.shape,a);return l.reshape(c)}return l}}),ah=Y({max_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=z(t,"x","max"),a=r,o=yn(n,r.shape),u=o,l=Na(u,r.rank);l!=null&&(r=r.transpose(l),u=Ma(u.length,r.rank));var c=[r],d=ee.runKernelFunc((function(v,m){var g=v.max(r,u);return m([a,g]),g}),{x:r},(function(v,m){return UR(v,m[1],m[0],o,l)}),"Max",{axes:u},c,[!0]);if(e){var h=ur(d.shape,o);d=d.reshape(h)}return d}}),Zz=Y({mean_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=z(t,"x","mean"),a=yn(n,r.shape),o=Ne(zn(r.shape,a)[1]);return Jd((function(u){var l=Ee(o);return{value:(l.dtype===u.dtype?u:u.cast(l.dtype)).div(l).sum(n,e),gradFunc:function(c){var d=u.shape.slice();return a.forEach((function(h){d[h]=1})),c.reshape(d).mul(fu(u.shape,"float32")).div(o)}}}))(r)}}),Jz=Y({min_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=z(t,"x","min"),a=r,o=yn(n,r.shape),u=o,l=Na(u,r.rank);l!=null&&(r=r.transpose(l),u=Ma(u.length,r.rank));var c=[r],d=ee.runKernelFunc((function(v,m){var g=v.min(r,u);return m([a,g]),g}),{x:r},(function(v,m){return UR(v,m[1],m[0],o,l)}),"Min",{axes:u},c,[!0]);if(e){var h=ur(d.shape,o);d=d.reshape(h)}return d}}),e6=Y({moments_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=yn(n,(t=z(t,"x","moments")).shape),a=t.mean(r,e),o=a.shape;e||(o=ur(a.shape,r));var u=t.toFloat().sub(a.reshape(o)).square();return{mean:a,variance:u.mean(r,e)}}}),WR=Y({sum_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=z(t,"x","sum");r.dtype==="bool"&&(r=r.toInt());var a=yn(n,r.shape);return Jd((function(o){var u=Na(a,o.rank),l=a,c=o;u!=null&&(c=o.transpose(u),l=Ma(l.length,o.rank));var d=function(g){var b=o.shape.slice();return a.forEach((function(x){b[x]=1})),g.reshape(b).mul(fu(o.shape,"float32"))},h={axes:l},v=ee.runKernelFunc((function(g){return g.sum(c,l)}),{x:c},(function(g){return{x:function(){return d(g)}}}),"Sum",h);if(e){var m=ur(v.shape,a);v=v.reshape(m)}return{value:v,gradFunc:d}}))(r)}}),t6=Y({prod_:function(t,n,e){n===void 0&&(n=null),e===void 0&&(e=!1);var r=z(t,"x","prod");r.dtype==="bool"&&(r=r.toInt());var a=yn(n,r.shape),o=Na(a,r.rank),u=a,l=r;o!=null&&(l=r.transpose(o),u=Ma(u.length,r.rank));var c=ee.runKernelFunc((function(h){return h.prod(l,u)}),{permutedX:l});if(e){var d=ur(c.shape,a);c=c.reshape(d)}return c}}),HR=Y({elu_:function(t){var n=z(t,"x","elu");return ee.runKernelFunc((function(e,r){var a=e.elu(n);return r([a]),a}),{$x:n},(function(e,r){var a=r[0];return{$x:function(){return ee.runKernelFunc((function(o){return o.eluDer(e,a)}),{dy:e,y:a})}}}))}}),n6=Y({leakyRelu_:function(t,n){n===void 0&&(n=.2);var e=z(t,"x","leakyRelu");return Ay(Ee(n).mul(e),e)}}),VR=Y({prelu_:function(t,n){var e=z(t,"x","prelu"),r=z(n,"alpha","prelu");return ee.runKernelFunc((function(a,o){var u=a.prelu(e,r);return o([e,r]),u}),{x:e,alpha:r},(function(a,o){var u=o[0],l=o[1],c=u.greater(0);return{x:function(){return Pi(c,a,a.mul(l))},alpha:function(){var d=Pi(c,it(a),a.mul(u)),h=mn(l.shape,a.shape);return h.length>0&&(d=d.sum(h)),d.reshape(l.shape)}}}),"Prelu")}}),Wt=Y({relu_:function(t){var n=z(t,"x","relu");return n.dtype==="bool"?n.toInt():ee.runKernelFunc((function(e,r){var a=e.relu(n);return r([n]),a}),{x:n},(function(e,r){var a=r[0];return{x:function(){return e.mulStrict(a.step().toFloat())}}}),"Relu")}}),jR=Y({relu6_:function(t){var n=z(t,"x","relu6");return n.dtype==="bool"?n.toInt():ee.runKernelFunc((function(e,r){var a=e.relu6(n);return r([n]),a}),{x:n},(function(e,r){var a=r[0],o=a.lessEqual(6).mul(a.step());return{x:function(){return e.mulStrict(o.toFloat())}}}),"Relu6")}}),r6=Y({selu_:function(t){var n=z(t,"x","selu");return ee.runKernelFunc((function(e,r){var a=e.selu(n);return r([n]),a}),{$x:n},(function(e,r){var a=r[0];return{$x:function(){var o=a.greater(Ee(0)),u=Ee(Ry),l=Ee(_y),c=e.mul(l),d=e.mul(u).mul(a.toFloat().exp());return Pi(o,c,d)}}}))}}),Yo=Y({transpose_:function(t,n){var e=z(t,"x","transpose");if(n==null&&(n=e.shape.map((function(a,o){return o})).reverse()),W(e.rank===n.length,(function(){return"Error in transpose: rank of input "+e.rank+" must match length of perm "+n+"."})),n.forEach((function(a){W(a>=0&&a<e.rank,(function(){return"All entries in 'perm' must be between 0 and "+(e.rank-1)+" but got "+n}))})),e.rank<=1)return e.clone();var r={perm:n};return ee.runKernelFunc((function(a){return a.transpose(e,n)}),{x:e},(function(a){var o=vy(n);return{x:function(){return a.transpose(o)}}}),"Transpose",r)}}),a6=Y({localResponseNormalization_:function(t,n,e,r,a){n===void 0&&(n=5),e===void 0&&(e=1),r===void 0&&(r=1),a===void 0&&(a=.5);var o=z(t,"x","localResponseNormalization");W(o.rank===4||o.rank===3,(function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+o.rank+"."})),W(Jt(n),(function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+n+"."}));var u=o,l=!1;o.rank===3&&(l=!0,u=o.as4D(1,o.shape[0],o.shape[1],o.shape[2]));var c=ee.runKernelFunc((function(d,h){var v=d.localResponseNormalization4D(u,n,e,r,a);return h([u,v]),v}),{x4D:u},(function(d,h){var v=h[0],m=h[1];return{x4D:function(){return ee.runKernelFunc((function(g){return g.LRNGrad(d,v,m,n,e,r,a)}),{})}}}));return l?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),GR=Y({norm_:function(t,n,e,r){n===void 0&&(n="euclidean"),e===void 0&&(e=null),r===void 0&&(r=!1);var a=(function l(c,d,h){if(h===void 0&&(h=null),c.rank===0)return c.abs();if(c.rank!==1&&h===null)return l(c.reshape([-1]),d,h);if(c.rank===1||typeof h=="number"||Array.isArray(h)&&h.length===1){if(d===1)return c.abs().sum(h);if(d===1/0)return c.abs().max(h);if(d===-1/0)return c.abs().min(h);if(d==="euclidean"||d===2)return c.abs().pow(Ee(2,"int32")).sum(h).sqrt();throw new Error("Error in norm: invalid ord value: "+d)}if(Array.isArray(h)&&h.length===2){if(d===1)return c.abs().sum(h[0]).max(h[1]-1);if(d===1/0)return c.abs().sum(h[1]).max(h[0]);if(d===-1/0)return c.abs().sum(h[1]).min(h[0]);if(d==="fro"||d==="euclidean")return c.square().sum(h).sqrt();throw new Error("Error in norm: invalid ord value: "+d)}throw new Error("Error in norm: invalid axis: "+h)})(t=z(t,"x","norm"),n,e),o=a.shape;if(r){var u=yn(e,t.shape);o=ur(a.shape,u)}return a.reshape(o)}}),o6=Y({basicLSTMCell_:function(t,n,e,r,a,o){var u=z(t,"forgetBias","basicLSTMCell"),l=z(n,"lstmKernel","basicLSTMCell"),c=z(e,"lstmBias","basicLSTMCell"),d=z(r,"data","basicLSTMCell"),h=z(a,"c","basicLSTMCell"),v=z(o,"h","basicLSTMCell"),m=d.concat(v,1).matMul(l).add(c),g=m.shape[0],b=m.shape[1]/4,x=[g,b],S=m.slice([0,0],x),C=m.slice([0,b],x),_=m.slice([0,2*b],x),R=m.slice([0,3*b],x),E=S.sigmoid().mulStrict(C.tanh()).addStrict(h.mulStrict(u.add(_).sigmoid())),T=E.tanh().mulStrict(R.sigmoid());return[E,T]}}),i6=Y({multiRNNCell_:function(t,n,e,r){for(var a=z(n,"data","multiRNNCell"),o=hd(e,"c","multiRNNCell"),u=hd(r,"h","multiRNNCell"),l=a,c=[],d=0;d<t.length;d++){var h=t[d](l,o[d],u[d]);c.push(h[0]),c.push(h[1]),l=h[1]}var v=[],m=[];for(d=0;d<c.length;d+=2)v.push(c[d]),m.push(c[d+1]);return[v,m]}}),s6=Y({movingAverage_:function(t,n,e,r,a){a===void 0&&(a=!0);var o=z(t,"v","movingAverage"),u=z(n,"x","movingAverage"),l=z(e,"decay","movingAverage");aF(o,u),W(Sn(o.shape,u.shape),(function(){return"Shape mismatch in v and x"}));var c=Ee(1),d=c.sub(l),h=u.sub(o).mul(d);if(a){W(r!=null,(function(){return"When using zeroDebias: true, step is required."}));var v=z(r,"step","movingAverage");h=h.div(c.sub(Cd(l,v)))}return o.add(h)}}),u6=Y({stridedSlice_:function(t,n,e,r,a,o,u,l,c){if(a===void 0&&(a=0),o===void 0&&(o=0),u===void 0&&(u=0),l===void 0&&(l=0),c===void 0&&(c=0),r==null&&(r=new Array(n.length)),u!==0)throw new Error("ellipsis mask is not yet supported");var d=z(t,"x","stridedSlice"),h=fS(l),v=d.shape.slice();h.forEach((function(S){n[S]=0,e[S]=1,v.splice(S,0,1)})),d=d.reshape(v);for(var m=0;m<d.rank;m++)n[m]=yP(a,n,r,d.shape,m),e[m]=bP(o,e,r,d.shape,m),r[m]=r[m]||1;var g=fS(c);g.forEach((function(S){e[S]=n[S]+1,r[S]=1}));var b=by(n,e,r),x=b.filter((function(S,C){return g.indexOf(C)===-1}));return r.every((function(S){return S===1}))?Ta(d,n,b).reshape(x):ee.runKernelFunc((function(S){return S.stridedSlice(d,n,e,r)}),{$x:d}).reshape(x)}}),l6=Y({topk_:function(t,n,e){n===void 0&&(n=1),e===void 0&&(e=!0);var r=z(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(n>a)throw new Error("'k' passed to topk() must be <= the last dimension ("+a+") but got "+n);var o=ee.runKernelFunc((function(u){return u.topk(r,n,e)}),{$x:r});return{values:o[0],indices:o[1]}}}),c6=Y({scatterND_:function(t,n,e){var r=z(t,"indices","scatterND","int32"),a=z(n,"updates","scatterND");return mP(a,r,e),ee.runKernelFunc((function(o){return o.scatterND(r,a,e)}),{indices:r,updates:a},null,"ScatterNd",{shape:e})}}),My=Y({fft_:function(t){W(t.dtype==="complex64",(function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+t.dtype+"."}));var n=t.shape[t.shape.length-1],e=t.size/n,r=t.as2D(e,n);return ee.runKernelFunc((function(a){return a.fft(r)}),{input:t}).reshape(t.shape)}}),Ed=Y({ifft_:function(t){W(t.dtype==="complex64",(function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+t.dtype+"."}));var n=t.shape[t.shape.length-1],e=t.size/n,r=t.as2D(e,n);return ee.runKernelFunc((function(a){return a.ifft(r)}),{input:t}).reshape(t.shape)}}),Oy=Y({rfft_:function(t,n){W(t.dtype==="float32",(function(){return"The dtype for rfft() must be real value but got "+t.dtype}));var e,r=t.shape[t.shape.length-1],a=t.size/r;if(n!=null&&n<r){var o=t.shape.map((function(C){return 0})),u=t.shape.map((function(C){return C}));u[t.shape.length-1]=n,e=t.slice(o,u),r=n}else if(n!=null&&n>r){var l=t.shape.map((function(C){return C}));l[t.shape.length-1]=n-r,e=t.concat(It(l),t.shape.length-1),r=n}else e=t;var c=e.zerosLike(),d=kn(e,c).as2D(a,r),h=My(d),v=Math.floor(r/2)+1,m=Hr(h),g=xa(h),b=m.split([v,r-v],m.shape.length-1),x=g.split([v,r-v],g.shape.length-1),S=e.shape.slice();return S[e.shape.length-1]=v,kn(b[0],x[0]).reshape(S)}}),qR=Y({irfft_:function(t){var n=t.shape[t.shape.length-1],e=t.size/n;if(n<=2){var r=t.as2D(e,n),a=Ed(r);return Hr(a)}var o=[e,2*(n-1)],u=Hr(t).as2D(e,n),l=xa(t).as2D(e,n),c=u.slice([0,1],[e,n-2]).reverse(1),d=l.slice([0,1],[e,n-2]).reverse(1).mul(Ee(-1)),h=u.concat(c,1),v=l.concat(d,1);return r=kn(h,v).as2D(o[0],o[1]),a=Ed(r),Hr(a)}}),f6=Object.freeze({fft:My,ifft:Ed,rfft:Oy,irfft:qR}),d6=Y({sparseToDense_:function(t,n,e,r){r===void 0&&(r=0);var a=z(t,"sparseIndices","sparseToDense","int32"),o=z(n,"sparseValues","sparseToDense"),u=z(r,"defaultValue","sparseToDense",o.dtype);return(function(l,c,d,h){if(l.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+l.dtype+".");if(l.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+l.shape+".");var v=l.rank>0?l.shape[0]:1,m=l.rank>1?l.shape[1]:1;if(d.length!==m)throw new Error("outputShape has incorrect number of elements:, "+d.length+", should be: "+m+".");var g=c.size;if(c.rank!==0&&(c.rank!==1||g!==v))throw new Error("sparseValues has incorrect shape "+c.shape+", should be [] or ["+v+"]");if(c.dtype!==h.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")})(a,o,e,u),ee.runKernelFunc((function(l){return l.sparseToDense(a,o,e,u)}),{$sparseIndices:a,$sparseValues:o,$defaultValue:u})}}),h6=Y({gatherND_:function(t,n){var e=z(n,"indices","gatherND","int32"),r=z(t,"x","gatherND");return ee.runKernelFunc((function(a){return a.gatherND(r,e)}),{x:r,indices:e},null,"GatherNd")}}),p6=Y({diag_:function(t){var n=z(t,"x","diag").flatten(),e=t.shape.concat(t.shape);return ee.runKernelFunc((function(r){return r.diag(n)}),{$x:n}).reshape(e)}}),v6=Y({dropout_:function(t,n,e,r){var a=z(t,"x","dropout");if(W(a.dtype==="float32",(function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+a.dtype+" tensor instead."})),W(n>=0&&n<1,(function(){return"rate must be a float in the range [0, 1), but got "+n+"."})),n===0)return t instanceof Ut?a.clone():a;var o=(function(c,d){if(d==null)return c.shape.slice();if(Sn(c.shape,d))return d;if(c.shape.length===d.length){for(var h=[],v=0;v<c.shape.length;v++)d[v]==null&&c.shape[v]!=null?h.push(c.shape[v]):h.push(d[v]);return h}return d})(a,e),u=1-n,l=VE(o,0,1,"float32",r).add(u).floor().div(u);return a.mul(l)}});function $R(t,n,e){for(var r=1-t%2,a=new Float32Array(t),o=0;o<t;++o){var u=2*Math.PI*o/(t+r-1);a[o]=n-e*Math.cos(u)}return ln(a,"float32")}var Iy=Y({hannWindow_:function(t){return $R(t,.5,.5)}}),KR=Y({hammingWindow_:function(t){return $R(t,.54,.46)}}),By=Y({frame_:function(t,n,e,r,a){r===void 0&&(r=!1),a===void 0&&(a=0);for(var o=0,u=[];o+n<=t.size;)u.push(Ta(t,o,n)),o+=e;if(r)for(;o<t.size;){var l=o+n-t.size,c=pn([Ta(t,o,n-l),_a([l],a)]);u.push(c),o+=e}return u.length===0?qo([],[0,n]):pn(u).as2D(u.length,n)}}),XR=Y({stft_:function(t,n,e,r,a){var o;a===void 0&&(a=Iy),r==null&&(o=n,r=Math.floor(Math.pow(2,Math.ceil(Math.log(o)/Math.log(2)))));for(var u=By(t,n,e),l=jn(u,a(n)),c=[],d=0;d<u.shape[0];d++)c.push(Oy(l.slice([d,0],[1,n]),r));return pn(c)}}),m6=Object.freeze({hannWindow:Iy,hammingWindow:KR,frame:By,stft:XR}),Vn,g6=function(t,n,e){return e===void 0&&(e=1),Ae(this,void 0,void 0,(function(){var r,a,o,u,l,c,d,h,v,m,g,b,x,S;return De(this,(function(C){switch(C.label){case 0:return r=z(t,"predictions","inTopK"),a=z(n,"targets","inTopK"),W(r.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank})),W(r.rank-1===a.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+a.rank})),gt(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=r.shape[r.shape.length-1],W(e>0&&e<=o,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+o+"), but got "+e})),[4,r.data()];case 1:return u=C.sent(),[4,a.data()];case 2:for(l=C.sent(),c=[u.length/o,o],h=c[1],v=Nl("bool",d=c[0]),m=0;m<d;m++){for(g=m*h,b=u.subarray(g,g+h),x=[],S=0;S<b.length;S++)x.push({value:b[S],index:S});for(x.sort((function(_,R){return R.value-_.value})),v[m]=0,S=0;S<e;S++)if(x[S].index===l[m]){v[m]=1;break}}return t!==r&&r.dispose(),n!==a&&a.dispose(),[2,On(v,a.shape,"bool")]}}))}))};(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Vn||(Vn={}));var y6=Y({absoluteDifference_:function(t,n,e,r){r===void 0&&(r=Vn.SUM_BY_NONZERO_WEIGHTS);var a=z(t,"labels","absoluteDifference"),o=z(n,"predictions","absoluteDifference"),u=null;e!=null&&(u=z(e,"weights","absoluteDifference")),gt(a.shape,o.shape,"Error in absoluteDifference: ");var l=a.sub(o).abs();return fo(l,u,r)}}),fo=Y({computeWeightedLoss_:function(t,n,e){e===void 0&&(e=Vn.SUM_BY_NONZERO_WEIGHTS);var r=z(t,"losses","computeWeightedLoss"),a=null;n!=null&&(a=z(n,"weights","computeWeightedLoss"));var o=a==null?r:r.mul(a);if(e===Vn.NONE)return o;if(e===Vn.SUM)return o.sum();if(e===Vn.MEAN){if(a==null)return o.mean();var u=r.size/a.size,l=o.sum().div(a.sum());return u>1?l.div(Ee(u)):l}if(e===Vn.SUM_BY_NONZERO_WEIGHTS){if(a==null)return o.sum().div(Ee(r.size));var c=a.mul(fu(r.shape)).notEqual(Ee(0)).sum().toFloat();return o.sum().div(c)}throw Error("Unknown reduction: "+e)}}),b6=Y({cosineDistance_:function(t,n,e,r,a){a===void 0&&(a=Vn.SUM_BY_NONZERO_WEIGHTS);var o=z(t,"labels","cosineDistance"),u=z(n,"predictions","cosineDistance"),l=null;r!=null&&(l=z(r,"weights","cosineDistance")),gt(o.shape,u.shape,"Error in cosineDistance: ");var c=Ee(1).sub(o.mul(u).sum(e,!0));return fo(c,l,a)}}),x6=Y({hingeLoss_:function(t,n,e,r){r===void 0&&(r=Vn.SUM_BY_NONZERO_WEIGHTS);var a=z(t,"labels","hingeLoss"),o=z(n,"predictions","hingeLoss"),u=null;e!=null&&(u=z(e,"weights","hingeLoss")),gt(a.shape,o.shape,"Error in hingeLoss: ");var l=Ee(1);a=Ee(2).mul(a).sub(l);var c=l.sub(a.mul(o)).relu();return fo(c,u,r)}}),w6=Y({huberLoss_:function(t,n,e,r,a){r===void 0&&(r=1),a===void 0&&(a=Vn.SUM_BY_NONZERO_WEIGHTS);var o=z(t,"labels","huberLoss"),u=z(n,"predictions","huberLoss"),l=null;e!=null&&(l=z(e,"weights","huberLoss")),gt(o.shape,u.shape,"Error in huberLoss: ");var c=Ee(r),d=u.sub(o).abs(),h=AR(d,c),v=d.sub(h),m=Ee(.5).mul(h.square()).add(c.mul(v));return fo(m,l,a)}}),S6=Y({logLoss_:function(t,n,e,r,a){r===void 0&&(r=1e-7),a===void 0&&(a=Vn.SUM_BY_NONZERO_WEIGHTS);var o=z(t,"labels","logLoss"),u=z(n,"predictions","logLoss"),l=null;e!=null&&(l=z(e,"weights","logLoss")),gt(o.shape,u.shape,"Error in logLoss: ");var c=Ee(1),d=Ee(r),h=o.mul(u.add(d).log()).neg().sub(c.sub(o).mul(c.sub(u).add(d).log()));return fo(h,l,a)}}),C6=Y({meanSquaredError_:function(t,n,e,r){r===void 0&&(r=Vn.SUM_BY_NONZERO_WEIGHTS);var a=z(t,"labels","meanSquaredError"),o=z(n,"predictions","meanSquaredError"),u=null;e!=null&&(u=z(e,"weights","meanSquaredError")),gt(a.shape,o.shape,"Error in meanSquaredError: ");var l=a.squaredDifference(o);return fo(l,u,r)}}),E6=Y({sigmoidCrossEntropy_:function(t,n,e,r,a){r===void 0&&(r=0),a===void 0&&(a=Vn.SUM_BY_NONZERO_WEIGHTS);var o=z(t,"multiClassLabels","sigmoidCrossEntropy"),u=z(n,"logits","sigmoidCrossEntropy"),l=null;if(e!=null&&(l=z(e,"weights","sigmoidCrossEntropy")),gt(o.shape,u.shape,"Error in sigmoidCrossEntropy: "),r>0){var c=Ee(r),d=Ee(1),h=Ee(.5);o=o.mul(d.sub(c)).add(h.mul(c))}var v=(function(m,g){var b=z(m,"labels","sigmoidCrossEntropyWithLogits"),x=z(g,"logits","sigmoidCrossEntropyWithLogits");gt(b.shape,x.shape,"Error in sigmoidCrossEntropyWithLogits: ");var S=x.relu(),C=x.mul(b),_=x.abs().neg().exp().log1p();return S.sub(C).add(_)})(o,u);return fo(v,l,a)}}),R6=Y({softmaxCrossEntropy_:function(t,n,e,r,a){r===void 0&&(r=0),a===void 0&&(a=Vn.SUM_BY_NONZERO_WEIGHTS);var o=z(t,"onehotLabels","softmaxCrossEntropy"),u=z(n,"logits","softmaxCrossEntropy"),l=null;if(e!=null&&(l=z(e,"weights","softmaxCrossEntropy")),gt(o.shape,u.shape,"Error in softmaxCrossEntropy: "),r>0){var c=Ee(r),d=Ee(1),h=Ee(o.shape[1]);o=o.mul(d.sub(c)).add(c.div(h))}var v=(function(m,g,b){if(b===void 0&&(b=-1),b===-1&&(b=g.rank-1),b!==g.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+g.rank+" and dim was "+b);return Jd((function(x,S,C){var _=S.logSumExp([b],!0),R=S.toFloat().sub(_);return C([x,R]),{value:R.mul(x).neg().sum([b]),gradFunc:function(E,T){var k=T[0],N=T[1],O=ur(E.shape,[b]);return[E.reshape(O).mul(k.toFloat().sub(N.exp())),E.reshape(O).mul(N.exp().sub(k.toFloat()))]}}}))(m,g)})(o,u);return fo(v,l,a)}}),_6=Object.freeze({get Reduction(){return Vn},absoluteDifference:y6,computeWeightedLoss:fo,cosineDistance:b6,hingeLoss:x6,huberLoss:w6,logLoss:S6,meanSquaredError:C6,sigmoidCrossEntropy:E6,softmaxCrossEntropy:R6});function OS(t,n){return n===void 0&&(n=!1),ee.tidy((function(){if(t.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor.");for(var e=t.shape[0],r=t.shape[1],a=HE(e),o=t.clone(),u=qo([[1]],[1,1]),l=u.clone(),c=e>=r?r:e,d=function(v){var m,g=o,b=l,x=a;m=ee.tidy((function(){var S=o.slice([v,v],[e-v,1]),C=S.norm(),_=o.slice([v,v],[1,1]),R=qo([[-1]]).where(_.greater(0),qo([[1]])),E=_.sub(R.mul(C)),T=S.div(E);l=T.shape[0]===1?u.clone():u.concat(T.slice([1,0],[T.shape[0]-1,T.shape[1]]),0);var k=R.matMul(E).div(C).neg(),N=o.slice([v,0],[e-v,r]),O=k.mul(l);if(v===0)o=N.sub(O.matMul(l.transpose().matMul(N)));else{var I=N.sub(O.matMul(l.transpose().matMul(N)));o=o.slice([0,0],[v,r]).concat(I,0)}var B=a.slice([0,v],[e,a.shape[1]-v]);if(v===0)a=B.sub(B.matMul(l).matMul(O.transpose()));else{var H=B.sub(B.matMul(l).matMul(O.transpose()));a=a.slice([0,0],[e,v]).concat(H,1)}return[l,o,a]})),l=m[0],o=m[1],a=m[2],or([g,b,x])},h=0;h<c;++h)d(h);return!n&&e>r&&(a=a.slice([0,0],[e,r]),o=o.slice([0,0],[r,r])),[a,o]}))}var T6=Y({bandPart_:function(t,n,e){if(n%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+n+".");if(e%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+e+".");var r=z(t,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var a=r.shape,o=r.shape.slice(-2),u=o[0],l=o[1];if(!(n<=u))throw new Error("bandPart(): numLower ("+n+") must not be greater than the number of rows ("+u+").");if(!(e<=l))throw new Error("bandPart(): numUpper ("+e+") must not be greater than the number of columns ("+l+").");n<0&&(n=u),e<0&&(e=l);var c=pd(0,u,1,"int32").reshape([-1,1]),d=pd(0,l,1,"int32"),h=gn(c,d),v=th(h.lessEqual(Ee(+n,"int32")),h.greaterEqual(Ee(-e,"int32"))),m=It([u,l],r.dtype);return _r(vn(r.reshape([-1,u,l])).map((function(g){return Pi(v,g,m)}))).reshape(a)}}),A6=Y({gramSchmidt_:function(t){var n;if(Array.isArray(t)){n=!1,W(t!=null&&t.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var e=t[0].shape[0],r=function(c){W(t[c].shape[0]===e,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+t[c].shape[0]+" vs. "+e+")"}))},a=1;a<t.length;++a)r(a)}else n=!0,t=gy(t,t.shape[0],0).map((function(c){return GE(c,[0])}));W(t.length<=t[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors ("+t.length+") exceeds number of dimensions ("+t[0].shape[0]+")."}));var o=[],u=t,l=function(c){o.push(ee.tidy((function(){var d=u[c];if(c>0)for(var h=0;h<c;++h){var v=WR(o[h].mulStrict(d)).mul(o[h]);d=d.sub(v)}return d.div(GR(d,"euclidean"))})))};for(a=0;a<t.length;++a)l(a);return n?_r(o,0):o}}),D6=Y({qr_:function(t,n){if(n===void 0&&(n=!1),t.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+t.rank);if(t.rank===2)return OS(t,n);var e=t.shape.slice(0,t.shape.length-2).reduce((function(u,l){return u*l})),r=vn(t.reshape([e,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),a=[],o=[];return r.forEach((function(u){var l=OS(u,n),c=l[0],d=l[1];a.push(c),o.push(d)})),[_r(a,0).reshape(t.shape),_r(o,0).reshape(t.shape)]}}),k6=Object.freeze({bandPart:T6,gramSchmidt:A6,qr:D6});function oh(t,n,e,r,a,o){r==null&&(r=.5),a==null&&(a=Number.NEGATIVE_INFINITY),o==null&&(o=0);var u=t.shape[0];return e=Math.min(e,u),W(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"})),W(t.rank===2,(function(){return"boxes must be a 2D tensor, but was of rank '"+t.rank+"'"})),W(t.shape[1]===4,(function(){return"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]})),W(n.rank===1,(function(){return"scores must be a 1D tensor"})),W(n.shape[0]===u,(function(){return"scores has incompatible shape with boxes. Expected "+u+", but was "+n.shape[0]})),W(0<=o&&o<=1,(function(){return"softNmsSigma must be in [0, 1], but was '"+o+"'"})),{maxOutputSize:e,iouThreshold:r,scoreThreshold:a,softNmsSigma:o}}var N6=Y({resizeBilinear_:function(t,n,e){e===void 0&&(e=!1);var r=z(t,"images","resizeBilinear");W(r.rank===3||r.rank===4,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."})),W(n.length===2,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+n+"."}));var a=r,o=!1;r.rank===3&&(o=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var u=n[0],l=n[1],c=ee.runKernelFunc((function(d,h){return h([a]),d.resizeBilinear(a,u,l,e)}),{x:a},(function(d,h){return{x:function(){return ee.runKernelFunc((function(v){return v.resizeBilinearBackprop(d,h[0],e)}),{})}}}),"ResizeBilinear",{alignCorners:e,newHeight:u,newWidth:l});return o?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),M6=Y({resizeNearestNeighbor_:function(t,n,e){e===void 0&&(e=!1);var r=z(t,"images","resizeNearestNeighbor");W(r.rank===3||r.rank===4,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."})),W(n.length===2,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+n+"."})),W(r.dtype==="float32"||r.dtype==="int32",(function(){return"`images` must have `int32` or `float32` as dtype"}));var a=r,o=!1;r.rank===3&&(o=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var u=n[0],l=n[1],c=ee.runKernelFunc((function(d,h){return h([a]),d.resizeNearestNeighbor(a,u,l,e)}),{batchImages:a},(function(d,h){return{batchImages:function(){return ee.runKernelFunc((function(v){return v.resizeNearestNeighborBackprop(d,h[0],e)}),{})}}}));return o?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),O6=Y({nonMaxSuppression_:function(t,n,e,r,a){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY);var o=z(t,"boxes","nonMaxSuppression"),u=z(n,"scores","nonMaxSuppression"),l=oh(o,u,e,r,a);e=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold;var c={maxOutputSize:e,iouThreshold:r,scoreThreshold:a};return ee.runKernelFunc((function(d){return d.nonMaxSuppression(o,u,e,r,a)}),{boxes:o,scores:u},null,"NonMaxSuppressionV3",c)}}),I6=function(t,n,e,r,a){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),Ae(this,void 0,void 0,(function(){var o,u,l,c,d,h,v;return De(this,(function(m){switch(m.label){case 0:return o=z(t,"boxes","nonMaxSuppressionAsync"),u=z(n,"scores","nonMaxSuppressionAsync"),l=oh(o,u,e,r,a),e=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,[4,Promise.all([o.data(),u.data()])];case 1:return c=m.sent(),d=c[0],h=c[1],v=wy(d,h,e,r,a),o!==t&&o.dispose(),u!==n&&u.dispose(),[2,v]}}))}))},B6=Y({nonMaxSuppressionWithScore_:function(t,n,e,r,a,o){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),o===void 0&&(o=0);var u=z(t,"boxes","nonMaxSuppression"),l=z(n,"scores","nonMaxSuppression"),c=oh(u,l,e,r,a,o),d={maxOutputSize:e=c.maxOutputSize,iouThreshold:r=c.iouThreshold,scoreThreshold:a=c.scoreThreshold,softNmsSigma:o=c.softNmsSigma},h=ee.runKernel("NonMaxSuppressionV5",{boxes:u,scores:l},d);return{selectedIndices:h[0],selectedScores:h[1]}}}),F6=function(t,n,e,r,a,o){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),o===void 0&&(o=0),Ae(this,void 0,void 0,(function(){var u,l,c,d,h,v,m;return De(this,(function(g){switch(g.label){case 0:return u=z(t,"boxes","nonMaxSuppressionAsync"),l=z(n,"scores","nonMaxSuppressionAsync"),c=oh(u,l,e,r,a,o),e=c.maxOutputSize,r=c.iouThreshold,a=c.scoreThreshold,o=c.softNmsSigma,[4,Promise.all([u.data(),l.data()])];case 1:return d=g.sent(),h=d[0],v=d[1],m=Sy(h,v,e,r,a,o),u!==t&&u.dispose(),l!==n&&l.dispose(),[2,m]}}))}))},P6=Y({cropAndResize_:function(t,n,e,r,a,o){var u=z(t,"image","cropAndResize"),l=z(n,"boxes","cropAndResize","float32"),c=z(e,"boxInd","cropAndResize","int32");a=a||"bilinear",o=o||0;var d=l.shape[0];return W(u.rank===4,(function(){return"Error in cropAndResize: image must be rank 4,but got rank "+u.rank+"."})),W(l.rank===2&&l.shape[1]===4,(function(){return"Error in cropAndResize: boxes must be have size ["+d+",4] but had shape "+l.shape+"."})),W(c.rank===1&&c.shape[0]===d,(function(){return"Error in cropAndResize: boxInd must be have size ["+d+"] but had shape "+l.shape+"."})),W(r.length===2,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."})),W(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was "+r})),W(a==="bilinear"||a==="nearest",(function(){return"method must be bilinear or nearest, but was "+a})),ee.runKernelFunc((function(h,v){return h.cropAndResize(u,l,c,r,a,o)}),{images:u,boxes:l,boxInd:c},null,"CropAndResize",{method:a,extrapolationValue:o,cropSize:r})}}),Fy=Object.freeze({resizeBilinear:N6,resizeNearestNeighbor:M6,nonMaxSuppression:O6,nonMaxSuppressionAsync:I6,nonMaxSuppressionWithScore:B6,nonMaxSuppressionWithScoreAsync:F6,cropAndResize:P6}),Py=function(t,n){return!(t>0)||n==="linear"},Ly=function(t,n,e){if(e==null||e==="linear")return t;if(e==="relu")return t.mul(n.step());throw new Error("Gradient for activation "+e+" has not been implemented yet.")},zy=function(t,n){var e=n,r=mn(t.shape,n.shape);return r.length>0&&(e=e.sum(r)),e.reshape(t.shape)},Uy=function(t,n,e){if(n==="linear")return t;if(n==="relu")return Wt(t);if(n==="elu")return HR(t);if(n==="relu6")return jR(t);if(n==="prelu")return VR(t,e);throw new Error("Unknown fused activation "+n+".")},L6=Y({fusedMatMul_:function(t){var n,e=t.a,r=t.b,a=t.transposeA,o=a!==void 0&&a,u=t.transposeB,l=u!==void 0&&u,c=t.bias,d=t.activation,h=d===void 0?"linear":d,v=t.preluActivationWeights;if(Py(ee.state.gradientDepth,h)===!1){var m=rh(e,r,o,l);return c!=null&&(m=Je(m,c)),Uy(m,h,v)}var g=z(e,"a","fused matMul"),b=z(r,"b","fused matMul");n=Vt(g,b),g=n[0],b=n[1];var x=o?g.shape[g.rank-2]:g.shape[g.rank-1],S=l?b.shape[b.rank-1]:b.shape[b.rank-2],C=o?g.shape[g.rank-1]:g.shape[g.rank-2],_=l?b.shape[b.rank-2]:b.shape[b.rank-1],R=g.shape.slice(0,-2),E=b.shape.slice(0,-2),T=Ne(R),k=Ne(E);W(g.rank>=2&&b.rank>=2&&g.rank===b.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+g.rank+" and "+b.rank+"."})),W(Sn(R,E),(function(){return"Error in fused matMul: outer dimensions ("+R+") and ("+E+") of Tensors with shapes "+g.shape+" and "+b.shape+" must match."})),W(x===S,(function(){return"Error in fused matMul: inner shapes ("+x+") and ("+S+") of Tensors with shapes "+g.shape+" and "+b.shape+" and transposeA="+o+" and transposeB="+l+" must match."}));var N,O,I=g.shape.slice(0,-2).concat([C,_]),B=o?g.as3D(T,x,C):g.as3D(T,C,x),H=l?b.as3D(k,_,S):b.as3D(k,S,_);c!=null&&nt(I,(N=Vt(N=z(c,"bias","fused matMul"),g)[0]).shape),v!=null&&(O=z(v,"prelu weights","fused matMul"));var A={a:B,b:H};c!=null&&(A.bias=N),v!=null&&(A.preluActivationWeights=O);var q=[B,H];return ee.runKernelFunc((function(V,j){var P=V.fusedBatchMatMul({a:B,b:H,transposeA:o,transposeB:l,bias:N,activation:h,preluActivationWeights:O});return j([B,H,P]),P}),A,(function(V,j){var P=j[0],$=j[1],Q=j[2],U=Ly(V,Q,h),G={};return c!=null&&(G={bias:function(){return zy(N,U)}}),Object.assign(o||l?!o&&l?{a:function(){return U.matMul($,!1,!1)},b:function(){return U.matMul(P,!0,!1)}}:o&&!l?{a:function(){return $.matMul(U,!1,!0)},b:function(){return P.matMul(U,!1,!1)}}:{a:function(){return $.matMul(U,!0,!0)},b:function(){return U.matMul(P,!0,!0)}}:{a:function(){return U.matMul($,!1,!0)},b:function(){return P.matMul(U,!0,!1)}},G)}),"_FusedMatMul",{transposeA:o,transposeB:l,activation:h},q,[!0]).reshape(I)}}),z6=Y({fusedConv2d_:function(t){var n=t.x,e=t.filter,r=t.strides,a=t.pad,o=t.dataFormat,u=o===void 0?"NHWC":o,l=t.dilations,c=l===void 0?[1,1]:l,d=t.dimRoundingMode,h=t.bias,v=t.activation,m=v===void 0?"linear":v,g=t.preluActivationWeights;if(m=m||"linear",Py(ee.state.gradientDepth,m)===!1){var b=$r(n,e,r,a,u,c,d);return h!=null&&(b=Je(b,h)),Uy(b,m,g)}var x=z(n,"x","conv2d"),S=z(e,"filter","conv2d"),C=x,_=!1;x.rank===3&&(_=!0,C=x.as4D(1,x.shape[0],x.shape[1],x.shape[2])),W(C.rank===4,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+C.rank+"."})),W(S.rank===4,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+S.rank+"."})),d!=null&&W(Jt(a),(function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+d+" but got pad "+a+"."})),W(C.shape[3]===S.shape[2],(function(){return"Error in conv2d: depth of input ("+C.shape[3]+") must match input depth for filter "+S.shape[2]+"."})),W(lr(r,c),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+c+"'"})),W(u==="NHWC",(function(){return"Error in conv2d: got dataFormat of "+u+" but only NHWC is currently supported."}));var R,E,T=Vi(C.shape,S.shape,r,c,a,d);h!=null&&(R=Vt(R=z(h,"bias","fused conv2d"),x)[0],nt(T.outShape,R.shape)),g!=null&&(E=z(g,"prelu weights","fused conv2d"));var k={x:C,filter:S};h!=null&&(k.bias=R),g!=null&&(k.preluActivationWeights=E);var N=[S,C],O=ee.runKernelFunc((function(I,B){var H=I.fusedConv2d({input:C,filter:S,convInfo:T,bias:R,activation:m,preluActivationWeights:E});return B([S,C,H]),H}),k,(function(I,B){var H=B,A=H[0],q=H[1],V=H[2],j=Ly(I,V,m);W(ou(c),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+c+"'"}));var P={};return h!=null&&(P={bias:function(){return zy(R,j)}}),Object.assign({x:function(){return IR(q.shape,j,A,r,a)},filter:function(){return ky(q,j,A.shape,r,a)}},P)}),"FusedConv2D",{convInfo:T,activation:m},N,[!0]);return _?O.as3D(O.shape[1],O.shape[2],O.shape[3]):O}}),U6=Y({fusedDepthwiseConv2d_:function(t){var n=t.x,e=t.filter,r=t.strides,a=t.pad,o=t.dataFormat,u=o===void 0?"NHWC":o,l=t.dilations,c=l===void 0?[1,1]:l,d=t.dimRoundingMode,h=t.bias,v=t.activation,m=v===void 0?"linear":v,g=t.preluActivationWeights;if(Py(ee.state.gradientDepth,m)===!1){var b=nh(n,e,r,a,u,c,d);return h!=null&&(b=Je(b,h)),Uy(b,m,g)}var x=z(n,"x","depthwiseConv2d"),S=z(e,"filter","depthwiseConv2d"),C=x,_=!1;x.rank===3&&(_=!0,C=x.as4D(1,x.shape[0],x.shape[1],x.shape[2])),W(C.rank===4,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+C.rank+"."})),W(S.rank===4,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+S.rank+"."})),W(C.shape[3]===S.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels ("+C.shape[3]+") must match the inChannels dimension in filter "+S.shape[2]+"."})),c==null&&(c=[1,1]),W(lr(r,c),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+c+"'"})),d!=null&&W(Jt(a),(function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+d+" but got pad "+a+"."}));var R,E,T=Vi(C.shape,S.shape,r,c,a,d,!0);h!=null&&(R=Vt(R=z(h,"bias","fused conv2d"),x)[0],nt(T.outShape,R.shape)),g!=null&&(E=z(g,"prelu weights","fused depthwiseConv2d"));var k={x:C,filter:S};h!=null&&(k.bias=R),g!=null&&(k.preluActivationWeights=E);var N=[S,C],O=ee.runKernelFunc((function(I,B){var H=I.fusedDepthwiseConv2D({input:C,filter:S,convInfo:T,bias:R,activation:m,preluActivationWeights:E});return B([S,C,H]),H}),k,(function(I,B){W(ou(c),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+c+"'"}));var H=B[0],A=B[1],q=B[2],V=Ly(I,q,m),j={};return h!=null&&(j={bias:function(){return zy(R,V)}}),Object.assign({x:function(){return BR(A.shape,V,H,T)},filter:function(){return FR(A,V,H.shape,T)}},j)}),"FusedDepthwiseConv2D",{convInfo:T,activation:m},N,[!0]);return _?O.as3D(O.shape[1],O.shape[2],O.shape[3]):O}}),W6=Object.freeze({matMul:L6,conv2d:z6,depthwiseConv2d:U6}),H6=Object.freeze({image:Fy,linalg:k6,losses:_6,spectral:f6,fused:W6,signal:m6,square:S5,squaredDifference:yR,conv1d:Nz,conv2d:$r,conv3d:Mz,depthwiseConv2d:nh,separableConv2d:Ny,conv2dTranspose:Oz,conv3dTranspose:Iz,op:Y,batchNormalization2d:Z5,batchNormalization3d:J5,batchNormalization4d:ez,batchNormalization:tz,batchNorm:ER,batchNorm2d:nz,batchNorm3d:rz,batchNorm4d:az,booleanMaskAsync:kz,complex:kn,real:Hr,imag:xa,concat:pn,concat1d:WF,concat2d:HF,concat3d:VF,concat4d:jF,split:gy,matMul:rh,dot:Bz,outerProduct:Fz,reverse:tc,reverse1d:Pz,reverse2d:Lz,reverse3d:zz,reverse4d:Uz,maxPool:wn,avgPool:nc,pool:Wz,maxPool3d:Hz,avgPool3d:Vz,slice:Ta,slice1d:jz,slice2d:Gz,slice3d:zR,slice4d:qz,abs:C5,acos:E5,acosh:R5,asin:_5,asinh:T5,atan:A5,atanh:D5,ceil:k5,clipByValue:Ty,cos:N5,cosh:M5,erf:O5,exp:xg,expm1:I5,floor:B5,log:F5,log1p:P5,logSigmoid:L5,neg:Sd,reciprocal:z5,round:U5,rsqrt:bR,sigmoid:xR,sign:W5,isNaN:H5,isInf:V5,isFinite:j5,sin:G5,sinh:q5,softplus:$5,sqrt:K5,step:X5,tan:Y5,tanh:Q5,all:$z,any:Kz,argMax:Xz,argMin:Yz,logSumExp:Qz,max:ah,mean:Zz,min:Jz,moments:e6,sum:WR,prod:t6,equal:DR,equalStrict:xz,greater:wz,greaterEqual:kR,greaterEqualStrict:Sz,greaterStrict:Cz,less:Ez,lessEqual:Rz,lessEqualStrict:_z,lessStrict:Tz,notEqual:Az,notEqualStrict:Dz,add:Je,addN:sz,addStrict:uz,atan2:lz,div:ea,divNoNan:cz,divStrict:fz,floorDiv:TR,maximum:Ay,maximumStrict:dz,minimum:AR,minimumStrict:hz,mod:pz,modStrict:vz,mul:jn,mulStrict:mz,pow:Cd,powStrict:gz,squaredDifferenceStrict:yz,sub:gn,subStrict:bz,elu:HR,leakyRelu:n6,prelu:VR,relu:Wt,relu6:jR,selu:r6,logicalAnd:th,logicalNot:oz,logicalOr:RR,logicalXor:iz,where:Pi,whereAsync:_R,buffer:qe,print:JF,batchToSpaceND:WE,broadcastTo:eP,cast:tP,clone:nP,cumsum:rP,depthToSpace:aP,expandDims:Wr,eye:HE,multinomial:oP,oneHot:mg,pad:Hi,pad1d:iP,pad2d:sP,pad3d:uP,pad4d:lP,rand:cP,randomNormal:fP,randomGamma:dP,randomUniform:VE,reshape:ta,spaceToBatchND:jE,squeeze:GE,stack:_r,tile:Ks,truncatedNormal:hP,unstack:vn,setdiff1dAsync:pP,fill:_a,linspace:UF,ones:fu,range:pd,scalar:Ee,tensor:On,tensor1d:ln,tensor2d:qo,tensor3d:my,tensor4d:rr,tensor5d:PF,tensor6d:LF,variable:zF,zeros:It,onesLike:UE,zerosLike:it,transpose:Yo,softmax:co,logSoftmax:wP,localResponseNormalization:a6,norm:GR,gather:Dy,unsortedSegmentSum:NR,basicLSTMCell:o6,multiRNNCell:i6,movingAverage:s6,stridedSlice:u6,topk:l6,scatterND:c6,fft:My,ifft:Ed,rfft:Oy,irfft:qR,sparseToDense:d6,gatherND:h6,diag:p6,dropout:v6,hannWindow:Iy,hammingWindow:KR,frame:By,stft:XR,inTopKAsync:g6});function ye(t,n){Array.isArray(t)||(t=[t]),t.forEach((function(e){e!=null&&W(e.dtype!=="complex64",(function(){return n+" does not support complex64 tensors."}))}))}function Nm(t,n,e,r){if(e==="linear")return t.linear(n);if(e==="relu")return t.relu(n);if(e==="elu")return t.elu(n);if(e==="relu6")return t.relu6(n);if(e==="prelu")return t.prelu(n,r);throw new Error("Activation "+e+" has not been implemented for the CPU backend.")}var V6=(function(t){function n(){var e=t.call(this)||this;return e.blockSize=48,e.firstUse=!0,e.data=new ZE(e,ee),e}return oa(n,t),n.prototype.write=function(e,r,a){this.firstUse&&(this.firstUse=!1,de().get("IS_NODE")&&dd(`
============================
Hi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var o={};return this.data.set(o,{values:e,dtype:a}),o},n.prototype.move=function(e,r,a,o){this.data.set(e,{values:r,dtype:o})},n.prototype.numDataIds=function(){return this.data.numDataIds()},n.prototype.read=function(e){return Ae(this,void 0,void 0,(function(){return De(this,(function(r){return[2,this.readSync(e)]}))}))},n.prototype.readSync=function(e){var r=this.data.get(e),a=r.dtype,o=r.complexTensors;return a==="complex64"?bg(this.readSync(o.real.dataId),this.readSync(o.imag.dataId)):this.data.get(e).values},n.prototype.bufferSync=function(e){var r=this.readSync(e.dataId),a=r;if(e.dtype==="string")try{a=r.map((function(o){return ld(o)}))}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return qe(e.shape,e.dtype,a)},n.prototype.makeOutput=function(e,r,a){var o=this.write(e,r,a);return ee.makeTensorFromDataId(o,r,a,this)},n.prototype.disposeData=function(e){if(this.data.has(e)){var r=this.data.get(e).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(e)}},n.prototype.time=function(e){return Ae(this,void 0,void 0,(function(){var r;return De(this,(function(a){return r=ga(),e(),[2,{kernelMs:ga()-r}]}))}))},n.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},n.prototype.complex=function(e,r){var a=this.makeOutput(null,e.shape,"complex64");return this.data.get(a.dataId).complexTensors={real:ee.keep(e.clone()),imag:ee.keep(r.clone())},a},n.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},n.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},n.prototype.slice=function(e,r,a){if(ye(e,"slice"),YE(e.shape,r,a)){var o=QE(r,e.strides),u=Ne(a);return On(this.readSync(e.dataId).subarray(o,o+u),a,e.dtype)}for(var l=qe(a,e.dtype),c=this.bufferSync(e),d=0;d<l.size;++d){var h=l.indexToLoc(d).map((function(v,m){return v+r[m]}));l.values[d]=c.get.apply(c,h)}return l.toTensor()},n.prototype.stridedSlice=function(e,r,a,o){ye(e,"stridedSlice");var u=by(r,a,o);if(u.some((function(g){return g===0})))return On([],u);for(var l=qe(u,e.dtype),c=this.bufferSync(e),d=0;d<l.size;d++){for(var h=l.indexToLoc(d),v=new Array(h.length),m=0;m<v.length;m++)v[m]=h[m]*o[m]+r[m];l.set.apply(l,[c.get.apply(c,v)].concat(h))}return l.toTensor()},n.prototype.diag=function(e){for(var r=this.readSync(e.dataId),a=qe([e.size,e.size],e.dtype),o=a.values,u=0;u<r.length;u++)o[u*e.size+u]=r[u];return a.toTensor()},n.prototype.unstack=function(e,r){for(var a=e.shape[r],o=new Array(e.rank-1),u=0,l=0;l<e.rank;l++)l!==r&&(o[u++]=e.shape[l]);var c=new Array(e.rank).fill(0),d=e.shape.slice();d[r]=1;var h=new Array(a);for(l=0;l<h.length;l++)c[r]=l,h[l]=this.slice(e,c,d).reshape(o);return h},n.prototype.reverse=function(e,r){ye(e,"reverse");for(var a=qe(e.shape,e.dtype),o=this.bufferSync(e),u=function(c){var d=a.indexToLoc(c),h=d.slice();r.forEach((function(v){return h[v]=e.shape[v]-1-h[v]})),a.set.apply(a,[o.get.apply(o,h)].concat(d))},l=0;l<a.size;l++)u(l);return a.toTensor()},n.prototype.concat=function(e,r){var a=this;if(e[0].dtype==="complex64"){var o=e.map((function(g){return Hr(g)})),u=e.map((function(g){return xa(g)}));return kn(this.concat(o,r),this.concat(u,r))}var l=e.map((function(g){var b=Ne(g.shape.slice(r));return g.as2D(-1,b)})),c=au(l.map((function(g){return g.shape})),1),d=qe(c,e[0].dtype).values;if(l[0].shape[0]===1){var h=0;l.forEach((function(g){d.set(a.readSync(g.dataId),h),h+=g.size}))}else{var v=0;l.forEach((function(g){for(var b=a.readSync(g.dataId),x=0,S=0;S<g.shape[0];++S)for(var C=S*c[1]+v,_=0;_<g.shape[1];++_)d[C+_]=b[x++];v+=g.shape[1]}))}var m=au(e.map((function(g){return g.shape})),r);return On(d,m,e[0].dtype)},n.prototype.neg=function(e){return ye(e,"neg"),this.multiply(Ee(-1),e)},n.prototype.add=function(e,r){return e.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),r.cast("complex64"),(function(a,o,u,l){return{real:a+u,imag:o+l}})):this.broadcastedBinaryOp(e,r,Nn(e.dtype,r.dtype),(function(a,o){return a+o}))},n.prototype.addN=function(e){var r=this;ye(e,"addN");for(var a=e.map((function(h){return r.readSync(h.dataId)})),o=qe(e[0].shape,e[0].dtype),u=o.values,l=0;l<e.length;l++)for(var c=a[l],d=0;d<u.length;d++)u[d]+=c[d];return o.toTensor()},n.prototype.softmax=function(e,r){var a=yn([r],e.shape),o=this.max(e,a),u=ur(o.shape,a),l=this.subtract(e,o.reshape(u)),c=this.exp(l),d=this.sum(c,a).reshape(u);return this.realDivide(c,d)},n.prototype.subtract=function(e,r){return e.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),r.cast("complex64"),(function(a,o,u,l){return{real:a-u,imag:o-l}})):this.broadcastedBinaryOp(e,r,Nn(e.dtype,r.dtype),(function(a,o){return a-o}))},n.prototype.pow=function(e,r){return ye([e,r],"pow"),this.broadcastedBinaryOp(e,r,e.dtype,(function(a,o){return Math.pow(a,o)}))},n.prototype.batchMatMul=function(e,r,a,o){ye([e,r],"matMul");for(var u=a?e.shape[1]:e.shape[2],l=a?e.shape[2]:e.shape[1],c=o?r.shape[1]:r.shape[2],d=e.shape[0],h=this.readSync(e.dataId),v=this.readSync(r.dataId),m=a?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],g=m[0],b=m[1],x=m[2],S=o?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],C=S[0],_=S[1],R=S[2],E=l*c,T=qe([d,l,c],e.dtype),k=T.values,N=this.blockSize,O=0;O<d;O++)for(var I=0;I<l;I+=N)for(var B=0;B<c;B+=N)for(var H=0;H<u;H+=N)for(var A=Math.min(I+N,l),q=Math.min(B+N,c),V=Math.min(H+N,u),j=I;j<A;j++)for(var P=B;P<q;P++){for(var $=0,Q=H;Q<V;Q++)$+=h[O*g+j*b+Q*x]*v[Q*C+P*_+O*R];k[O*E+(j*c+P)]+=$}return T.toTensor()},n.prototype.fusedBatchMatMul=function(e){var r=e.a,a=e.b,o=e.transposeA,u=e.transposeB,l=e.bias,c=e.activation,d=e.preluActivationWeights,h=this.batchMatMul(r,a,o,u);return l&&(h=this.add(h,l)),c&&(h=Nm(this,h,c,d)),h},n.prototype.multiply=function(e,r){return e.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),r.cast("complex64"),(function(a,o,u,l){return{real:a*u-o*l,imag:a*l+o*u}})):this.broadcastedBinaryOp(e,r,Nn(e.dtype,r.dtype),(function(a,o){return a*o}))},n.prototype.realDivide=function(e,r){return ye([e,r],"realDivide"),this.broadcastedBinaryOp(e,r,"float32",(function(a,o){return a/o}))},n.prototype.floorDiv=function(e,r){return ye([e,r],"floorDiv"),this.broadcastedBinaryOp(e,r,"int32",(function(a,o){return Math.floor(a/o)}))},n.prototype.sum=function(e,r){ye(e,"sum"),yr("sum",r,e.rank);for(var a=zn(e.shape,r),o=a[0],u=a[1],l=It(o,Nn(e.dtype,"int32")),c=Ne(u),d=this.readSync(l.dataId),h=this.readSync(e.dataId),v=0;v<d.length;++v){for(var m=v*c,g=0,b=0;b<c;++b)g+=h[m+b];d[v]=g}return l},n.prototype.prod=function(e,r){ye(e,"sum");for(var a=zn(e.shape,r),o=a[0],u=a[1],l=It(o,Nn(e.dtype,"int32")),c=Ne(u),d=this.readSync(l.dataId),h=this.readSync(e.dataId),v=0;v<d.length;++v){for(var m=v*c,g=1,b=0;b<c;++b)g*=h[m+b];d[v]=g}return l},n.prototype.unsortedSegmentSum=function(e,r,a){ye(e,"unsortedSegmentSum");for(var o=[],u=e.rank-r.rank,l=0;l<u;++l)r=r.expandDims(l+1);for(l=0;l<a;++l){var c=Ee(l,"int32"),d=DR(c,r).asType("float32").mul(e).sum(0);o.push(d)}return _r(o)},n.prototype.argMin=function(e,r){ye(e,"argMin");var a=[r];yr("argMin",a,e.rank);for(var o=zn(e.shape,a),u=o[0],l=o[1],c=It(u,"int32"),d=Ne(l),h=this.readSync(c.dataId),v=this.readSync(e.dataId),m=0;m<h.length;++m){for(var g=m*d,b=v[g],x=0,S=0;S<d;++S){var C=v[g+S];C<b&&(b=C,x=S)}h[m]=x}return c},n.prototype.argMax=function(e,r){ye(e,"argMax");var a=[r];yr("argMax",a,e.rank);for(var o=zn(e.shape,a),u=o[0],l=o[1],c=It(u,"int32"),d=Ne(l),h=this.readSync(c.dataId),v=this.readSync(e.dataId),m=0;m<h.length;++m){for(var g=m*d,b=v[g],x=0,S=0;S<d;++S){var C=v[g+S];C>b&&(b=C,x=S)}h[m]=x}return c},n.prototype.cumsum=function(e,r,a,o){if(ye(e,"cumsum"),r!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+r);for(var u=Nn(e.dtype,"int32"),l=It(e.shape,u),c=this.readSync(l.dataId),d=this.readSync(e.dataId),h=e.shape[e.rank-1],v=o?function(S,C){return S+h-C-1}:function(S,C){return S+C},m=0;m<d.length;m+=h)for(var g=0;g<h;g++){var b=v(m,g);if(g===0)c[b]=a?0:d[b];else{var x=v(m,g-1);c[b]=a?d[x]+c[x]:d[b]+c[x]}}return l},n.prototype.equal=function(e,r){return ye([e,r],"equal"),this.broadcastedBinaryOp(e,r,"bool",(function(a,o){return a===o?1:0}))},n.prototype.notEqual=function(e,r){return ye([e,r],"notEqual"),this.broadcastedBinaryOp(e,r,"bool",(function(a,o){return a!==o?1:0}))},n.prototype.less=function(e,r){return ye([e,r],"less"),this.broadcastedBinaryOp(e,r,"bool",(function(a,o){return a<o?1:0}))},n.prototype.lessEqual=function(e,r){return ye([e,r],"lessEqual"),this.broadcastedBinaryOp(e,r,"bool",(function(a,o){return a<=o?1:0}))},n.prototype.greater=function(e,r){return ye([e,r],"greater"),this.broadcastedBinaryOp(e,r,"bool",(function(a,o){return a>o?1:0}))},n.prototype.greaterEqual=function(e,r){return ye([e,r],"greaterEqual"),this.broadcastedBinaryOp(e,r,"bool",(function(a,o){return a>=o?1:0}))},n.prototype.logicalNot=function(e){ye(e,"logicalNot");for(var r=this.readSync(e.dataId),a=new Uint8Array(r.length),o=0;o<r.length;++o)a[o]=r[o]?0:1;return this.makeOutput(a,e.shape,"bool")},n.prototype.logicalAnd=function(e,r){return ye([e,r],"logicalAnd"),this.broadcastedBinaryOp(e,r,"bool",(function(a,o){return a&&o}))},n.prototype.logicalOr=function(e,r){return ye([e,r],"logicalOr"),this.broadcastedBinaryOp(e,r,"bool",(function(a,o){return a||o}))},n.prototype.select=function(e,r,a){ye([e,r,a],"select");for(var o=this.readSync(e.dataId),u=this.readSync(r.dataId),l=this.readSync(a.dataId),c=It(r.shape,Nn(r.dtype,a.dtype)),d=this.readSync(c.dataId),h=0,v=e.rank===0||e.rank>1||r.rank===1?1:Ne(r.shape.slice(1)),m=0;m<o.length;m++)for(var g=0;g<v;g++)o[m]===1?d[h++]=u[m]:d[h++]=l[m];return c},n.prototype.where=function(e){ye([e],"where");var r=this.readSync(e.dataId);return Cy(e.shape,r)},n.prototype.topk=function(e,r,a){return ye(e,"topk"),iR(this.readSync(e.dataId),e.shape,e.dtype,r)},n.prototype.min=function(e,r){ye(e,"min"),yr("min",r,e.rank);for(var a=zn(e.shape,r),o=a[0],u=a[1],l=It(o,e.dtype),c=Ne(u),d=this.readSync(l.dataId),h=this.readSync(e.dataId),v=0;v<d.length;++v){for(var m=v*c,g=h[m],b=0;b<c;++b){var x=h[m+b];x<g&&(g=x)}d[v]=g}return l},n.prototype.minimum=function(e,r){return ye([e,r],"minimum"),this.broadcastedBinaryOp(e,r,e.dtype,(function(a,o){return Math.min(a,o)}))},n.prototype.mod=function(e,r){return ye([e,r],"mod"),this.broadcastedBinaryOp(e,r,e.dtype,(function(a,o){var u=a%o;return a<0&&o<0||a>=0&&o>=0?u:(u+o)%o}))},n.prototype.max=function(e,r){ye(e,"max"),yr("max",r,e.rank);for(var a=zn(e.shape,r),o=a[0],u=a[1],l=It(o,e.dtype),c=Ne(u),d=this.readSync(l.dataId),h=this.readSync(e.dataId),v=0;v<d.length;++v){for(var m=v*c,g=h[m],b=0;b<c;++b){var x=h[m+b];x>g&&(g=x)}d[v]=g}return l},n.prototype.maximum=function(e,r){return ye([e,r],"maximum"),this.broadcastedBinaryOp(e,r,e.dtype,(function(a,o){return Math.max(a,o)}))},n.prototype.all=function(e,r){ye(e,"all"),yr("all",r,e.rank);for(var a=zn(e.shape,r),o=a[0],u=a[1],l=It(o,e.dtype),c=Ne(u),d=this.readSync(l.dataId),h=this.readSync(e.dataId),v=0;v<d.length;++v){for(var m=v*c,g=h[m],b=0;b<c;++b){var x=h[m+b];g=g&&x}d[v]=g}return l},n.prototype.any=function(e,r){ye(e,"any"),yr("any",r,e.rank);for(var a=zn(e.shape,r),o=a[0],u=a[1],l=It(o,e.dtype),c=Ne(u),d=this.readSync(l.dataId),h=this.readSync(e.dataId),v=0;v<d.length;++v){for(var m=v*c,g=h[m],b=0;b<c;++b){var x=h[m+b];g=g||x}d[v]=g}return l},n.prototype.squaredDifference=function(e,r){return ye([e,r],"squaredDifference"),this.broadcastedBinaryOp(e,r,e.dtype,(function(a,o){var u=a-o;return u*u}))},n.prototype.ceil=function(e){ye(e,"ceil");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o)a[o]=Math.ceil(r[o]);return this.makeOutput(a,e.shape,"float32")},n.prototype.floor=function(e){ye(e,"floor");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o)a[o]=Math.floor(r[o]);return this.makeOutput(a,e.shape,"float32")},n.prototype.sign=function(e){ye(e,"x");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o)r[o]<0?a[o]=-1:r[o]>0?a[o]=1:a[o]=0;return this.makeOutput(a,e.shape,"float32")},n.prototype.isNaN=function(e){ye(e,"x");for(var r=this.readSync(e.dataId),a=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isNaN(r[o])&&(a[o]=1);return this.makeOutput(a,e.shape,"bool")},n.prototype.isInf=function(e){ye(e,"x");for(var r=this.readSync(e.dataId),a=new Uint8Array(r.length),o=0;o<r.length;++o)Math.abs(r[o])===1/0&&(a[o]=1);return this.makeOutput(a,e.shape,"bool")},n.prototype.isFinite=function(e){ye(e,"x");for(var r=this.readSync(e.dataId),a=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isFinite(r[o])&&(a[o]=1);return this.makeOutput(a,e.shape,"bool")},n.prototype.round=function(e){ye(e,"round");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o){var u=Math.floor(r[o]);r[o]-u<.5?a[o]=Math.floor(r[o]):r[o]-u>.5?a[o]=Math.ceil(r[o]):a[o]=u%2==0?u:u+1}return this.makeOutput(a,e.shape,"float32")},n.prototype.exp=function(e){ye(e,"exp");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o)a[o]=Math.exp(r[o]);return this.makeOutput(a,e.shape,"float32")},n.prototype.expm1=function(e){ye(e,"expm1");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o)a[o]=Math.expm1(r[o]);return this.makeOutput(a,e.shape,"float32")},n.prototype.log=function(e){ye(e,"log");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o){var u=r[o];a[o]=Math.log(u)}return this.makeOutput(a,e.shape,"float32")},n.prototype.log1p=function(e){ye(e,"log1p");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o){var u=r[o];a[o]=Math.log1p(u)}return this.makeOutput(a,e.shape,"float32")},n.prototype.sqrt=function(e){ye(e,"sqrt");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o){var u=r[o];a[o]=Math.sqrt(u)}return this.makeOutput(a,e.shape,"float32")},n.prototype.rsqrt=function(e){ye(e,"rsqrt");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o){var u=r[o];a[o]=1/Math.sqrt(u)}return this.makeOutput(a,e.shape,"float32")},n.prototype.reciprocal=function(e){ye(e,"reciprocal");for(var r=this.readSync(e.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o)a[o]=1/r[o];return this.makeOutput(a,e.shape,"float32")},n.prototype.linear=function(e){return e},n.prototype.relu=function(e){ye(e,"relu");for(var r=It(e.shape,e.dtype),a=this.readSync(r.dataId),o=this.readSync(e.dataId),u=0;u<o.length;++u)a[u]=Math.max(0,o[u]);return r},n.prototype.relu6=function(e){ye(e,"relu");for(var r=It(e.shape,e.dtype),a=this.readSync(r.dataId),o=this.readSync(e.dataId),u=0;u<o.length;++u)a[u]=Math.min(Math.max(0,o[u]),6);return r},n.prototype.prelu=function(e,r){return ye([e,r],"prelu"),this.broadcastedBinaryOp(e,r,e.dtype,(function(a,o){return a<0?o*a:a}))},n.prototype.elu=function(e){ye(e,"elu");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o){var u=a[o];r[o]=u>=0?u:Math.exp(u)-1}return this.makeOutput(r,e.shape,"float32")},n.prototype.eluDer=function(e,r){ye([e,r],"eluDer");for(var a=new Float32Array(r.size),o=this.readSync(r.dataId),u=this.readSync(e.dataId),l=0;l<o.length;++l){var c=o[l];a[l]=c>=1?u[l]:u[l]*(c+1)}return this.makeOutput(a,r.shape,"float32")},n.prototype.selu=function(e){ye(e,"selu");for(var r=Ry,a=_y,o=new Float32Array(e.size),u=this.readSync(e.dataId),l=0;l<u.length;++l){var c=u[l];o[l]=c>=0?a*c:r*(Math.exp(c)-1)}return this.makeOutput(o,e.shape,"float32")},n.prototype.clip=function(e,r,a){ye(e,"clip");for(var o=new Float32Array(e.size),u=this.readSync(e.dataId),l=0;l<u.length;++l){var c=u[l];o[l]=c>a?a:c<r?r:c}return this.makeOutput(o,e.shape,"float32")},n.prototype.abs=function(e){for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.abs(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.complexAbs=function(e){for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<e.size;++o){var u=a[2*o],l=a[2*o+1];r[o]=Math.hypot(u,l)}return this.makeOutput(r,e.shape,"float32")},n.prototype.int=function(e){ye(e,"int");for(var r=new Int32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=a[o];return this.makeOutput(r,e.shape,"int32")},n.prototype.sigmoid=function(e){ye(e,"sigmoid");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=1/(1+Math.exp(-a[o]));return this.makeOutput(r,e.shape,"float32")},n.prototype.softplus=function(e){ye(e,"softplus");for(var r=Math.log(11920928955078125e-23)+2,a=new Float32Array(e.size),o=this.readSync(e.dataId),u=0;u<o.length;++u){var l=o[u]>-r,c=o[u]<r,d=Math.exp(o[u]),h=void 0;h=c?d:l?o[u]:Math.log(1+d),a[u]=h}return this.makeOutput(a,e.shape,"float32")},n.prototype.sin=function(e){ye(e,"sin");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.sin(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.cos=function(e){ye(e,"cos");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.cos(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.tan=function(e){ye(e,"tan");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.tan(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.asin=function(e){ye(e,"asin");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.asin(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.acos=function(e){ye(e,"acos");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.acos(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.atan=function(e){ye(e,"atan");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.atan(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.atan2=function(e,r){return ye([e,r],"atan2"),this.broadcastedBinaryOp(e,r,e.dtype,(function(a,o){return Math.atan2(a,o)}))},n.prototype.sinh=function(e){ye(e,"sinh");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.sinh(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.cosh=function(e){ye(e,"cosh");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.cosh(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.tanh=function(e){ye(e,"tanh");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=jB(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.asinh=function(e){ye(e,"asinh");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.asinh(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.acosh=function(e){ye(e,"acosh");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.acosh(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.atanh=function(e){ye(e,"atanh");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o)r[o]=Math.atanh(a[o]);return this.makeOutput(r,e.shape,"float32")},n.prototype.erf=function(e){ye(e,"erf");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o){var u=Math.sign(a[o]),l=Math.abs(a[o]),c=1/(1+.3275911*l);r[o]=u*(1-((((1.061405429*c-1.453152027)*c+1.421413741)*c-.284496736)*c+.254829592)*c*Math.exp(-l*l))}return this.makeOutput(r,e.shape,"float32")},n.prototype.step=function(e,r){r===void 0&&(r=0),ye(e,"step");for(var a=new Float32Array(e.size),o=this.readSync(e.dataId),u=0;u<o.length;++u){var l=o[u];isNaN(l)?a[u]=NaN:a[u]=l>0?1:r}return this.makeOutput(a,e.shape,"float32")},n.prototype.fusedConv2d=function(e){var r=e.input,a=e.filter,o=e.convInfo,u=e.bias,l=e.activation,c=e.preluActivationWeights,d=this.conv2d(r,a,o);return u&&(d=this.add(d,u)),l&&(d=Nm(this,d,l,c)),d},n.prototype.conv2d=function(e,r,a){ye([e,r],"conv2d");for(var o=a.filterHeight,u=a.filterWidth,l=a.dilationHeight,c=a.dilationWidth,d=a.padInfo.left,h=a.padInfo.top,v=a.dataFormat==="channelsLast",m=qe(a.outShape,e.dtype),g=e.strides[0],b=v?e.strides[1]:e.strides[2],x=v?e.strides[2]:1,S=v?1:e.strides[1],C=m.strides[0],_=v?m.strides[1]:m.strides[2],R=v?m.strides[2]:1,E=v?1:m.strides[1],T=this.readSync(e.dataId),k=this.readSync(r.dataId),N=m.values,O=0;O<a.batchSize;++O)for(var I=O*g,B=O*C,H=0;H<a.outHeight;++H)for(var A=B+H*_,q=H*a.strideHeight-h,V=0;V<o;V++){var j=q+V*l;if(!(j<0||j>=a.inHeight))for(var P=V*r.strides[0],$=I+j*b,Q=0;Q<a.outWidth;++Q)for(var U=A+Q*R,G=Q*a.strideWidth-d,M=0;M<u;M++){var K=G+M*c;if(!(K<0||K>=a.inWidth))for(var Z=$+K*x,oe=P+M*r.strides[1],pe=0;pe<a.inChannels;++pe){for(var ge=T[Z+pe*S],xe=0;xe<a.outChannels;++xe)N[U+xe*E]+=ge*k[oe+xe];oe+=a.outChannels}}}return m.toTensor()},n.prototype.conv3d=function(e,r,a){for(var o=a.filterDepth,u=a.filterHeight,l=a.filterWidth,c=a.dilationDepth,d=a.dilationHeight,h=a.dilationWidth,v=a.padInfo.front,m=a.padInfo.left,g=a.padInfo.top,b=qe(a.outShape,e.dtype),x=this.readSync(e.dataId),S=this.readSync(r.dataId),C=b.values,_=0;_<a.batchSize;++_)for(var R=_*e.strides[0],E=_*b.strides[0],T=0;T<a.outDepth;++T)for(var k=E+T*b.strides[1],N=T*a.strideDepth-v,O=0;O<o;O++){var I=N+O*c;if(!(I<0||I>=a.inDepth))for(var B=O*r.strides[0],H=R+I*e.strides[1],A=0;A<a.outHeight;++A)for(var q=k+A*b.strides[2],V=A*a.strideHeight-g,j=0;j<u;j++){var P=V+j*d;if(!(P<0||P>=a.inHeight))for(var $=B+j*r.strides[1],Q=H+P*e.strides[2],U=0;U<a.outWidth;++U)for(var G=q+U*a.outChannels,M=U*a.strideWidth-m,K=0;K<l;K++){var Z=M+K*h;if(!(Z<0||Z>=a.inWidth))for(var oe=$+K*r.strides[2],pe=Q+Z*a.inChannels,ge=oe,xe=0;xe<a.inChannels;++xe){for(var Ce=x[pe+xe],he=0;he<a.outChannels;++he)C[G+he]+=Ce*S[ge+he];ge+=a.outChannels}}}}return b.toTensor()},n.prototype.conv2dDerInput=function(e,r,a){ye([e,r],"conv2dDerInput");for(var o=qe(a.inShape,"float32"),u=o.values,l=this.readSync(e.dataId),c=this.readSync(r.dataId),d=r.strides,h=d[0],v=d[1],m=d[2],g=a.batchSize,b=a.filterHeight,x=a.filterWidth,S=a.inChannels,C=a.inHeight,_=a.inWidth,R=a.outChannels,E=a.outHeight,T=a.outWidth,k=a.strideHeight,N=a.strideWidth,O=a.dataFormat,I=b-1-a.padInfo.top,B=x-1-a.padInfo.left,H=O==="channelsLast",A=o.strides[0],q=H?o.strides[1]:o.strides[2],V=H?o.strides[2]:1,j=H?1:o.strides[1],P=e.strides[0],$=H?e.strides[1]:e.strides[2],Q=H?e.strides[2]:1,U=H?1:e.strides[1],G=0;G<g;++G)for(var M=0;M<S;++M)for(var K=0;K<C;++K)for(var Z=K-I,oe=Math.max(0,Math.ceil(Z/k)),pe=Math.min(E,(b+Z)/k),ge=0;ge<_;++ge){for(var xe=ge-B,Ce=Math.max(0,Math.ceil(xe/N)),he=Math.min(T,(x+xe)/N),be=0,we=oe;we<pe;++we)for(var Re=we*k-Z,Me=Ce;Me<he;++Me)for(var Se=P*G+$*we+Q*Me,Fe=h*(b-1-Re)+v*(x-1-(Me*N-xe))+m*M,He=0;He<R;++He)be+=l[Se+U*He]*c[Fe+He];u[A*G+q*K+V*ge+j*M]=be}return o.toTensor()},n.prototype.conv3dDerInput=function(e,r,a){for(var o=qe(a.inShape,"float32"),u=o.values,l=o.strides,c=l[0],d=l[1],h=l[2],v=l[3],m=this.readSync(e.dataId),g=e.strides,b=g[0],x=g[1],S=g[2],C=g[3],_=this.readSync(r.dataId),R=r.strides,E=R[0],T=R[1],k=R[2],N=R[3],O=a.batchSize,I=a.filterDepth,B=a.filterHeight,H=a.filterWidth,A=a.inChannels,q=a.inDepth,V=a.inHeight,j=a.inWidth,P=a.outChannels,$=a.outDepth,Q=a.outHeight,U=a.outWidth,G=a.strideDepth,M=a.strideHeight,K=a.strideWidth,Z=I-1-a.padInfo.front,oe=B-1-a.padInfo.top,pe=H-1-a.padInfo.left,ge=0;ge<O;++ge)for(var xe=0;xe<A;++xe)for(var Ce=0;Ce<q;++Ce)for(var he=Ce-Z,be=Math.max(0,Math.ceil(he/G)),we=Math.min($,(I+he)/G),Re=0;Re<V;++Re)for(var Me=Re-oe,Se=Math.max(0,Math.ceil(Me/M)),Fe=Math.min(Q,(B+Me)/M),He=0;He<j;++He){for(var vt=He-pe,ut=Math.max(0,Math.ceil(vt/K)),yt=Math.min(U,(H+vt)/K),jt=0,st=be;st<we;++st)for(var Pe=st*G-he,cn=Se;cn<Fe;++cn)for(var Ye=cn*M-Me,In=ut;In<yt;++In)for(var $n=b*ge+x*st+S*cn+C*In,En=E*(I-1-Pe)+T*(B-1-Ye)+k*(H-1-(In*K-vt))+N*xe,nn=0;nn<P;++nn)jt+=m[$n+nn]*_[En+nn];u[c*ge+d*Ce+h*Re+v*He+xe]=jt}return o.toTensor()},n.prototype.conv2dDerFilter=function(e,r,a){ye([e,r],"conv2dDerFilter");for(var o=a.strideHeight,u=a.strideWidth,l=a.filterHeight,c=a.filterWidth,d=a.dataFormat==="channelsLast",h=qe(a.filterShape,"float32"),v=a.padInfo.left,m=a.padInfo.top,g=this.bufferSync(e),b=this.bufferSync(r),x=0;x<l;++x)for(var S=Math.max(0,Math.ceil((m-x)/o)),C=Math.min(a.outHeight,(a.inHeight+m-x)/o),_=0;_<c;++_)for(var R=Math.max(0,Math.ceil((v-_)/u)),E=Math.min(a.outWidth,(a.inWidth+v-_)/u),T=0;T<a.inChannels;++T)for(var k=0;k<a.outChannels;++k){for(var N=0,O=0;O<a.batchSize;++O)for(var I=S;I<C;++I)for(var B=x+I*o-m,H=R;H<E;++H){var A=_+H*u-v;N+=d?g.get(O,B,A,T)*b.get(O,I,H,k):g.get(O,T,B,A)*b.get(O,k,I,H)}h.set(N,x,_,T,k)}return h.toTensor()},n.prototype.conv3dDerFilter=function(e,r,a){for(var o=a.strideDepth,u=a.strideHeight,l=a.strideWidth,c=a.filterDepth,d=a.filterHeight,h=a.filterWidth,v=qe(a.filterShape,"float32"),m=v.values,g=v.strides,b=g[0],x=g[1],S=g[2],C=g[3],_=this.readSync(r.dataId),R=r.strides,E=R[0],T=R[1],k=R[2],N=R[3],O=this.readSync(e.dataId),I=e.strides,B=I[0],H=I[1],A=I[2],q=I[3],V=a.padInfo.front,j=a.padInfo.left,P=a.padInfo.top,$=0;$<c;++$)for(var Q=Math.max(0,Math.ceil((V-$)/o)),U=Math.min(a.outDepth,(a.inDepth+V-$)/o),G=$*b,M=0;M<d;++M)for(var K=Math.max(0,Math.ceil((P-M)/u)),Z=Math.min(a.outHeight,(a.inHeight+P-M)/u),oe=M*x+G,pe=0;pe<h;++pe)for(var ge=Math.max(0,Math.ceil((j-pe)/l)),xe=Math.min(a.outWidth,(a.inWidth+j-pe)/l),Ce=pe*S+oe,he=0;he<a.inChannels;++he)for(var be=he*C+Ce,we=0;we<a.outChannels;++we){for(var Re=0,Me=0;Me<a.batchSize;++Me)for(var Se=Me*B,Fe=Me*E,He=Q;He<U;++He)for(var vt=($+He*o-V)*H+Se,ut=He*T+Fe,yt=K;yt<Z;++yt)for(var jt=(M+yt*u-P)*A+vt,st=yt*k+ut,Pe=ge;Pe<xe;++Pe){var cn=Pe*N+st;Re+=O[(pe+Pe*l-j)*q+jt+he]*_[cn+we]}m[be+we]=Re}return v.toTensor()},n.prototype.fusedDepthwiseConv2D=function(e){var r=e.input,a=e.filter,o=e.convInfo,u=e.bias,l=e.activation,c=e.preluActivationWeights,d=this.depthwiseConv2D(r,a,o);return u&&(d=this.add(d,u)),l&&(d=Nm(this,d,l,c)),d},n.prototype.depthwiseConv2D=function(e,r,a){ye([e,r],"depthwiseConv2D");for(var o=a.filterHeight,u=a.filterWidth,l=a.dilationHeight,c=a.dilationWidth,d=a.padInfo.left,h=a.padInfo.top,v=a.outChannels/a.inChannels,m=qe(a.outShape,e.dtype),g=this.readSync(e.dataId),b=this.readSync(r.dataId),x=m.values,S=0;S<a.batchSize;++S)for(var C=S*e.strides[0],_=S*m.strides[0],R=0;R<a.outHeight;++R)for(var E=_+R*m.strides[1],T=R*a.strideHeight-d,k=0;k<o;++k){var N=T+k*l;if(!(N<0||N>=a.inHeight))for(var O=k*r.strides[0],I=C+N*e.strides[1],B=0;B<a.outWidth;++B)for(var H=E+B*m.strides[2],A=B*a.strideWidth-h,q=0;q<u;++q){var V=A+q*c;if(!(V<0||V>=a.inWidth))for(var j=O+q*r.strides[1],P=I+V*a.inChannels,$=H,Q=j,U=0;U<a.inChannels;++U){for(var G=g[P+U],M=0;M<v;++M)x[$+M]+=G*b[Q+M];$+=v,Q+=v}}}return m.toTensor()},n.prototype.depthwiseConv2DDerInput=function(e,r,a){ye([e,r],"depthwiseConv2DDerInput");for(var o=qe(a.inShape,"float32"),u=o.values,l=o.strides,c=l[0],d=l[1],h=l[2],v=this.readSync(e.dataId),m=e.strides,g=m[0],b=m[1],x=m[2],S=this.readSync(r.dataId),C=r.strides,_=C[0],R=C[1],E=C[2],T=a.batchSize,k=a.filterHeight,N=a.filterWidth,O=a.inChannels,I=a.inHeight,B=a.inWidth,H=a.outChannels,A=a.outHeight,q=a.outWidth,V=a.strideHeight,j=a.strideWidth,P=k-1-a.padInfo.top,$=N-1-a.padInfo.left,Q=H/O,U=0;U<T;++U)for(var G=0;G<O;++G)for(var M=0;M<I;++M)for(var K=M-P,Z=Math.max(0,Math.ceil(K/V)),oe=Math.min(A,(k+K)/V),pe=0;pe<B;++pe){for(var ge=pe-$,xe=Math.max(0,Math.ceil(ge/j)),Ce=Math.min(q,(N+ge)/j),he=0,be=Z;be<oe;++be)for(var we=be*V-K,Re=xe;Re<Ce;++Re)for(var Me=g*U+b*be+x*Re,Se=_*(k-1-we)+R*(N-1-(Re*j-ge))+E*G,Fe=0;Fe<Q;++Fe)he+=v[Me+(G*Q+Fe)]*S[Se+Fe];u[c*U+d*M+h*pe+G]=he}return o.toTensor()},n.prototype.depthwiseConv2DDerFilter=function(e,r,a){ye([e,r],"depthwiseConv2DDerFilter");for(var o=a.strideHeight,u=a.strideWidth,l=a.filterHeight,c=a.filterWidth,d=qe(a.filterShape,"float32"),h=a.padInfo.left,v=a.padInfo.top,m=a.outChannels/a.inChannels,g=this.bufferSync(e),b=this.bufferSync(r),x=0;x<l;++x)for(var S=Math.max(0,Math.ceil((v-x)/o)),C=Math.min(a.outHeight,(a.inHeight+v-x)/o),_=0;_<c;++_)for(var R=Math.max(0,Math.ceil((h-_)/u)),E=Math.min(a.outWidth,(a.inWidth+h-_)/u),T=0;T<a.outChannels;++T){for(var k=Math.trunc(T/m),N=T%m,O=0,I=0;I<a.batchSize;++I)for(var B=S;B<C;++B)for(var H=x+B*o-v,A=R;A<E;++A){var q=_+A*u-h;O+=g.get(I,H,q,k)*b.get(I,B,A,T)}d.set(O,x,_,k,N)}return d.toTensor()},n.prototype.tile=function(e,r){return ye(e,"tile"),oR(this.bufferSync(e),r)},n.prototype.pad=function(e,r,a){ye(e,"pad");var o=r.map((function(m,g){return m[0]+e.shape[g]+m[1]})),u=r.map((function(m){return m[0]})),l=this.bufferSync(e),c=qe(o,e.dtype);a!==0&&c.values.fill(a);for(var d=0;d<e.size;d++){var h=l.indexToLoc(d),v=h.map((function(m,g){return m+u[g]}));c.set.apply(c,[l.get.apply(l,h)].concat(v))}return c.toTensor()},n.prototype.transpose=function(e,r){ye(e,"transpose");for(var a=new Array(e.rank),o=0;o<a.length;o++)a[o]=e.shape[r[o]];var u=this.readSync(e.dataId),l=qe(a,e.dtype),c=this.bufferSync(e);for(o=0;o<e.size;++o){for(var d=c.indexToLoc(o),h=new Array(d.length),v=0;v<h.length;v++)h[v]=d[r[v]];var m=l.locToIndex(h);l.values[m]=u[o]}return l.toTensor()},n.prototype.gather=function(e,r,a){ye([e,r],"gather");var o=e.shape.slice(),u=this.readSync(r.dataId);o[a]=u.length;for(var l=qe(o,e.dtype),c=this.bufferSync(e),d=0;d<l.size;++d){var h=l.indexToLoc(d),v=h.slice();v[a]=u[h[a]];var m=c.locToIndex(v);l.values[d]=c.values[m]}return l.toTensor()},n.prototype.batchToSpaceND=function(e,r,a){ye([e],"batchToSpaceND");var o=r.reduce((function(v,m){return v*m})),u=vd(e.shape,r,o),l=md(u.length,r.length),c=gd(e.shape,r,o),d=qE(a,r.length),h=$E(c,a,r.length);return e.reshape(u).transpose(l).reshape(c).slice(d,h)},n.prototype.spaceToBatchND=function(e,r,a){ye([e],"spaceToBatchND");var o=r.reduce((function(m,g){return m*g})),u=[[0,0]];u.push.apply(u,a);for(var l=1+r.length;l<e.shape.length;++l)u.push([0,0]);var c=e.pad(u),d=vd(c.shape,r,o,!1),h=md(d.length,r.length,!1),v=gd(c.shape,r,o,!1);return c.reshape(d).transpose(h).reshape(v)},n.prototype.pool=function(e,r,a){ye(e,"pool");for(var o=r.strideHeight,u=r.strideWidth,l=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,v=r.padInfo.top,m=r.padInfo.left,g=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=this.readSync(e.dataId),x=qe(r.outShape,e.dtype),S=x.values,C=r.outShape[1]*r.outShape[2]*r.outShape[3],_=r.outShape[2]*r.outShape[3],R=r.outShape[3],E=0;E<r.batchSize;++E)for(var T=E*C,k=E*e.strides[0],N=0;N<r.inChannels;++N)for(var O=0;O<r.outHeight;++O)for(var I=O*o-v,B=Math.max(0,I),H=Math.min(r.inHeight,d+I),A=T+O*_,q=0;q<r.outWidth;++q){for(var V=q*u-m,j=Math.max(0,V),P=Math.min(r.inWidth,h+V),$=g,Q=0,U=0,G=B;G<H;G+=l){for(var M=k+G*e.strides[1],K=j;K<P;K+=c){var Z=b[M+K*e.strides[2]+N];a==="max"&&Z>$?$=Z:a==="avg"&&(Q+=Z,U++)}if(isNaN($))break}S[A+q*R+N]=a==="avg"?Q/U:$}return x.toTensor()},n.prototype.maxPool=function(e,r){return this.pool(e,r,"max")},n.prototype.maxPoolPositions=function(e,r){for(var a=qe(r.outShape,"int32"),o=r.strideHeight,u=r.strideWidth,l=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,v=r.padInfo.top,m=r.padInfo.left,g=this.bufferSync(e),b=0;b<r.batchSize;++b)for(var x=0;x<r.inChannels;++x)for(var S=0;S<r.outHeight;++S){for(var C=S*o-v,_=C;_<0;)_+=l;for(var R=Math.min(r.inHeight,d+C),E=0;E<r.outWidth;++E){for(var T=E*u-m,k=T;k<0;)k+=c;for(var N=Math.min(r.inWidth,h+T),O=Number.NEGATIVE_INFINITY,I=-1,B=_;B<R;B+=l)for(var H=B-C,A=k;A<N;A+=c){var q=A-T,V=g.get(b,B,A,x);V>O&&(O=V,I=H*h+q)}a.set(I,b,S,E,x)}}return a.toTensor()},n.prototype.maxPoolBackprop=function(e,r,a,o){ye([r,a],"maxPoolBackprop");for(var u=this.maxPoolPositions(r,o),l=o.strideHeight,c=o.strideWidth,d=o.dilationHeight,h=o.dilationWidth,v=o.effectiveFilterHeight,m=o.effectiveFilterWidth,g=m-1-o.padInfo.left,b=v-1-o.padInfo.top,x=qe(r.shape,"float32"),S=this.bufferSync(u),C=this.bufferSync(e),_=0;_<o.batchSize;++_)for(var R=0;R<o.inChannels;++R)for(var E=0;E<o.inHeight;++E)for(var T=0;T<o.inWidth;++T){for(var k=E-b,N=T-g,O=0,I=0;I<v;I+=d){var B=(k+I)/l;if(!(B<0||B>=o.outHeight||Math.floor(B)!==B))for(var H=0;H<m;H+=h){var A=(N+H)/c;if(!(A<0||A>=o.outWidth||Math.floor(A)!==A)){var q=v*m-1-S.get(_,B,A,R)===I*m+H?1:0;q!==0&&(O+=C.get(_,B,A,R)*q)}}}x.set(O,_,E,T,R)}return x.toTensor()},n.prototype.avgPoolBackprop=function(e,r,a){ye([e,r],"avgPoolBackprop");for(var o=a.strideHeight,u=a.strideWidth,l=a.filterHeight,c=a.filterWidth,d=a.dilationHeight,h=a.dilationWidth,v=a.effectiveFilterHeight,m=a.effectiveFilterWidth,g=m-1-a.padInfo.left,b=v-1-a.padInfo.top,x=qe(r.shape,"float32"),S=1/(l*c),C=this.bufferSync(e),_=0;_<a.batchSize;++_)for(var R=0;R<a.inChannels;++R)for(var E=0;E<a.inHeight;++E)for(var T=0;T<a.inWidth;++T){for(var k=E-b,N=T-g,O=0,I=0;I<v;I+=d){var B=(k+I)/o;if(!(B<0||B>=a.outHeight||Math.floor(B)!==B))for(var H=0;H<m;H+=h){var A=(N+H)/u;A<0||A>=a.outWidth||Math.floor(A)!==A||(O+=C.get(_,B,A,R))}}x.set(O*S,_,E,T,R)}return x.toTensor()},n.prototype.pool3d=function(e,r,a){ye(e,"pool3d");for(var o=r.strideDepth,u=r.strideHeight,l=r.strideWidth,c=r.dilationDepth,d=r.dilationHeight,h=r.dilationWidth,v=r.effectiveFilterDepth,m=r.effectiveFilterHeight,g=r.effectiveFilterWidth,b=r.padInfo.front,x=r.padInfo.top,S=r.padInfo.left,C=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,_=this.readSync(e.dataId),R=qe(r.outShape,e.dtype),E=R.values,T=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],k=r.outShape[2]*r.outShape[3]*r.outShape[4],N=r.outShape[3]*r.outShape[4],O=r.outShape[4],I=0;I<r.batchSize;++I)for(var B=I*T,H=I*e.strides[0],A=0;A<r.inChannels;++A)for(var q=0;q<r.outDepth;++q){for(var V=q*o-b,j=V;j<0;)j+=c;for(var P=Math.min(r.inDepth,v+V),$=B+q*k,Q=0;Q<r.outHeight;++Q){for(var U=Q*u-x,G=U;G<0;)G+=d;for(var M=Math.min(r.inHeight,m+U),K=$+Q*N,Z=0;Z<r.outWidth;++Z){for(var oe=Z*l-S,pe=oe;pe<0;)pe+=h;for(var ge=Math.min(r.inWidth,g+oe),xe=K+Z*O,Ce=C,he=0,be=0,we=j;we<P;we+=c){for(var Re=H+we*e.strides[1],Me=G;Me<M;Me+=d){for(var Se=Re+Me*e.strides[2],Fe=pe;Fe<ge;Fe+=h){var He=_[Se+Fe*e.strides[3]+A];if(a==="max"&&He>Ce?Ce=He:a==="avg"&&(he+=He,be++),isNaN(Ce))break}if(isNaN(Ce))break}if(isNaN(Ce))break}E[xe+A]=a==="avg"?he/be:Ce}}}return R.toTensor()},n.prototype.avgPool3d=function(e,r){return ye(e,"avgPool3d"),this.pool3d(e,r,"avg").toFloat()},n.prototype.avgPool3dBackprop=function(e,r,a){ye([e,r],"avgPool3dBackprop");for(var o=a.strideDepth,u=a.strideHeight,l=a.strideWidth,c=a.filterDepth,d=a.filterHeight,h=a.filterWidth,v=a.dilationDepth,m=a.dilationHeight,g=a.dilationWidth,b=a.effectiveFilterDepth,x=a.effectiveFilterHeight,S=a.effectiveFilterWidth,C=b-1-a.padInfo.front,_=S-1-a.padInfo.left,R=x-1-a.padInfo.top,E=qe(r.shape,"float32"),T=1/(c*d*h),k=this.bufferSync(e),N=0;N<a.batchSize;++N)for(var O=0;O<a.inChannels;++O)for(var I=0;I<a.inDepth;++I)for(var B=0;B<a.inHeight;++B)for(var H=0;H<a.inWidth;++H){for(var A=I-C,q=B-R,V=H-_,j=0,P=0;P<b;P+=v){var $=(A+P)/o;if(!($<0||$>=a.outDepth||Math.floor($)!==$))for(var Q=0;Q<x;Q+=m){var U=(q+Q)/u;if(!(U<0||U>=a.outHeight||Math.floor(U)!==U))for(var G=0;G<S;G+=g){var M=(V+G)/l;M<0||M>=a.outWidth||Math.floor(M)!==M||(j+=k.get(N,$,U,M,O))}}}E.set(j*T,N,I,B,H,O)}return E.toTensor()},n.prototype.maxPool3d=function(e,r){return ye(e,"maxPool3d"),this.pool3d(e,r,"max").toFloat()},n.prototype.maxPool3dPositions=function(e,r){for(var a=qe(r.outShape,"int32"),o=r.strideDepth,u=r.strideHeight,l=r.strideWidth,c=r.dilationDepth,d=r.dilationHeight,h=r.dilationWidth,v=r.effectiveFilterDepth,m=r.effectiveFilterHeight,g=r.effectiveFilterWidth,b=r.padInfo.front,x=r.padInfo.top,S=r.padInfo.left,C=this.bufferSync(e),_=0;_<r.batchSize;++_)for(var R=0;R<r.inChannels;++R)for(var E=0;E<r.outDepth;++E){for(var T=E*o-b,k=T;k<0;)k+=c;for(var N=Math.min(r.inDepth,v+T),O=0;O<r.outHeight;++O){for(var I=O*u-x,B=I;B<0;)B+=d;for(var H=Math.min(r.inHeight,m+I),A=0;A<r.outWidth;++A){for(var q=A*l-S,V=q;V<0;)V+=h;for(var j=Math.min(r.inWidth,g+q),P=Number.NEGATIVE_INFINITY,$=-1,Q=k;Q<N;Q+=c)for(var U=Q-T,G=B;G<H;G+=d)for(var M=G-I,K=V;K<j;K+=h){var Z=K-q,oe=C.get(_,Q,G,K,R);oe>=P&&(P=oe,$=U*m*g+M*m+Z)}a.set($,_,E,O,A,R)}}}return a.toTensor()},n.prototype.maxPool3dBackprop=function(e,r,a,o){ye([r,a],"maxPool3dBackprop");for(var u=this.maxPool3dPositions(r,o),l=o.strideDepth,c=o.strideHeight,d=o.strideWidth,h=o.dilationDepth,v=o.dilationHeight,m=o.dilationWidth,g=o.effectiveFilterDepth,b=o.effectiveFilterHeight,x=o.effectiveFilterWidth,S=g-1-o.padInfo.front,C=x-1-o.padInfo.left,_=b-1-o.padInfo.top,R=qe(r.shape,"float32"),E=this.bufferSync(u),T=this.bufferSync(e),k=0;k<o.batchSize;++k)for(var N=0;N<o.inChannels;++N)for(var O=0;O<o.inDepth;++O)for(var I=0;I<o.inHeight;++I)for(var B=0;B<o.inWidth;++B){for(var H=O-S,A=I-_,q=B-C,V=0,j=0;j<g;j+=h){var P=(H+j)/l;if(!(P<0||P>=o.outDepth||Math.floor(P)!==P))for(var $=0;$<b;$+=v){var Q=(A+$)/c;if(!(Q<0||Q>=o.outHeight||Math.floor(Q)!==Q))for(var U=0;U<x;U+=m){var G=(q+U)/d;if(!(G<0||G>=o.outWidth||Math.floor(G)!==G)){var M=g*b*x-1-E.get(k,P,Q,G,N)===j*b*x+$*x+U?1:0;M!==0&&(V+=T.get(k,P,Q,G,N)*M)}}}}R.set(V,k,O,I,B,N)}return R.toTensor()},n.prototype.cast=function(e,r){return tR(e,r,this)},n.prototype.reshape=function(e,r){return yg(e,r)},n.prototype.avgPool=function(e,r){return ye(e,"avgPool"),this.pool(e,r,"avg").toFloat()},n.prototype.resizeBilinear=function(e,r,a,o){ye(e,"resizeBilinear");for(var u=e.shape,l=u[0],c=u[1],d=u[2],h=u[3],v=this.readSync(e.dataId),m=new Float32Array(Ne([l,r,a,h])),g=[o&&r>1?c-1:c,o&&a>1?d-1:d],b=[o&&r>1?r-1:r,o&&a>1?a-1:a],x=0,S=g[0]/b[0],C=g[1]/b[1],_=0;_<l;_++)for(var R=0;R<r;R++)for(var E=S*R,T=Math.floor(E),k=E-T,N=Math.min(c-1,Math.ceil(E)),O=_*e.strides[0]+T*e.strides[1],I=_*e.strides[0]+N*e.strides[1],B=0;B<a;B++)for(var H=C*B,A=Math.floor(H),q=H-A,V=Math.min(d-1,Math.ceil(H)),j=O+A*e.strides[2],P=I+A*e.strides[2],$=O+V*e.strides[2],Q=I+V*e.strides[2],U=0;U<h;U++){var G=v[j+U],M=v[P+U],K=G+(v[$+U]-G)*q,Z=K+(M+(v[Q+U]-M)*q-K)*k;m[x++]=Z}return On(m,[l,r,a,h])},n.prototype.resizeBilinearBackprop=function(e,r,a){ye([e,r],"resizeBilinearBackprop");for(var o=r.shape,u=o[0],l=o[1],c=o[2],d=o[3],h=e.shape,v=h[1],m=h[2],g=new Float32Array(u*l*c*d),b=[a&&v>1?l-1:l,a&&m>1?c-1:c],x=[a&&v>1?v-1:v,a&&m>1?m-1:m],S=b[0]/x[0],C=b[1]/x[1],_=this.readSync(e.dataId),R=0,E=0;E<u;E++)for(var T=E*r.strides[0],k=0;k<v;k++)for(var N=k*S,O=Math.floor(N),I=Math.min(Math.ceil(N),l-1),B=T+O*r.strides[1],H=T+I*r.strides[1],A=N-O,q=1-A,V=0;V<m;V++)for(var j=V*C,P=Math.floor(j),$=Math.min(Math.ceil(j),c-1),Q=j-P,U=1-Q,G=B+P*r.strides[2],M=B+$*r.strides[2],K=H+P*r.strides[2],Z=H+$*r.strides[2],oe=q*U,pe=q*Q,ge=A*U,xe=A*Q,Ce=0;Ce<d;Ce++){var he=_[R++];g[G+Ce]+=he*oe,g[M+Ce]+=he*pe,g[K+Ce]+=he*ge,g[Z+Ce]+=he*xe}return rr(g,[u,c,l,d],r.dtype)},n.prototype.resizeNearestNeighbor=function(e,r,a,o){ye(e,"resizeNearestNeighbor");for(var u=e.shape,l=u[0],c=u[1],d=u[2],h=u[3],v=this.readSync(e.dataId),m=new Float32Array(l*r*a*h),g=[o&&r>1?c-1:c,o&&a>1?d-1:d],b=[o&&r>1?r-1:r,o&&a>1?a-1:a],x=g[0]/b[0],S=g[1]/b[1],C=0,_=0;_<l;_++)for(var R=_*e.strides[0],E=0;E<r;E++)for(var T=x*E,k=R+Math.min(c-1,o?Math.round(T):Math.floor(T))*e.strides[1],N=0;N<a;N++)for(var O=S*N,I=k+Math.min(d-1,o?Math.round(O):Math.floor(O))*e.strides[2],B=0;B<h;B++){var H=v[I+B];m[C++]=H}return On(m,[l,r,a,h],e.dtype)},n.prototype.resizeNearestNeighborBackprop=function(e,r,a){ye([e,r],"resizeNearestNeighborBackprop");for(var o=r.shape,u=o[0],l=o[1],c=o[2],d=o[3],h=e.shape,v=h[1],m=h[2],g=new Float32Array(u*l*c*d),b=this.readSync(e.dataId),x=[a&&v>1?l-1:l,a&&m>1?c-1:c],S=[a&&v>1?v-1:v,a&&m>1?m-1:m],C=x[0]/S[0],_=x[1]/S[1],R=1/C,E=1/_,T=2*Math.ceil(R)+2,k=2*Math.ceil(E)+2,N=0;N<u;N++)for(var O=N*r.strides[0],I=0;I<l;I++)for(var B=O+I*r.strides[1],H=Math.floor(I*R),A=Math.floor(H-T/2),q=0;q<c;q++)for(var V=B+q*r.strides[2],j=Math.floor(q*E),P=Math.floor(j-k/2),$=0;$<d;$++){for(var Q=0,U=0;U<T;U++){var G=U+A;if(!(G<0||G>=v)){var M=O+G*e.strides[1],K=G*C;if(I===Math.min(l-1,a?Math.round(K):Math.floor(K)))for(var Z=0;Z<k;Z++){var oe=Z+P;if(!(oe<0||oe>=m)){var pe=M+oe*e.strides[2],ge=oe*_;q===Math.min(c-1,a?Math.round(ge):Math.floor(ge))&&(Q+=b[pe+$])}}}}g[V+$]=Q}return rr(g,r.shape,r.dtype)},n.prototype.batchNormalization=function(e,r,a,o,u,l){ye([e,r,a,u,l],"batchNorm");for(var c=this.readSync(e.dataId),d=this.readSync(r.dataId),h=this.readSync(a.dataId),v=u?this.readSync(u.dataId):new Float32Array([1]),m=l?this.readSync(l.dataId):new Float32Array([0]),g=new Float32Array(c.length),b=m.length,x=v.length,S=h.length,C=d.length,_=0,R=0,E=0,T=0,k=0;k<c.length;++k)g[k]=m[_++]+(c[k]-d[R++])*v[E++]/Math.sqrt(h[T++]+o),_>=b&&(_=0),R>=C&&(R=0),E>=x&&(E=0),T>=S&&(T=0);return rr(g,e.shape)},n.prototype.localResponseNormalization4D=function(e,r,a,o,u){ye(e,"localResponseNormalization4D");var l=e.shape[3],c=l-1,d=this.readSync(e.dataId),h=e.size,v=new Float32Array(h);function m(S){for(var C=S%l,_=S-C+Math.max(0,C-r),R=S-C+Math.min(C+r,c),E=0;_<=R;_++){var T=d[_];E+=T*T}return E}for(var g=0;g<h;g++){var b=m(g),x=d[g]*Math.pow(a+o*b,-u);v[g]=x}return rr(v,e.shape)},n.prototype.LRNGrad=function(e,r,a,o,u,l,c){ye(e,"LRNGrad");for(var d=e.shape[3],h=this.readSync(e.dataId),v=this.readSync(r.dataId),m=this.readSync(a.dataId),g=new Float32Array(e.size),b=e.size,x=0;x<b;x++){for(var S=x%d,C=x-S+Math.max(0,S-o),_=x-S+Math.min(d,S+o+1),R=0,E=C;E<_;E++)R+=Math.pow(v[E],2);for(R=l*R+u,E=C;E<_;E++){var T=-2*l*c*v[E]*m[x]/R;x===E&&(T+=Math.pow(R,-c)),T*=h[x],g[E]+=T}}return rr(g,e.shape)},n.prototype.multinomial=function(e,r,a,o){ye(e,"multinomial");for(var u=r?e:co(e),l=u.shape[0],c=u.shape[1],d=It([l,a],"int32"),h=this.readSync(d.dataId),v=this.readSync(u.dataId),m=0;m<l;++m){var g=m*c,b=new Float32Array(c-1);b[0]=v[g];for(var x=1;x<b.length;++x)b[x]=b[x-1]+v[g+x];for(var S=Zd(o.toString()),C=m*a,_=0;_<a;++_){var R=S();h[C+_]=b.length;for(var E=0;E<b.length;E++)if(R<b[E]){h[C+_]=E;break}}}return d},n.prototype.oneHot=function(e,r,a,o){ye(e,"oneHot");var u=new Float32Array(e.size*r);u.fill(o);for(var l=this.readSync(e.dataId),c=0;c<e.size;++c)l[c]>=0&&l[c]<r&&(u[c*r+l[c]]=a);return qo(u,[e.size,r],"int32")},n.prototype.nonMaxSuppression=function(e,r,a,o,u){return ye(e,"nonMaxSuppression"),wy(this.readSync(e.dataId),this.readSync(r.dataId),a,o,u)},n.prototype.fft=function(e){return this.fftBatch(e,!1)},n.prototype.ifft=function(e){return this.fftBatch(e,!0)},n.prototype.fftBatch=function(e,r){for(var a=e.shape[0],o=e.shape[1],u=qe(e.shape,"float32"),l=qe(e.shape,"float32"),c=Hr(e).as2D(a,o),d=xa(e).as2D(a,o),h=0;h<a;h++)for(var v=c.slice([h,0],[1,o]),m=d.slice([h,0],[1,o]),g=kn(v,m),b=this.readSync(this.fftImpl(g,r).dataId),x=0;x<o;x++){var S=dS(b,x);u.values[h*o+x]=S.real,l.values[h*o+x]=S.imag}return kn(u.toTensor(),l.toTensor()).as2D(a,o)},n.prototype.fftImpl=function(e,r){var a=e.as1D(),o=a.size;if(this.isExponentOf2(o)){var u=this.fftRadix2(a,o,r).as2D(e.shape[0],e.shape[1]);return r&&(u=kn(Hr(u).div(Ee(o)),xa(u).div(Ee(o)))),u}var l=this.readSync(e.dataId),c=(function(d){for(var h=new Float32Array(d.length/2),v=new Float32Array(d.length/2),m=0;m<d.length;m+=2)h[m/2]=d[m],v[m/2]=d[m+1];return{real:h,imag:v}})(this.fourierTransformByMatmul(l,o,r));return kn(c.real,c.imag).as2D(e.shape[0],e.shape[1])},n.prototype.isExponentOf2=function(e){return(e&e-1)==0},n.prototype.fftRadix2=function(e,r,a){if(r===1)return e;var o=this.readSync(e.dataId),u=r/2,l=(function(C){for(var _=Math.ceil(C.length/4),R=new Float32Array(_),E=new Float32Array(_),T=0;T<C.length;T+=4)R[Math.floor(T/4)]=C[T],E[Math.floor(T/4)]=C[T+1];return{real:R,imag:E}})(o),c=kn(l.real,l.imag).as1D(),d=(function(C){for(var _=Math.floor(C.length/4),R=new Float32Array(_),E=new Float32Array(_),T=2;T<C.length;T+=4)R[Math.floor(T/4)]=C[T],E[Math.floor(T/4)]=C[T+1];return{real:R,imag:E}})(o),h=kn(d.real,d.imag).as1D();c=this.fftRadix2(c,u,a),h=this.fftRadix2(h,u,a);var v=(function(C,_){for(var R=new Float32Array(C/2),E=new Float32Array(C/2),T=0;T<Math.ceil(C/2);T++){var k=(_?2:-2)*Math.PI*(T/C);R[T]=Math.cos(k),E[T]=Math.sin(k)}return{real:R,imag:E}})(r,a),m=kn(v.real,v.imag).mul(h),g=c.add(m),b=c.sub(m),x=Hr(g).concat(Hr(b)),S=xa(g).concat(xa(b));return kn(x,S).as1D()},n.prototype.fourierTransformByMatmul=function(e,r,a){for(var o=new Float32Array(2*r),u=0;u<r;u++){for(var l=0,c=0,d=0;d<r;d++){var h=CP(u*d,r,a),v=dS(e,d);l+=v.real*h.real-v.imag*h.imag,c+=v.real*h.imag+v.imag*h.real}a&&(l/=r,c/=r),SP(o,l,c,u)}return o},n.prototype.depthToSpace=function(e,r,a){W(a==="NHWC",(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+a})),W(r>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+r}));for(var o=e.shape[0],u=e.shape[1],l=e.shape[2],c=e.shape[3],d=u*r,h=l*r,v=c/(r*r),m=this.readSync(e.dataId),g=new Float32Array(o*d*h*v),b=0,x=0;x<o;++x)for(var S=0;S<d;++S)for(var C=Math.floor(S/r),_=S%r,R=0;R<h;++R)for(var E=Math.floor(R/r),T=(_*r+R%r)*v,k=0;k<v;++k){var N=k+T+c*(E+l*(C+u*x));g[b++]=m[N]}return rr(g,[o,d,h,v])},n.prototype.broadcastedBinaryOp=function(e,r,a,o){var u=nt(e.shape,r.shape),l=qe(u,a),c=this.readSync(e.dataId),d=this.readSync(r.dataId),h=Ho(e.shape,u),v=Ho(r.shape,u),m=l.values;if(h.length+v.length===0)for(var g=0;g<m.length;++g)m[g]=o(c[g%c.length],d[g%d.length]);else{var b=this.bufferSync(e),x=this.bufferSync(r),S=function(C){var _=l.indexToLoc(C),R=_.slice(-e.rank);h.forEach((function(N){return R[N]=0}));var E=b.locToIndex(R),T=_.slice(-r.rank);v.forEach((function(N){return T[N]=0}));var k=x.locToIndex(T);m[C]=o(c[E],d[k])};for(g=0;g<m.length;++g)S(g)}return l.toTensor()},n.prototype.broadcastedBinaryComplexOp=function(e,r,a){var o=nt(e.shape,r.shape),u=qe(o,"float32"),l=qe(o,"float32"),c=this.readSync(e.dataId),d=this.readSync(r.dataId),h=Ho(e.shape,o),v=Ho(r.shape,o),m=u.values,g=l.values;if(h.length+v.length===0)for(var b=0;b<m.length;b++){var x=b%c.length,S=b%d.length,C=a(c[2*x],c[2*x+1],d[2*S],d[2*S+1]);m[b]=C.real,g[b]=C.imag}else{var _=this.bufferSync(this.data.get(e.dataId).complexTensors.real),R=this.bufferSync(this.data.get(r.dataId).complexTensors.real),E=function(T){var k=u.indexToLoc(T),N=k.slice(-e.rank);h.forEach((function(A){return N[A]=0}));var O=_.locToIndex(N),I=k.slice(-r.rank);v.forEach((function(A){return I[A]=0}));var B=R.locToIndex(I),H=a(c[2*O],c[2*O+1],d[2*B],d[2*B+1]);m[T]=H.real,g[T]=H.imag};for(b=0;b<m.length;b++)E(b)}return this.complex(u.toTensor(),l.toTensor())},n.prototype.split=function(e,r,a){return aR(e,r,a)},n.prototype.dispose=function(){},n.prototype.floatPrecision=function(){return 32},n.prototype.epsilon=function(){return 1e-7},n.prototype.cropAndResize=function(e,r,a,o,u,l){for(var c=e.shape,d=c[0],h=c[1],v=c[2],m=c[3],g=r.shape[0],b=o[0],x=o[1],S=qe([g,b,x,m],"float32"),C=this.readSync(r.dataId),_=this.readSync(a.dataId),R=this.readSync(e.dataId),E=e.strides,T=S.strides,k=0;k<g;k++){var N=4*k,O=C[N],I=C[N+1],B=C[N+2],H=C[N+3],A=_[k];if(!(A>=d))for(var q=b>1?(B-O)*(h-1)/(b-1):0,V=x>1?(H-I)*(v-1)/(x-1):0,j=0;j<b;j++){var P=b>1?O*(h-1)+j*q:.5*(O+B)*(h-1);if(P<0||P>h-1)for(var $=0;$<x;$++)for(var Q=0;Q<m;Q++){var U=Q+$*T[2]+j*T[1]+k*T[0];S.values[U]=l}else if(u==="bilinear"){var G=Math.floor(P),M=Math.ceil(P),K=P-G;for($=0;$<x;$++)if((we=x>1?I*(v-1)+$*V:.5*(I+H)*(v-1))<0||we>v-1)for(Q=0;Q<m;Q++)U=Q+$*T[2]+j*T[1]+k*T[0],S.values[U]=l;else{var Z=Math.floor(we),oe=Math.ceil(we),pe=we-Z;for(Q=0;Q<m;Q++){var ge=R[U=Q+Z*E[2]+G*E[1]+A*E[0]],xe=R[U=Q+oe*E[2]+G*E[1]+A*E[0]],Ce=R[U=Q+Z*E[2]+M*E[1]+A*E[0]],he=ge+(xe-ge)*pe,be=Ce+(R[U=Q+oe*E[2]+M*E[1]+A*E[0]]-Ce)*pe;U=Q+$*T[2]+j*T[1]+k*T[0],S.values[U]=he+(be-he)*K}}}else for($=0;$<x;++$){var we;if((we=x>1?I*(v-1)+$*V:.5*(I+H)*(v-1))<0||we>v-1)for(Q=0;Q<m;Q++)U=Q+$*T[2]+j*T[1]+k*T[0],S.values[U]=l;else{var Re=Math.round(we),Me=Math.round(P);for(Q=0;Q<m;Q++){var Se=Q+Re*E[2]+Me*E[1]+A*E[0],Fe=Q+$*T[2]+j*T[1]+k*T[0];S.values[Fe]=R[Se]}}}}}return S.toTensor()},n.prototype.sparseToDense=function(e,r,a,o){var u=yd(0,e,a),l=u.sliceRank,c=u.numUpdates,d=u.sliceSize,h=u.strides,v=u.outputSize;return this.scatter(e,r,a,v,d,c,l,h,o,!1)},n.prototype.gatherND=function(e,r){var a=r.shape,o=a[a.length-1],u=KE(e,r),l=u[0],c=u[1],d=u[2],h=u[3];if(c===0)return On([],l,e.dtype);for(var v=new Ml([c,d],e.dtype),m=this.readSync(r.dataId),g=this.readSync(e.dataId),b=0;b<c;b++){for(var x=[],S=0,C=0;C<o;C++){var _=m[b*o+C];S+=_*h[C],x.push(_)}if(S<0||S>=e.size/d)throw new Error("Invalid indices: "+x+" does not index into "+e.shape);for(var R=0;R<d;R++)v.values[b*d+R]=g[S*d+R]}return v.toTensor().reshape(l)},n.prototype.scatterND=function(e,r,a){var o=yd(0,e,a),u=o.sliceRank,l=o.numUpdates,c=o.sliceSize,d=o.strides,h=o.outputSize,v=Ee(0);return this.scatter(e,r,a,h,c,l,u,d,v,!0)},n.prototype.fill=function(e,r,a){var o=ud(a=a||Yl(r),Ne(e));return o.fill(r),ee.makeTensor(o,e,a,this)},n.prototype.onesLike=function(e){if(e.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},n.prototype.zerosLike=function(e){var r=ud(e.dtype,Ne(e.shape));return this.makeOutput(r,e.shape,e.dtype)},n.prototype.linspace=function(e,r,a){return nR(e,r,a)},n.prototype.scatter=function(e,r,a,o,u,l,c,d,h,v){var m=[o/u,u],g=this.readSync(e.dataId),b=this.readSync(r.dataId);if(o===0)return On([],a,r.dtype);var x=new Ml(m,r.dtype);x.values.fill(this.readSync(h.dataId)[0]);for(var S=0;S<l;S++){for(var C=[],_=0,R=0;R<c;R++){var E=g[S*c+R];C.push(E),_+=E*d[R]}if(_<0||_>=o/u)throw new Error("Invalid indices: "+C+" does not index into "+a);for(var T=0;T<u;T++)v?x.values[_*u+T]+=b[S*u+T]:x.values[_*u+T]=r.rank===0?b[0]:b[S*u+T]}return x.toTensor().reshape(a)},n})(JE);ee.registerBackend("cpu",(function(){return new V6}),1);for(var Mm=0,IS=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=t.attrs,a=n,o=a.boxes,u=a.scores,l=r,c=l.maxOutputSize,d=l.iouThreshold,h=l.scoreThreshold,v=l.softNmsSigma,m=e;ye(o,"NonMaxSuppressionWithScore");var g=Sy(m.data.get(o.dataId).values,m.data.get(u.dataId).values,c,d,h,v);return[g.selectedIndices,g.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=n.x,a=e;ye(r,"square");for(var o=a.data.get(r.dataId).values,u=new Float32Array(o.length),l=0;l<o.length;++l){var c=o[l];u[l]=c*c}return{dataId:a.write(u,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:Bl,backendName:"cpu",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=n,a=r.a,o=r.b,u=e;ye([a,o],Bl);var l=u.data.get(a.dataId).values,c=u.data.get(o.dataId).values,d=(function(m,g,b,x,S,C){var _=nt(m,g),R=_.length,E=Ra(_),T=Nl(S,Ne(_)),k=m.length,N=g.length,O=Ra(m),I=Ra(g),B=Ho(m,_),H=Ho(g,_);if(B.length+H.length===0)for(var A=0;A<T.length;++A)T[A]=C(b[A%b.length],x[A%x.length]);else{var q=function(V){var j=JB(V,R,E),P=j.slice(-k);B.forEach((function(G){return P[G]=0}));var $=rS(P,k,O),Q=j.slice(-N);H.forEach((function(G){return Q[G]=0}));var U=rS(Q,N,I);T[V]=C(b[$],x[U])};for(A=0;A<T.length;++A)q(A)}return[T,_]})(a.shape,o.shape,l,c,a.dtype,(function(m,g){var b=m-g;return b*b})),h=d[0],v=d[1];return{dataId:u.write(h,v,a.dtype),shape:v,dtype:a.dtype}}}];Mm<IS.length;Mm++)TE(IS[Mm]);var Ps,j6=function(t){this.variableNames=["A"];var n=Hn(),e=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+e+`.0);

        vec4 values = `+n.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},G6=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=Hn(),e=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+e+`.0);
            vec4 values = `+n.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+n.output+` = result;
      }
    `};for(var Om=0,BS=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=t.attrs,a=n.pixels,o=r.numChannels,u=typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement,l=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,c=u?[a.videoWidth,a.videoHeight]:[a.width,a.height],d=c[0],h=c[1],v=[h,d],m=[h,d,o];(l||u)&&(Ps==null&&(Ps=document.createElement("canvas").getContext("2d")),Ps.canvas.width=d,Ps.canvas.height=h,Ps.drawImage(a,0,0,d,h),a=Ps.canvas);var g=e.makeTensorInfo(v,"int32");e.texData.get(g.dataId).usage=wr.PIXELS,e.gpgpu.uploadPixelDataToTexture(e.getTexture(g.dataId),a);var b=de().getBool("WEBGL_PACK")?new G6(m):new j6(m),x=e.runWebGLProgram(b,[g],"int32");return e.disposeData(g.dataId),x}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=t.attrs;dd("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var a=n,o=a.boxes,u=a.scores,l=r,c=l.maxOutputSize,d=l.iouThreshold,h=l.scoreThreshold,v=l.softNmsSigma,m=e,g=Sy(m.readSync(o.dataId),m.readSync(u.dataId),c,d,h,v);return[g.selectedIndices,g.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=n.x,a=e,o=new Xe(r.shape,"return x * x;");return a.runWebGLProgram(o,[r],r.dtype)}},{kernelName:Bl,backendName:"webgl",kernelFunc:function(t){var n=t.inputs,e=t.backend,r=n,a=r.a,o=r.b,u=e,l=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new eo("return (a - b) * (a - b);",a.shape,o.shape):new $t("return (a - b) * (a - b);",a.shape,o.shape);return u.compileAndRun(l,[a,o])}}];Om<BS.length;Om++)TE(BS[Om]);for(var Im=0,FS=[{kernelName:"Square",gradFunc:function(t,n){var e=n[0];return{x:function(){return t.mul(e.toFloat().mul(2))}}}},{kernelName:Bl,gradFunc:function(t,n){var e=n[0],r=n[1],a=Ee(2);return{a:function(){return jn(t,jn(a,gn(e,r)))},b:function(){return jn(t,jn(a,gn(r,e)))}}}}];Im<FS.length;Im++)HB(FS[Im]);var q6=(function(){function t(){}return t.prototype.fetch=function(n,e){return fetch(n,e)},t.prototype.now=function(){return performance.now()},t.prototype.encode=function(n,e){if(e!=="utf-8"&&e!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+e);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(n)},t.prototype.decode=function(n,e){return new TextDecoder(e).decode(n)},t})();de().get("IS_BROWSER")&&de().setPlatform("browser",new q6);var Bm,$6=function(){return require("node-fetch")},K6=(function(){function t(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return t.prototype.fetch=function(n,e){return de().global.fetch!=null?de().global.fetch(n,e):(Bm==null&&(Bm=$6()),Bm(n,e))},t.prototype.now=function(){var n=process.hrtime();return 1e3*n[0]+n[1]/1e6},t.prototype.encode=function(n,e){if(e!=="utf-8"&&e!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+e);return this.textEncoder.encode(n)},t.prototype.decode=function(n,e){return n.length===0?"":new this.util.TextDecoder(e).decode(n)},t})();de().get("IS_NODE")&&de().setPlatform("node",new K6);var wg={float32:4,int32:4,uint16:2,uint8:1,bool:1},Rd=4;function YR(t,n){for(var e={},r=0,a=function(l){var c=l.name,d=l.dtype,h=l.shape,v=Ne(h),m=void 0;if("quantization"in l){var g=l.quantization;if(g.dtype!=="uint8"&&g.dtype!=="uint16")throw new Error("Weight "+l.name+" has unknown quantization dtype "+g.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var b=wg[g.dtype],x=t.slice(r,r+v*b),S=g.dtype==="uint8"?new Uint8Array(x):new Uint16Array(x);if(d==="float32")m=Float32Array.from(S,(function(k){return k*g.scale+g.min}));else{if(d!=="int32")throw new Error("Unsupported dtype in weight '"+c+"': "+d);m=Int32Array.from(S,(function(k){return Math.round(k*g.scale+g.min)}))}r+=v*b}else if(d==="string"){var C=Ne(l.shape);m=[];for(var _=0;_<C;_++){var R=new Uint32Array(t.slice(r,r+Rd))[0];r+=Rd;var E=new Uint8Array(t.slice(r,r+R));m.push(E),r+=R}}else{var T=wg[d];if(x=t.slice(r,r+v*T),d==="float32")m=new Float32Array(x);else if(d==="int32")m=new Int32Array(x);else{if(d!=="bool")throw new Error("Unsupported dtype in weight '"+c+"': "+d);m=new Uint8Array(x)}r+=v*T}e[c]=On(m,h,d)},o=0,u=n;o<u.length;o++)a(u[o]);return e}function X6(t){if(t===null)throw new Error("Invalid input value: "+JSON.stringify(t));var n=0,e=[];t.forEach((function(o){if(n+=o.byteLength,e.push(o.byteLength===o.buffer.byteLength?o:new o.constructor(o)),!(o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+o.constructor.name)}));var r=new Uint8Array(n),a=0;return e.forEach((function(o){r.set(new Uint8Array(o.buffer),a),a+=o.byteLength})),r.buffer}var Sg=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function PS(t){return Sg?Buffer.byteLength(t):new Blob([t]).size}function Wy(t){var n=0;t.forEach((function(a){n+=a.byteLength}));var e=new Uint8Array(n),r=0;return t.forEach((function(a){e.set(new Uint8Array(a),r),r+=a.byteLength})),e.buffer}function LS(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);var n=t.split("/");return n[n.length-1]}function rc(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:PS(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:PS(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:t.weightData.byteLength}}var Sr=(function(){function t(){this.saveRouters=[],this.loadRouters=[]}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerSaveRouter=function(n){t.getInstance().saveRouters.push(n)},t.registerLoadRouter=function(n){t.getInstance().loadRouters.push(n)},t.getSaveHandlers=function(n){return t.getHandlers(n,"save")},t.getLoadHandlers=function(n,e){return t.getHandlers(n,"load",e)},t.getHandlers=function(n,e,r){var a=[];return(e==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach((function(o){var u=o(n,r);u!==null&&a.push(u)})),a},t})(),Ys="://",$o=(function(){function t(){this.managers={}}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerManager=function(n,e){W(n!=null,(function(){return"scheme must not be undefined or null."})),n.endsWith(Ys)&&(n=n.slice(0,n.indexOf(Ys))),W(n.length>0,(function(){return"scheme must not be an empty string."}));var r=t.getInstance();W(r.managers[n]==null,(function(){return"A model store manager is already registered for scheme '"+n+"'."})),r.managers[n]=e},t.getManager=function(n){var e=this.getInstance().managers[n];if(e==null)throw new Error("Cannot find model manager for scheme '"+n+"'");return e},t.getSchemes=function(){return Object.keys(this.getInstance().managers)},t})();function Xf(t){if(t.indexOf(Ys)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+$o.getSchemes().join(","));return{scheme:t.split(Ys)[0],path:t.split(Ys)[1]}}function zS(t,n,e){return e===void 0&&(e=!1),Ae(this,void 0,void 0,(function(){var r,a,o,u,l,c,d,h,v;return De(this,(function(m){switch(m.label){case 0:return W(t!==n,(function(){return"Old path and new path are the same: '"+t+"'"})),W((r=Sr.getLoadHandlers(t)).length>0,(function(){return"Copying failed because no load handler is found for source URL "+t+"."})),W(r.length<2,(function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+t+"."})),a=r[0],W((o=Sr.getSaveHandlers(n)).length>0,(function(){return"Copying failed because no save handler is found for destination URL "+n+"."})),W(o.length<2,(function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+n+"."})),u=o[0],l=Xf(t).scheme,c=Xf(t).path,d=l===Xf(t).scheme,[4,a.load()];case 1:return h=m.sent(),e&&d?[4,$o.getManager(l).removeModel(c)]:[3,3];case 2:m.sent(),m.label=3;case 3:return[4,u.save(h)];case 4:return v=m.sent(),!e||d?[3,6]:[4,$o.getManager(l).removeModel(c)];case 5:m.sent(),m.label=6;case 6:return[2,v.modelArtifactsInfo]}}))}))}var Ni="models_store",Vo="model_info_store";function QR(){if(!de().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t=window||self,n=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(n==null)throw new Error("The current browser does not appear to support IndexedDB.");return n}function Cg(t){var n=t.result;n.createObjectStore(Ni,{keyPath:"modelPath"}),n.createObjectStore(Vo,{keyPath:"modelPath"})}var Qs=(function(){function t(n){if(this.indexedDB=QR(),n==null||!n)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=n}return t.prototype.save=function(n){return Ae(this,void 0,void 0,(function(){return De(this,(function(e){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,n)]}))}))},t.prototype.load=function(){return Ae(this,void 0,void 0,(function(){return De(this,(function(n){return[2,this.databaseAction(this.modelPath)]}))}))},t.prototype.databaseAction=function(n,e){var r=this;return new Promise((function(a,o){var u=r.indexedDB.open("tensorflowjs",1);u.onupgradeneeded=function(){return Cg(u)},u.onsuccess=function(){var l=u.result;if(e==null){var c=l.transaction(Ni,"readonly"),d=c.objectStore(Ni).get(r.modelPath);d.onsuccess=function(){if(d.result==null)return l.close(),o(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));a(d.result.modelArtifacts)},d.onerror=function(x){return l.close(),o(d.error)},c.oncomplete=function(){return l.close()}}else{var h,v=rc(e),m=l.transaction(Vo,"readwrite"),g=m.objectStore(Vo),b=g.put({modelPath:r.modelPath,modelArtifactsInfo:v});b.onsuccess=function(){var x=(h=l.transaction(Ni,"readwrite")).objectStore(Ni).put({modelPath:r.modelPath,modelArtifacts:e,modelArtifactsInfo:v});x.onsuccess=function(){return a({modelArtifactsInfo:v})},x.onerror=function(S){var C=(g=m.objectStore(Vo)).delete(r.modelPath);C.onsuccess=function(){return l.close(),o(x.error)},C.onerror=function(_){return l.close(),o(x.error)}}},b.onerror=function(x){return l.close(),o(b.error)},m.oncomplete=function(){h==null?l.close():h.oncomplete=function(){return l.close()}}}},u.onerror=function(l){return o(u.error)}}))},t.URL_SCHEME="indexeddb://",t})(),US=function(t){return de().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Qs.URL_SCHEME)?(n=t.slice(Qs.URL_SCHEME.length),new Qs(n)):null;var n};Sr.registerSaveRouter(US),Sr.registerLoadRouter(US);var Y6=(function(){function t(){this.indexedDB=QR()}return t.prototype.listModels=function(){return Ae(this,void 0,void 0,(function(){var n=this;return De(this,(function(e){return[2,new Promise((function(r,a){var o=n.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return Cg(o)},o.onsuccess=function(){var u=o.result,l=u.transaction(Vo,"readonly"),c=l.objectStore(Vo).getAll();c.onsuccess=function(){for(var d={},h=0,v=c.result;h<v.length;h++){var m=v[h];d[m.modelPath]=m.modelArtifactsInfo}r(d)},c.onerror=function(d){return u.close(),a(c.error)},l.oncomplete=function(){return u.close()}},o.onerror=function(u){return a(o.error)}}))]}))}))},t.prototype.removeModel=function(n){return Ae(this,void 0,void 0,(function(){var e=this;return De(this,(function(r){var a;return n=(a=n).startsWith(Qs.URL_SCHEME)?a.slice(Qs.URL_SCHEME.length):a,[2,new Promise((function(o,u){var l=e.indexedDB.open("tensorflowjs",1);l.onupgradeneeded=function(){return Cg(l)},l.onsuccess=function(){var c,d=l.result,h=d.transaction(Vo,"readwrite"),v=h.objectStore(Vo),m=v.get(n);m.onsuccess=function(){if(m.result==null)return d.close(),u(new Error("Cannot find model with path '"+n+"' in IndexedDB."));var g=v.delete(n),b=function(){var x=(c=d.transaction(Ni,"readwrite")).objectStore(Ni).delete(n);x.onsuccess=function(){return o(m.result.modelArtifactsInfo)},x.onerror=function(S){return u(m.error)}};g.onsuccess=b,g.onerror=function(x){return b(),d.close(),u(m.error)}},m.onerror=function(g){return d.close(),u(m.error)},h.oncomplete=function(){c==null?d.close():c.oncomplete=function(){return d.close()}}},l.onerror=function(c){return u(l.error)}}))]}))}))},t})();if(de().getBool("IS_BROWSER"))try{$o.registerManager(Qs.URL_SCHEME,new Y6)}catch{}var to="/",js="tensorflowjs_models",ZR="info",Q6="model_topology",Z6="weight_specs",J6="weight_data",eU="model_metadata";function JR(t){return{info:[js,t,ZR].join(to),topology:[js,t,Q6].join(to),weightSpecs:[js,t,Z6].join(to),weightData:[js,t,J6].join(to),modelMetadata:[js,t,eU].join(to)}}function tU(t){var n=t.split(to);if(n.length<3)throw new Error("Invalid key format: "+t);return n.slice(1,n.length-1).join(to)}var Zs=(function(){function t(n){if(!de().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,n==null||!n)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=n,this.keys=JR(this.modelPath)}return t.prototype.save=function(n){return Ae(this,void 0,void 0,(function(){var e,r,a;return De(this,(function(o){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");e=JSON.stringify(n.modelTopology),r=JSON.stringify(n.weightSpecs),a=rc(n);try{return this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,e),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,(function(u){if(Sg)return Buffer.from(u).toString("base64");for(var l=new Uint8Array(u),c="",d=0,h=l.length;d<h;d++)c+=String.fromCharCode(l[d]);return btoa(c)})(n.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,userDefinedMetadata:n.userDefinedMetadata})),[2,{modelArtifactsInfo:a}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+a.modelTopologyBytes+", weightSpecsBytes="+a.weightSpecsBytes+", weightDataBytes="+a.weightDataBytes+".")}return[2]}))}))},t.prototype.load=function(){return Ae(this,void 0,void 0,(function(){var n,e,r,a,o,u,l;return De(this,(function(c){if((n=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(n.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(e={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(e.modelTopology=r,(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(e.weightSpecs=a,(o=this.LS.getItem(this.keys.modelMetadata))!=null&&(u=JSON.parse(o),e.format=u.format,e.generatedBy=u.generatedBy,e.convertedBy=u.convertedBy,e.userDefinedMetadata=u.userDefinedMetadata),(l=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return e.weightData=(function(d){if(Sg){var h=Buffer.from(d,"base64");return h.buffer.slice(h.byteOffset,h.byteOffset+h.byteLength)}for(var v=atob(d),m=new Uint8Array(v.length),g=0;g<v.length;++g)m.set([v.charCodeAt(g)],g);return m.buffer})(l),[2,e]}))}))},t.URL_SCHEME="localstorage://",t})(),WS=function(t){return de().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Zs.URL_SCHEME)?(n=t.slice(Zs.URL_SCHEME.length),new Zs(n)):null;var n};Sr.registerSaveRouter(WS),Sr.registerLoadRouter(WS);var nU=(function(){function t(){W(de().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),W(typeof window>"u"||window.localStorage!==void 0,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return t.prototype.listModels=function(){return Ae(this,void 0,void 0,(function(){var n,e,r,a,o,u;return De(this,(function(l){for(n={},e=js+to,r=to+ZR,a=0;a<this.LS.length;++a)(o=this.LS.key(a)).startsWith(e)&&o.endsWith(r)&&(u=tU(o),n[u]=JSON.parse(this.LS.getItem(o)));return[2,n]}))}))},t.prototype.removeModel=function(n){return Ae(this,void 0,void 0,(function(){var e,r;return De(this,(function(a){var o;if(n=(o=n).startsWith(Zs.URL_SCHEME)?o.slice(Zs.URL_SCHEME.length):o,e=JR(n),this.LS.getItem(e.info)==null)throw new Error("Cannot find model at path '"+n+"'");return r=JSON.parse(this.LS.getItem(e.info)),this.LS.removeItem(e.info),this.LS.removeItem(e.topology),this.LS.removeItem(e.weightSpecs),this.LS.removeItem(e.weightData),[2,r]}))}))},t})();if(de().getBool("IS_BROWSER"))try{$o.registerManager(Zs.URL_SCHEME,new nU)}catch{}var rU="model",aU=".json",oU=".weights.bin";function HS(t){return new Promise((function(n){return setTimeout(n)})).then(t)}var Fm=(function(){function t(n){if(!de().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");n.startsWith(t.URL_SCHEME)&&(n=n.slice(t.URL_SCHEME.length)),n!=null&&n.length!==0||(n=rU),this.modelTopologyFileName=n+aU,this.weightDataFileName=n+oU}return t.prototype.save=function(n){return Ae(this,void 0,void 0,(function(){var e,r,a,o,u,l;return De(this,(function(c){switch(c.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(e=window.URL.createObjectURL(new Blob([n.weightData],{type:"application/octet-stream"})),!(n.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:n.weightSpecs}],a={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,weightsManifest:r},o=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(u=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,u.href=o,[4,HS((function(){return u.dispatchEvent(new MouseEvent("click"))}))];case 2:return c.sent(),n.weightData==null?[3,4]:((l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,l.href=e,[4,HS((function(){return l.dispatchEvent(new MouseEvent("click"))}))]);case 3:c.sent(),c.label=4;case 4:return[2,{modelArtifactsInfo:rc(n)}]}}))}))},t.URL_SCHEME="downloads://",t})(),iU=(function(){function t(n){if(n==null||n.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+n);this.files=n}return t.prototype.load=function(){return Ae(this,void 0,void 0,(function(){var n,e,r=this;return De(this,(function(a){return n=this.files[0],e=this.files.slice(1),[2,new Promise((function(o,u){var l=new FileReader;l.onload=function(c){var d=JSON.parse(c.target.result),h=d.modelTopology;if(h!=null){e.length===0&&o({modelTopology:h});var v=d.weightsManifest;if(v!=null){var m;try{m=r.checkManifestAndWeightFiles(v,e)}catch(S){return void u(S)}var g=[],b=[],x=[];v.forEach((function(S){S.paths.forEach((function(C){b.push(C),x.push(null)})),g.push.apply(g,S.weights)})),v.forEach((function(S){S.paths.forEach((function(C){var _=new FileReader;_.onload=function(R){var E=R.target.result,T=b.indexOf(C);x[T]=E,x.indexOf(null)===-1&&o({modelTopology:h,weightSpecs:g,weightData:Wy(x),format:d.format,generatedBy:d.generatedBy,convertedBy:d.convertedBy,userDefinedMetadata:d.userDefinedMetadata})},_.onerror=function(R){return u("Failed to weights data from file of path '"+C+"'.")},_.readAsArrayBuffer(m[C])}))}))}else u(new Error("weightManifest field is missing from file "+n.name))}else u(new Error("modelTopology field is missing from file "+n.name))},l.onerror=function(c){return u("Failed to read model topology and weights manifest JSON from file '"+n.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},l.readAsText(n)}))]}))}))},t.prototype.checkManifestAndWeightFiles=function(n,e){for(var r=[],a=e.map((function(c){return LS(c.name)})),o={},u=0,l=n;u<l.length;u++)l[u].paths.forEach((function(c){var d=LS(c);if(r.indexOf(d)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+d+"'");if(r.push(d),a.indexOf(d)===-1)throw new Error("Weight file with basename '"+d+"' is not provided.");o[c]=e[a.indexOf(d)]}));if(r.length!==e.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+e.length+").");return o},t})();function VS(t,n,e,r){(function(o){W(o!=null&&Array.isArray(o)&&o.length>0,(function(){return"promises must be a none empty array"}))})(t),(function(o,u){W(o>=0&&o<=1,(function(){return"Progress fraction must be in range [0, 1], but got startFraction "+o})),W(u>=0&&u<=1,(function(){return"Progress fraction must be in range [0, 1], but got endFraction "+u})),W(u>=o,(function(){return"startFraction must be no more than endFraction, but got startFraction "+o+" and endFraction "+u}))})(e=e??0,r=r??1);var a=0;return Promise.all(t.map((function(o){return o.then((function(u){var l=e+ ++a/t.length*(r-e);return n(l),u})),o})))}function e_(t,n){return Ae(this,void 0,void 0,(function(){var e,r,a,o,u,l,c,d,h;return De(this,(function(v){switch(v.label){case 0:return n==null&&(n={}),e=n.fetchFunc==null?de().platform.fetch:n.fetchFunc,r=t.map((function(m){return e(m,n.requestInit,{isBinary:!0})})),a=0,o=.5,n.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return u=v.sent(),[3,4];case 2:return[4,VS(r,n.onProgress,a,o)];case 3:u=v.sent(),v.label=4;case 4:return l=u.map((function(m){return m.arrayBuffer()})),c=.5,d=1,n.onProgress!=null?[3,6]:[4,Promise.all(l)];case 5:return h=v.sent(),[3,8];case 6:return[4,VS(l,n.onProgress,c,d)];case 7:h=v.sent(),v.label=8;case 8:return[2,h]}}))}))}function jS(t){var n=this;return function(e,r,a){return r===void 0&&(r=""),Ae(n,void 0,void 0,(function(){var o,u,l,c,d,h,v,m,g,b;return De(this,(function(x){switch(x.label){case 0:if(o=e.map((function(){return!1})),u={},l=a!=null?a.map((function(){return!1})):[],c=[],e.forEach((function(S,C){var _=0;S.weights.forEach((function(R){var E="quantization"in R?R.quantization.dtype:R.dtype,T=wg[E]*Ne(R.shape),k=function(){o[C]=!0,u[C]==null&&(u[C]=[]),u[C].push({manifestEntry:R,groupOffset:_,sizeBytes:T})};a!=null?a.forEach((function(N,O){N===R.name&&(k(),l[O]=!0)})):k(),c.push(R.name),_+=T}))})),!l.every((function(S){return S})))throw d=a.filter((function(S,C){return!l[C]})),new Error("Could not find weights in manifest with names: "+d.join(", ")+`. 
Manifest JSON has weights with names: `+c.join(", ")+".");return h=o.reduce((function(S,C,_){return C&&S.push(_),S}),[]),v=[],h.forEach((function(S){e[S].paths.forEach((function(C){var _=r+(r.endsWith("/")?"":"/")+C;v.push(_)}))})),[4,t(v)];case 1:return m=x.sent(),g={},b=0,h.forEach((function(S){for(var C=e[S].paths.length,_=0,R=0;R<C;R++)_+=m[b+R].byteLength;for(var E=new ArrayBuffer(_),T=new Uint8Array(E),k=0,N=0;N<C;N++){var O=new Uint8Array(m[b+N]);T.set(O,k),k+=O.byteLength}u[S].forEach((function(I){var B=YR(E.slice(I.groupOffset,I.groupOffset+I.sizeBytes),[I.manifestEntry]);for(var H in B)g[H]=B[H]})),b+=C})),[2,g]}}))}))}}Sr.registerSaveRouter((function(t){return de().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Fm.URL_SCHEME)?(function(n){return n===void 0&&(n="model"),new Fm(n)})(t.slice(Fm.URL_SCHEME.length)):null}));var t_=(function(){function t(n,e){if(this.DEFAULT_METHOD="POST",e==null&&(e={}),this.weightPathPrefix=e.weightPathPrefix,this.onProgress=e.onProgress,e.fetchFunc!=null?(W(typeof e.fetchFunc=="function",(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=e.fetchFunc):this.fetch=de().platform.fetch,W(n!=null&&n.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(n)&&W(n.length===2,(function(){return"URL paths for http must have a length of 2, (actual length is "+n.length+")."})),this.path=n,e.requestInit!=null&&e.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e.requestInit||{}}return t.prototype.save=function(n){return Ae(this,void 0,void 0,(function(){var e,r,a,o;return De(this,(function(u){switch(u.label){case 0:if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:n.weightSpecs}],a={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,userDefinedMetadata:n.userDefinedMetadata,weightsManifest:r},e.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),n.weightData!=null&&e.body.append("model.weights.bin",new Blob([n.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,e)];case 1:if((o=u.sent()).ok)return[2,{modelArtifactsInfo:rc(n),responses:[o]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+o.status+".")}}))}))},t.prototype.load=function(){return Ae(this,void 0,void 0,(function(){var n,e,r,a,o,u,l,c,d,h,v,m;return De(this,(function(g){switch(g.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(n=g.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+n.status+". Please verify this URL points to the model JSON of the model to load.");g.label=2;case 2:return g.trys.push([2,4,,5]),[4,n.json()];case 3:return e=g.sent(),[3,5];case 4:throw g.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(a=e.modelTopology,o=e.weightsManifest,u=e.generatedBy,l=e.convertedBy,c=e.format,d=e.userDefinedMetadata,a==null&&o==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return o==null?[3,7]:[4,this.loadWeights(o)];case 6:m=g.sent(),h=m[0],v=m[1],g.label=7;case 7:return[2,{modelTopology:a,weightSpecs:h,weightData:v,userDefinedMetadata:d,generatedBy:u,convertedBy:l,format:c}]}}))}))},t.prototype.loadWeights=function(n){return Ae(this,void 0,void 0,(function(){var e,r,a,o,u,l,c,d,h,v,m;return De(this,(function(g){switch(g.label){case 0:for(e=Array.isArray(this.path)?this.path[1]:this.path,r=(function(b){var x=b.lastIndexOf("/"),S=b.lastIndexOf("?"),C=b.substring(0,x),_=S>x?b.substring(S):"";return[C+"/",_]})(e),a=r[0],o=r[1],u=this.weightPathPrefix||a,l=[],c=0,d=n;c<d.length;c++)h=d[c],l.push.apply(l,h.weights);return v=[],n.forEach((function(b){b.paths.forEach((function(x){v.push(u+x+o)}))})),[4,e_(v,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return m=g.sent(),[2,[l,Wy(m)]]}}))}))},t.URL_SCHEME_REGEX=/^https?:\/\//,t})();function Eg(t){return t.match(t_.URL_SCHEME_REGEX)!=null}var GS=function(t,n){return typeof fetch>"u"?null:(Array.isArray(t)?t.every((function(e){return Eg(e)})):Eg(t))?Rg(t,{onProgress:n}):null};function Rg(t,n){return new t_(t,n)}Sr.registerSaveRouter(GS),Sr.registerLoadRouter(GS);var Pm=(function(){function t(n){this.modelArtifacts=n}return t.prototype.load=function(){return Ae(this,void 0,void 0,(function(){return De(this,(function(n){return[2,this.modelArtifacts]}))}))},t})(),sU=(function(){function t(n){this.saveHandler=n}return t.prototype.save=function(n){return Ae(this,void 0,void 0,(function(){return De(this,(function(e){return[2,this.saveHandler(n)]}))}))},t})(),n_=Object.freeze({browserFiles:function(t){return new iU(t)},browserHTTPRequest:function(t,n){return Rg(t,n)},concatenateArrayBuffers:Wy,decodeWeights:YR,encodeWeights:function(t,n){return Ae(this,void 0,void 0,(function(){var e,r,a,o,u,l=this;return De(this,(function(c){switch(c.label){case 0:for(e=[],r=[],a=Array.isArray(t)?t.map((function(d){return d.name})):Object.keys(t),o=function(d){var h=a[d],v=Array.isArray(t)?t[d].tensor:t[h];if(v.dtype!=="float32"&&v.dtype!=="int32"&&v.dtype!=="bool"&&v.dtype!=="string")throw new Error("Unsupported dtype in weight '"+h+"': "+v.dtype);var m={name:h,shape:v.shape,dtype:v.dtype};if(v.dtype==="string"){var g=new Promise((function(b){return Ae(l,void 0,void 0,(function(){var x,S,C,_,R,E,T;return De(this,(function(k){switch(k.label){case 0:return[4,v.bytes()];case 1:for(x=k.sent(),S=x.reduce((function(N,O){return N+O.length}),0)+Rd*x.length,C=new Uint8Array(S),_=0,R=0;R<x.length;R++)E=x[R],T=new Uint8Array(new Uint32Array([E.length]).buffer),C.set(T,_),_+=Rd,C.set(E,_),_+=E.length;return b(C),[2]}}))}))}));r.push(g)}else r.push(v.data());n!=null&&(m.group=n),e.push(m)},u=0;u<a.length;++u)o(u);return[4,Promise.all(r)];case 1:return[2,{data:X6(c.sent()),specs:e}]}}))}))},fromMemory:function(t,n,e,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new Pm(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Pm({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Pm({modelTopology:t,weightSpecs:n,weightData:e,trainingConfig:r}))},getLoadHandlers:function(t,n){return Sr.getLoadHandlers(t,n)},getModelArtifactsInfoForJSON:rc,getSaveHandlers:function(t){return Sr.getSaveHandlers(t)},http:Rg,isHTTPScheme:Eg,loadWeights:function(t,n,e,r){return n===void 0&&(n=""),Ae(this,void 0,void 0,(function(){return De(this,(function(a){return[2,jS((function(o){return e_(o,{requestInit:r})}))(t,n,e)]}))}))},registerLoadRouter:function(t){return Sr.registerLoadRouter(t)},registerSaveRouter:function(t){return Sr.registerSaveRouter(t)},weightsLoaderFactory:jS,withSaveHandler:function(t){return new sU(t)},copyModel:function(t,n){return Ae(this,void 0,void 0,(function(){return De(this,(function(e){return[2,zS(t,n,!1)]}))}))},listModels:function(){return Ae(this,void 0,void 0,(function(){var t,n,e,r,a,o,u;return De(this,(function(l){switch(l.label){case 0:t=$o.getSchemes(),n={},e=0,r=t,l.label=1;case 1:return e<r.length?(a=r[e],[4,$o.getManager(a).listModels()]):[3,4];case 2:for(u in o=l.sent())n[a+Ys+u]=o[u];l.label=3;case 3:return e++,[3,1];case 4:return[2,n]}}))}))},moveModel:function(t,n){return Ae(this,void 0,void 0,(function(){return De(this,(function(e){return[2,zS(t,n,!0)]}))}))},removeModel:function(t){return Ae(this,void 0,void 0,(function(){var n;return De(this,(function(e){return n=Xf(t),[2,$o.getManager(n.scheme).removeModel(n.path)]}))}))}}),Ls;Y({confusionMatrix_:function(t,n,e){var r=z(t,"labels","confusionMatrix"),a=z(n,"predictions","confusionMatrix");W(e==null||e>0&&Number.isInteger(e),(function(){return"If provided, numClasses must be a positive integer, but got "+e})),W(r.rank===1,(function(){return"Expected the rank of labels to be 1, but got "+r.rank})),W(a.rank===1,(function(){return"Expected the rank of predictions to be 1, but got "+a.rank})),W(r.shape[0]===a.shape[0],(function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+a.shape[0]+". Labels and predictions should have the same number of elements."})),W(e>0&&Number.isInteger(e),(function(){return"numClasses is required to be a positive integer, but got "+e}));var o=mg(r.asType("int32"),e),u=mg(a.asType("int32"),e);return o.transpose().matMul(u).asType("int32")}});var uU=Y({fromPixels_:function(t,n){if(n===void 0&&(n=3),n>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var e=!1,r=!1,a=!1,o=!1,u=!1;if(t.data instanceof Uint8Array)e=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)a=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)o=!0;else{if(t.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+t.constructor.name);u=!0}if(a&&a&&t.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(_E("FromPixels",ee.backendName)!=null)return ee.runKernel("FromPixels",{pixels:t},{numChannels:n});var l,c,d=a?[t.videoWidth,t.videoHeight]:[t.width,t.height],h=d[0],v=d[1];if(u?l=t.getContext("2d").getImageData(0,0,h,v).data:r||e?l=t.data:(o||a)&&(Ls==null&&(Ls=document.createElement("canvas").getContext("2d")),Ls.canvas.width=h,Ls.canvas.height=v,Ls.drawImage(t,0,0,h,v),l=Ls.getImageData(0,0,h,v).data),n===4)c=new Int32Array(l);else{var m=h*v;c=new Int32Array(m*n);for(var g=0;g<m;g++)for(var b=0;b<n;++b)c[g*n+b]=l[4*g+b]}return my(c,[v,h,n],"int32")}}),Hy=Object.freeze({toPixels:function(t,n){return Ae(this,void 0,void 0,(function(){var e,r,a,o,u,l,c,d,h,v,m,g,b,x,S,C,_,R,E,T,k,N,O;return De(this,(function(I){switch(I.label){case 0:if(e=z(t,"img","toPixels"),t instanceof Ut||(e=e.toInt()),e.rank!==2&&e.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+e.rank+".");if(r=e.shape.slice(0,2),a=r[0],o=r[1],(u=e.rank===2?1:e.shape[2])>4||u===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+u);return[4,e.data()];case 1:return l=I.sent(),c=e.min(),d=e.max(),[4,Promise.all([c.data(),d.data()])];case 2:if(h=I.sent(),v=h[0],m=h[1],g=v[0],b=m[0],c.dispose(),d.dispose(),e.dtype==="float32"){if(g<0||b>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+g+" - "+b+"].")}else{if(e.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+e.dtype+". Please use float32 or int32 tensors.");if(g<0||b>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+g+" - "+b+"].")}for(x=e.dtype==="float32"?255:1,S=new Uint8ClampedArray(o*a*4),C=0;C<a*o;++C)_=void 0,R=void 0,E=void 0,T=void 0,u===1?(_=l[C]*x,R=l[C]*x,E=l[C]*x,T=255):u===3?(_=l[3*C]*x,R=l[3*C+1]*x,E=l[3*C+2]*x,T=255):u===4&&(_=l[4*C]*x,R=l[4*C+1]*x,E=l[4*C+2]*x,T=l[4*C+3]*x),S[(k=4*C)+0]=Math.round(_),S[k+1]=Math.round(R),S[k+2]=Math.round(E),S[k+3]=Math.round(T);return n!=null&&(n.width=o,n.height=a,N=n.getContext("2d"),O=new ImageData(S,o,a),N.putImageData(O,0,0)),e!==t&&e.dispose(),[2,S]}}))}))},fromPixels:uU}),lU=(function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(n,e){return new n(e)},t})(),cU=(function(){function t(){this.classNameMap={}}return t.getMap=function(){return t.instance==null&&(t.instance=new t),t.instance},t.register=function(n){t.getMap().classNameMap[n.className]=[n,n.fromConfig]},t})();function ji(t){W(t.className!=null,(function(){return"Class being registered does not have the static className property defined."})),W(typeof t.className=="string",(function(){return"className is required to be a string, but got type "+typeof t.className})),W(t.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),cU.register(t)}var Gi=(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return oa(n,t),n.prototype.minimize=function(e,r,a){r===void 0&&(r=!1);var o=this.computeGradients(e,a),u=o.value,l=o.grads;if(a!=null){var c=a.map((function(d){return{name:d.name,tensor:l[d.name]}}));this.applyGradients(c)}else this.applyGradients(l);return or(l),r?u:(u.dispose(),null)},Object.defineProperty(n.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),n.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},n.prototype.computeGradients=function(e,r){return xP(e,r)},n.prototype.dispose=function(){this.iterations_!=null&&or(this.iterations_)},n.prototype.saveIterations=function(){return Ae(this,void 0,void 0,(function(){return De(this,(function(e){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:Ee(this.iterations_,"int32")}]}))}))},n.prototype.getWeights=function(){return Ae(this,void 0,void 0,(function(){return De(this,(function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")}))}))},n.prototype.setWeights=function(e){return Ae(this,void 0,void 0,(function(){return De(this,(function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}))}))},n.prototype.extractIterations=function(e){return Ae(this,void 0,void 0,(function(){var r;return De(this,(function(a){switch(a.label){case 0:return r=this,[4,e[0].tensor.data()];case 1:return r.iterations_=a.sent()[0],[2,e.slice(1)]}}))}))},n})(lU);Object.defineProperty(Gi,Symbol.hasInstance,{value:function(t){return t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null}});var fU=(function(t){function n(e,r,a){a===void 0&&(a=null);var o=t.call(this)||this;return o.learningRate=e,o.rho=r,o.epsilon=a,o.accumulatedGrads=[],o.accumulatedUpdates=[],a==null&&(o.epsilon=ee.backend.epsilon()),o}return oa(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map((function(a){return a.name})):Object.keys(e)).forEach((function(a,o){var u=ee.registeredVariables[a];r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:a+"/accum_grad",variable:_e((function(){return it(u).variable(!1)}))}),r.accumulatedUpdates[o]==null&&(r.accumulatedUpdates[o]={originalName:a+"/accum_var",variable:_e((function(){return it(u).variable(!1)}))});var l=Array.isArray(e)?e[o].tensor:e[a];if(l!=null){var c=r.accumulatedGrads[o].variable,d=r.accumulatedUpdates[o].variable;_e((function(){var h=c.mul(r.rho).add(l.square().mul(1-r.rho)),v=d.add(r.epsilon).sqrt().div(c.add(r.epsilon).sqrt()).mul(l),m=d.mul(r.rho).add(v.square().mul(1-r.rho));c.assign(h),d.assign(m);var g=v.mul(-r.learningRate).add(u);u.assign(g)}))}})),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedUpdates!=null&&(or(this.accumulatedGrads.map((function(e){return e.variable}))),or(this.accumulatedUpdates.map((function(e){return e.variable}))))},n.prototype.getWeights=function(){return Ae(this,void 0,void 0,(function(){var e;return De(this,(function(r){switch(r.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(e.map((function(a){return{name:a.originalName,tensor:a.variable}})))]}}))}))},n.prototype.setWeights=function(e){return Ae(this,void 0,void 0,(function(){var r;return De(this,(function(a){switch(a.label){case 0:return[4,this.extractIterations(e)];case 1:return e=a.sent(),r=e.length/2,this.accumulatedGrads=e.slice(0,r).map((function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),this.accumulatedUpdates=e.slice(r,2*r).map((function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),[2]}}))}))},n.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},n.fromConfig=function(e,r){return new e(r.learningRate,r.rho,r.epsilon)},n.className="Adadelta",n})(Gi);ji(fU);var dU=(function(t){function n(e,r){r===void 0&&(r=.1);var a=t.call(this)||this;return a.learningRate=e,a.initialAccumulatorValue=r,a.accumulatedGrads=[],a}return oa(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map((function(a){return a.name})):Object.keys(e)).forEach((function(a,o){var u=ee.registeredVariables[a];r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:a+"/accumulator",variable:_e((function(){return _a(u.shape,r.initialAccumulatorValue).variable(!1)}))});var l=Array.isArray(e)?e[o].tensor:e[a];if(l!=null){var c=r.accumulatedGrads[o].variable;_e((function(){var d=c.add(l.square());c.assign(d);var h=l.div(d.add(ee.backend.epsilon()).sqrt()).mul(-r.learningRate).add(u);u.assign(h)}))}})),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedGrads!=null&&or(this.accumulatedGrads.map((function(e){return e.variable})))},n.prototype.getWeights=function(){return Ae(this,void 0,void 0,(function(){return De(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map((function(r){return{name:r.originalName,tensor:r.variable}})))]}}))}))},n.prototype.setWeights=function(e){return Ae(this,void 0,void 0,(function(){return De(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),this.accumulatedGrads=e.map((function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}})),[2]}}))}))},n.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},n.fromConfig=function(e,r){return new e(r.learningRate,r.initialAccumulatorValue)},n.className="Adagrad",n})(Gi);ji(dU);var hU=(function(t){function n(e,r,a,o){o===void 0&&(o=null);var u=t.call(this)||this;return u.learningRate=e,u.beta1=r,u.beta2=a,u.epsilon=o,u.accumulatedFirstMoment=[],u.accumulatedSecondMoment=[],_e((function(){u.accBeta1=Ee(r).variable(),u.accBeta2=Ee(a).variable()})),o==null&&(u.epsilon=ee.backend.epsilon()),u}return oa(n,t),n.prototype.applyGradients=function(e){var r=this,a=Array.isArray(e)?e.map((function(o){return o.name})):Object.keys(e);_e((function(){var o=gn(1,r.accBeta1),u=gn(1,r.accBeta2);a.forEach((function(l,c){var d=ee.registeredVariables[l];r.accumulatedFirstMoment[c]==null&&(r.accumulatedFirstMoment[c]={originalName:l+"/m",variable:_e((function(){return it(d).variable(!1)}))}),r.accumulatedSecondMoment[c]==null&&(r.accumulatedSecondMoment[c]={originalName:l+"/v",variable:_e((function(){return it(d).variable(!1)}))});var h=Array.isArray(e)?e[c].tensor:e[l];if(h!=null){var v=r.accumulatedFirstMoment[c].variable,m=r.accumulatedSecondMoment[c].variable,g=v.mul(r.beta1).add(h.mul(1-r.beta1)),b=m.mul(r.beta2).add(h.square().mul(1-r.beta2)),x=g.div(o),S=b.div(u);v.assign(g),m.assign(b);var C=x.div(S.sqrt().add(r.epsilon)).mul(-r.learningRate).add(d);d.assign(C)}})),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))})),this.incrementIterations()},n.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&or(this.accumulatedFirstMoment.map((function(e){return e.variable}))),this.accumulatedSecondMoment!=null&&or(this.accumulatedSecondMoment.map((function(e){return e.variable})))},n.prototype.getWeights=function(){return Ae(this,void 0,void 0,(function(){var e;return De(this,(function(r){switch(r.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(e.map((function(a){return{name:a.originalName,tensor:a.variable}})))]}}))}))},n.prototype.setWeights=function(e){return Ae(this,void 0,void 0,(function(){var r,a=this;return De(this,(function(o){switch(o.label){case 0:return[4,this.extractIterations(e)];case 1:return e=o.sent(),_e((function(){a.accBeta1.assign(Cd(a.beta1,a.iterations_+1)),a.accBeta2.assign(Cd(a.beta2,a.iterations_+1))})),r=e.length/2,this.accumulatedFirstMoment=e.slice(0,r).map((function(u){return{originalName:u.name,variable:u.tensor.variable(!1)}})),this.accumulatedSecondMoment=e.slice(r,2*r).map((function(u){return{originalName:u.name,variable:u.tensor.variable(!1)}})),[2]}}))}))},n.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},n.fromConfig=function(e,r){return new e(r.learningRate,r.beta1,r.beta2,r.epsilon)},n.className="Adam",n})(Gi);ji(hU);var pU=(function(t){function n(e,r,a,o,u){o===void 0&&(o=null),u===void 0&&(u=0);var l=t.call(this)||this;return l.learningRate=e,l.beta1=r,l.beta2=a,l.epsilon=o,l.decay=u,l.accumulatedFirstMoment=[],l.accumulatedWeightedInfNorm=[],_e((function(){l.iteration=Ee(0).variable(),l.accBeta1=Ee(r).variable()})),o==null&&(l.epsilon=ee.backend.epsilon()),l}return oa(n,t),n.prototype.applyGradients=function(e){var r=this,a=Array.isArray(e)?e.map((function(o){return o.name})):Object.keys(e);_e((function(){var o=gn(1,r.accBeta1),u=ea(-r.learningRate,r.iteration.mul(r.decay).add(1));a.forEach((function(l,c){var d=ee.registeredVariables[l];r.accumulatedFirstMoment[c]==null&&(r.accumulatedFirstMoment[c]={originalName:l+"/m",variable:it(d).variable(!1)}),r.accumulatedWeightedInfNorm[c]==null&&(r.accumulatedWeightedInfNorm[c]={originalName:l+"/v",variable:it(d).variable(!1)});var h=Array.isArray(e)?e[c].tensor:e[l];if(h!=null){var v=r.accumulatedFirstMoment[c].variable,m=r.accumulatedWeightedInfNorm[c].variable,g=v.mul(r.beta1).add(h.mul(1-r.beta1)),b=m.mul(r.beta2),x=h.abs(),S=b.maximum(x);v.assign(g),m.assign(S);var C=u.div(o).mul(g.div(S.add(r.epsilon))).add(d);d.assign(C)}})),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))})),this.incrementIterations()},n.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&or(this.accumulatedFirstMoment.map((function(e){return e.variable}))),this.accumulatedWeightedInfNorm!=null&&or(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))},n.prototype.getWeights=function(){return Ae(this,void 0,void 0,(function(){return De(this,(function(e){throw new Error("getWeights() is not implemented for Adamax yet.")}))}))},n.prototype.setWeights=function(e){return Ae(this,void 0,void 0,(function(){return De(this,(function(r){throw new Error("setWeights() is not implemented for Adamax yet.")}))}))},n.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},n.fromConfig=function(e,r){return new e(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},n.className="Adamax",n})(Gi);ji(pU);var r_=(function(t){function n(e){var r=t.call(this)||this;return r.learningRate=e,r.setLearningRate(e),r}return oa(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map((function(a){return a.name})):Object.keys(e)).forEach((function(a,o){var u=Array.isArray(e)?e[o].tensor:e[a];if(u!=null){var l=ee.registeredVariables[a];_e((function(){var c=r.c.mul(u).add(l);l.assign(c)}))}})),this.incrementIterations()},n.prototype.setLearningRate=function(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=IF(Ee(-e))},n.prototype.dispose=function(){this.c.dispose()},n.prototype.getWeights=function(){return Ae(this,void 0,void 0,(function(){return De(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()]]}}))}))},n.prototype.setWeights=function(e){return Ae(this,void 0,void 0,(function(){return De(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:if((e=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}}))}))},n.prototype.getConfig=function(){return{learningRate:this.learningRate}},n.fromConfig=function(e,r){return new e(r.learningRate)},n.className="SGD",n})(Gi);ji(r_);var vU=(function(t){function n(e,r,a){a===void 0&&(a=!1);var o=t.call(this,e)||this;return o.learningRate=e,o.momentum=r,o.useNesterov=a,o.accumulations=[],o.m=Ee(o.momentum),o}return oa(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map((function(a){return a.name})):Object.keys(e)).forEach((function(a,o){var u=ee.registeredVariables[a];r.accumulations[o]==null&&(r.accumulations[o]={originalName:a+"/momentum",variable:_e((function(){return it(u).variable(!1)}))});var l=r.accumulations[o].variable,c=Array.isArray(e)?e[o].tensor:e[a];c!=null&&_e((function(){var d,h=r.m.mul(l).add(c);d=r.useNesterov?r.c.mul(c.add(h.mul(r.m))).add(u):r.c.mul(h).add(u),l.assign(h),u.assign(d)}))})),this.incrementIterations()},n.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&or(this.accumulations.map((function(e){return e.variable})))},n.prototype.setMomentum=function(e){this.momentum=e},n.prototype.getWeights=function(){return Ae(this,void 0,void 0,(function(){return De(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulations.map((function(r){return{name:r.originalName,tensor:r.variable}})))]}}))}))},n.prototype.setWeights=function(e){return Ae(this,void 0,void 0,(function(){return De(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),this.accumulations=e.map((function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}})),[2]}}))}))},n.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},n.fromConfig=function(e,r){return new e(r.learningRate,r.momentum,r.useNesterov)},n.className="Momentum",n})(r_);ji(vU);var mU=(function(t){function n(e,r,a,o,u){r===void 0&&(r=.9),a===void 0&&(a=0),o===void 0&&(o=null),u===void 0&&(u=!1);var l=t.call(this)||this;if(l.learningRate=e,l.decay=r,l.momentum=a,l.epsilon=o,l.accumulatedMeanSquares=[],l.accumulatedMoments=[],l.accumulatedMeanGrads=[],l.centered=u,o==null&&(l.epsilon=ee.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return l}return oa(n,t),n.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map((function(a){return a.name})):Object.keys(e)).forEach((function(a,o){var u=ee.registeredVariables[a];r.accumulatedMeanSquares[o]==null&&(r.accumulatedMeanSquares[o]={originalName:a+"/rms",variable:_e((function(){return it(u).variable(!1)}))}),r.accumulatedMoments[o]==null&&(r.accumulatedMoments[o]={originalName:a+"/momentum",variable:_e((function(){return it(u).variable(!1)}))}),r.accumulatedMeanGrads[o]==null&&r.centered&&(r.accumulatedMeanGrads[o]={originalName:a+"/mg",variable:_e((function(){return it(u).variable(!1)}))});var l=Array.isArray(e)?e[o].tensor:e[a];if(l!=null){var c=r.accumulatedMeanSquares[o].variable,d=r.accumulatedMoments[o].variable;_e((function(){var h=c.mul(r.decay).add(l.square().mul(1-r.decay));if(r.centered){var v=r.accumulatedMeanGrads[o].variable,m=v.mul(r.decay).add(l.mul(1-r.decay)),g=d.mul(r.momentum).add(l.mul(r.learningRate).div(h.sub(m.square().add(r.epsilon)).sqrt()));c.assign(h),v.assign(m),d.assign(g);var b=u.sub(g);u.assign(b)}else{var x=c.mul(r.decay).add(l.square().mul(1-r.decay));g=d.mul(r.momentum).add(l.mul(r.learningRate).div(x.add(r.epsilon).sqrt())),c.assign(x),d.assign(g),b=u.sub(g),u.assign(b)}}))}})),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&or(this.accumulatedMeanSquares.map((function(e){return e.variable}))),this.accumulatedMeanGrads!=null&&this.centered&&or(this.accumulatedMeanGrads.map((function(e){return e.variable}))),this.accumulatedMoments!=null&&or(this.accumulatedMoments.map((function(e){return e.variable})))},n.prototype.getWeights=function(){return Ae(this,void 0,void 0,(function(){var e;return De(this,(function(r){switch(r.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(e.map((function(a){return{name:a.originalName,tensor:a.variable}})))]}}))}))},n.prototype.setWeights=function(e){return Ae(this,void 0,void 0,(function(){var r;return De(this,(function(a){switch(a.label){case 0:return[4,this.extractIterations(e)];case 1:return e=a.sent(),r=this.centered?e.length/3:e.length/2,this.accumulatedMeanSquares=e.slice(0,r).map((function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),this.accumulatedMoments=e.slice(r,2*r).map((function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*r,3*r).map((function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}))),[2]}}))}))},n.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},n.fromConfig=function(e,r){return new e(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},n.className="RMSProp",n})(Gi);ji(mU);Ut.prototype.squaredDifference=function(t){return yR(this,t)},ue=H6;var _g=function(t,n){return _g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var a in r)r.hasOwnProperty(a)&&(e[a]=r[a])},_g(t,n)};function je(t,n){_g(t,n);function e(){this.constructor=t}t.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}var Wn=function(){return Wn=Object.assign||function(n){for(var e,r=1,a=arguments.length;r<a;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Wn.apply(this,arguments)};function Ie(t,n,e,r){function a(o){return o instanceof e?o:new e(function(u){u(o)})}return new(e||(e=Promise))(function(o,u){function l(h){try{d(r.next(h))}catch(v){u(v)}}function c(h){try{d(r.throw(h))}catch(v){u(v)}}function d(h){h.done?o(h.value):a(h.value).then(l,c)}d((r=r.apply(t,[])).next())})}function Be(t,n){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,a,o,u;return u={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(d){return function(h){return c([d,h])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,a&&(o=d[0]&2?a.return:d[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,d[1])).done)return o;switch(a=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,a=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){e=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){e.label=d[1];break}if(d[0]===6&&e.label<o[1]){e.label=o[1],o=d;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(d);break}o[2]&&e.ops.pop(),e.trys.pop();continue}d=n.call(t,e)}catch(h){d=[6,h],a=0}finally{r=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Rl(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),a=0,n=0;n<e;n++)for(var o=arguments[n],u=0,l=o.length;u<l;u++,a++)r[a]=o[u];return r}var Oi=(function(){function t(n,e){if(!Ii(n)||!Ii(e))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:n,height:e}));this._width=n,this._height=e}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),t.prototype.reverse=function(){return new t(1/this.width,1/this.height)},t})();function ih(t,n){return t instanceof Ut&&t.shape.length===n}function gU(t){return ih(t,2)}function sh(t){return ih(t,3)}function Ko(t){return ih(t,4)}function yU(t){return t%1!==0}function qS(t){return t%2===0}function a_(t,n){n===void 0&&(n=2);var e=Math.pow(10,n);return Math.floor(t*e)/e}function $S(t){return t&&t.width&&t.height}function bU(t,n){var e=t.width,r=t.height,a=n/Math.max(r,e);return new Oi(Math.round(e*a),Math.round(r*a))}function Vy(t){return t.reduce(function(n,e){return n.add(e)},new pt(0,0)).div(new pt(t.length,t.length))}function Fl(t,n,e){return Array(t).fill(0).map(function(r,a){return n+a*e})}function Ii(t){return!!t&&t!==1/0&&t!==-1/0&&!isNaN(t)||t===0}function KS(t){return Ii(t)&&0<=t&&t<=1}var pt=(function(){function t(n,e){this._x=n,this._y=e}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),t.prototype.add=function(n){return new t(this.x+n.x,this.y+n.y)},t.prototype.sub=function(n){return new t(this.x-n.x,this.y-n.y)},t.prototype.mul=function(n){return new t(this.x*n.x,this.y*n.y)},t.prototype.div=function(n){return new t(this.x/n.x,this.y/n.y)},t.prototype.abs=function(){return new t(Math.abs(this.x),Math.abs(this.y))},t.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y))},t})(),Aa=(function(){function t(n,e){e===void 0&&(e=!0);var r=n||{},a=[r.left,r.top,r.right,r.bottom].every(Ii),o=[r.x,r.y,r.width,r.height].every(Ii);if(!o&&!a)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var u=o?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],l=u[0],c=u[1],d=u[2],h=u[3];t.assertIsValidBox({x:l,y:c,width:d,height:h},"Box.constructor",e),this._x=l,this._y=c,this._width=d,this._height=h}return t.isRect=function(n){return!!n&&[n.x,n.y,n.width,n.height].every(Ii)},t.assertIsValidBox=function(n,e,r){if(r===void 0&&(r=!1),!t.isRect(n))throw new Error(e+" - invalid box: "+JSON.stringify(n)+", expected object with properties x, y, width, height");if(!r&&(n.width<0||n.height<0))throw new Error(e+" - width ("+n.width+") and height ("+n.height+") must be positive numbers")},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeft",{get:function(){return new pt(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRight",{get:function(){return new pt(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeft",{get:function(){return new pt(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return new pt(this.right,this.bottom)},enumerable:!0,configurable:!0}),t.prototype.round=function(){var n=[this.x,this.y,this.width,this.height].map(function(u){return Math.round(u)}),e=n[0],r=n[1],a=n[2],o=n[3];return new t({x:e,y:r,width:a,height:o})},t.prototype.floor=function(){var n=[this.x,this.y,this.width,this.height].map(function(u){return Math.floor(u)}),e=n[0],r=n[1],a=n[2],o=n[3];return new t({x:e,y:r,width:a,height:o})},t.prototype.toSquare=function(){var n=this,e=n.x,r=n.y,a=n.width,o=n.height,u=Math.abs(a-o);return a<o&&(e-=u/2,a+=u),o<a&&(r-=u/2,o+=u),new t({x:e,y:r,width:a,height:o})},t.prototype.rescale=function(n){var e=$S(n)?n.width:n,r=$S(n)?n.height:n;return new t({x:this.x*e,y:this.y*r,width:this.width*e,height:this.height*r})},t.prototype.pad=function(n,e){var r=[this.x-n/2,this.y-e/2,this.width+n,this.height+e],a=r[0],o=r[1],u=r[2],l=r[3];return new t({x:a,y:o,width:u,height:l})},t.prototype.clipAtImageBorders=function(n,e){var r=this,a=r.x,o=r.y,u=r.right,l=r.bottom,c=Math.max(a,0),d=Math.max(o,0),h=u-c,v=l-d,m=Math.min(h,n-c),g=Math.min(v,e-d);return new t({x:c,y:d,width:m,height:g}).floor()},t.prototype.shift=function(n,e){var r=this,a=r.width,o=r.height,u=this.x+n,l=this.y+e;return new t({x:u,y:l,width:a,height:o})},t.prototype.padAtBorders=function(n,e){var r=this.width+1,a=this.height+1,o=1,u=1,l=r,c=a,d=this.left,h=this.top,v=this.right,m=this.bottom;return v>e&&(l=-v+e+r,v=e),m>n&&(c=-m+n+a,m=n),d<1&&(c=2-d,d=1),h<1&&(c=2-h,h=1),{dy:u,edy:c,dx:o,edx:l,y:h,ey:m,x:d,ex:v,w:r,h:a}},t.prototype.calibrate=function(n){return new t({left:this.left+n.left*this.width,top:this.top+n.top*this.height,right:this.right+n.right*this.width,bottom:this.bottom+n.bottom*this.height}).toSquare().round()},t})(),uh=(function(t){je(n,t);function n(e,r,a,o,u){return u===void 0&&(u=!1),t.call(this,{left:e,top:r,right:a,bottom:o},u)||this}return n})(Aa),o_=(function(){function t(n,e,r,a,o){this._imageDims=new Oi(o.width,o.height),this._score=n,this._classScore=e,this._className=r,this._box=new Aa(a).rescale(this._imageDims)}return Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeBox",{get:function(){return new Aa(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),t.prototype.forSize=function(n,e){return new t(this.score,this.classScore,this.className,this.relativeBox,{width:n,height:e})},t})(),Tr=(function(t){je(n,t);function n(e,r,a){return t.call(this,e,e,"",r,a)||this}return n.prototype.forSize=function(e,r){var a=t.prototype.forSize.call(this,e,r),o=a.score,u=a.relativeBox,l=a.imageDims;return new n(o,u,l)},n})(o_);function xU(t,n,e){e===void 0&&(e=!0);var r=Math.max(0,Math.min(t.right,n.right)-Math.max(t.left,n.left)),a=Math.max(0,Math.min(t.bottom,n.bottom)-Math.max(t.top,n.top)),o=r*a;return e?o/(t.area+n.area-o):o/Math.min(t.area,n.area)}function wU(t){var n=t.map(function(l){return l.x}),e=t.map(function(l){return l.y}),r=n.reduce(function(l,c){return c<l?c:l},1/0),a=e.reduce(function(l,c){return c<l?c:l},1/0),o=n.reduce(function(l,c){return l<c?c:l},0),u=e.reduce(function(l,c){return l<c?c:l},0);return new uh(r,a,o,u)}function Pl(t,n,e,r){r===void 0&&(r=!0);for(var a=n.map(function(l,c){return{score:l,boxIndex:c}}).sort(function(l,c){return l.score-c.score}).map(function(l){return l.boxIndex}),o=[],u=function(){var l=a.pop();o.push(l);for(var c=a,d=[],h=0;h<c.length;h++){var v=c[h],m=t[l],g=t[v];d.push(xU(m,g,r))}a=a.filter(function(b,x){return d[x]<=e})};a.length>0;)u();return o}function ac(t,n){return _e(function(){var e=n[0],r=n[1],a=n[2],o=_a(Rl(t.shape.slice(0,3),[1]),e),u=_a(Rl(t.shape.slice(0,3),[1]),r),l=_a(Rl(t.shape.slice(0,3),[1]),a),c=pn([o,u,l],3);return gn(t,c)})}function SU(t,n){return n===void 0&&(n=!1),_e(function(){var e=t.shape.slice(1),r=e[0],a=e[1];if(r===a)return t;var o=Math.abs(r-a),u=Math.round(o*(n?.5:1)),l=r>a?2:1,c=function(g){var b=t.shape.slice();return b[l]=g,_a(b,0)},d=c(u),h=o-d.shape[l],v=n&&h?c(h):null,m=[v,t,d].filter(function(g){return!!g}).map(function(g){return g.toFloat()});return pn(m,l)})}function Lm(t){return 1/(1+Math.exp(-t))}var jy=(function(t){je(n,t);function n(e,r,a,o,u){return u===void 0&&(u=!1),t.call(this,{x:e,y:r,width:a,height:o},u)||this}return n})(Aa),CU=.5,EU=.43,RU=.45,Ll=(function(){function t(n,e,r){r===void 0&&(r=new pt(0,0));var a=e.width,o=e.height;this._imgDims=new Oi(a,o),this._shift=r,this._positions=n.map(function(u){return u.mul(new pt(a,o)).add(r)})}return Object.defineProperty(t.prototype,"shift",{get:function(){return new pt(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativePositions",{get:function(){var n=this;return this._positions.map(function(e){return e.sub(n._shift).div(new pt(n.imageWidth,n.imageHeight))})},enumerable:!0,configurable:!0}),t.prototype.forSize=function(n,e){return new this.constructor(this.relativePositions,{width:n,height:e})},t.prototype.shiftBy=function(n,e){return new this.constructor(this.relativePositions,this._imgDims,new pt(n,e))},t.prototype.shiftByPoint=function(n){return this.shiftBy(n.x,n.y)},t.prototype.align=function(n,e){if(e===void 0&&(e={}),n){var r=n instanceof Tr?n.box.floor():new Aa(n);return this.shiftBy(r.x,r.y).align(null,e)}var a=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},e),o=a.useDlibAlignment,u=a.minBoxPadding;return o?this.alignDlib():this.alignMinBbox(u)},t.prototype.alignDlib=function(){var n=this.getRefPointsForAlignment(),e=n[0],r=n[1],a=n[2],o=function(v){return a.sub(v).magnitude()},u=(o(e)+o(r))/2,l=Math.floor(u/RU),c=Vy(n),d=Math.floor(Math.max(0,c.x-CU*l)),h=Math.floor(Math.max(0,c.y-EU*l));return new jy(d,h,Math.min(l,this.imageWidth+d),Math.min(l,this.imageHeight+h))},t.prototype.alignMinBbox=function(n){var e=wU(this.positions);return e.pad(e.width*n,e.height*n)},t.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},t})(),_U=(function(t){je(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getRefPointsForAlignment=function(){var e=this.positions;return[e[0],e[1],Vy([e[3],e[4]])]},n})(Ll),TU=(function(t){je(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getJawOutline=function(){return this.positions.slice(0,17)},n.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},n.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},n.prototype.getNose=function(){return this.positions.slice(27,36)},n.prototype.getLeftEye=function(){return this.positions.slice(36,42)},n.prototype.getRightEye=function(){return this.positions.slice(42,48)},n.prototype.getMouth=function(){return this.positions.slice(48,68)},n.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(Vy)},n})(Ll),XS=(function(){function t(n,e){this._label=n,this._distance=e}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),t.prototype.toString=function(n){return n===void 0&&(n=!0),""+this.label+(n?" ("+a_(this.distance)+")":"")},t})(),YS=(function(t){je(n,t);function n(e,r){var a=t.call(this,e)||this;return a._label=r,a}return n.assertIsValidLabeledBox=function(e,r){if(Aa.assertIsValidBox(e,r),!Ii(e.label))throw new Error(r+" - expected property label ("+e.label+") to be a number")},Object.defineProperty(n.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),n})(Aa),Pf=(function(){function t(n,e){if(typeof n!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(e)||e.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=n,this._descriptors=e}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(n){return Array.from(n)})}},t.fromJSON=function(n){var e=n.descriptors.map(function(r){return new Float32Array(r)});return new t(n.label,e)},t})();(function(t){je(n,t);function n(e,r,a,o){var u=t.call(this,e,r)||this;return u._score=a,u._classScore=o,u}return n.assertIsValidPredictedBox=function(e,r){if(YS.assertIsValidLabeledBox(e,r),!KS(e.score)||!KS(e.classScore))throw new Error(r+" - expected properties score ("+e.score+") and ("+e.classScore+") to be a number between [0, 1]")},Object.defineProperty(n.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),n})(YS);function _d(t){return t.detection instanceof Tr}function zl(t,n){var e={detection:n};return Object.assign({},t,e)}function i_(){var t=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},n=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:t,readFile:n}}function s_(t){var n="";if(!t)try{t=require("fs")}catch(r){n=r.toString()}var e=t?function(r){return new Promise(function(a,o){t.readFile(r,function(u,l){return u?o(u):a(l)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+n)};return{readFile:e}}function u_(){var t=global.Canvas||global.HTMLCanvasElement,n=global.Image||global.HTMLImageElement,e=function(){if(t)return new t;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(n)return new n;throw new Error("createImageElement - missing Image implementation for nodejs environment")},a=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},o=s_();return Wn({Canvas:t||(function(){function u(){}return u})(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||(function(){function u(){}return u})(),Image:n||(function(){function u(){}return u})(),ImageData:global.ImageData||(function(){function u(){}return u})(),Video:global.HTMLVideoElement||(function(){function u(){}return u})(),createCanvasElement:e,createImageElement:r,fetch:a},o)}function l_(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function c_(){return typeof global=="object"&&typeof require=="function"&&typeof j_<"u"&&typeof process<"u"&&!!process.version}var hn;function AU(){if(!hn)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return hn}function Tg(t){hn=t}function Gy(){l_()&&Tg(i_()),c_()&&Tg(u_())}function DU(t){if(hn||Gy(),!hn)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var n=t.Canvas,e=n===void 0?hn.Canvas:n,r=t.Image,a=r===void 0?hn.Image:r;hn.Canvas=e,hn.Image=a,hn.createCanvasElement=t.createCanvasElement||(function(){return new e}),hn.createImageElement=t.createImageElement||(function(){return new a}),hn.ImageData=t.ImageData||hn.ImageData,hn.Video=t.Video||hn.Video,hn.fetch=t.fetch||hn.fetch,hn.readFile=t.readFile||hn.readFile}var qn={getEnv:AU,setEnv:Tg,initialize:Gy,createBrowserEnv:i_,createFileSystem:s_,createNodejsEnv:u_,monkeyPatch:DU,isBrowser:l_,isNodejs:c_};Gy();function qy(t){return!qn.isNodejs()&&typeof t=="string"?document.getElementById(t):t}function so(t){var n=qn.getEnv(),e=n.Canvas,r=n.CanvasRenderingContext2D;if(t instanceof r)return t;var a=qy(t);if(!(a instanceof e))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var o=a.getContext("2d");if(!o)throw new Error("resolveContext2d - canvas 2d context is null");return o}var jo;(function(t){t.TOP_LEFT="TOP_LEFT",t.TOP_RIGHT="TOP_RIGHT",t.BOTTOM_LEFT="BOTTOM_LEFT",t.BOTTOM_RIGHT="BOTTOM_RIGHT"})(jo||(jo={}));var f_=(function(){function t(n){n===void 0&&(n={});var e=n.anchorPosition,r=n.backgroundColor,a=n.fontColor,o=n.fontSize,u=n.fontStyle,l=n.padding;this.anchorPosition=e||jo.TOP_LEFT,this.backgroundColor=r||"rgba(0, 0, 0, 0.5)",this.fontColor=a||"rgba(255, 255, 255, 1)",this.fontSize=o||14,this.fontStyle=u||"Georgia",this.padding=l||4}return t})(),kU=(function(){function t(n,e,r){r===void 0&&(r={}),this.text=typeof n=="string"?[n]:n instanceof t?n.text:n,this.anchor=e,this.options=new f_(r)}return t.prototype.measureWidth=function(n){var e=this.options.padding;return this.text.map(function(r){return n.measureText(r).width}).reduce(function(r,a){return r<a?a:r},0)+2*e},t.prototype.measureHeight=function(){var n=this.options,e=n.fontSize,r=n.padding;return this.text.length*e+2*r},t.prototype.getUpperLeft=function(n,e){var r=this.options.anchorPosition,a=r===jo.BOTTOM_RIGHT||r===jo.TOP_RIGHT,o=r===jo.BOTTOM_LEFT||r===jo.BOTTOM_RIGHT,u=this.measureWidth(n),l=this.measureHeight(),c=a?this.anchor.x-u:this.anchor.x,d=o?this.anchor.y-l:this.anchor.y;if(e){var h=e.width,v=e.height,m=Math.max(Math.min(c,h-u),0),g=Math.max(Math.min(d,v-l),0);return{x:m,y:g}}return{x:c,y:d}},t.prototype.draw=function(n){var e=qy(n),r=so(e),a=this.options,o=a.backgroundColor,u=a.fontColor,l=a.fontSize,c=a.fontStyle,d=a.padding;r.font=l+"px "+c;var h=this.measureWidth(r),v=this.measureHeight();r.fillStyle=o;var m=this.getUpperLeft(r,e);r.fillRect(m.x,m.y,h,v),r.fillStyle=u,this.text.forEach(function(g,b){var x=d+m.x,S=d+m.y+(b+1)*l;r.fillText(g,x,S)})},t})(),NU=(function(){function t(n){n===void 0&&(n={});var e=n.boxColor,r=n.lineWidth,a=n.label,o=n.drawLabelOptions;this.boxColor=e||"rgba(0, 0, 255, 1)",this.lineWidth=r||2,this.label=a;var u={anchorPosition:jo.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new f_(Object.assign({},u,o))}return t})(),MU=(function(){function t(n,e){e===void 0&&(e={}),this.box=new Aa(n),this.options=new NU(e)}return t.prototype.draw=function(n){var e=so(n),r=this.options,a=r.boxColor,o=r.lineWidth,u=this.box,l=u.x,c=u.y,d=u.width,h=u.height;e.strokeStyle=a,e.lineWidth=o,e.strokeRect(l,c,d,h);var v=this.options.label;v&&new kU([v],{x:l-o/2,y:c},this.options.drawLabelOptions).draw(n)},t})();function OU(t,n){var e=Array.isArray(n)?n:[n];e.forEach(function(r){var a=r instanceof Tr?r.score:_d(r)?r.detection.score:void 0,o=r instanceof Tr?r.box:_d(r)?r.detection.box:new Aa(r),u=a?""+a_(a):void 0;new MU(o,{label:u}).draw(t)})}function d_(t){var n=qn.getEnv(),e=n.Image,r=n.Video;return t instanceof e&&t.complete||t instanceof r&&t.readyState>=3}function IU(t){return new Promise(function(n,e){if(t instanceof qn.getEnv().Canvas||d_(t))return n();function r(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",r),o.currentTarget.removeEventListener("error",a),n(o))}function a(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",r),o.currentTarget.removeEventListener("error",a),e(o))}t.addEventListener("load",r),t.addEventListener("error",a)})}function $y(t){var n=qn.getEnv(),e=n.Image,r=n.Video;return t instanceof e?new Oi(t.naturalWidth,t.naturalHeight):t instanceof r?new Oi(t.videoWidth,t.videoHeight):new Oi(t.width,t.height)}function lh(t){var n=t.width,e=t.height,r=qn.getEnv().createCanvasElement,a=r();return a.width=n,a.height=e,a}function Ky(t,n){var e=qn.getEnv().ImageData;if(!(t instanceof e)&&!d_(t))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=$y(t),a=r.width,o=r.height,u=lh({width:a,height:o});return t instanceof e?so(u).putImageData(t,0,0):so(u).drawImage(t,0,0,a,o),u}function BU(t,n){return Ie(this,void 0,void 0,function(){var e,r,a,o,u,l;return Be(this,function(c){switch(c.label){case 0:return e=qn.getEnv().createCanvasElement(),r=t.shape.slice(Ko(t)?1:0),a=r[0],o=r[1],u=r[2],l=_e(function(){return t.as3D(a,o,u).toInt()}),[4,Hy.toPixels(l,e)];case 1:return c.sent(),l.dispose(),[2,e]}})})}function QS(t){var n=qn.getEnv(),e=n.Image,r=n.Canvas,a=n.Video;return t instanceof e||t instanceof r||t instanceof a}function FU(t,n,e){e===void 0&&(e=!1);var r=qn.getEnv(),a=r.Image,o=r.Canvas;if(!(t instanceof a||t instanceof o))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var u=$y(t),l=n/Math.max(u.height,u.width),c=l*u.width,d=l*u.height,h=lh({width:n,height:n}),v=t instanceof o?t:Ky(t),m=Math.abs(c-d)/2,g=e&&c<d?m:0,b=e&&d<c?m:0;return so(h).drawImage(v,g,b,c,d),h}var Td=(function(){function t(n,e){var r=this;if(e===void 0&&(e=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(n))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+n);this._treatAsBatchInput=e,this._batchSize=n.length,n.forEach(function(a,o){if(sh(a)){r._imageTensors[o]=a,r._inputDimensions[o]=a.shape;return}if(Ko(a)){var u=a.shape[0];if(u!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+u+" passed, but not supported in input array");r._imageTensors[o]=a,r._inputDimensions[o]=a.shape.slice(1);return}var l=a instanceof qn.getEnv().Canvas?a:Ky(a);r._canvases[o]=l,r._inputDimensions[o]=[l.height,l.width,3]})}return Object.defineProperty(t.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reshapedInputDimensions",{get:function(){var n=this;return Fl(this.batchSize,0,1).map(function(e,r){return n.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),t.prototype.getInput=function(n){return this.canvases[n]||this.imageTensors[n]},t.prototype.getInputDimensions=function(n){return this._inputDimensions[n]},t.prototype.getInputHeight=function(n){return this._inputDimensions[n][0]},t.prototype.getInputWidth=function(n){return this._inputDimensions[n][1]},t.prototype.getReshapedInputDimensions=function(n){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var e=this.getInputWidth(n),r=this.getInputHeight(n);return bU({width:e,height:r},this.inputSize)},t.prototype.toBatchTensor=function(n,e){var r=this;return e===void 0&&(e=!0),this._inputSize=n,_e(function(){var a=Fl(r.batchSize,0,1).map(function(u){var l=r.getInput(u);if(l instanceof Ut){var c=Ko(l)?l:l.expandDims();return c=SU(c,e),(c.shape[1]!==n||c.shape[2]!==n)&&(c=Fy.resizeBilinear(c,[n,n])),c.as3D(n,n,3)}if(l instanceof qn.getEnv().Canvas)return Hy.fromPixels(FU(l,n,e));throw new Error("toBatchTensor - at batchIdx "+u+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+l)}),o=_r(a.map(function(u){return u.toFloat()})).as4D(r.batchSize,n,n,3);return o})},t})();function Cn(t){return Ie(this,void 0,void 0,function(){var n,e,r;return Be(this,function(a){switch(a.label){case 0:if(t instanceof Td)return[2,t];if(n=Array.isArray(t)?t:[t],!n.length)throw new Error("toNetInput - empty array passed as input");return e=function(o){return Array.isArray(t)?" at input index "+o+":":""},r=n.map(qy),r.forEach(function(o,u){if(!QS(o)&&!sh(o)&&!Ko(o))throw typeof n[u]=="string"?new Error("toNetInput -"+e(u)+" string passed, but could not resolve HTMLElement for element id "+n[u]):new Error("toNetInput -"+e(u)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(Ko(o)){var l=o.shape[0];if(l!==1)throw new Error("toNetInput -"+e(u)+" tf.Tensor4D with batchSize "+l+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(o){return QS(o)&&IU(o)}))];case 1:return a.sent(),[2,new Td(r,Array.isArray(t))]}})})}function Xy(t,n){return Ie(this,void 0,void 0,function(){var e,r,a,o,u,l,c;return Be(this,function(d){switch(d.label){case 0:return e=qn.getEnv().Canvas,r=t,t instanceof e?[3,5]:[4,Cn(t)];case 1:if(a=d.sent(),a.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return o=a.getInput(0),o instanceof e?(u=o,[3,4]):[3,2];case 2:return[4,BU(o)];case 3:u=d.sent(),d.label=4;case 4:r=u,d.label=5;case 5:return l=so(r),c=n.map(function(h){return h instanceof Tr?h.forSize(r.width,r.height).box.floor():h}).map(function(h){return h.clipAtImageBorders(r.width,r.height)}),[2,c.map(function(h){var v=h.x,m=h.y,g=h.width,b=h.height,x=lh({width:g,height:b});return so(x).putImageData(l.getImageData(v,m,g,b),0,0),x})]}})})}function Yy(t,n){return Ie(this,void 0,void 0,function(){return Be(this,function(e){if(!sh(t)&&!Ko(t))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(Ko(t)&&t.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,_e(function(){var r=t.shape.slice(Ko(t)?1:0),a=r[0],o=r[1],u=r[2],l=n.map(function(d){return d instanceof Tr?d.forSize(o,a).box:d}).map(function(d){return d.clipAtImageBorders(o,a)}),c=l.map(function(d){var h=d.x,v=d.y,m=d.width,g=d.height;return zR(t.as3D(a,o,u),[v,h,0],[g,m,u])});return c})]})})}function PU(t,n){return Ie(this,void 0,void 0,function(){var e,r;return Be(this,function(a){switch(a.label){case 0:return e=qn.getEnv().fetch,[4,e(t,n)];case 1:if(r=a.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function LU(t){return Ie(this,void 0,void 0,function(){return Be(this,function(n){switch(n.label){case 0:return[4,PU(t)];case 1:return[2,n.sent().json()]}})})}function h_(t,n){var e=n+"-weights_manifest.json";if(!t)return{modelBaseUri:"",manifestUri:e};if(t==="/")return{modelBaseUri:"/",manifestUri:"/"+e};var r=t.startsWith("http://")?"http://":t.startsWith("https://")?"https://":"";t=t.replace(r,"");var a=t.split("/").filter(function(l){return l}),o=t.endsWith(".json")?a[a.length-1]:e,u=r+(t.endsWith(".json")?a.slice(0,a.length-1):a).join("/");return u=t.startsWith("/")?"/"+u:u,{modelBaseUri:u,manifestUri:u==="/"?"/"+o:u+"/"+o}}function zU(t,n){return Ie(this,void 0,void 0,function(){var e,r,a,o;return Be(this,function(u){switch(u.label){case 0:return e=h_(t,n),r=e.manifestUri,a=e.modelBaseUri,[4,LU(r)];case 1:return o=u.sent(),[2,n_.loadWeights(o,a)]}})})}function UU(t,n,e){e===void 0&&(e=!1);var r=e?$y(n):n,a=r.width,o=r.height;return t.width=a,t.height=o,{width:a,height:o}}var ho=(function(){function t(n){this._name=n,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(t.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),t.prototype.getParamFromPath=function(n){var e=this.traversePropertyPath(n),r=e.obj,a=e.objProp;return r[a]},t.prototype.reassignParamFromPath=function(n,e){var r=this.traversePropertyPath(n),a=r.obj,o=r.objProp;a[o].dispose(),a[o]=e},t.prototype.getParamList=function(){var n=this;return this._paramMappings.map(function(e){var r=e.paramPath;return{path:r,tensor:n.getParamFromPath(r)}})},t.prototype.getTrainableParams=function(){return this.getParamList().filter(function(n){return n.tensor instanceof ru})},t.prototype.getFrozenParams=function(){return this.getParamList().filter(function(n){return!(n.tensor instanceof ru)})},t.prototype.variable=function(){var n=this;this.getFrozenParams().forEach(function(e){var r=e.path,a=e.tensor;n.reassignParamFromPath(r,a.variable())})},t.prototype.freeze=function(){var n=this;this.getTrainableParams().forEach(function(e){var r=e.path,a=e.tensor,o=On(a.dataSync());a.dispose(),n.reassignParamFromPath(r,o)})},t.prototype.dispose=function(n){n===void 0&&(n=!0),this.getParamList().forEach(function(e){if(n&&e.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+e.path);e.tensor.dispose()}),this._params=void 0},t.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(n){var e=n.tensor;return Array.from(e.dataSync())}).reduce(function(n,e){return n.concat(e)}))},t.prototype.load=function(n){return Ie(this,void 0,void 0,function(){return Be(this,function(e){switch(e.label){case 0:return n instanceof Float32Array?(this.extractWeights(n),[2]):[4,this.loadFromUri(n)];case 1:return e.sent(),[2]}})})},t.prototype.loadFromUri=function(n){return Ie(this,void 0,void 0,function(){var e;return Be(this,function(r){switch(r.label){case 0:if(n&&typeof n!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,zU(n,this.getDefaultModelName())];case 1:return e=r.sent(),this.loadFromWeightMap(e),[2]}})})},t.prototype.loadFromDisk=function(n){return Ie(this,void 0,void 0,function(){var e,r,a,o,u,l,c,d,h,v;return Be(this,function(m){switch(m.label){case 0:if(n&&typeof n!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return e=qn.getEnv().readFile,r=h_(n,this.getDefaultModelName()),a=r.manifestUri,o=r.modelBaseUri,u=function(g){return Promise.all(g.map(function(b){return e(b).then(function(x){return x.buffer})}))},l=n_.weightsLoaderFactory(u),h=(d=JSON).parse,[4,e(a)];case 1:return c=h.apply(d,[m.sent().toString()]),[4,l(c,o)];case 2:return v=m.sent(),this.loadFromWeightMap(v),[2]}})})},t.prototype.loadFromWeightMap=function(n){var e=this.extractParamsFromWeigthMap(n),r=e.paramMappings,a=e.params;this._paramMappings=r,this._params=a},t.prototype.extractWeights=function(n){var e=this.extractParams(n),r=e.paramMappings,a=e.params;this._paramMappings=r,this._params=a},t.prototype.traversePropertyPath=function(n){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var e=n.split("/").reduce(function(o,u){if(!o.nextObj.hasOwnProperty(u))throw new Error("traversePropertyPath - object does not have property "+u+", for path "+n);return{obj:o.nextObj,objProp:u,nextObj:o.nextObj[u]}},{nextObj:this.params}),r=e.obj,a=e.objProp;if(!r||!a||!(r[a]instanceof Ut))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+n);return{obj:r,objProp:a}},t})();function Cr(t,n,e){return _e(function(){var r=Ny(t,n.depthwise_filter,n.pointwise_filter,e,"same");return r=Je(r,n.bias),r})}function zm(t,n,e){return e===void 0&&(e=!1),_e(function(){var r=Wt(e?Je($r(t,n.conv0.filters,[2,2],"same"),n.conv0.bias):Cr(t,n.conv0,[2,2])),a=Cr(r,n.conv1,[1,1]),o=Wt(Je(r,a)),u=Cr(o,n.conv2,[1,1]);return Wt(Je(r,Je(a,u)))})}function Lf(t,n,e,r){return e===void 0&&(e=!1),r===void 0&&(r=!0),_e(function(){var a=Wt(e?Je($r(t,n.conv0.filters,r?[2,2]:[1,1],"same"),n.conv0.bias):Cr(t,n.conv0,r?[2,2]:[1,1])),o=Cr(a,n.conv1,[1,1]),u=Wt(Je(a,o)),l=Cr(u,n.conv2,[1,1]),c=Wt(Je(a,Je(o,l))),d=Cr(c,n.conv3,[1,1]);return Wt(Je(a,Je(o,Je(l,d))))})}function na(t,n,e,r){return e===void 0&&(e="same"),r===void 0&&(r=!1),_e(function(){var a=Je($r(t,n.filters,[1,1],e),n.bias);return r?Wt(a):a})}function po(t,n){Object.keys(t).forEach(function(e){n.some(function(r){return r.originalPath===e})||t[e].dispose()})}function ch(t,n){return function(e,r,a,o){var u=rr(t(e*r*a*a),[a,a,e,r]),l=ln(t(r));return n.push({paramPath:o+"/filters"},{paramPath:o+"/bias"}),{filters:u,bias:l}}}function Qy(t,n){return function(e,r,a){var o=qo(t(e*r),[e,r]),u=ln(t(r));return n.push({paramPath:a+"/weights"},{paramPath:a+"/bias"}),{weights:o,bias:u}}}var p_=(function(){function t(n,e,r){this.depthwise_filter=n,this.pointwise_filter=e,this.bias=r}return t})();function Zy(t,n){return function(e,r,a){var o=rr(t(9*e),[3,3,e,1]),u=rr(t(e*r),[1,1,e,r]),l=ln(t(r));return n.push({paramPath:a+"/depthwise_filter"},{paramPath:a+"/pointwise_filter"},{paramPath:a+"/bias"}),new p_(o,u,l)}}function Jy(t){return function(n){var e=t(n+"/depthwise_filter",4),r=t(n+"/pointwise_filter",4),a=t(n+"/bias",1);return new p_(e,r,a)}}function Jo(t,n){return function(e,r,a){var o=t[e];if(!ih(o,r))throw new Error("expected weightMap["+e+"] to be a Tensor"+r+"D, instead have "+o);return n.push({originalPath:e,paramPath:a||e}),o}}function vo(t){var n=t;function e(a){var o=n.slice(0,a);return n=n.slice(a),o}function r(){return n}return{extractWeights:e,getRemainingWeights:r}}function v_(t,n){var e=ch(t,n),r=Zy(t,n);function a(u,l,c,d){d===void 0&&(d=!1);var h=d?e(u,l,3,c+"/conv0"):r(u,l,c+"/conv0"),v=r(l,l,c+"/conv1"),m=r(l,l,c+"/conv2");return{conv0:h,conv1:v,conv2:m}}function o(u,l,c,d){d===void 0&&(d=!1);var h=a(u,l,c,d),v=h.conv0,m=h.conv1,g=h.conv2,b=r(l,l,c+"/conv3");return{conv0:v,conv1:m,conv2:g,conv3:b}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:o}}function WU(t){var n=[],e=vo(t),r=e.extractWeights,a=e.getRemainingWeights,o=v_(r,n).extractDenseBlock4Params,u=o(3,32,"dense0",!0),l=o(32,64,"dense1"),c=o(64,128,"dense2"),d=o(128,256,"dense3");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:n,params:{dense0:u,dense1:l,dense2:c,dense3:d}}}function m_(t){return function(n){var e=t(n+"/filters",4),r=t(n+"/bias",1);return{filters:e,bias:r}}}function g_(t,n){var e=Jo(t,n),r=m_(e),a=Jy(e);function o(l,c){c===void 0&&(c=!1);var d=c?r(l+"/conv0"):a(l+"/conv0"),h=a(l+"/conv1"),v=a(l+"/conv2");return{conv0:d,conv1:h,conv2:v}}function u(l,c){c===void 0&&(c=!1);var d=c?r(l+"/conv0"):a(l+"/conv0"),h=a(l+"/conv1"),v=a(l+"/conv2"),m=a(l+"/conv3");return{conv0:d,conv1:h,conv2:v,conv3:m}}return{extractDenseBlock3Params:o,extractDenseBlock4Params:u}}function HU(t){var n=[],e=g_(t,n).extractDenseBlock4Params,r={dense0:e("dense0",!0),dense1:e("dense1"),dense2:e("dense2"),dense3:e("dense3")};return po(t,n),{params:r,paramMappings:n}}var y_=(function(t){je(n,t);function n(){return t.call(this,"FaceFeatureExtractor")||this}return n.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return _e(function(){var a=e.toBatchTensor(112,!0),o=[122.782,117.001,104.298],u=ac(a,o).div(Ee(255)),l=Lf(u,r.dense0,!0);return l=Lf(l,r.dense1),l=Lf(l,r.dense2),l=Lf(l,r.dense3),l=nc(l,[7,7],[2,2],"valid"),l})},n.prototype.forward=function(e){return Ie(this,void 0,void 0,function(){var r;return Be(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Cn(e)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},n.prototype.extractParamsFromWeigthMap=function(e){return HU(e)},n.prototype.extractParams=function(e){return WU(e)},n})(ho);function Sa(t,n){return _e(function(){return Je(rh(t,n.weights),n.bias)})}function VU(t,n,e){var r=[],a=vo(t),o=a.extractWeights,u=a.getRemainingWeights,l=Qy(o,r),c=l(n,e,"fc");if(u().length!==0)throw new Error("weights remaing after extract: "+u().length);return{paramMappings:r,params:{fc:c}}}function jU(t){var n=[],e=Jo(t,n);function r(o){var u=e(o+"/weights",2),l=e(o+"/bias",1);return{weights:u,bias:l}}var a={fc:r("fc")};return po(t,n),{params:a,paramMappings:n}}function b_(t){var n={},e={};return Object.keys(t).forEach(function(r){var a=r.startsWith("fc")?e:n;a[r]=t[r]}),{featureExtractorMap:n,classifierMap:e}}var x_=(function(t){je(n,t);function n(e,r){var a=t.call(this,e)||this;return a._faceFeatureExtractor=r,a}return Object.defineProperty(n.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),n.prototype.runNet=function(e){var r=this,a=this.params;if(!a)throw new Error(this._name+" - load model before inference");return _e(function(){var o=e instanceof Td?r.faceFeatureExtractor.forwardInput(e):e;return Sa(o.as2D(o.shape[0],-1),a.fc)})},n.prototype.dispose=function(e){e===void 0&&(e=!0),this.faceFeatureExtractor.dispose(e),t.prototype.dispose.call(this,e)},n.prototype.loadClassifierParams=function(e){var r=this.extractClassifierParams(e),a=r.params,o=r.paramMappings;this._params=a,this._paramMappings=o},n.prototype.extractClassifierParams=function(e){return VU(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},n.prototype.extractParamsFromWeigthMap=function(e){var r=b_(e),a=r.featureExtractorMap,o=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(a),jU(o)},n.prototype.extractParams=function(e){var r=this.getClassifierChannelsIn(),a=this.getClassifierChannelsOut(),o=a*r+a,u=e.slice(0,e.length-o),l=e.slice(e.length-o);return this.faceFeatureExtractor.extractWeights(u),this.extractClassifierParams(l)},n})(ho),ZS=["neutral","happy","sad","angry","fearful","disgusted","surprised"],GU=(function(){function t(n){var e=this;if(n.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+n.length);ZS.forEach(function(r,a){e[r]=n[a]})}return t.prototype.asSortedArray=function(){var n=this;return ZS.map(function(e){return{expression:e,probability:n[e]}}).sort(function(e,r){return r.probability-e.probability})},t})(),qU=(function(t){je(n,t);function n(e){return e===void 0&&(e=new y_),t.call(this,"FaceExpressionNet",e)||this}return n.prototype.forwardInput=function(e){var r=this;return _e(function(){return co(r.runNet(e))})},n.prototype.forward=function(e){return Ie(this,void 0,void 0,function(){var r;return Be(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Cn(e)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.predictExpressions=function(e){return Ie(this,void 0,void 0,function(){var r,a,o,u,l=this;return Be(this,function(c){switch(c.label){case 0:return[4,Cn(e)];case 1:return r=c.sent(),[4,this.forwardInput(r)];case 2:return a=c.sent(),[4,Promise.all(vn(a).map(function(d){return Ie(l,void 0,void 0,function(){var h;return Be(this,function(v){switch(v.label){case 0:return[4,d.data()];case 1:return h=v.sent(),d.dispose(),[2,h]}})})}))];case 3:return o=c.sent(),a.dispose(),u=o.map(function(d){return new GU(d)}),[2,r.isBatchInput?u:u[0]]}})})},n.prototype.getDefaultModelName=function(){return"face_expression_model"},n.prototype.getClassifierChannelsIn=function(){return 256},n.prototype.getClassifierChannelsOut=function(){return 7},n})(x_);function w_(t,n){var e={expressions:n};return Object.assign({},t,e)}function S_(t){return _d(t)&&t.landmarks instanceof Ll&&t.unshiftedLandmarks instanceof Ll&&t.alignedRect instanceof Tr}function fh(t,n){var e=t.detection.box,r=n.shiftBy(e.x,e.y),a=r.align(),o=t.detection.imageDims,u=new Tr(t.detection.score,a.rescale(o.reverse()),o),l={landmarks:r,unshiftedLandmarks:n,alignedRect:u};return Object.assign({},t,l)}function $U(t,n){var e=ch(t,n),r=Zy(t,n);function a(u,l,c){var d=r(u,l,c+"/separable_conv0"),h=r(l,l,c+"/separable_conv1"),v=e(u,l,1,c+"/expansion_conv");return{separable_conv0:d,separable_conv1:h,expansion_conv:v}}function o(u,l){var c=r(u,u,l+"/separable_conv0"),d=r(u,u,l+"/separable_conv1"),h=r(u,u,l+"/separable_conv2");return{separable_conv0:c,separable_conv1:d,separable_conv2:h}}return{extractConvParams:e,extractSeparableConvParams:r,extractReductionBlockParams:a,extractMainBlockParams:o}}function KU(t,n){var e=[],r=vo(t),a=r.extractWeights,o=r.getRemainingWeights,u=$U(a,e),l=u.extractConvParams,c=u.extractSeparableConvParams,d=u.extractReductionBlockParams,h=u.extractMainBlockParams,v=l(3,32,3,"entry_flow/conv_in"),m=d(32,64,"entry_flow/reduction_block_0"),g=d(64,128,"entry_flow/reduction_block_1"),b={conv_in:v,reduction_block_0:m,reduction_block_1:g},x={};Fl(n,0,1).forEach(function(R){x["main_block_"+R]=h(128,"middle_flow/main_block_"+R)});var S=d(128,256,"exit_flow/reduction_block"),C=c(256,512,"exit_flow/separable_conv"),_={reduction_block:S,separable_conv:C};if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:e,params:{entry_flow:b,middle_flow:x,exit_flow:_}}}function XU(t,n){var e=Jo(t,n),r=m_(e),a=Jy(e);function o(l){var c=a(l+"/separable_conv0"),d=a(l+"/separable_conv1"),h=r(l+"/expansion_conv");return{separable_conv0:c,separable_conv1:d,expansion_conv:h}}function u(l){var c=a(l+"/separable_conv0"),d=a(l+"/separable_conv1"),h=a(l+"/separable_conv2");return{separable_conv0:c,separable_conv1:d,separable_conv2:h}}return{extractConvParams:r,extractSeparableConvParams:a,extractReductionBlockParams:o,extractMainBlockParams:u}}function YU(t,n){var e=[],r=XU(t,e),a=r.extractConvParams,o=r.extractSeparableConvParams,u=r.extractReductionBlockParams,l=r.extractMainBlockParams,c=a("entry_flow/conv_in"),d=u("entry_flow/reduction_block_0"),h=u("entry_flow/reduction_block_1"),v={conv_in:c,reduction_block_0:d,reduction_block_1:h},m={};Fl(n,0,1).forEach(function(S){m["main_block_"+S]=l("middle_flow/main_block_"+S)});var g=u("exit_flow/reduction_block"),b=o("exit_flow/separable_conv"),x={reduction_block:g,separable_conv:b};return po(t,e),{params:{entry_flow:v,middle_flow:m,exit_flow:x},paramMappings:e}}function C_(t,n,e){return Je($r(t,n.filters,e,"same"),n.bias)}function Um(t,n,e){e===void 0&&(e=!0);var r=e?Wt(t):t;return r=Cr(r,n.separable_conv0,[1,1]),r=Cr(Wt(r),n.separable_conv1,[1,1]),r=wn(r,[3,3],[2,2],"same"),r=Je(r,C_(t,n.expansion_conv,[2,2])),r}function QU(t,n){var e=Cr(Wt(t),n.separable_conv0,[1,1]);return e=Cr(Wt(e),n.separable_conv1,[1,1]),e=Cr(Wt(e),n.separable_conv2,[1,1]),e=Je(e,t),e}var ZU=(function(t){je(n,t);function n(e){var r=t.call(this,"TinyXception")||this;return r._numMainBlocks=e,r}return n.prototype.forwardInput=function(e){var r=this,a=this.params;if(!a)throw new Error("TinyXception - load model before inference");return _e(function(){var o=e.toBatchTensor(112,!0),u=[122.782,117.001,104.298],l=ac(o,u).div(Ee(256)),c=Wt(C_(l,a.entry_flow.conv_in,[2,2]));return c=Um(c,a.entry_flow.reduction_block_0,!1),c=Um(c,a.entry_flow.reduction_block_1),Fl(r._numMainBlocks,0,1).forEach(function(d){c=QU(c,a.middle_flow["main_block_"+d])}),c=Um(c,a.exit_flow.reduction_block),c=Wt(Cr(c,a.exit_flow.separable_conv,[1,1])),c})},n.prototype.forward=function(e){return Ie(this,void 0,void 0,function(){var r;return Be(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Cn(e)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.getDefaultModelName=function(){return"tiny_xception_model"},n.prototype.extractParamsFromWeigthMap=function(e){return YU(e,this._numMainBlocks)},n.prototype.extractParams=function(e){return KU(e,this._numMainBlocks)},n})(ho);function JU(t){var n=[],e=vo(t),r=e.extractWeights,a=e.getRemainingWeights,o=Qy(r,n),u=o(512,1,"fc/age"),l=o(512,2,"fc/gender");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:n,params:{fc:{age:u,gender:l}}}}function eW(t){var n=[],e=Jo(t,n);function r(o){var u=e(o+"/weights",2),l=e(o+"/bias",1);return{weights:u,bias:l}}var a={fc:{age:r("fc/age"),gender:r("fc/gender")}};return po(t,n),{params:a,paramMappings:n}}var Ad;(function(t){t.FEMALE="female",t.MALE="male"})(Ad||(Ad={}));var tW=(function(t){je(n,t);function n(e){e===void 0&&(e=new ZU(2));var r=t.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=e,r}return Object.defineProperty(n.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),n.prototype.runNet=function(e){var r=this,a=this.params;if(!a)throw new Error(this._name+" - load model before inference");return _e(function(){var o=e instanceof Td?r.faceFeatureExtractor.forwardInput(e):e,u=nc(o,[7,7],[2,2],"valid").as2D(o.shape[0],-1),l=Sa(u,a.fc.age).as1D(),c=Sa(u,a.fc.gender);return{age:l,gender:c}})},n.prototype.forwardInput=function(e){var r=this;return _e(function(){var a=r.runNet(e),o=a.age,u=a.gender;return{age:o,gender:co(u)}})},n.prototype.forward=function(e){return Ie(this,void 0,void 0,function(){var r;return Be(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Cn(e)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.predictAgeAndGender=function(e){return Ie(this,void 0,void 0,function(){var r,a,o,u,l,c,d=this;return Be(this,function(h){switch(h.label){case 0:return[4,Cn(e)];case 1:return r=h.sent(),[4,this.forwardInput(r)];case 2:return a=h.sent(),o=vn(a.age),u=vn(a.gender),l=o.map(function(v,m){return{ageTensor:v,genderTensor:u[m]}}),[4,Promise.all(l.map(function(v){var m=v.ageTensor,g=v.genderTensor;return Ie(d,void 0,void 0,function(){var b,x,S,C,_;return Be(this,function(R){switch(R.label){case 0:return[4,m.data()];case 1:return b=R.sent()[0],[4,g.data()];case 2:return x=R.sent()[0],S=x>.5,C=S?Ad.MALE:Ad.FEMALE,_=S?x:1-x,m.dispose(),g.dispose(),[2,{age:b,gender:C,genderProbability:_}]}})})}))];case 3:return c=h.sent(),a.age.dispose(),a.gender.dispose(),[2,r.isBatchInput?c:c[0]]}})})},n.prototype.getDefaultModelName=function(){return"age_gender_model"},n.prototype.dispose=function(e){e===void 0&&(e=!0),this.faceFeatureExtractor.dispose(e),t.prototype.dispose.call(this,e)},n.prototype.loadClassifierParams=function(e){var r=this.extractClassifierParams(e),a=r.params,o=r.paramMappings;this._params=a,this._paramMappings=o},n.prototype.extractClassifierParams=function(e){return JU(e)},n.prototype.extractParamsFromWeigthMap=function(e){var r=b_(e),a=r.featureExtractorMap,o=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(a),eW(o)},n.prototype.extractParams=function(e){var r=1539,a=e.slice(0,e.length-r),o=e.slice(e.length-r);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(o)},n})(ho),E_=(function(t){je(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.postProcess=function(e,r,a){var o=a.map(function(l){var c=l.width,d=l.height,h=r/Math.max(d,c);return{width:c*h,height:d*h}}),u=o.length;return _e(function(){var l=function(m,g){return _r([_a([68],m),_a([68],g)],1).as2D(1,136).as1D()},c=function(m,g){var b=o[m],x=b.width,S=b.height;return g(x,S)?Math.abs(x-S)/2:0},d=function(m){return c(m,function(g,b){return g<b})},h=function(m){return c(m,function(g,b){return b<g})},v=e.mul(_a([u,136],r)).sub(_r(Array.from(Array(u),function(m,g){return l(d(g),h(g))}))).div(_r(Array.from(Array(u),function(m,g){return l(o[g].width,o[g].height)})));return v})},n.prototype.forwardInput=function(e){var r=this;return _e(function(){var a=r.runNet(e);return r.postProcess(a,e.inputSize,e.inputDimensions.map(function(o){var u=o[0],l=o[1];return{height:u,width:l}}))})},n.prototype.forward=function(e){return Ie(this,void 0,void 0,function(){var r;return Be(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Cn(e)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.detectLandmarks=function(e){return Ie(this,void 0,void 0,function(){var r,a,o,u=this;return Be(this,function(l){switch(l.label){case 0:return[4,Cn(e)];case 1:return r=l.sent(),a=_e(function(){return vn(u.forwardInput(r))}),[4,Promise.all(a.map(function(c,d){return Ie(u,void 0,void 0,function(){var h,v,m,g,b;return Be(this,function(x){switch(x.label){case 0:return m=(v=Array).from,[4,c.data()];case 1:return h=m.apply(v,[x.sent()]),g=h.filter(function(S,C){return qS(C)}),b=h.filter(function(S,C){return!qS(C)}),[2,new TU(Array(68).fill(0).map(function(S,C){return new pt(g[C],b[C])}),{height:r.getInputHeight(d),width:r.getInputWidth(d)})]}})})}))];case 2:return o=l.sent(),a.forEach(function(c){return c.dispose()}),[2,r.isBatchInput?o:o[0]]}})})},n.prototype.getClassifierChannelsOut=function(){return 136},n})(x_),R_=(function(t){je(n,t);function n(e){return e===void 0&&(e=new y_),t.call(this,"FaceLandmark68Net",e)||this}return n.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},n.prototype.getClassifierChannelsIn=function(){return 256},n})(E_);function nW(t){var n=[],e=g_(t,n).extractDenseBlock3Params,r={dense0:e("dense0",!0),dense1:e("dense1"),dense2:e("dense2")};return po(t,n),{params:r,paramMappings:n}}function rW(t){var n=[],e=vo(t),r=e.extractWeights,a=e.getRemainingWeights,o=v_(r,n).extractDenseBlock3Params,u=o(3,32,"dense0",!0),l=o(32,64,"dense1"),c=o(64,128,"dense2");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:n,params:{dense0:u,dense1:l,dense2:c}}}var aW=(function(t){je(n,t);function n(){return t.call(this,"TinyFaceFeatureExtractor")||this}return n.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return _e(function(){var a=e.toBatchTensor(112,!0),o=[122.782,117.001,104.298],u=ac(a,o).div(Ee(255)),l=zm(u,r.dense0,!0);return l=zm(l,r.dense1),l=zm(l,r.dense2),l=nc(l,[14,14],[2,2],"valid"),l})},n.prototype.forward=function(e){return Ie(this,void 0,void 0,function(){var r;return Be(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Cn(e)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},n.prototype.extractParamsFromWeigthMap=function(e){return nW(e)},n.prototype.extractParams=function(e){return rW(e)},n})(ho),oW=(function(t){je(n,t);function n(e){return e===void 0&&(e=new aW),t.call(this,"FaceLandmark68TinyNet",e)||this}return n.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},n.prototype.getClassifierChannelsIn=function(){return 128},n})(E_);(function(t){je(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n})(R_);function iW(t,n){return Je(jn(t,n.weights),n.biases)}function e0(t,n,e,r,a){a===void 0&&(a="same");var o=n.conv,u=o.filters,l=o.bias,c=$r(t,u,e,a);return c=Je(c,l),c=iW(c,n.scale),r?Wt(c):c}function sW(t,n){return e0(t,n,[1,1],!0)}function __(t,n){return e0(t,n,[1,1],!1)}function T_(t,n){return e0(t,n,[2,2],!0,"valid")}function uW(t,n){function e(l,c,d){var h=t(l),v=h.length/(c*d*d);if(yU(v))throw new Error("depth has to be an integer: "+v+", weights.length: "+h.length+", numFilters: "+c+", filterSize: "+d);return _e(function(){return Yo(rr(h,[c,v,d,d]),[2,3,1,0])})}function r(l,c,d,h){var v=e(l,c,d),m=ln(t(c));return n.push({paramPath:h+"/filters"},{paramPath:h+"/bias"}),{filters:v,bias:m}}function a(l,c){var d=ln(t(l)),h=ln(t(l));return n.push({paramPath:c+"/weights"},{paramPath:c+"/biases"}),{weights:d,biases:h}}function o(l,c,d,h){var v=r(l,c,d,h+"/conv"),m=a(c,h+"/scale");return{conv:v,scale:m}}function u(l,c,d,h,v){v===void 0&&(v=!1);var m=o((v?.5:1)*l,c,d,h+"/conv1"),g=o(l,c,d,h+"/conv2");return{conv1:m,conv2:g}}return{extractConvLayerParams:o,extractResidualLayerParams:u}}function lW(t){var n=vo(t),e=n.extractWeights,r=n.getRemainingWeights,a=[],o=uW(e,a),u=o.extractConvLayerParams,l=o.extractResidualLayerParams,c=u(4704,32,7,"conv32_down"),d=l(9216,32,3,"conv32_1"),h=l(9216,32,3,"conv32_2"),v=l(9216,32,3,"conv32_3"),m=l(36864,64,3,"conv64_down",!0),g=l(36864,64,3,"conv64_1"),b=l(36864,64,3,"conv64_2"),x=l(36864,64,3,"conv64_3"),S=l(147456,128,3,"conv128_down",!0),C=l(147456,128,3,"conv128_1"),_=l(147456,128,3,"conv128_2"),R=l(589824,256,3,"conv256_down",!0),E=l(589824,256,3,"conv256_1"),T=l(589824,256,3,"conv256_2"),k=l(589824,256,3,"conv256_down_out"),N=_e(function(){return Yo(qo(e(256*128),[128,256]),[1,0])});if(a.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var O={conv32_down:c,conv32_1:d,conv32_2:h,conv32_3:v,conv64_down:m,conv64_1:g,conv64_2:b,conv64_3:x,conv128_down:S,conv128_1:C,conv128_2:_,conv256_down:R,conv256_1:E,conv256_2:T,conv256_down_out:k,fc:N};return{params:O,paramMappings:a}}function cW(t,n){var e=Jo(t,n);function r(u){var l=e(u+"/scale/weights",1),c=e(u+"/scale/biases",1);return{weights:l,biases:c}}function a(u){var l=e(u+"/conv/filters",4),c=e(u+"/conv/bias",1),d=r(u);return{conv:{filters:l,bias:c},scale:d}}function o(u){return{conv1:a(u+"/conv1"),conv2:a(u+"/conv2")}}return{extractConvLayerParams:a,extractResidualLayerParams:o}}function fW(t){var n=[],e=cW(t,n),r=e.extractConvLayerParams,a=e.extractResidualLayerParams,o=r("conv32_down"),u=a("conv32_1"),l=a("conv32_2"),c=a("conv32_3"),d=a("conv64_down"),h=a("conv64_1"),v=a("conv64_2"),m=a("conv64_3"),g=a("conv128_down"),b=a("conv128_1"),x=a("conv128_2"),S=a("conv256_down"),C=a("conv256_1"),_=a("conv256_2"),R=a("conv256_down_out"),E=t.fc;if(n.push({originalPath:"fc",paramPath:"fc"}),!gU(E))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+E);var T={conv32_down:o,conv32_1:u,conv32_2:l,conv32_3:c,conv64_down:d,conv64_1:h,conv64_2:v,conv64_3:m,conv128_down:g,conv128_1:b,conv128_2:x,conv256_down:S,conv256_1:C,conv256_2:_,conv256_down_out:R,fc:E};return po(t,n),{params:T,paramMappings:n}}function ha(t,n){var e=sW(t,n.conv1);return e=__(e,n.conv2),e=Je(e,t),e=Wt(e),e}function zf(t,n){var e=T_(t,n.conv1);e=__(e,n.conv2);var r=nc(t,2,2,"valid"),a=It(r.shape),o=r.shape[3]!==e.shape[3],u=r.shape[1]!==e.shape[1]||r.shape[2]!==e.shape[2];if(u){var l=Rl(e.shape);l[1]=1;var c=It(l);e=pn([e,c],1);var d=Rl(e.shape);d[2]=1;var h=It(d);e=pn([e,h],2)}return r=o?pn([r,a],3):r,e=Je(r,e),e=Wt(e),e}var dW=(function(t){je(n,t);function n(){return t.call(this,"FaceRecognitionNet")||this}return n.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return _e(function(){var a=e.toBatchTensor(150,!0).toFloat(),o=[122.782,117.001,104.298],u=ac(a,o).div(Ee(256)),l=T_(u,r.conv32_down);l=wn(l,3,2,"valid"),l=ha(l,r.conv32_1),l=ha(l,r.conv32_2),l=ha(l,r.conv32_3),l=zf(l,r.conv64_down),l=ha(l,r.conv64_1),l=ha(l,r.conv64_2),l=ha(l,r.conv64_3),l=zf(l,r.conv128_down),l=ha(l,r.conv128_1),l=ha(l,r.conv128_2),l=zf(l,r.conv256_down),l=ha(l,r.conv256_1),l=ha(l,r.conv256_2),l=zf(l,r.conv256_down_out);var c=l.mean([1,2]),d=rh(c,r.fc);return d})},n.prototype.forward=function(e){return Ie(this,void 0,void 0,function(){var r;return Be(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Cn(e)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.computeFaceDescriptor=function(e){return Ie(this,void 0,void 0,function(){var r,a,o,u=this;return Be(this,function(l){switch(l.label){case 0:return[4,Cn(e)];case 1:return r=l.sent(),a=_e(function(){return vn(u.forwardInput(r))}),[4,Promise.all(a.map(function(c){return c.data()}))];case 2:return o=l.sent(),a.forEach(function(c){return c.dispose()}),[2,r.isBatchInput?o:o[0]]}})})},n.prototype.getDefaultModelName=function(){return"face_recognition_model"},n.prototype.extractParamsFromWeigthMap=function(e){return fW(e)},n.prototype.extractParams=function(e){return lW(e)},n})(ho);function A_(t,n){var e={descriptor:n};return Object.assign({},t,e)}function D_(t,n){var e={age:n};return Object.assign({},t,e)}function k_(t,n,e){var r={gender:n,genderProbability:e};return Object.assign({},t,r)}var N_=(function(){function t(n){var e=n===void 0?{}:n,r=e.minFaceSize,a=e.scaleFactor,o=e.maxNumScales,u=e.scoreThresholds,l=e.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=a||.709,this._maxNumScales=o||10,this._scoreThresholds=u||[.6,.7,.7],this._scaleSteps=l,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(c){return typeof c!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(c){return typeof c!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(t.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),t})();function hW(t,n){function e(c,d){var h=rr(t(9*c),[3,3,c,1]),v=ln(t(c)),m=ln(t(c)),g=ln(t(c)),b=ln(t(c));return n.push({paramPath:d+"/filters"},{paramPath:d+"/batch_norm_scale"},{paramPath:d+"/batch_norm_offset"},{paramPath:d+"/batch_norm_mean"},{paramPath:d+"/batch_norm_variance"}),{filters:h,batch_norm_scale:v,batch_norm_offset:m,batch_norm_mean:g,batch_norm_variance:b}}function r(c,d,h,v,m){var g=rr(t(c*d*h*h),[h,h,c,d]),b=ln(t(d));return n.push({paramPath:v+"/filters"},{paramPath:v+"/"+(m?"batch_norm_offset":"bias")}),{filters:g,bias:b}}function a(c,d,h,v){var m=r(c,d,h,v,!0),g=m.filters,b=m.bias;return{filters:g,batch_norm_offset:b}}function o(c,d,h){var v=e(c,h+"/depthwise_conv"),m=a(c,d,1,h+"/pointwise_conv");return{depthwise_conv:v,pointwise_conv:m}}function u(){var c=a(3,32,3,"mobilenetv1/conv_0"),d=o(32,64,"mobilenetv1/conv_1"),h=o(64,128,"mobilenetv1/conv_2"),v=o(128,128,"mobilenetv1/conv_3"),m=o(128,256,"mobilenetv1/conv_4"),g=o(256,256,"mobilenetv1/conv_5"),b=o(256,512,"mobilenetv1/conv_6"),x=o(512,512,"mobilenetv1/conv_7"),S=o(512,512,"mobilenetv1/conv_8"),C=o(512,512,"mobilenetv1/conv_9"),_=o(512,512,"mobilenetv1/conv_10"),R=o(512,512,"mobilenetv1/conv_11"),E=o(512,1024,"mobilenetv1/conv_12"),T=o(1024,1024,"mobilenetv1/conv_13");return{conv_0:c,conv_1:d,conv_2:h,conv_3:v,conv_4:m,conv_5:g,conv_6:b,conv_7:x,conv_8:S,conv_9:C,conv_10:_,conv_11:R,conv_12:E,conv_13:T}}function l(){var c=a(1024,256,1,"prediction_layer/conv_0"),d=a(256,512,3,"prediction_layer/conv_1"),h=a(512,128,1,"prediction_layer/conv_2"),v=a(128,256,3,"prediction_layer/conv_3"),m=a(256,128,1,"prediction_layer/conv_4"),g=a(128,256,3,"prediction_layer/conv_5"),b=a(256,64,1,"prediction_layer/conv_6"),x=a(64,128,3,"prediction_layer/conv_7"),S=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),C=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),_=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),R=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),E=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),T=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),k=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),N=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),O=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),I=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),B=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),H=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),A={box_encoding_predictor:S,class_predictor:C},q={box_encoding_predictor:_,class_predictor:R},V={box_encoding_predictor:E,class_predictor:T},j={box_encoding_predictor:k,class_predictor:N},P={box_encoding_predictor:O,class_predictor:I},$={box_encoding_predictor:B,class_predictor:H};return{conv_0:c,conv_1:d,conv_2:h,conv_3:v,conv_4:m,conv_5:g,conv_6:b,conv_7:x,box_predictor_0:A,box_predictor_1:q,box_predictor_2:V,box_predictor_3:j,box_predictor_4:P,box_predictor_5:$}}return{extractMobilenetV1Params:u,extractPredictionLayerParams:l}}function pW(t){var n=[],e=vo(t),r=e.extractWeights,a=e.getRemainingWeights,o=hW(r,n),u=o.extractMobilenetV1Params,l=o.extractPredictionLayerParams,c=u(),d=l(),h=my(r(5118*4),[1,5118,4]),v={extra_dim:h};if(n.push({paramPath:"output_layer/extra_dim"}),a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{params:{mobilenetv1:c,prediction_layer:d,output_layer:v},paramMappings:n}}function vW(t,n){var e=Jo(t,n);function r(d,h,v){var m=e(d+"/Conv2d_"+h+"_pointwise/weights",4,v+"/filters"),g=e(d+"/Conv2d_"+h+"_pointwise/convolution_bn_offset",1,v+"/batch_norm_offset");return{filters:m,batch_norm_offset:g}}function a(d){var h="mobilenetv1/conv_"+d,v="MobilenetV1/Conv2d_"+d+"_depthwise",m=h+"/depthwise_conv",g=h+"/pointwise_conv",b=e(v+"/depthwise_weights",4,m+"/filters"),x=e(v+"/BatchNorm/gamma",1,m+"/batch_norm_scale"),S=e(v+"/BatchNorm/beta",1,m+"/batch_norm_offset"),C=e(v+"/BatchNorm/moving_mean",1,m+"/batch_norm_mean"),_=e(v+"/BatchNorm/moving_variance",1,m+"/batch_norm_variance");return{depthwise_conv:{filters:b,batch_norm_scale:x,batch_norm_offset:S,batch_norm_mean:C,batch_norm_variance:_},pointwise_conv:r("MobilenetV1",d,g)}}function o(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:a(1),conv_2:a(2),conv_3:a(3),conv_4:a(4),conv_5:a(5),conv_6:a(6),conv_7:a(7),conv_8:a(8),conv_9:a(9),conv_10:a(10),conv_11:a(11),conv_12:a(12),conv_13:a(13)}}function u(d,h){var v=e(d+"/weights",4,h+"/filters"),m=e(d+"/biases",1,h+"/bias");return{filters:v,bias:m}}function l(d){var h=u("Prediction/BoxPredictor_"+d+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+d+"/box_encoding_predictor"),v=u("Prediction/BoxPredictor_"+d+"/ClassPredictor","prediction_layer/box_predictor_"+d+"/class_predictor");return{box_encoding_predictor:h,class_predictor:v}}function c(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:l(0),box_predictor_1:l(1),box_predictor_2:l(2),box_predictor_3:l(3),box_predictor_4:l(4),box_predictor_5:l(5)}}return{extractMobilenetV1Params:o,extractPredictionLayerParams:c}}function mW(t){var n=[],e=vW(t,n),r=e.extractMobilenetV1Params,a=e.extractPredictionLayerParams,o=t["Output/extra_dim"];if(n.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!sh(o))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+o);var u={mobilenetv1:r(),prediction_layer:a(),output_layer:{extra_dim:o}};return po(t,n),{params:u,paramMappings:n}}function pa(t,n,e){return _e(function(){var r=$r(t,n.filters,e,"same");return r=Je(r,n.batch_norm_offset),Ty(r,0,6)})}var gW=.0010000000474974513;function yW(t,n,e){return _e(function(){var r=nh(t,n.filters,e,"same");return r=ER(r,n.batch_norm_mean,n.batch_norm_variance,n.batch_norm_offset,n.batch_norm_scale,gW),Ty(r,0,6)})}function bW(t){return[2,4,6,12].some(function(n){return n===t})?[2,2]:[1,1]}function xW(t,n){return _e(function(){var e=null,r=pa(t,n.conv_0,[2,2]),a=[n.conv_1,n.conv_2,n.conv_3,n.conv_4,n.conv_5,n.conv_6,n.conv_7,n.conv_8,n.conv_9,n.conv_10,n.conv_11,n.conv_12,n.conv_13];if(a.forEach(function(o,u){var l=u+1,c=bW(l);r=yW(r,o.depthwise_conv,c),r=pa(r,o.pointwise_conv,[1,1]),l===11&&(e=r)}),e===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:e}})}function wW(t,n,e,r,a){var o=t.shape[0],u=Math.min(e,o),l=n.map(function(h,v){return{score:h,boxIndex:v}}).filter(function(h){return h.score>a}).sort(function(h,v){return v.score-h.score}),c=function(h){return h<=r?1:0},d=[];return l.forEach(function(h){if(!(d.length>=u)){for(var v=h.score,m=d.length-1;m>=0;--m){var g=SW(t,h.boxIndex,d[m]);if(g!==0&&(h.score*=c(g),h.score<=a))break}v===h.score&&d.push(h.boxIndex)}}),d}function SW(t,n,e){var r=t.arraySync(),a=Math.min(r[n][0],r[n][2]),o=Math.min(r[n][1],r[n][3]),u=Math.max(r[n][0],r[n][2]),l=Math.max(r[n][1],r[n][3]),c=Math.min(r[e][0],r[e][2]),d=Math.min(r[e][1],r[e][3]),h=Math.max(r[e][0],r[e][2]),v=Math.max(r[e][1],r[e][3]),m=(u-a)*(l-o),g=(h-c)*(v-d);if(m<=0||g<=0)return 0;var b=Math.max(a,c),x=Math.max(o,d),S=Math.min(u,h),C=Math.min(l,v),_=Math.max(S-b,0)*Math.max(C-x,0);return _/(m+g-_)}function CW(t){var n=vn(Yo(t,[1,0])),e=[gn(n[2],n[0]),gn(n[3],n[1])],r=[Je(n[0],ea(e[0],Ee(2))),Je(n[1],ea(e[1],Ee(2)))];return{sizes:e,centers:r}}function EW(t,n){var e=CW(t),r=e.sizes,a=e.centers,o=vn(Yo(n,[1,0])),u=ea(jn(xg(ea(o[2],Ee(5))),r[0]),Ee(2)),l=Je(jn(ea(o[0],Ee(10)),r[0]),a[0]),c=ea(jn(xg(ea(o[3],Ee(5))),r[1]),Ee(2)),d=Je(jn(ea(o[1],Ee(10)),r[1]),a[1]);return Yo(_r([gn(l,u),gn(d,c),Je(l,u),Je(d,c)]),[1,0])}function RW(t,n,e){return _e(function(){var r=t.shape[0],a=EW(ta(Ks(e.extra_dim,[r,1,1]),[-1,4]),ta(t,[-1,4]));a=ta(a,[r,a.shape[0]/r,4]);var o=xR(Ta(n,[0,0,1],[-1,-1,-1])),u=Ta(o,[0,0,0],[-1,-1,1]);u=ta(u,[r,u.shape[1]]);var l=vn(a),c=vn(u);return{boxes:l,scores:c}})}function zs(t,n){return _e(function(){var e=t.shape[0],r=ta(na(t,n.box_encoding_predictor),[e,-1,1,4]),a=ta(na(t,n.class_predictor),[e,-1,3]);return{boxPredictionEncoding:r,classPrediction:a}})}function _W(t,n,e){return _e(function(){var r=pa(t,e.conv_0,[1,1]),a=pa(r,e.conv_1,[2,2]),o=pa(a,e.conv_2,[1,1]),u=pa(o,e.conv_3,[2,2]),l=pa(u,e.conv_4,[1,1]),c=pa(l,e.conv_5,[2,2]),d=pa(c,e.conv_6,[1,1]),h=pa(d,e.conv_7,[2,2]),v=zs(n,e.box_predictor_0),m=zs(t,e.box_predictor_1),g=zs(a,e.box_predictor_2),b=zs(u,e.box_predictor_3),x=zs(c,e.box_predictor_4),S=zs(h,e.box_predictor_5),C=pn([v.boxPredictionEncoding,m.boxPredictionEncoding,g.boxPredictionEncoding,b.boxPredictionEncoding,x.boxPredictionEncoding,S.boxPredictionEncoding],1),_=pn([v.classPrediction,m.classPrediction,g.classPrediction,b.classPrediction,x.classPrediction,S.classPrediction],1);return{boxPredictions:C,classPredictions:_}})}var dh=(function(){function t(n){var e=n===void 0?{}:n,r=e.minConfidence,a=e.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=a||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(t.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),t})(),M_=(function(t){je(n,t);function n(){return t.call(this,"SsdMobilenetv1")||this}return n.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return _e(function(){var a=e.toBatchTensor(512,!1).toFloat(),o=gn(jn(a,Ee(.007843137718737125)),Ee(1)),u=xW(o,r.mobilenetv1),l=_W(u.out,u.conv11,r.prediction_layer),c=l.boxPredictions,d=l.classPredictions;return RW(c,d,r.output_layer)})},n.prototype.forward=function(e){return Ie(this,void 0,void 0,function(){var r;return Be(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Cn(e)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.locateFaces=function(e,r){return r===void 0&&(r={}),Ie(this,void 0,void 0,function(){var a,o,u,l,c,d,h,v,m,g,b,x,S,C,_,R,E,T,k,N,O;return Be(this,function(I){switch(I.label){case 0:return a=new dh(r),o=a.maxResults,u=a.minConfidence,[4,Cn(e)];case 1:for(l=I.sent(),c=this.forwardInput(l),d=c.boxes,h=c.scores,v=d[0],m=h[0],g=1;g<d.length;g++)d[g].dispose(),h[g].dispose();return S=(x=Array).from,[4,m.data()];case 2:return b=S.apply(x,[I.sent()]),C=.5,_=wW(v,b,o,C,u),R=l.getReshapedInputDimensions(0),E=l.inputSize,T=E/R.width,k=E/R.height,N=v.arraySync(),O=_.map(function(B){var H=[Math.max(0,N[B][0]),Math.min(1,N[B][2])].map(function($){return $*k}),A=H[0],q=H[1],V=[Math.max(0,N[B][1]),Math.min(1,N[B][3])].map(function($){return $*T}),j=V[0],P=V[1];return new Tr(b[B],new jy(j,A,P-j,q-A),{height:l.getInputHeight(0),width:l.getInputWidth(0)})}),v.dispose(),m.dispose(),[2,O]}})})},n.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},n.prototype.extractParamsFromWeigthMap=function(e){return mW(e)},n.prototype.extractParams=function(e){return pW(e)},n})(ho);(function(t){je(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n})(M_);var TW=.4,AW=[new pt(.738768,.874946),new pt(2.42204,2.65704),new pt(4.30971,7.04493),new pt(10.246,4.59428),new pt(12.6868,11.8741)],DW=[new pt(1.603231,2.094468),new pt(6.041143,7.080126),new pt(2.882459,3.518061),new pt(4.266906,5.178857),new pt(9.041765,10.66308)],kW=[117.001,114.697,97.404],NW="tiny_yolov2_model",MW="tiny_yolov2_separable_conv_model",Uf=function(t){return typeof t=="number"};function OW(t){if(!t)throw new Error("invalid config: "+t);if(typeof t.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+t.withSeparableConvs);if(!Uf(t.iouThreshold)||t.iouThreshold<0||t.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+t.iouThreshold);if(!Array.isArray(t.classes)||!t.classes.length||!t.classes.every(function(n){return typeof n=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(t.classes));if(!Array.isArray(t.anchors)||!t.anchors.length||!t.anchors.map(function(n){return n||{}}).every(function(n){return Uf(n.x)&&Uf(n.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(t.anchors));if(t.meanRgb&&(!Array.isArray(t.meanRgb)||t.meanRgb.length!==3||!t.meanRgb.every(Uf)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(t.meanRgb))}function t0(t){return _e(function(){var n=jn(t,Ee(.10000000149011612));return Je(Wt(gn(t,n)),n)})}function Uo(t,n){return _e(function(){var e=Hi(t,[[0,0],[1,1],[1,1],[0,0]]);return e=$r(e,n.conv.filters,[1,1],"valid"),e=gn(e,n.bn.sub),e=jn(e,n.bn.truediv),e=Je(e,n.conv.bias),t0(e)})}function Wo(t,n){return _e(function(){var e=Hi(t,[[0,0],[1,1],[1,1],[0,0]]);return e=Ny(e,n.depthwise_filter,n.pointwise_filter,[1,1],"valid"),e=Je(e,n.bias),t0(e)})}function IW(t,n){var e=ch(t,n);function r(u,l){var c=ln(t(u)),d=ln(t(u));return n.push({paramPath:l+"/sub"},{paramPath:l+"/truediv"}),{sub:c,truediv:d}}function a(u,l,c){var d=e(u,l,3,c+"/conv"),h=r(l,c+"/bn");return{conv:d,bn:h}}var o=Zy(t,n);return{extractConvParams:e,extractConvWithBatchNormParams:a,extractSeparableConvParams:o}}function BW(t,n,e,r){var a=vo(t),o=a.extractWeights,u=a.getRemainingWeights,l=[],c=IW(o,l),d=c.extractConvParams,h=c.extractConvWithBatchNormParams,v=c.extractSeparableConvParams,m;if(n.withSeparableConvs){var g=r[0],b=r[1],x=r[2],S=r[3],C=r[4],_=r[5],R=r[6],E=r[7],T=r[8],k=n.isFirstLayerConv2d?d(g,b,3,"conv0"):v(g,b,"conv0"),N=v(b,x,"conv1"),O=v(x,S,"conv2"),I=v(S,C,"conv3"),B=v(C,_,"conv4"),H=v(_,R,"conv5"),A=E?v(R,E,"conv6"):void 0,q=T?v(E,T,"conv7"):void 0,V=d(T||E||R,5*e,1,"conv8");m={conv0:k,conv1:N,conv2:O,conv3:I,conv4:B,conv5:H,conv6:A,conv7:q,conv8:V}}else{var g=r[0],b=r[1],x=r[2],S=r[3],C=r[4],_=r[5],R=r[6],E=r[7],T=r[8],k=h(g,b,"conv0"),N=h(b,x,"conv1"),O=h(x,S,"conv2"),I=h(S,C,"conv3"),B=h(C,_,"conv4"),H=h(_,R,"conv5"),A=h(R,E,"conv6"),q=h(E,T,"conv7"),V=d(T,5*e,1,"conv8");m={conv0:k,conv1:N,conv2:O,conv3:I,conv4:B,conv5:H,conv6:A,conv7:q,conv8:V}}if(u().length!==0)throw new Error("weights remaing after extract: "+u().length);return{params:m,paramMappings:l}}function FW(t,n){var e=Jo(t,n);function r(l){var c=e(l+"/sub",1),d=e(l+"/truediv",1);return{sub:c,truediv:d}}function a(l){var c=e(l+"/filters",4),d=e(l+"/bias",1);return{filters:c,bias:d}}function o(l){var c=a(l+"/conv"),d=r(l+"/bn");return{conv:c,bn:d}}var u=Jy(e);return{extractConvParams:a,extractConvWithBatchNormParams:o,extractSeparableConvParams:u}}function PW(t,n){var e=[],r=FW(t,e),a=r.extractConvParams,o=r.extractConvWithBatchNormParams,u=r.extractSeparableConvParams,l;if(n.withSeparableConvs){var c=n.filterSizes&&n.filterSizes.length||9;l={conv0:n.isFirstLayerConv2d?a("conv0"):u("conv0"),conv1:u("conv1"),conv2:u("conv2"),conv3:u("conv3"),conv4:u("conv4"),conv5:u("conv5"),conv6:c>7?u("conv6"):void 0,conv7:c>8?u("conv7"):void 0,conv8:a("conv8")}}else l={conv0:o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:o("conv6"),conv7:o("conv7"),conv8:a("conv8")};return po(t,e),{params:l,paramMappings:e}}var JS;(function(t){t[t.XS=224]="XS",t[t.SM=320]="SM",t[t.MD=416]="MD",t[t.LG=608]="LG"})(JS||(JS={}));var n0=(function(){function t(n){var e=n===void 0?{}:n,r=e.inputSize,a=e.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=a||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),t})(),O_=(function(t){je(n,t);function n(e){var r=t.call(this,"TinyYolov2")||this;return OW(e),r._config=e,r}return Object.defineProperty(n.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),n.prototype.runTinyYolov2=function(e,r){var a=Uo(e,r.conv0);return a=wn(a,[2,2],[2,2],"same"),a=Uo(a,r.conv1),a=wn(a,[2,2],[2,2],"same"),a=Uo(a,r.conv2),a=wn(a,[2,2],[2,2],"same"),a=Uo(a,r.conv3),a=wn(a,[2,2],[2,2],"same"),a=Uo(a,r.conv4),a=wn(a,[2,2],[2,2],"same"),a=Uo(a,r.conv5),a=wn(a,[2,2],[1,1],"same"),a=Uo(a,r.conv6),a=Uo(a,r.conv7),na(a,r.conv8,"valid",!1)},n.prototype.runMobilenet=function(e,r){var a=this.config.isFirstLayerConv2d?t0(na(e,r.conv0,"valid",!1)):Wo(e,r.conv0);return a=wn(a,[2,2],[2,2],"same"),a=Wo(a,r.conv1),a=wn(a,[2,2],[2,2],"same"),a=Wo(a,r.conv2),a=wn(a,[2,2],[2,2],"same"),a=Wo(a,r.conv3),a=wn(a,[2,2],[2,2],"same"),a=Wo(a,r.conv4),a=wn(a,[2,2],[2,2],"same"),a=Wo(a,r.conv5),a=wn(a,[2,2],[1,1],"same"),a=r.conv6?Wo(a,r.conv6):a,a=r.conv7?Wo(a,r.conv7):a,na(a,r.conv8,"valid",!1)},n.prototype.forwardInput=function(e,r){var a=this,o=this.params;if(!o)throw new Error("TinyYolov2 - load model before inference");return _e(function(){var u=e.toBatchTensor(r,!1).toFloat();return u=a.config.meanRgb?ac(u,a.config.meanRgb):u,u=u.div(Ee(256)),a.config.withSeparableConvs?a.runMobilenet(u,o):a.runTinyYolov2(u,o)})},n.prototype.forward=function(e,r){return Ie(this,void 0,void 0,function(){var a;return Be(this,function(o){switch(o.label){case 0:return a=this.forwardInput,[4,Cn(e)];case 1:return[4,a.apply(this,[o.sent(),r])];case 2:return[2,o.sent()]}})})},n.prototype.detect=function(e,r){return r===void 0&&(r={}),Ie(this,void 0,void 0,function(){var a,o,u,l,c,d,h,v,m,g,b,x,S,C,_=this;return Be(this,function(R){switch(R.label){case 0:return a=new n0(r),o=a.inputSize,u=a.scoreThreshold,[4,Cn(e)];case 1:return l=R.sent(),[4,this.forwardInput(l,o)];case 2:return c=R.sent(),d=_e(function(){return vn(c)[0].expandDims()}),h={width:l.getInputWidth(0),height:l.getInputHeight(0)},[4,this.extractBoxes(d,l.getReshapedInputDimensions(0),u)];case 3:return v=R.sent(),c.dispose(),d.dispose(),m=v.map(function(E){return E.box}),g=v.map(function(E){return E.score}),b=v.map(function(E){return E.classScore}),x=v.map(function(E){return _.config.classes[E.label]}),S=Pl(m.map(function(E){return E.rescale(o)}),g,this.config.iouThreshold,!0),C=S.map(function(E){return new o_(g[E],b[E],x[E],m[E],h)}),[2,C]}})})},n.prototype.getDefaultModelName=function(){return""},n.prototype.extractParamsFromWeigthMap=function(e){return PW(e,this.config)},n.prototype.extractParams=function(e){var r=this.config.filterSizes||n.DEFAULT_FILTER_SIZES,a=r?r.length:void 0;if(a!==7&&a!==8&&a!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+a+" filterSizes in config");return BW(e,this.config,this.boxEncodingSize,r)},n.prototype.extractBoxes=function(e,r,a){return Ie(this,void 0,void 0,function(){var o,u,l,c,d,h,v,m,g,b,x,S,C,_,R,E,T,k,N,O,I,B,H,A,q,V,j,P,$,Q=this;return Be(this,function(U){switch(U.label){case 0:return o=r.width,u=r.height,l=Math.max(o,u),c=l/o,d=l/u,h=e.shape[1],v=this.config.anchors.length,m=_e(function(){var G=e.reshape([h,h,v,Q.boxEncodingSize]),M=G.slice([0,0,0,0],[h,h,v,4]),K=G.slice([0,0,0,4],[h,h,v,1]),Z=Q.withClassScores?co(G.slice([0,0,0,5],[h,h,v,Q.config.classes.length]),3):Ee(0);return[M,K,Z]}),g=m[0],b=m[1],x=m[2],S=[],[4,b.array()];case 1:return C=U.sent(),[4,g.array()];case 2:_=U.sent(),R=0,U.label=3;case 3:if(!(R<h))return[3,12];E=0,U.label=4;case 4:if(!(E<h))return[3,11];T=0,U.label=5;case 5:return T<v?(k=Lm(C[R][E][T][0]),!a||k>a?(N=(E+Lm(_[R][E][T][0]))/h*c,O=(R+Lm(_[R][E][T][1]))/h*d,I=Math.exp(_[R][E][T][2])*this.config.anchors[T].x/h*c,B=Math.exp(_[R][E][T][3])*this.config.anchors[T].y/h*d,H=N-I/2,A=O-B/2,q={row:R,col:E,anchor:T},this.withClassScores?[4,this.extractPredictedClass(x,q)]:[3,7]):[3,9]):[3,10];case 6:return $=U.sent(),[3,8];case 7:$={classScore:1,label:0},U.label=8;case 8:V=$,j=V.classScore,P=V.label,S.push(Wn({box:new uh(H,A,H+I,A+B),score:k,classScore:k*j,label:P},q)),U.label=9;case 9:return T++,[3,5];case 10:return E++,[3,4];case 11:return R++,[3,3];case 12:return g.dispose(),b.dispose(),x.dispose(),[2,S]}})})},n.prototype.extractPredictedClass=function(e,r){return Ie(this,void 0,void 0,function(){var a,o,u,l;return Be(this,function(c){switch(c.label){case 0:return a=r.row,o=r.col,u=r.anchor,[4,e.array()];case 1:return l=c.sent(),[2,Array(this.config.classes.length).fill(0).map(function(d,h){return l[a][o][u][h]}).map(function(d,h){return{classScore:d,label:h}}).reduce(function(d,h){return d.classScore>h.classScore?d:h})]}})})},n.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],n})(ho),LW=(function(t){je(n,t);function n(e){e===void 0&&(e=!0);var r=this,a=Object.assign({},{withSeparableConvs:e,iouThreshold:TW,classes:["face"]},e?{anchors:DW,meanRgb:kW}:{anchors:AW,withClassScores:!0});return r=t.call(this,a)||this,r}return Object.defineProperty(n.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),n.prototype.locateFaces=function(e,r){return Ie(this,void 0,void 0,function(){var a;return Be(this,function(o){switch(o.label){case 0:return[4,this.detect(e,r)];case 1:return a=o.sent(),[2,a.map(function(u){return new Tr(u.score,u.relativeBox,{width:u.imageWidth,height:u.imageHeight})})]}})})},n.prototype.getDefaultModelName=function(){return this.withSeparableConvs?MW:NW},n.prototype.extractParamsFromWeigthMap=function(e){return t.prototype.extractParamsFromWeigthMap.call(this,e)},n})(O_),I_=(function(t){je(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e._name="TinyFaceDetectorOptions",e}return n})(n0),oc=(function(){function t(){}return t.prototype.then=function(n){return Ie(this,void 0,void 0,function(){var e;return Be(this,function(r){switch(r.label){case 0:return e=n,[4,this.run()];case 1:return[2,e.apply(void 0,[r.sent()])]}})})},t.prototype.run=function(){return Ie(this,void 0,void 0,function(){return Be(this,function(n){throw new Error("ComposableTask - run is not implemented")})})},t})();function hh(t,n,e,r,a){return a===void 0&&(a=function(o){var u=o.alignedRect;return u}),Ie(this,void 0,void 0,function(){var o,u,l,c,d;return Be(this,function(h){switch(h.label){case 0:return o=t.map(function(v){return S_(v)?a(v):v.detection}),l=r,l?[3,5]:n instanceof Ut?[4,Yy(n,o)]:[3,2];case 1:return c=h.sent(),[3,4];case 2:return[4,Xy(n,o)];case 3:c=h.sent(),h.label=4;case 4:l=c,h.label=5;case 5:return u=l,[4,e(u)];case 6:return d=h.sent(),u.forEach(function(v){return v instanceof Ut&&v.dispose()}),[2,d]}})})}function r0(t,n,e,r,a){return Ie(this,void 0,void 0,function(){var o=this;return Be(this,function(u){return[2,hh([t],n,function(l){return Ie(o,void 0,void 0,function(){return Be(this,function(c){return[2,e(l[0])]})})},r,a)]})})}function zW(t){return _e(function(){return _r(vn(t,3).reverse(),3)})}var Wf=2,Dd=12;function UW(t,n){var e=ch(t,n),r=Qy(t,n);function a(d,h){var v=ln(t(d));return n.push({paramPath:h}),v}function o(d,h,v){v===void 0&&(v=!1);var m=e(d[0],d[1],3,h+"/conv1"),g=a(d[1],h+"/prelu1_alpha"),b=e(d[1],d[2],3,h+"/conv2"),x=a(d[2],h+"/prelu2_alpha"),S=e(d[2],d[3],v?2:3,h+"/conv3"),C=a(d[3],h+"/prelu3_alpha");return{conv1:m,prelu1_alpha:g,conv2:b,prelu2_alpha:x,conv3:S,prelu3_alpha:C}}function u(){var d=o([3,10,16,32],"pnet"),h=e(32,2,1,"pnet/conv4_1"),v=e(32,4,1,"pnet/conv4_2");return Wn(Wn({},d),{conv4_1:h,conv4_2:v})}function l(){var d=o([3,28,48,64],"rnet",!0),h=r(576,128,"rnet/fc1"),v=a(128,"rnet/prelu4_alpha"),m=r(128,2,"rnet/fc2_1"),g=r(128,4,"rnet/fc2_2");return Wn(Wn({},d),{fc1:h,prelu4_alpha:v,fc2_1:m,fc2_2:g})}function c(){var d=o([3,32,64,64],"onet"),h=e(64,128,2,"onet/conv4"),v=a(128,"onet/prelu4_alpha"),m=r(1152,256,"onet/fc1"),g=a(256,"onet/prelu5_alpha"),b=r(256,2,"onet/fc2_1"),x=r(256,4,"onet/fc2_2"),S=r(256,10,"onet/fc2_3");return Wn(Wn({},d),{conv4:h,prelu4_alpha:v,fc1:m,prelu5_alpha:g,fc2_1:b,fc2_2:x,fc2_3:S})}return{extractPNetParams:u,extractRNetParams:l,extractONetParams:c}}function WW(t){var n=vo(t),e=n.extractWeights,r=n.getRemainingWeights,a=[],o=UW(e,a),u=o.extractPNetParams,l=o.extractRNetParams,c=o.extractONetParams,d=u(),h=l(),v=c();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:d,rnet:h,onet:v},paramMappings:a}}function HW(t,n){var e=Jo(t,n);function r(h){var v=e(h+"/weights",4,h+"/filters"),m=e(h+"/bias",1);return{filters:v,bias:m}}function a(h){var v=e(h+"/weights",2),m=e(h+"/bias",1);return{weights:v,bias:m}}function o(h){return e(h,1)}function u(h){var v=r(h+"/conv1"),m=o(h+"/prelu1_alpha"),g=r(h+"/conv2"),b=o(h+"/prelu2_alpha"),x=r(h+"/conv3"),S=o(h+"/prelu3_alpha");return{conv1:v,prelu1_alpha:m,conv2:g,prelu2_alpha:b,conv3:x,prelu3_alpha:S}}function l(){var h=u("pnet"),v=r("pnet/conv4_1"),m=r("pnet/conv4_2");return Wn(Wn({},h),{conv4_1:v,conv4_2:m})}function c(){var h=u("rnet"),v=a("rnet/fc1"),m=o("rnet/prelu4_alpha"),g=a("rnet/fc2_1"),b=a("rnet/fc2_2");return Wn(Wn({},h),{fc1:v,prelu4_alpha:m,fc2_1:g,fc2_2:b})}function d(){var h=u("onet"),v=r("onet/conv4"),m=o("onet/prelu4_alpha"),g=a("onet/fc1"),b=o("onet/prelu5_alpha"),x=a("onet/fc2_1"),S=a("onet/fc2_2"),C=a("onet/fc2_3");return Wn(Wn({},h),{conv4:v,prelu4_alpha:m,fc1:g,prelu5_alpha:b,fc2_1:x,fc2_2:S,fc2_3:C})}return{extractPNetParams:l,extractRNetParams:c,extractONetParams:d}}function VW(t){var n=[],e=HW(t,n),r=e.extractPNetParams,a=e.extractRNetParams,o=e.extractONetParams,u=r(),l=a(),c=o();return po(t,n),{params:{pnet:u,rnet:l,onet:c},paramMappings:n}}function Ag(t,n){var e=n[0],r=n[1];return{height:Math.floor(e*t),width:Math.floor(r*t)}}function jW(t,n,e){for(var r=e[0],a=e[1],o=Dd/t,u=[],l=Math.min(r,a)*o,c=0;l>=12;)u.push(o*Math.pow(n,c)),l=l*n,c+=1;return u}var a0=(function(t){je(n,t);function n(e,r,a,o){return t.call(this,{left:e,top:r,right:a,bottom:o},!0)||this}return n})(Aa);function B_(t){return _e(function(){return jn(gn(t,Ee(127.5)),Ee(.0078125))})}function Js(t,n){return _e(function(){return Je(Wt(t),jn(n,Sd(Wt(Sd(t)))))})}function o0(t,n,e){return e===void 0&&(e=!1),_e(function(){var r=na(t,n.conv1,"valid");return r=Js(r,n.prelu1_alpha),r=wn(r,e?[2,2]:[3,3],[2,2],"same"),r=na(r,n.conv2,"valid"),r=Js(r,n.prelu2_alpha),r=e?r:wn(r,[3,3],[2,2],"valid"),r=na(r,n.conv3,"valid"),r=Js(r,n.prelu3_alpha),r})}function GW(t,n){return _e(function(){var e=o0(t,n,!0),r=na(e,n.conv4_1,"valid"),a=Wr(ah(r,3),3),o=co(gn(r,a),3),u=na(e,n.conv4_2,"valid");return{prob:o,regions:u}})}function qW(t,n){return _e(function(){var e=Ag(n,t.shape.slice(1)),r=e.height,a=e.width,o=Fy.resizeBilinear(t,[r,a]),u=B_(o);return Yo(u,[0,2,1,3])})}function $W(t,n,e,r){for(var a=[],o=t.arraySync(),u=0;u<t.shape[0];u++)for(var l=0;l<t.shape[1];l++)o[u][l]>=r&&a.push(new pt(l,u));var c=a.map(function(d){var h=new uh(Math.round((d.y*Wf+1)/e),Math.round((d.x*Wf+1)/e),Math.round((d.y*Wf+Dd)/e),Math.round((d.x*Wf+Dd)/e)),v=o[d.y][d.x],m=n.arraySync(),g=new a0(m[d.y][d.x][0],m[d.y][d.x][1],m[d.y][d.x][2],m[d.y][d.x][3]);return{cell:h,score:v,region:g}});return c}function KW(t,n,e,r,a){a.stage1=[];var o=n.map(function(m){return _e(function(){var g={scale:m},b=qW(t,m),x=Date.now(),S=GW(b,r),C=S.prob,_=S.regions;g.pnet=Date.now()-x;var R=vn(vn(C,3)[1])[0],E=vn(_)[0];return{scoresTensor:R,regionsTensor:E,scale:m,statsForScale:g}})}),u=o.map(function(m){var g=m.scoresTensor,b=m.regionsTensor,x=m.scale,S=m.statsForScale,C=$W(g,b,x,e);if(g.dispose(),b.dispose(),!C.length)return a.stage1.push(S),[];var _=Date.now(),R=Pl(C.map(function(E){return E.cell}),C.map(function(E){return E.score}),.5);return S.nms=Date.now()-_,S.numBoxes=R.length,a.stage1.push(S),R.map(function(E){return C[E]})}),l=u.reduce(function(m,g){return m.concat(g)},[]),c=[],d=[];if(l.length>0){var h=Date.now(),v=Pl(l.map(function(m){return m.cell}),l.map(function(m){return m.score}),.7);a.stage1_nms=Date.now()-h,d=v.map(function(m){return l[m].score}),c=v.map(function(m){return l[m]}).map(function(m){var g=m.cell,b=m.region;return new uh(g.left+b.left*g.width,g.top+b.top*g.height,g.right+b.right*g.width,g.bottom+b.bottom*g.height).toSquare().round()})}return{boxes:c,scores:d}}function F_(t,n,e){var r=e.width,a=e.height;return Ie(this,void 0,void 0,function(){var o,u,l,c=this;return Be(this,function(d){switch(d.label){case 0:return o=so(t),[4,Promise.all(n.map(function(h){return Ie(c,void 0,void 0,function(){var v,m,g,b,x,S,C,_;return Be(this,function(R){return v=h.padAtBorders(t.height,t.width),m=v.y,g=v.ey,b=v.x,x=v.ex,S=b-1,C=m-1,_=o.getImageData(S,C,x-S,g-C),[2,qn.isNodejs()?Ky(_):createImageBitmap(_)]})})}))];case 1:return u=d.sent(),l=[],u.forEach(function(h){var v=lh({width:r,height:a}),m=so(v);m.drawImage(h,0,0,r,a);for(var g=m.getImageData(0,0,r,a).data,b=[],x=0;x<g.length;x+=4)b.push(g[x+2]),b.push(g[x+1]),b.push(g[x]);l.push(b)}),[2,l.map(function(h){var v=_e(function(){var m=Yo(rr(h,[1,r,a,3]),[0,2,1,3]).toFloat();return B_(m)});return v})]}})})}function XW(t,n){return _e(function(){var e=o0(t,n),r=ta(e,[e.shape[0],n.fc1.weights.shape[0]]),a=Sa(r,n.fc1),o=Js(a,n.prelu4_alpha),u=Sa(o,n.fc2_1),l=Wr(ah(u,1),1),c=co(gn(u,l),1),d=Sa(o,n.fc2_2),h=vn(c,1)[1];return{scores:h,regions:d}})}function YW(t,n,e,r,a){return Ie(this,void 0,void 0,function(){var o,u,l,c,d,h,v,m,g,b,x,S,C,_;return Be(this,function(R){switch(R.label){case 0:return o=Date.now(),[4,F_(t,n,{width:24,height:24})];case 1:return u=R.sent(),a.stage2_extractImagePatches=Date.now()-o,o=Date.now(),l=u.map(function(E){var T=XW(E,r);return E.dispose(),T}),a.stage2_rnet=Date.now()-o,c=l.length>1?pn(l.map(function(E){return E.scores})):l[0].scores,v=(h=Array).from,[4,c.data()];case 2:return d=v.apply(h,[R.sent()]),c.dispose(),m=d.map(function(E,T){return{score:E,idx:T}}).filter(function(E){return E.score>e}).map(function(E){var T=E.idx;return T}),g=m.map(function(E){return n[E]}),b=m.map(function(E){return d[E]}),x=[],S=[],g.length>0&&(o=Date.now(),C=Pl(g,b,.7),a.stage2_nms=Date.now()-o,_=C.map(function(E){var T=l[m[E]].regions.arraySync();return new a0(T[0][0],T[0][1],T[0][2],T[0][3])}),S=C.map(function(E){return b[E]}),x=C.map(function(E,T){return g[E].calibrate(_[T])})),l.forEach(function(E){E.regions.dispose(),E.scores.dispose()}),[2,{boxes:x,scores:S}]}})})}function QW(t,n){return _e(function(){var e=o0(t,n);e=wn(e,[2,2],[2,2],"same"),e=na(e,n.conv4,"valid"),e=Js(e,n.prelu4_alpha);var r=ta(e,[e.shape[0],n.fc1.weights.shape[0]]),a=Sa(r,n.fc1),o=Js(a,n.prelu5_alpha),u=Sa(o,n.fc2_1),l=Wr(ah(u,1),1),c=co(gn(u,l),1),d=Sa(o,n.fc2_2),h=Sa(o,n.fc2_3),v=vn(c,1)[1];return{scores:v,regions:d,points:h}})}function ZW(t,n,e,r,a){return Ie(this,void 0,void 0,function(){var o,u,l,c,d,h,v,m,g,b,x,S,C,_,R;return Be(this,function(E){switch(E.label){case 0:return o=Date.now(),[4,F_(t,n,{width:48,height:48})];case 1:return u=E.sent(),a.stage3_extractImagePatches=Date.now()-o,o=Date.now(),l=u.map(function(T){var k=QW(T,r);return T.dispose(),k}),a.stage3_onet=Date.now()-o,c=l.length>1?pn(l.map(function(T){return T.scores})):l[0].scores,v=(h=Array).from,[4,c.data()];case 2:return d=v.apply(h,[E.sent()]),c.dispose(),m=d.map(function(T,k){return{score:T,idx:k}}).filter(function(T){return T.score>e}).map(function(T){var k=T.idx;return k}),g=m.map(function(T){var k=l[T].regions.arraySync();return new a0(k[0][0],k[0][1],k[0][2],k[0][3])}),b=m.map(function(T,k){return n[T].calibrate(g[k])}),x=m.map(function(T){return d[T]}),S=[],C=[],_=[],b.length>0&&(o=Date.now(),R=Pl(b,x,.7,!1),a.stage3_nms=Date.now()-o,S=R.map(function(T){return b[T]}),C=R.map(function(T){return x[T]}),_=R.map(function(T,k){return Array(5).fill(0).map(function(N,O){var I=l[T].points.arraySync();return new pt(I[0][O]*(S[k].width+1)+S[k].left,I[0][O+5]*(S[k].height+1)+S[k].top)})})),l.forEach(function(T){T.regions.dispose(),T.scores.dispose(),T.points.dispose()}),[2,{boxes:S,scores:C,points:_}]}})})}var JW=(function(t){je(n,t);function n(){return t.call(this,"Mtcnn")||this}return n.prototype.load=function(e){return Ie(this,void 0,void 0,function(){return Be(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,t.prototype.load.call(this,e)]})})},n.prototype.loadFromDisk=function(e){return Ie(this,void 0,void 0,function(){return Be(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,t.prototype.loadFromDisk.call(this,e)]})})},n.prototype.forwardInput=function(e,r){return r===void 0&&(r={}),Ie(this,void 0,void 0,function(){var a,o,u,l,c,d,h,v,m,g,b,x,S,C,_,R,E,T,k,N,O;return Be(this,function(I){switch(I.label){case 0:if(a=this.params,!a)throw new Error("Mtcnn - load model before inference");if(o=e.canvases[0],!o)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return u={},l=Date.now(),c=_e(function(){return zW(Wr(Hy.fromPixels(o)).toFloat())}),d=function(B){return c.dispose(),u.total=Date.now()-l,B},h=c.shape.slice(1),v=h[0],m=h[1],g=new N_(r),b=g.minFaceSize,x=g.scaleFactor,S=g.maxNumScales,C=g.scoreThresholds,_=g.scaleSteps,R=(_||jW(b,x,[v,m])).filter(function(B){var H=Ag(B,[v,m]);return Math.min(H.width,H.height)>Dd}).slice(0,S),u.scales=R,u.pyramid=R.map(function(B){return Ag(B,[v,m])}),E=Date.now(),[4,KW(c,R,C[0],a.pnet,u)];case 1:return T=I.sent(),u.total_stage1=Date.now()-E,T.boxes.length?(u.stage2_numInputBoxes=T.boxes.length,E=Date.now(),[4,YW(o,T.boxes,C[1],a.rnet,u)]):[2,d({results:[],stats:u})];case 2:return k=I.sent(),u.total_stage2=Date.now()-E,k.boxes.length?(u.stage3_numInputBoxes=k.boxes.length,E=Date.now(),[4,ZW(o,k.boxes,C[2],a.onet,u)]):[2,d({results:[],stats:u})];case 3:return N=I.sent(),u.total_stage3=Date.now()-E,O=N.boxes.map(function(B,H){return fh(zl({},new Tr(N.scores[H],new jy(B.left/m,B.top/v,B.width/m,B.height/v),{height:v,width:m})),new _U(N.points[H].map(function(A){return A.sub(new pt(B.left,B.top)).div(new pt(B.width,B.height))}),{width:B.width,height:B.height}))}),[2,d({results:O,stats:u})]}})})},n.prototype.forward=function(e,r){return r===void 0&&(r={}),Ie(this,void 0,void 0,function(){var a;return Be(this,function(o){switch(o.label){case 0:return a=this.forwardInput,[4,Cn(e)];case 1:return[4,a.apply(this,[o.sent(),r])];case 2:return[2,o.sent().results]}})})},n.prototype.forwardWithStats=function(e,r){return r===void 0&&(r={}),Ie(this,void 0,void 0,function(){var a;return Be(this,function(o){switch(o.label){case 0:return a=this.forwardInput,[4,Cn(e)];case 1:return[2,a.apply(this,[o.sent(),r])]}})})},n.prototype.getDefaultModelName=function(){return"mtcnn_model"},n.prototype.extractParamsFromWeigthMap=function(e){return VW(e)},n.prototype.extractParams=function(e){return WW(e)},n})(ho),eH=.4,tH=[new pt(1.603231,2.094468),new pt(6.041143,7.080126),new pt(2.882459,3.518061),new pt(4.266906,5.178857),new pt(9.041765,10.66308)],nH=[117.001,114.697,97.404],rH=(function(t){je(n,t);function n(){var e=this,r={withSeparableConvs:!0,iouThreshold:eH,classes:["face"],anchors:tH,meanRgb:nH,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return e=t.call(this,r)||this,e}return Object.defineProperty(n.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),n.prototype.locateFaces=function(e,r){return Ie(this,void 0,void 0,function(){var a;return Be(this,function(o){switch(o.label){case 0:return[4,this.detect(e,r)];case 1:return a=o.sent(),[2,a.map(function(u){return new Tr(u.score,u.relativeBox,{width:u.imageWidth,height:u.imageHeight})})]}})})},n.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},n.prototype.extractParamsFromWeigthMap=function(e){return t.prototype.extractParamsFromWeigthMap.call(this,e)},n})(O_),Er={ssdMobilenetv1:new M_,tinyFaceDetector:new rH,tinyYolov2:new LW,mtcnn:new JW,faceLandmark68Net:new R_,faceLandmark68TinyNet:new oW,faceRecognitionNet:new dW,faceExpressionNet:new qU,ageGenderNet:new tW},P_=(function(t){je(n,t);function n(e,r,a){var o=t.call(this)||this;return o.parentTask=e,o.input=r,o.extractedFaces=a,o}return n})(oc),i0=(function(t){je(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return Ie(this,void 0,void 0,function(){var e,r,a=this;return Be(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return e=o.sent(),[4,hh(e,this.input,function(u){return Ie(a,void 0,void 0,function(){return Be(this,function(l){switch(l.label){case 0:return[4,Promise.all(u.map(function(c){return Er.faceExpressionNet.predictExpressions(c)}))];case 1:return[2,l.sent()]}})})},this.extractedFaces)];case 2:return r=o.sent(),[2,e.map(function(u,l){return w_(u,r[l])})]}})})},n.prototype.withAgeAndGender=function(){return new c0(this,this.input)},n})(P_),s0=(function(t){je(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return Ie(this,void 0,void 0,function(){var e,r;return Be(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return e=a.sent(),e?[4,r0(e,this.input,function(o){return Er.faceExpressionNet.predictExpressions(o)},this.extractedFaces)]:[2];case 2:return r=a.sent(),[2,w_(e,r)]}})})},n.prototype.withAgeAndGender=function(){return new f0(this,this.input)},n})(P_),u0=(function(t){je(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.withAgeAndGender=function(){return new d0(this,this.input)},n.prototype.withFaceDescriptors=function(){return new p0(this,this.input)},n})(i0),l0=(function(t){je(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.withAgeAndGender=function(){return new h0(this,this.input)},n.prototype.withFaceDescriptor=function(){return new v0(this,this.input)},n})(s0),L_=(function(t){je(n,t);function n(e,r,a){var o=t.call(this)||this;return o.parentTask=e,o.input=r,o.extractedFaces=a,o}return n})(oc),c0=(function(t){je(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return Ie(this,void 0,void 0,function(){var e,r,a=this;return Be(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return e=o.sent(),[4,hh(e,this.input,function(u){return Ie(a,void 0,void 0,function(){return Be(this,function(l){switch(l.label){case 0:return[4,Promise.all(u.map(function(c){return Er.ageGenderNet.predictAgeAndGender(c)}))];case 1:return[2,l.sent()]}})})},this.extractedFaces)];case 2:return r=o.sent(),[2,e.map(function(u,l){var c=r[l],d=c.age,h=c.gender,v=c.genderProbability;return D_(k_(u,h,v),d)})]}})})},n.prototype.withFaceExpressions=function(){return new i0(this,this.input)},n})(L_),f0=(function(t){je(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return Ie(this,void 0,void 0,function(){var e,r,a,o,u;return Be(this,function(l){switch(l.label){case 0:return[4,this.parentTask];case 1:return e=l.sent(),e?[4,r0(e,this.input,function(c){return Er.ageGenderNet.predictAgeAndGender(c)},this.extractedFaces)]:[2];case 2:return r=l.sent(),a=r.age,o=r.gender,u=r.genderProbability,[2,D_(k_(e,o,u),a)]}})})},n.prototype.withFaceExpressions=function(){return new s0(this,this.input)},n})(L_),d0=(function(t){je(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.withFaceExpressions=function(){return new u0(this,this.input)},n.prototype.withFaceDescriptors=function(){return new p0(this,this.input)},n})(c0),h0=(function(t){je(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.withFaceExpressions=function(){return new l0(this,this.input)},n.prototype.withFaceDescriptor=function(){return new v0(this,this.input)},n})(f0),z_=(function(t){je(n,t);function n(e,r){var a=t.call(this)||this;return a.parentTask=e,a.input=r,a}return n})(oc),p0=(function(t){je(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return Ie(this,void 0,void 0,function(){var e,r;return Be(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return e=a.sent(),[4,hh(e,this.input,function(o){return Promise.all(o.map(function(u){return Er.faceRecognitionNet.computeFaceDescriptor(u)}))},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=a.sent(),[2,r.map(function(o,u){return A_(e[u],o)})]}})})},n.prototype.withFaceExpressions=function(){return new u0(this,this.input)},n.prototype.withAgeAndGender=function(){return new d0(this,this.input)},n})(z_),v0=(function(t){je(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return Ie(this,void 0,void 0,function(){var e,r;return Be(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return e=a.sent(),e?[4,r0(e,this.input,function(o){return Er.faceRecognitionNet.computeFaceDescriptor(o)},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=a.sent(),[2,A_(e,r)]}})})},n.prototype.withFaceExpressions=function(){return new l0(this,this.input)},n.prototype.withAgeAndGender=function(){return new h0(this,this.input)},n})(z_),U_=(function(t){je(n,t);function n(e,r,a){var o=t.call(this)||this;return o.parentTask=e,o.input=r,o.useTinyLandmarkNet=a,o}return Object.defineProperty(n.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?Er.faceLandmark68TinyNet:Er.faceLandmark68Net},enumerable:!0,configurable:!0}),n})(oc),aH=(function(t){je(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return Ie(this,void 0,void 0,function(){var e,r,a,o,u,l=this;return Be(this,function(c){switch(c.label){case 0:return[4,this.parentTask];case 1:return e=c.sent(),r=e.map(function(d){return d.detection}),this.input instanceof Ut?[4,Yy(this.input,r)]:[3,3];case 2:return o=c.sent(),[3,5];case 3:return[4,Xy(this.input,r)];case 4:o=c.sent(),c.label=5;case 5:return a=o,[4,Promise.all(a.map(function(d){return l.landmarkNet.detectLandmarks(d)}))];case 6:return u=c.sent(),a.forEach(function(d){return d instanceof Ut&&d.dispose()}),[2,e.map(function(d,h){return fh(d,u[h])})]}})})},n.prototype.withFaceExpressions=function(){return new u0(this,this.input)},n.prototype.withAgeAndGender=function(){return new d0(this,this.input)},n.prototype.withFaceDescriptors=function(){return new p0(this,this.input)},n})(U_),oH=(function(t){je(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return Ie(this,void 0,void 0,function(){var e,r,a,o,u;return Be(this,function(l){switch(l.label){case 0:return[4,this.parentTask];case 1:return e=l.sent(),e?(r=e.detection,this.input instanceof Ut?[4,Yy(this.input,[r])]:[3,3]):[2];case 2:return o=l.sent(),[3,5];case 3:return[4,Xy(this.input,[r])];case 4:o=l.sent(),l.label=5;case 5:return a=o,[4,this.landmarkNet.detectLandmarks(a[0])];case 6:return u=l.sent(),a.forEach(function(c){return c instanceof Ut&&c.dispose()}),[2,fh(e,u)]}})})},n.prototype.withFaceExpressions=function(){return new l0(this,this.input)},n.prototype.withAgeAndGender=function(){return new h0(this,this.input)},n.prototype.withFaceDescriptor=function(){return new v0(this,this.input)},n})(U_),W_=(function(t){je(n,t);function n(e,r){r===void 0&&(r=new dh);var a=t.call(this)||this;return a.input=e,a.options=r,a}return n})(oc),H_=(function(t){je(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return Ie(this,void 0,void 0,function(){var e,r,a,o;return Be(this,function(u){switch(u.label){case 0:return e=this,r=e.input,a=e.options,a instanceof N_?[4,Er.mtcnn.forward(r,a)]:[3,2];case 1:return[2,u.sent().map(function(l){return l.detection})];case 2:if(o=a instanceof I_?function(l){return Er.tinyFaceDetector.locateFaces(l,a)}:a instanceof dh?function(l){return Er.ssdMobilenetv1.locateFaces(l,a)}:a instanceof n0?function(l){return Er.tinyYolov2.locateFaces(l,a)}:null,!o)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,o(r)]}})})},n.prototype.runAndExtendWithFaceDetections=function(){var e=this;return new Promise(function(r){return Ie(e,void 0,void 0,function(){var a;return Be(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return a=o.sent(),[2,r(a.map(function(u){return zl({},u)}))]}})})})},n.prototype.withFaceLandmarks=function(e){return e===void 0&&(e=!1),new aH(this.runAndExtendWithFaceDetections(),this.input,e)},n.prototype.withFaceExpressions=function(){return new i0(this.runAndExtendWithFaceDetections(),this.input)},n.prototype.withAgeAndGender=function(){return new c0(this.runAndExtendWithFaceDetections(),this.input)},n})(W_);(function(t){je(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.run=function(){return Ie(this,void 0,void 0,function(){var e,r;return Be(this,function(a){switch(a.label){case 0:return[4,new H_(this.input,this.options)];case 1:return e=a.sent(),r=e[0],e.forEach(function(o){o.score>r.score&&(r=o)}),[2,r]}})})},n.prototype.runAndExtendWithFaceDetection=function(){var e=this;return new Promise(function(r){return Ie(e,void 0,void 0,function(){var a;return Be(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return a=o.sent(),[2,r(a?zl({},a):void 0)]}})})})},n.prototype.withFaceLandmarks=function(e){return e===void 0&&(e=!1),new oH(this.runAndExtendWithFaceDetection(),this.input,e)},n.prototype.withFaceExpressions=function(){return new s0(this.runAndExtendWithFaceDetection(),this.input)},n.prototype.withAgeAndGender=function(){return new f0(this.runAndExtendWithFaceDetection(),this.input)},n})(W_);function iH(t,n){return n===void 0&&(n=new dh),new H_(t,n)}function sH(t,n){if(t.length!==n.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var e=Array.from(t),r=Array.from(n);return Math.sqrt(e.map(function(a,o){return a-r[o]}).reduce(function(a,o){return a+Math.pow(o,2)},0))}(function(){function t(n,e){e===void 0&&(e=.6),this._distanceThreshold=e;var r=Array.isArray(n)?n:[n];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var a=1,o=function(){return"person "+a++};this._labeledDescriptors=r.map(function(u){if(u instanceof Pf)return u;if(u instanceof Float32Array)return new Pf(o(),[u]);if(u.descriptor&&u.descriptor instanceof Float32Array)return new Pf(o(),[u.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(t.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),t.prototype.computeMeanDistance=function(n,e){return e.map(function(r){return sH(r,n)}).reduce(function(r,a){return r+a},0)/(e.length||1)},t.prototype.matchDescriptor=function(n){var e=this;return this.labeledDescriptors.map(function(r){var a=r.descriptors,o=r.label;return new XS(o,e.computeMeanDistance(n,a))}).reduce(function(r,a){return r.distance<a.distance?r:a})},t.prototype.findBestMatch=function(n){var e=this.matchDescriptor(n);return e.distance<this.distanceThreshold?e:new XS("unknown",e.distance)},t.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(n){return n.toJSON()})}},t.fromJSON=function(n){var e=n.labeledDescriptors.map(function(r){return Pf.fromJSON(r)});return new t(e,n.distanceThreshold)},t})();function V_(t,n){var e=new Oi(n.width,n.height),r=e.width,a=e.height;if(r<=0||a<=0)throw new Error("resizeResults - invalid dimensions: "+JSON.stringify({width:r,height:a}));if(Array.isArray(t))return t.map(function(l){return V_(l,{width:r,height:a})});if(S_(t)){var o=t.detection.forSize(r,a),u=t.unshiftedLandmarks.forSize(o.box.width,o.box.height);return fh(zl(t,o),u)}return _d(t)?zl(t,t.detection.forSize(r,a)):t instanceof Ll||t instanceof Tr?t.forSize(r,a):t}const uH="/models";function lH(){const t=L.useRef(null),n=L.useRef(null),[e,r]=L.useState(null),[a,o]=L.useState(!1),[u,l]=L.useState(!1),c=h=>{const v=h.target.files[0];v&&(r(URL.createObjectURL(v)),o(!1),l(!1))},d=async()=>{if(!e)return alert("Upload an image first!");try{if(await Er.tinyFaceDetector.loadFromUri(uH),o(!0),console.log("Tiny Face Detector model loaded"),!n.current||!t.current)return;const h=n.current,v=t.current,m={width:h.width,height:h.height};UU(v,m);const g=await iH(h,new I_),b=V_(g,m);v.getContext("2d").clearRect(0,0,v.width,v.height),OU(v,b),l(!0)}catch(h){console.error("Detection error:",h)}};return le.jsxs("div",{className:"face-container",children:[le.jsx("h3",{children:"Face Detection"}),le.jsx("input",{type:"file",accept:"image/*",onChange:c}),e&&le.jsxs(le.Fragment,{children:[le.jsxs("div",{className:"image-box",children:[le.jsx("img",{ref:n,src:e,alt:"Uploaded",width:"720",height:"560"}),le.jsx("canvas",{ref:t,width:"720",height:"560"})]}),le.jsx("button",{className:"btn",onClick:d,children:"Detect Faces"})]})]})}p3.createRoot(document.getElementById("root")).render(le.jsx(L.StrictMode,{children:le.jsx(FD,{children:le.jsxs(dD,{children:[le.jsx(Hf,{path:"/",element:le.jsx(qD,{})}),le.jsx(Hf,{path:"/assignment_1",element:le.jsx(LB,{})}),le.jsx(Hf,{path:"/assignment_2",element:le.jsx(lH,{})})]})})}))});export default cH();
